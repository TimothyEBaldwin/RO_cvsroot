head	1.2;
access;
symbols
	DWCDriver-0_08:1.1
	DWCDriver-0_07:1.1
	DWCDriver-0_06:1.1
	DWCDriver-0_05:1.1
	DWCDriver-0_04:1.1
	DWCDriver-0_03:1.1
	DWCDriver-0_02:1.1
	DWCDriver-0_01:1.1;
locks; strict;
comment	@# @;


1.2
date	2012.09.17.16.33.05;	author jlee;	state dead;
branches;
next	1.1;
commitid	DXVFy2WJjyak3Ukw;

1.1
date	2012.06.03.15.13.13;	author jlee;	state Exp;
branches;
next	;
commitid	ZZ9X1FvMWAU11h7w;


desc
@@


1.2
log
@Update to version 3.00 of DWC_otg
Detail:
  This big batch of changes brings us in line with rev 70428950df of the Raspberry Pi Linux github.
  Briefly:
  * Deleted HTML docs as they're a waste of space
  * Dropped the SOF fix (which we never used anyway)
  * Dropped our implementation of the microframe scheduling patch, in favour of their implementation
  * Updated to version 3.00 of the DWC sources. Hard to tell what useful changes this brings, due to API tweaks resulting in pretty much every file being littered with changes.
Admin:
  Tested on Raspberry Pi with high processor vectors
  This new version seems like it might be a bit more sensitive to insufficient power supplies. Beware!


Version 0.09. Tagged as 'DWCDriver-0_09'
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_cfi_common.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dwc_cfi_common.h</h1><a href="dwc__cfi__common_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * Synopsys HS OTG Linux Software Driver and documentation (hereinafter,</span>
<a name="l00003"></a>00003 <span class="comment"> * "Software") is an Unsupported proprietary work of Synopsys, Inc. unless</span>
<a name="l00004"></a>00004 <span class="comment"> * otherwise expressly agreed to in writing between Synopsys and you.</span>
<a name="l00005"></a>00005 <span class="comment"> * </span>
<a name="l00006"></a>00006 <span class="comment"> * The Software IS NOT an item of Licensed Software or Licensed Product under</span>
<a name="l00007"></a>00007 <span class="comment"> * any End User Software License Agreement or Agreement for Licensed Product</span>
<a name="l00008"></a>00008 <span class="comment"> * with Synopsys or any supplement thereto. You are permitted to use and</span>
<a name="l00009"></a>00009 <span class="comment"> * redistribute this Software in source and binary forms, with or without</span>
<a name="l00010"></a>00010 <span class="comment"> * modification, provided that redistributions of source code must retain this</span>
<a name="l00011"></a>00011 <span class="comment"> * notice. You may not view, use, disclose, copy or distribute this file or</span>
<a name="l00012"></a>00012 <span class="comment"> * any information contained herein except pursuant to this license grant from</span>
<a name="l00013"></a>00013 <span class="comment"> * Synopsys. If you do not agree with this notice, including the disclaimer</span>
<a name="l00014"></a>00014 <span class="comment"> * below, then you are not authorized to use the Software.</span>
<a name="l00015"></a>00015 <span class="comment"> * </span>
<a name="l00016"></a>00016 <span class="comment"> * THIS SOFTWARE IS BEING DISTRIBUTED BY SYNOPSYS SOLELY ON AN "AS IS" BASIS</span>
<a name="l00017"></a>00017 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00018"></a>00018 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00019"></a>00019 <span class="comment"> * ARE HEREBY DISCLAIMED. IN NO EVENT SHALL SYNOPSYS BE LIABLE FOR ANY DIRECT,</span>
<a name="l00020"></a>00020 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00021"></a>00021 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<a name="l00022"></a>00022 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00023"></a>00023 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00024"></a>00024 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00025"></a>00025 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<a name="l00026"></a>00026 <span class="comment"> * DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> * ========================================================================== */</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#if !defined(__DWC_CFI_COMMON_H__)</span>
<a name="l00030"></a><a class="code" href="dwc__cfi__common_8h.html#50e76b6bdcb8e42b2b48aada9a1833e2">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define __DWC_CFI_COMMON_H__</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="comment">//#include &lt;linux/types.h&gt;</span>
<a name="l00033"></a>00033 
<a name="l00044"></a><a class="code" href="dwc__cfi__common_8h.html#b206fe3fb25aa96547a4bc0e47a864c6">00044</a> <span class="preprocessor">#define VEN_CORE_GET_FEATURES           0xB1</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="dwc__cfi__common_8h.html#22bf207e476d086391240b18aacc0314">00047</a> <span class="preprocessor">#define VEN_CORE_GET_FEATURE            0xB2</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="dwc__cfi__common_8h.html#ee7fb610a7fb2437df3425e2330e9d39">00050</a> <span class="preprocessor">#define VEN_CORE_SET_FEATURE            0xB3</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="dwc__cfi__common_8h.html#f7551c9e324871e8258dacc4f4467846">00055</a> <span class="preprocessor">#define VEN_CORE_RESET_FEATURES         0xB4</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00058"></a><a class="code" href="dwc__cfi__common_8h.html#1d1302d0d167f7c9580878fbfff847d4">00058</a> <span class="preprocessor">#define VEN_CORE_ACTIVATE_FEATURES      0xB5</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="dwc__cfi__common_8h.html#8d4bf92524d3e5fd4b4b060fc1269ec6">00061</a> <span class="preprocessor">#define VEN_CORE_READ_REGISTER          0xB6</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00064"></a><a class="code" href="dwc__cfi__common_8h.html#d132d545f74a408b62d44a34ba51426c">00064</a> <span class="preprocessor">#define VEN_CORE_WRITE_REGISTER         0xB7</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="structcfi__all__features__header.html">00069</a> <span class="keyword">struct </span><a class="code" href="structcfi__all__features__header.html">cfi_all_features_header</a> {
<a name="l00071"></a><a class="code" href="dwc__cfi__common_8h.html#b6c1d0a310ae1d0a89437b2cf92e57ba">00071</a> <span class="preprocessor">#define CFI_ALL_FEATURES_HDR_LEN                8</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00075"></a><a class="code" href="structcfi__all__features__header.html#3973fa190311671de5bbd74a7b825f42">00075</a>         uint16_t <a class="code" href="structcfi__all__features__header.html#3973fa190311671de5bbd74a7b825f42">wTotalLen</a>;
<a name="l00076"></a>00076 
<a name="l00082"></a><a class="code" href="structcfi__all__features__header.html#3542d584c0c68a73351c7d2530f25c6d">00082</a>         uint16_t <a class="code" href="structcfi__all__features__header.html#3542d584c0c68a73351c7d2530f25c6d">wVersion</a>;
<a name="l00083"></a>00083 
<a name="l00085"></a><a class="code" href="structcfi__all__features__header.html#f6840858aad78617369b7decba6ef5e3">00085</a>         uint16_t <a class="code" href="structcfi__all__features__header.html#f6840858aad78617369b7decba6ef5e3">wCoreID</a>;
<a name="l00086"></a><a class="code" href="dwc__cfi__common_8h.html#227fde38cd429d2ecaf3cd5bdd5d67d9">00086</a> <span class="preprocessor">#define CFI_CORE_ID_UDC         1</span>
<a name="l00087"></a><a class="code" href="dwc__cfi__common_8h.html#4b0c4a003085148bef609d81fa3c1589">00087</a> <span class="preprocessor"></span><span class="preprocessor">#define CFI_CORE_ID_OTG         2</span>
<a name="l00088"></a><a class="code" href="dwc__cfi__common_8h.html#b885f7a00a119d048803beaf41a5dc30">00088</a> <span class="preprocessor"></span><span class="preprocessor">#define CFI_CORE_ID_WUDEV       3</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00091"></a><a class="code" href="structcfi__all__features__header.html#e7abb90105e5cfd6ddfe8ba5dfaf8fa1">00091</a>         uint16_t <a class="code" href="structcfi__all__features__header.html#e7abb90105e5cfd6ddfe8ba5dfaf8fa1">wNumFeatures</a>;
<a name="l00092"></a>00092 } <a class="code" href="dwc__cfi__common_8h.html#ec5d43311fa60a5ef0519797208df057">UPACKED</a>;
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="dwc__cfi__common_8h.html#23298b60a6c427f08efe303c0bb332f8">00094</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcfi__all__features__header.html">cfi_all_features_header</a> <a class="code" href="dwc__cfi__common_8h.html#23298b60a6c427f08efe303c0bb332f8">cfi_all_features_header_t</a>;
<a name="l00095"></a>00095 
<a name="l00099"></a><a class="code" href="structcfi__feature__desc__header.html">00099</a> <span class="keyword">struct </span><a class="code" href="structcfi__feature__desc__header.html">cfi_feature_desc_header</a> {
<a name="l00100"></a><a class="code" href="dwc__cfi__common_8h.html#7ec5e43b7d52a39b553fdfa8fb17d889">00100</a> <span class="preprocessor">#define CFI_FEATURE_DESC_HDR_LEN        8</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00103"></a><a class="code" href="structcfi__feature__desc__header.html#f76e757383a5210368e599f872952170">00103</a>         uint16_t <a class="code" href="structcfi__feature__desc__header.html#f76e757383a5210368e599f872952170">wFeatureID</a>;
<a name="l00104"></a>00104 
<a name="l00108"></a><a class="code" href="structcfi__feature__desc__header.html#77769436c06687bdbe98c5e75e7641df">00108</a>         uint16_t <a class="code" href="structcfi__feature__desc__header.html#77769436c06687bdbe98c5e75e7641df">wLength</a>;
<a name="l00109"></a>00109 
<a name="l00111"></a><a class="code" href="structcfi__feature__desc__header.html#0f33193eaf5853b1d3454adce81105d4">00111</a>         uint16_t <a class="code" href="structcfi__feature__desc__header.html#0f33193eaf5853b1d3454adce81105d4">wDataLength</a>;
<a name="l00112"></a>00112 
<a name="l00119"></a><a class="code" href="structcfi__feature__desc__header.html#556f5723d7ed0a9c6a1260b1f2a3fd30">00119</a>         uint8_t <a class="code" href="structcfi__feature__desc__header.html#556f5723d7ed0a9c6a1260b1f2a3fd30">bmAttributes</a>;
<a name="l00120"></a><a class="code" href="dwc__cfi__common_8h.html#45ffc2183d956983ca297033f9e527af">00120</a> <span class="preprocessor">#define CFI_FEATURE_ATTR_RO             1</span>
<a name="l00121"></a><a class="code" href="dwc__cfi__common_8h.html#a4536fb9c1314c2f90a93cfcd082dbb9">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define CFI_FEATURE_ATTR_RW             0</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>
<a name="l00124"></a><a class="code" href="structcfi__feature__desc__header.html#4e90b7a616a2efc24937fc6d5cff1347">00124</a>         uint8_t <a class="code" href="structcfi__feature__desc__header.html#4e90b7a616a2efc24937fc6d5cff1347">bNameLen</a>;
<a name="l00125"></a>00125 
<a name="l00127"></a>00127         <span class="comment">//uint8_t *name;</span>
<a name="l00128"></a>00128 } <a class="code" href="dwc__cfi__common_8h.html#ec5d43311fa60a5ef0519797208df057">UPACKED</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="dwc__cfi__common_8h.html#04466a29673dc59d190905db0db48266">00130</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcfi__feature__desc__header.html">cfi_feature_desc_header</a> <a class="code" href="dwc__cfi__common_8h.html#04466a29673dc59d190905db0db48266">cfi_feature_desc_header_t</a>;
<a name="l00131"></a>00131 
<a name="l00136"></a><a class="code" href="structcfi__string.html">00136</a> <span class="keyword">struct </span><a class="code" href="structcfi__string.html">cfi_string</a> {
<a name="l00137"></a><a class="code" href="structcfi__string.html#dc88ed81d4ff35c7a1c837708659afea">00137</a>         uint16_t <a class="code" href="structcfi__string.html#dc88ed81d4ff35c7a1c837708659afea">id</a>;
<a name="l00138"></a><a class="code" href="structcfi__string.html#c852efd76029880787738fb474dd486e">00138</a>         <span class="keyword">const</span> uint8_t *<a class="code" href="structcfi__string.html#c852efd76029880787738fb474dd486e">s</a>;
<a name="l00139"></a>00139 };
<a name="l00140"></a><a class="code" href="dwc__cfi__common_8h.html#16bf31056d146243d486600ccbe8da85">00140</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcfi__string.html">cfi_string</a> <a class="code" href="dwc__cfi__common_8h.html#16bf31056d146243d486600ccbe8da85">cfi_string_t</a>;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 5 02:22:48 2009 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
@


1.1
log
@Add initial version of DWCDriver - USB driver for Synopsys DWC OTG controllers
Detail:
  A fairly simple wrapper for Synopsys's open source "DWC_otg" Linux driver, based around a GPL-free version of the DWC_otg 2.90a sources received from the Raspberry Pi foundation.
  Instead of interfacing with the Linux USB stack a new host interface layer has been implemented to allow it to talk to the standard BSD-derived RISC OS stack.
  RTSupport is used to provide the threading functionality that the DWC driver relies upon.
  Interesting files:
  - c/cmodule, h/cmodule - Main module frontend
  - c/dwc_common_riscos, h/dwc_common_riscos - Implementation of the OS support layer required by the DWC driver
  - c/dwc_otg_riscos, h/dwc_otg_riscos - Core code for the BSD driver implementation, driver init/shutdown, and for handling calls from the DWC host driver to us
  - c/port - Some support functions required by BSD-style code inherited from the other USB drivers
  - c/softc_device - Code to handle requests from the BSD layer to attached USB devices
  - c/softc_root - Code to handle requests from the BSD layer to the controller root hub
  - dwc/doc/* - Original Synopsys release notes & user guide pdfs
  - dwc/driver/*, dwc/dwc_common_port/* - Synopsys code and documentation. A few tweaks were required to allow it to compile under Norcroft, but otherwise it's functionally equivalent to the original sources.
Admin:
  Tested in BCM2835 ROM
  There are a few loose ends still to tidy up (search for "DWCTODO"), mainly regarding implementation of Isochronous support, but otherwise the driver seems stable enough for daily use.


Version 0.01. Tagged as 'DWCDriver-0_01'
@
text
@@

