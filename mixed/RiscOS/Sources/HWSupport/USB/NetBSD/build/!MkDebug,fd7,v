head	1.7;
access;
symbols
	NetBSD-1_19:1.7
	NetBSD-1_18:1.7
	NetBSD-1_17:1.7
	NetBSD-1_16:1.7
	NetBSD-1_15:1.7
	NetBSD-1_14:1.7
	NetBSD-1_13:1.7
	NetBSD-1_12:1.7
	NetBSD-1_09-1:1.7
	NetBSD-1_11:1.7
	NetBSD-1_10:1.7
	NetBSD-1_09:1.7
	NetBSD-1_08:1.7
	NetBSD-1_07:1.7
	NetBSD-1_06:1.7
	NetBSD-1_05:1.7
	NetBSD-1_04:1.7
	NetBSD-1_03:1.7
	NetBSD-1_02:1.7
	NetBSD-1_01:1.7
	NetBSD-1_00:1.7
	NetBSD-0_99:1.7
	NetBSD-0_98:1.7
	NetBSD-0_97:1.7
	NetBSD-0_96:1.7
	NetBSD-0_95:1.7
	NetBSD-0_94:1.7
	NetBSD-0_93:1.7
	NetBSD-0_92:1.7
	NetBSD-0_91:1.7
	NetBSD-0_90:1.7
	NetBSD-0_89:1.7
	NetBSD-0_88:1.7
	NetBSD-0_87:1.7
	NetBSD-0_86:1.7
	NetBSD-0_85:1.7
	NetBSD-0_84:1.7
	NetBSD-0_83:1.7
	NetBSD-0_82:1.7
	NetBSD-0_81:1.7
	NetBSD-0_80:1.7
	NetBSD-0_79:1.7
	NetBSD-0_78:1.7
	NetBSD-0_77:1.7
	NetBSD-0_76:1.7
	NetBSD-0_75:1.7
	NetBSD-0_74:1.7
	NetBSD-0_73:1.7
	NetBSD-0_72:1.7
	NetBSD-0_71:1.7
	NetBSD-0_70:1.6
	NetBSD-0_69:1.6
	NetBSD-0_68:1.6
	NetBSD-0_67:1.6
	NetBSD-0_66:1.6
	NetBSD-0_65:1.5
	NetBSD-0_64:1.5
	NetBSD-0_63:1.5
	NetBSD-0_62:1.5
	NetBSD-0_61:1.5
	NetBSD-0_60:1.5
	NetBSD-0_59:1.5
	NetBSD-0_58:1.5
	NetBSD-0_57:1.5
	NetBSD-0_56:1.5
	NetBSD-0_55:1.5
	NetBSD-0_54:1.5
	NetBSD-0_53:1.5
	NetBSD-0_52:1.5
	NetBSD-0_51:1.5
	NetBSD-0_50:1.5
	NetBSD-0_49:1.5
	NetBSD-0_48:1.5
	NetBSD-0_47:1.5
	NetBSD-0_46:1.5
	NetBSD-0_45:1.5
	NetBSD-0_44:1.5
	NetBSD-0_43:1.5
	NetBSD-0_42:1.5
	NetBSD-0_41:1.5
	NetBSD-0_40:1.5
	NetBSD-0_39:1.5
	NetBSD-0_38:1.5
	NetBSD-0_37:1.5
	NetBSD-0_36:1.5
	NetBSD-0_35:1.5
	NetBSD-0_34:1.5
	NetBSD-0_33:1.5
	NetBSD-0_32:1.5
	NetBSD-0_31:1.5
	NetBSD-0_30:1.5
	NetBSD-0_29:1.5
	RO_5_07:1.5
	NetBSD-0_28:1.5
	NetBSD-0_27:1.5
	NetBSD-0_26:1.5
	NetBSD-0_25:1.5
	NetBSD-0_24:1.4
	NetBSD-0_23:1.4
	NetBSD-0_21-1_22_2_1:1.3
	NetBSD-0_22:1.4
	USB1:1.3.0.2
	NetBSD-0_21:1.3
	NetBSD-0_20:1.2
	NetBSD-0_19:1.2
	NetBSD-0_18:1.2
	NetBSD-0_17:1.1
	NetBSD-0_16:1.1
	NetBSD-0_15:1.1
	NetBSD-0_14:1.1
	NetBSD-0_13:1.1
	NetBSD-0_12:1.1
	NetBSD-0_11:1.1
	NetBSD-0_10:1.1
	NetBSD-0_09:1.1
	NetBSD-0_08:1.1
	NetBSD-0_07:1.1
	NetBSD-0_06:1.1
	NetBSD-0_05:1.1
	NetBSD-0_04:1.1
	NetBSD-0_03:1.1
	NetBSD-0_02:1.1
	NetBSD-0_01:1.1;
locks; strict;
comment	@# @;


1.7
date	2012.06.07.00.11.01;	author jlee;	state Exp;
branches;
next	1.6;
commitid	LkYeKFZjKWlNTH7w;

1.6
date	2012.02.04.21.06.41;	author rsprowson;	state Exp;
branches;
next	1.5;
commitid	L0w6MFCZgiZGPSRv;

1.5
date	2004.05.06.15.50.21;	author bavison;	state Exp;
branches;
next	1.4;

1.4
date	2004.01.21.20.49.14;	author bavison;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.21.15.23.22;	author bavison;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.03.10.38.13;	author bavison;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.28.09.55.13;	author dellis;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Make RHENIUM build switch go away. Misc housekeeping
Detail:
  build/Makefile, build/!MkDebug,fd7 - Debug versions of the modules can now be built just by passing "DEBUG=TRUE" to amu
  build/!MkRhenium,fd7 - Deleted obsolete file
  build/Version - Increased version numbers
  build/c/ehcihal, build/c/ehcimodule, build/c/ohcimodule - Only accept USB controllers if HAL_USBControllerInfo says the struct size is an exact match with what we expect. Rework USB controller enumeration to allow modules to properly support both PCI and HAL controllers being available on the same machine, and without RHENIUM switch (module sources only).
  build/c/ehcimodule - Get rid of remaining RHENIUM bits; RHENIUM flag no longer needed for 32bit wide register reads/writes to be supported
  build/c/ohcimodule, build/cmhg/ohcimodhead, dev/usb/c/ohci - Get rid of remaining RHENIUM bits; RHENIUM flag no longer needed for HAL port power controls to be supported.
  build/c/usbhal, build/c/usbmodule, dev/usb/c/uhub, dev/usb/h/usb_port - Get rid of empty riscos_failed_device function
  build/s/call_veneer, build/s/triggercbs - Use Entry/EXIT macros to avoid single-reg LDM/STM performance warnings. Convert tabs to spaces.
  dev/usb/h/usb - Get rid of RHENIUM switch on USB_PORT_RESET_DELAY. Now always uses non-RHENIUM value of 100ms.
Admin:
  Tested on rev A2 BB-xM, Iyonix, Raspberry Pi


Version 0.71. Tagged as 'NetBSD-0_71'
@
text
@| Copyright 2003 Tematic Ltd
|
| Licensed under the Apache License, Version 2.0 (the "License");
| you may not use this file except in compliance with the License.
| You may obtain a copy of the License at
|
|     http://www.apache.org/licenses/LICENSE-2.0
|
| Unless required by applicable law or agreed to in writing, software
| distributed under the License is distributed on an "AS IS" BASIS,
| WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
| See the License for the specific language governing permissions and
| limitations under the License.
|
dir <obey$dir>
amu_machine debug gpa_debug COMPONENT=USBDriver  DEBUG=TRUE CDEFINES="-DSTANDALONE" THROWBACK=-throwback
amu_machine debug gpa_debug COMPONENT=OHCIDriver DEBUG=TRUE CDEFINES="-DSTANDALONE" THROWBACK=-throwback
amu_machine debug gpa_debug COMPONENT=EHCIDriver DEBUG=TRUE CDEFINES="-DSTANDALONE" THROWBACK=-throwback
@


1.6
log
@Change to use CModule shared makefile.
Remove some of the proliferation of !Mk[stuff] files due to lack of
relevance.
Combined the OBJ[target] listings into the main makefile with a switch.
Remove a spurious # from the EHCIMessages.

Version 0.66. Tagged as 'NetBSD-0_66'
@
text
@d16 3
a18 3
amu_machine debug gpa_debug COMPONENT=USBDriver  CDEFINES="-DDEBUGLIB -DUSB_DEBUG  -DSTANDALONE" CMHGDEFINES="-DUSB_DEBUG"  THROWBACK=-throwback
amu_machine debug gpa_debug COMPONENT=OHCIDriver CDEFINES="-DDEBUGLIB -DOHCI_DEBUG -DSTANDALONE" CMHGDEFINES="-DOHCI_DEBUG" THROWBACK=-throwback
amu_machine debug gpa_debug COMPONENT=EHCIDriver CDEFINES="-DDEBUGLIB -DEHCI_DEBUG -DSTANDALONE" CMHGDEFINES="-DEHCI_DEBUG" THROWBACK=-throwback
@


1.5
log
@  New versions from John.
Detail:
  * All modules will now rmkill/rmload more reliably
  * Keyboard driver disables kernel debounce on new enough kernels, needed
    for many PS2-USB adaptors, bar code scanners etc
  * Mouse driver will scroll wheel scroll any windows that do respond to
    scroll events, otherwise it issues PointerReason_WheelChange (9) to an
    external WimpScroll module
  * Several bugs and an interrupt hole resolved
Admin:
  Tested at Framlingham.

Version 0.25. Tagged as 'NetBSD-0_25'
@
text
@d16 3
a18 9
echo starting build
|amu_machine all rom debug COMPONENT=USBDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
|amu_machine all rom debug COMPONENT=OHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
|amu_machine all rom debug COMPONENT=EHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DEHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
amu_machine all rom debug COMPONENT=USBDriver CDEBUG="-DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
amu_machine all rom debug COMPONENT=OHCIDriver CDEBUG="-DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
amu_machine all rom debug COMPONENT=EHCIDriver CDEBUG="-DDEBUGLIB -DUSB_DEBUG -DEHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
|amu_machine -f MakeHUB all
|amu_machine -f MakeHID all
@


1.4
log
@Merge of Dan Ellis's USB2 sources.

Version 0.22. Tagged as 'NetBSD-0_22'
@
text
@d17 6
a22 3
amu_machine all rom debug COMPONENT=USBDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
amu_machine all rom debug COMPONENT=OHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
amu_machine all rom debug COMPONENT=EHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DEHCI_DEBUG" CFLAGS="-g -DSTANDALONE" THROWBACK=-throwback
@


1.3
log
@  Changes to work with TCPIPLibs 5.47.
Detail:
  NetBSD/FreeBSD differences in the naming of certain macros are now resolved
  in TCPIPLibs instead of locally. Also some reordering in the !Mk files in
  order to work with current versions of Zap.
Admin:
  Builds against TCPIPLibs 5.47. Note that this version of the USB sources
  also now requires TCPIPLibs 5.47.

Version 0.21. Tagged as 'NetBSD-0_21'
@
text
@d17 3
a19 3
amu_machine all rom debug COMPONENT=OHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-DSTANDALONE -g"
|amu_machine -f MakeEHCID all debug
amu_machine all rom debug COMPONENT=USBDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS="-DSTANDALONE -g"
@


1.2
log
@USB transfer failed reason strings in the messages files were incorrectly
being tokenised. Also added a couple of bits of debug.

Version 0.18. Tagged as 'NetBSD-0_18'
@
text
@d15 1
a16 1
dir <obey$dir>
@


1.1
log
@Import of USB driver suitable for generic PCI based OHCI controllers.
Correction of spelling of busses to buses (noun plural).
OHCIdriver only responds to PCI service call to lookup vendor name when
the device is of class OHCI controller.

Version 0.01. Tagged as 'NetBSD-0_01'
@
text
@d17 1
a17 1
amu_machine all rom debug COMPONENT=OHCIDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS=-g
d19 1
a19 1
amu_machine all rom debug COMPONENT=USBDriver CDEBUG="-DDIAGNOSTIC -DDEBUGLIB -DUSB_DEBUG -DOHCI_DEBUG" CFLAGS=-g
@

