head	1.41;
access;
symbols
	OMAPVideo-0_41:1.41
	OMAPVideo-0_40:1.40
	OMAPVideo-0_39:1.39
	OMAPVideo-0_38:1.38
	OMAPVideo-0_37:1.37
	OMAPVideo-0_36:1.36
	OMAPVideo-0_35:1.35
	OMAPVideo-0_34:1.34
	OMAPVideo-0_33:1.33
	OMAPVideo-0_32:1.32
	OMAPVideo-0_31:1.31
	OMAPVideo-0_30:1.30
	OMAPVideo-0_29:1.29
	OMAPVideo-0_28:1.28
	OMAPVideo-0_27:1.27
	OMAPVideo-0_26:1.26
	OMAPVideo-0_25:1.25
	OMAPVideo-0_24:1.24
	OMAPVideo-0_23:1.23
	OMAPVideo-0_22:1.22
	OMAPVideo-0_21:1.21
	OMAPVideo-0_20:1.20
	OMAPVideo-0_19:1.19
	OMAPVideo-0_18:1.18
	OMAPVideo-0_17:1.17
	OMAPVideo-0_16:1.16
	OMAPVideo-0_15:1.15
	OMAPVideo-0_14:1.14
	OMAPVideo-0_13:1.13
	OMAPVideo-0_12:1.12
	OMAPVideo-0_11:1.11
	OMAPVideo-0_10:1.10
	OMAPVideo-0_09:1.9
	OMAPVideo-0_08:1.8
	OMAPVideo-0_07:1.7
	OMAPVideo-0_06:1.6
	OMAPVideo-0_05:1.5
	OMAPVideo-0_04:1.4
	OMAPVideo-0_03:1.3
	OMAPVideo-0_02:1.2
	OMAPVideo-0_01:1.1;
locks; strict;
comment	@# @;


1.41
date	2018.05.31.21.48.50;	author jlee;	state Exp;
branches;
next	1.40;
commitid	qHkabDo5zjgySuEA;

1.40
date	2017.11.25.07.29.23;	author rool;	state Exp;
branches;
next	1.39;
commitid	38lXhSagii9o8ogA;

1.39
date	2015.08.14.22.12.29;	author jlee;	state Exp;
branches;
next	1.38;
commitid	rcLw9SUqzfPpPhxy;

1.38
date	2015.08.03.07.16.42;	author rsprowson;	state Exp;
branches;
next	1.37;
commitid	Dd9P3YOmhGH1eNvy;

1.37
date	2015.06.14.13.52.01;	author jlee;	state Exp;
branches;
next	1.36;
commitid	I7TOmn2EUkLh1ppy;

1.36
date	2015.05.31.18.21.25;	author jlee;	state Exp;
branches;
next	1.35;
commitid	G8GT764JNtMBXCny;

1.35
date	2015.05.31.17.43.33;	author jlee;	state Exp;
branches;
next	1.34;
commitid	vMWraheejEtCKCny;

1.34
date	2015.05.17.17.50.01;	author jlee;	state Exp;
branches;
next	1.33;
commitid	J3i0xRSaySaJePly;

1.33
date	2014.08.04.19.32.26;	author jlee;	state Exp;
branches;
next	1.32;
commitid	mfVppAOwZpwQZ4Lx;

1.32
date	2014.07.20.14.00.50;	author jlee;	state Exp;
branches;
next	1.31;
commitid	x12yfJrE5UjZD7Jx;

1.31
date	2014.05.27.21.18.55;	author jlee;	state Exp;
branches;
next	1.30;
commitid	0xSjIUTNBETSNdCx;

1.30
date	2014.01.19.20.49.52;	author jlee;	state Exp;
branches;
next	1.29;
commitid	oXQLBLOQ0Vh1LLlx;

1.29
date	2013.12.17.23.44.54;	author jlee;	state Exp;
branches;
next	1.28;
commitid	QW2ELjKp66EPMxhx;

1.28
date	2013.12.15.22.56.03;	author jlee;	state Exp;
branches;
next	1.27;
commitid	4M7nRqPE9VC3Ahhx;

1.27
date	2013.11.18.21.59.36;	author rsprowson;	state Exp;
branches;
next	1.26;
commitid	5zJ1bSSJJkXu8Odx;

1.26
date	2012.11.07.23.37.03;	author jlee;	state Exp;
branches;
next	1.25;
commitid	54wvlBauRftgLurw;

1.25
date	2012.11.02.01.03.32;	author jlee;	state Exp;
branches;
next	1.24;
commitid	bQ04jdR4lSgTqJqw;

1.24
date	2012.07.18.22.57.42;	author jlee;	state Exp;
branches;
next	1.23;
commitid	2fZkhRJPBFVX86dw;

1.23
date	2012.06.09.19.39.58;	author jlee;	state Exp;
branches;
next	1.22;
commitid	UoigCKwU4VEQi48w;

1.22
date	2012.06.04.23.54.18;	author jlee;	state Exp;
branches;
next	1.21;
commitid	FoeSemiFbzb4Sr7w;

1.21
date	2012.05.06.09.25.25;	author rsprowson;	state Exp;
branches;
next	1.20;
commitid	ZjNste9SF5CMZD3w;

1.20
date	2012.05.06.09.20.39;	author rsprowson;	state Exp;
branches;
next	1.19;
commitid	Dmkx2IqcO2G8YD3w;

1.19
date	2012.05.06.09.16.38;	author rsprowson;	state Exp;
branches;
next	1.18;
commitid	imAmvVvRmuLKWD3w;

1.18
date	2012.04.24.20.12.54;	author jlee;	state Exp;
branches;
next	1.17;
commitid	qD7TvahpwBYOX92w;

1.17
date	2012.02.04.10.24.37;	author rsprowson;	state Exp;
branches;
next	1.16;
commitid	DQUzYjplHjjrhPRv;

1.16
date	2012.01.15.08.26.35;	author rsprowson;	state Exp;
branches;
next	1.15;
commitid	1qzpEvf72ehOgfPv;

1.15
date	2012.01.14.18.32.39;	author srevill;	state Exp;
branches;
next	1.14;
commitid	Q2Oqv6MxeAPHEaPv;

1.14
date	2011.12.12.17.54.43;	author srevill;	state Exp;
branches;
next	1.13;
commitid	ND8nPkovFhmsvVKv;

1.13
date	2011.10.23.21.01.44;	author jlee;	state Exp;
branches;
next	1.12;
commitid	0rwNv0ztfd3f9wEv;

1.12
date	2011.07.11.22.07.31;	author jlee;	state Exp;
branches;
next	1.11;
commitid	aeC42JvE4N46R9rv;

1.11
date	2011.03.19.18.19.42;	author jlee;	state Exp;
branches;
next	1.10;
commitid	kv85AixjkSL8gucv;

1.10
date	2011.02.19.22.30.00;	author jlee;	state Exp;
branches;
next	1.9;

1.9
date	2011.02.08.10.41.32;	author srevill;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.31.20.17.50;	author jlee;	state Exp;
branches;
next	1.7;

1.7
date	2010.09.14.21.12.53;	author jlee;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.28.21.14.18;	author jlee;	state Exp;
branches;
next	1.5;

1.5
date	2010.05.29.17.53.02;	author jlee;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.20.20.05.42;	author jlee;	state Exp;
branches;
next	1.3;

1.3
date	2010.04.22.20.42.56;	author jlee;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.23.00.39.15;	author jlee;	state Exp;
branches;
next	1.1;

1.1
date	2010.02.28.19.01.11;	author jlee;	state Exp;
branches;
next	;


desc
@@


1.41
log
@Big refactor, introduce GraphicsV overlay API support
Detail:
  This change introduces initial support for the GraphicsV overlay API.
  RGB & YUV overlays are supported, along with rotation and scaling.
  Vertical flipping isn't supported yet, and there are still a number of bugs to track down, along with some potential improvements.
  The code has also been refactored significantly, in an attempt to protect all critical state with spinlocks/mutexes (as appropriate), and to reduce the number of globals so that it's easier to see what's touching what. Previously very little locking was performed, which could lead to issues if VSyncs or synclost interrupts occurred during certain operations. Now, the data should be structured in such a way that this shouldn't cause problems.
  Notable things:
  * State which needs to be writable from interrupt handlers is protected by spinlocks
  * State which needs to be readable from interrupt handlers is protected by reader-writer spinlocks
  * State which doesn't need to be accessed from interrupt handlers is unprotected (mutexes can be introduced in the future to make the code SMP-safe)
  * Using non-alpha screen modes for the desktop will currently result in only "basic" overlays being supported (i.e. overlays which appear ontop of the desktop). In some cases this could be improved by falling back to a software pointer, but for now the only way to get Z-Order overlays is to use a screen mode with an alpha channel.
  * Memory allocation for overlays is abstracted via the buffer interface (h/buffer). This has three implementations: basic buffers for untransformed overlays, VRFB-transformed buffers for OMAP3, and TILER-transformed buffers for OMAP4.
  * Ultimately all overlay memory is allocated as physically contiguous pages within a PMP - although since TILER contains its own MMU this isn't strictly necessary on OMAP4
  * Overlay memory is mapped as write-through cacheable for CPU access; experimentation with different cache policies has yet to be performed. However a potential future optimisation would be to perform lazy unmapping of overlay buffers, reducing the map/unmap overhead in well-behaved code which only maps buffers when they're needed
Admin:
  Tested on BB-xM, Pandaboard


Version 0.41. Tagged as 'OMAPVideo-0_41'
@
text
@/* (0.41)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.41
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                31 May 2018

#define Module_MajorVersion             "0.41"
#define Module_Version                  41
#define Module_MinorVersion             ""
#define Module_Date                     "31 May 2018"

#define Module_ApplicationDate          "31-May-18"

#define Module_ComponentName            "OMAPVideo"
#define Module_ComponentPath            "bsd/RiscOS/Sources/Video/HWSupport/OMAPVideo"

#define Module_FullVersion              "0.41"
#define Module_HelpVersion              "0.41 (31 May 2018)"
#define Module_LibraryVersionInfo       "0:41"
@


1.40
log
@Minor OMAP4 driver updates
Detail:
  Disable G16M modes so that EDID preferred mode can work.
  Correction to AND mask in omap4_vid_disable.
Admin:
  Submission from Willi Theiss.

Version 0.40. Tagged as 'OMAPVideo-0_40'
@
text
@d1 1
a1 1
/* (0.40)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.40
d9 1
a9 1
#define Module_Date_CMHG                25 Nov 2017
d11 2
a12 2
#define Module_MajorVersion             "0.40"
#define Module_Version                  40
d14 1
a14 1
#define Module_Date                     "25 Nov 2017"
d16 1
a16 1
#define Module_ApplicationDate          "25-Nov-17"
d21 3
a23 3
#define Module_FullVersion              "0.40"
#define Module_HelpVersion              "0.40 (25 Nov 2017)"
#define Module_LibraryVersionInfo       "0:40"
@


1.39
log
@Add memory barriers to GraphicsV acceleration
Detail:
  c/sdma - Use a read/write barrier at the start and end of any DMA op, to ensure things are ready for switching screen memory to Normal, non-cacheable
  c/cmodule, h/globals - Get the DMB_ReadWrite ARMop ptr on startup
Admin:
  Tested on BB-xM, PandaBoard


Version 0.39. Tagged as 'OMAPVideo-0_39'
@
text
@d1 1
a1 1
/* (0.39)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.39
d9 1
a9 1
#define Module_Date_CMHG                14 Aug 2015
d11 2
a12 2
#define Module_MajorVersion             "0.39"
#define Module_Version                  39
d14 1
a14 1
#define Module_Date                     "14 Aug 2015"
d16 1
a16 1
#define Module_ApplicationDate          "14-Aug-15"
d21 3
a23 3
#define Module_FullVersion              "0.39"
#define Module_HelpVersion              "0.39 (14 Aug 2015)"
#define Module_LibraryVersionInfo       "0:39"
@


1.38
log
@Build fix
Don't set RES_OBJ to an empty string.

Version 0.38. Tagged as 'OMAPVideo-0_38'
@
text
@d1 1
a1 1
/* (0.38)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.38
d9 1
a9 1
#define Module_Date_CMHG                03 Aug 2015
d11 2
a12 2
#define Module_MajorVersion             "0.38"
#define Module_Version                  38
d14 1
a14 1
#define Module_Date                     "03 Aug 2015"
d16 1
a16 1
#define Module_ApplicationDate          "03-Aug-15"
d21 3
a23 3
#define Module_FullVersion              "0.38"
#define Module_HelpVersion              "0.38 (03 Aug 2015)"
#define Module_LibraryVersionInfo       "0:38"
@


1.37
log
@Misc tweaks
Detail:
  c/cmodule, c/sdma, h/regs, h/sdma, omap3/c/omap, omap4/c/omap - Move *SDMARegs handling from c/cmodule to c/sdma. Define DUMPREG in h/regs instead of in each individual file that uses it.
  omap3/c/dispc_plat, omap4/c/dispc_plat - Fix setting of GO bits in dispc_flush_transparency_cfg()
  omap4/c/dss - Update comment
  omap4/c/omap - Use designated initialisers for omapformats array to ensure it stays in sync with enum ordering. Strip dead code.
Admin:
  Changes supplied by Willi Theiss
  Tested on BB-xM


Version 0.37. Tagged as 'OMAPVideo-0_37'
@
text
@d1 1
a1 1
/* (0.37)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.37
d9 1
a9 1
#define Module_Date_CMHG                14 Jun 2015
d11 2
a12 2
#define Module_MajorVersion             "0.37"
#define Module_Version                  37
d14 1
a14 1
#define Module_Date                     "14 Jun 2015"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jun-15"
d21 3
a23 3
#define Module_FullVersion              "0.37"
#define Module_HelpVersion              "0.37 (14 Jun 2015)"
#define Module_LibraryVersionInfo       "0:37"
@


1.36
log
@Add chip-specific functions for *VideoRegs and *TVRegs. Change some OMAP3 register names.
Detail:
  c/cmodule, h/globals, omap3/c/omap, omap4/c/omap - Get rid of all the ugly #if's in *VideoRegs handling by moving video & TV register dump logic into chip-specific functions (omap_dump_videoregs, omap_dump_tvregs).
  h/regs3, omap3/c/dispc_plat, omap3/c/dss, omap3/c/omap, omap3/c/venc - Remove '1' from DISPC control & config register names, was only present for OMAP4 compatibility.
  omap4/c/dsi - Fix debug compile error due to DSI PLL regmf removal
Admin:
  OMAP3/OMAP4 debug/ROM versions all build correctly
  Untested at runtime


Version 0.36. Tagged as 'OMAPVideo-0_36'
@
text
@d1 1
a1 1
/* (0.36)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.36
d9 1
a9 1
#define Module_Date_CMHG                31 May 2015
d11 2
a12 2
#define Module_MajorVersion             "0.36"
#define Module_Version                  36
d14 1
a14 1
#define Module_Date                     "31 May 2015"
d16 1
a16 1
#define Module_ApplicationDate          "31-May-15"
d21 3
a23 3
#define Module_FullVersion              "0.36"
#define Module_HelpVersion              "0.36 (31 May 2015)"
#define Module_LibraryVersionInfo       "0:36"
@


1.35
log
@OMAP4 tweaks and fixes
Detail:
  c/cmodule - Debug code updated to use new register names
  h/dss - Remove regmf field from clock_divider_t
  h/regs3 - Correct typo in OVERLAY_ATTRIBUTES register field
  h/regs4 - Rename many registers to match the name used in the OMAP4 TRM (previously used OMAP3 naming due to shared code being used for both chips). Fix the occasional mistake. Also removed configuration4 register from DSI PLL (not mentioned in recent TRMs)
  omap4/c/dispc_plat - Updated for new register names
  omap4/c/dsi - Remove setting of DSI PLL configuration4 register
  omap4/c/dss - Update for new register names. Removal of regm4 from clock_divider_t. Update FIFO configuration so that the larger WB FIFO is used instead of the GFX one.
  omap4/c/omap - Update for new register names and FIFO setup. Fix omap4_vetmode_ldc2() returning true for invalid widths instead of false.
Admin:
  Changes supplied by Willi Theiss
  Tested on Pandaboard


Version 0.35. Tagged as 'OMAPVideo-0_35'
@
text
@d1 1
a1 1
/* (0.35)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.35
d11 2
a12 2
#define Module_MajorVersion             "0.35"
#define Module_Version                  35
d21 3
a23 3
#define Module_FullVersion              "0.35"
#define Module_HelpVersion              "0.35 (31 May 2015)"
#define Module_LibraryVersionInfo       "0:35"
@


1.34
log
@Big code refactor
Detail:
  Support for different OMAP revisions has now been abstracted, with code specific to a certain OMAP revision now located in the omap3 and omap4 folders. This has resulted in some code duplication, but greater readability due to the removal of the #defines that were in use before. This new structure should also make it easier to implement new features, especially those only supported by certain OMAPs.
  Each platform provides a headattrs struct and an overlayattrs struct, which are the primary interface the core code uses to control the backend. Eventually it may be possible to produce one build of the module which supports multiple OMAP revisions at runtime, but for now some #defines and OMAP-specific code remains in the common files.
  This change also adds support for extra pixel formats, gamma table support for OMAP4, and fixes several bugs.
Admin:
  Tested on BeagleBoard, PandaBoard


Version 0.34. Tagged as 'OMAPVideo-0_34'
@
text
@d1 1
a1 1
/* (0.34)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.34
d9 1
a9 1
#define Module_Date_CMHG                17 May 2015
d11 2
a12 2
#define Module_MajorVersion             "0.34"
#define Module_Version                  34
d14 1
a14 1
#define Module_Date                     "17 May 2015"
d16 1
a16 1
#define Module_ApplicationDate          "17-May-15"
d21 3
a23 3
#define Module_FullVersion              "0.34"
#define Module_HelpVersion              "0.34 (17 May 2015)"
#define Module_LibraryVersionInfo       "0:34"
@


1.33
log
@Add GraphicsV_ReadInfo implementation
Detail:
  c/graphicsv - Added GraphicsV_ReadInfo implementation
Admin:
  Tested on BB-xM


Version 0.33. Tagged as 'OMAPVideo-0_33'
@
text
@d1 1
a1 1
/* (0.33)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.33
d9 1
a9 1
#define Module_Date_CMHG                04 Aug 2014
d11 2
a12 2
#define Module_MajorVersion             "0.33"
#define Module_Version                  33
d14 1
a14 1
#define Module_Date                     "04 Aug 2014"
d16 1
a16 1
#define Module_ApplicationDate          "04-Aug-14"
d21 3
a23 3
#define Module_FullVersion              "0.33"
#define Module_HelpVersion              "0.33 (04 Aug 2014)"
#define Module_LibraryVersionInfo       "0:33"
@


1.32
log
@Handle interlace control list item. TV-out fixes.
Detail:
  c/graphicsv - Handle the interlace control list item; interlace must be disabled for DVI output but can be specified for TV output (although we only use it to determine the overlay dimensions). Remove dummy GraphicsV_SetInterlace implementation. Fix GraphicsV_Features to return correct pixel formats for TV-out. Make GraphicsV_IICOp do nothing for TV-out.
Admin:
  Tested on BB-xM


Version 0.32. Tagged as 'OMAPVideo-0_32'
@
text
@d1 1
a1 1
/* (0.32)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.32
d9 1
a9 1
#define Module_Date_CMHG                20 Jul 2014
d11 2
a12 2
#define Module_MajorVersion             "0.32"
#define Module_Version                  32
d14 1
a14 1
#define Module_Date                     "20 Jul 2014"
d16 1
a16 1
#define Module_ApplicationDate          "20-Jul-14"
d21 3
a23 3
#define Module_FullVersion              "0.32"
#define Module_HelpVersion              "0.32 (20 Jul 2014)"
#define Module_LibraryVersionInfo       "0:32"
@


1.31
log
@Enforce a minimum pixel rate limit of 15MHz for the DVI output
Detail:
  c/graphicsv - do_vetmode() now rejects DVI modes which require a pixel rate lower than 15MHz. This appears to be the limit at which the TFP410 starts to fail.
Admin:
  Tested on BB-xM


Version 0.31. Tagged as 'OMAPVideo-0_31'
@
text
@d1 1
a1 1
/* (0.31)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.31
d9 1
a9 1
#define Module_Date_CMHG                27 May 2014
d11 2
a12 2
#define Module_MajorVersion             "0.31"
#define Module_Version                  31
d14 1
a14 1
#define Module_Date                     "27 May 2014"
d16 1
a16 1
#define Module_ApplicationDate          "27-May-14"
d21 3
a23 3
#define Module_FullVersion              "0.31"
#define Module_HelpVersion              "0.31 (27 May 2014)"
#define Module_LibraryVersionInfo       "0:31"
@


1.30
log
@Fix GraphicsV_IICOp not updating R0 on exit
Detail:
  c/graphicsv - Updated the call to HAL_VideoIICOp so that the returned R0 value is now correctly passed on to the caller of GraphicsV_IICOp
Admin:
  Tested on BB-xM
  Should fix issue reported on forums with GraphicsV_IICOp misbehaving on PandaBoard:
  https://www.riscosopen.org/forum/forums/4/topics/2358


Version 0.30. Tagged as 'OMAPVideo-0_30'
@
text
@d1 1
a1 1
/* (0.30)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.30
d9 1
a9 1
#define Module_Date_CMHG                19 Jan 2014
d11 2
a12 2
#define Module_MajorVersion             "0.30"
#define Module_Version                  30
d14 1
a14 1
#define Module_Date                     "19 Jan 2014"
d16 1
a16 1
#define Module_ApplicationDate          "19-Jan-14"
d21 3
a23 3
#define Module_FullVersion              "0.30"
#define Module_HelpVersion              "0.30 (19 Jan 2014)"
#define Module_LibraryVersionInfo       "0:30"
@


1.29
log
@Add support for controlling TV-out power
Detail:
  h/globals - Add new tvpower_func entry to board config struct to allow for board-specific TV-out power controls
  c/venc - Enable/disable TV-out power when enabling/disabling TV-out
Admin:
  Tested on Pandora and BB-xM


Version 0.29. Tagged as 'OMAPVideo-0_29'
@
text
@d1 1
a1 1
/* (0.29)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.29
d9 1
a9 1
#define Module_Date_CMHG                17 Dec 2013
d11 2
a12 2
#define Module_MajorVersion             "0.29"
#define Module_Version                  29
d14 1
a14 1
#define Module_Date                     "17 Dec 2013"
d16 1
a16 1
#define Module_ApplicationDate          "17-Dec-13"
d21 3
a23 3
#define Module_FullVersion              "0.29"
#define Module_HelpVersion              "0.29 (17 Dec 2013)"
#define Module_LibraryVersionInfo       "0:29"
@


1.28
log
@Update for new GraphicsV registration process. Remove VIDC20 16bpp gamma demangle code. Advertise red/blue swapped 16bpp & 32bpp modes when using TV-out.
Detail:
  c/cmodule - Updated to use new GraphicsV registration process and OS_Hardware reason code #defines
  c/dispc, c/venc, h/graphicsv, h/venc - Use Hdr:VIDCList instead of local VIDC list definition
  c/graphicsv - Implement GraphicsV_PixelFormats, and return an appropriate list based on whether TV-out is in use. Call through to the HAL for GraphicsV_IICOp instead of relying on the OS to call the HAL for us.
  c/palette - Remove VIDC20 16bpp gamma demangle code, the OS now supplies the data in a sensible format. Dont use mouse palette function intended for 555 mode emulation if CPR isn't in use (i.e. we're on TV-out, i.e. gamma won't be available either)
Admin:
  Tested in OMAP3 ROM on BB-xM
  OMAP4 version builds but is unstested
  Requires HdrSrc-2_38 and Kernel-5_35-4_79_2_203


Version 0.28. Tagged as 'OMAPVideo-0_28'
@
text
@d1 1
a1 1
/* (0.28)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.28
d9 1
a9 1
#define Module_Date_CMHG                15 Dec 2013
d11 2
a12 2
#define Module_MajorVersion             "0.28"
#define Module_Version                  28
d14 1
a14 1
#define Module_Date                     "15 Dec 2013"
d16 1
a16 1
#define Module_ApplicationDate          "15-Dec-13"
d21 3
a23 3
#define Module_FullVersion              "0.28"
#define Module_HelpVersion              "0.28 (15 Dec 2013)"
#define Module_LibraryVersionInfo       "0:28"
@


1.27
log
@Internationalised
The failure to activate error message is a little tenuous, but distinct and non zero.
Built, but not tested.

Version 0.27. Tagged as 'OMAPVideo-0_27'
@
text
@d1 1
a1 1
/* (0.27)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.27
d9 1
a9 1
#define Module_Date_CMHG                18 Nov 2013
d11 2
a12 2
#define Module_MajorVersion             "0.27"
#define Module_Version                  27
d14 1
a14 1
#define Module_Date                     "18 Nov 2013"
d16 1
a16 1
#define Module_ApplicationDate          "18-Nov-13"
d21 3
a23 3
#define Module_FullVersion              "0.27"
#define Module_HelpVersion              "0.27 (18 Nov 2013)"
#define Module_LibraryVersionInfo       "0:27"
@


1.26
log
@Mode vetting fixes and improvements
Detail:
  c/graphicsv - Fix do_vetmode() incorrectly failing most modes due to wrong pixel rate being passed to calculate_dss_clock_divider(). Fix LCD vet rules being used when TV-out is in use. Add extra rule to check for minimum H/V timings.
Admin:
  Tested on BB-xM
  Numbered modes now work properly when selected (assuming suitable entries exists in MDF)


Version 0.26. Tagged as 'OMAPVideo-0_26'
@
text
@d1 1
a1 1
/* (0.26)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.26
d9 1
a9 1
#define Module_Date_CMHG                07 Nov 2012
d11 2
a12 2
#define Module_MajorVersion             "0.26"
#define Module_Version                  26
d14 1
a14 1
#define Module_Date                     "07 Nov 2012"
d16 1
a16 1
#define Module_ApplicationDate          "07-Nov-12"
d21 3
a23 3
#define Module_FullVersion              "0.26"
#define Module_HelpVersion              "0.26 (07 Nov 2012)"
#define Module_LibraryVersionInfo       "0:26"
@


1.25
log
@Fix wrong mouse colours in 16bpp modes
Detail:
  c/palette - Improved handling of mouse palette so that it's aware of the special gamma table used on OMAP3 to convert RISC OS's 555 pixel format to OMAP's 565. Also fixed the 555 code to fill in all the relevant gamma table entries instead of just the ones that desktop pixels will hit.
Admin:
  Tested on BB-xM
  Fixes issue reported on forums with black mouse pointer:
  https://www.riscosopen.org/forum/forums/4/topics/1170


Version 0.25. Tagged as 'OMAPVideo-0_25'
@
text
@d1 1
a1 1
/* (0.25)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.25
d9 1
a9 1
#define Module_Date_CMHG                02 Nov 2012
d11 2
a12 2
#define Module_MajorVersion             "0.25"
#define Module_Version                  25
d14 1
a14 1
#define Module_Date                     "02 Nov 2012"
d16 1
a16 1
#define Module_ApplicationDate          "02-Nov-12"
d21 3
a23 3
#define Module_FullVersion              "0.25"
#define Module_HelpVersion              "0.25 (02 Nov 2012)"
#define Module_LibraryVersionInfo       "0:25"
@


1.24
log
@Add support for TV detection and automatic TV mode selection on OMAP3. Make boardconfig_t struct extensible.
Detail:
  c/cmodule - If TV support is enabled (i.e. OMAP3 build), and the boardconfig_t indicates that TV-out is supported, the module will now use the TV detection feature to check if a TV is connected on startup. If a TV is found then a suitable TV mode will be chosen from the configured territory, and the TV output will be set as the main display.
  h/globals - Modified boardconfig_t to make the structure extensible - two padding bytes are now used to store the size of the struct as reported by the HAL device. Added new entry to boardconfig_t for the TV detection function.
Admin:
  Tested on BB-xM with high processor vectors


Version 0.24. Tagged as 'OMAPVideo-0_24'
@
text
@d1 1
a1 1
/* (0.24)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.24
d9 1
a9 1
#define Module_Date_CMHG                18 Jul 2012
d11 2
a12 2
#define Module_MajorVersion             "0.24"
#define Module_Version                  24
d14 1
a14 1
#define Module_Date                     "18 Jul 2012"
d16 1
a16 1
#define Module_ApplicationDate          "18-Jul-12"
d21 3
a23 3
#define Module_FullVersion              "0.24"
#define Module_HelpVersion              "0.24 (18 Jul 2012)"
#define Module_LibraryVersionInfo       "0:24"
@


1.23
log
@Improve TV-Out support. Fix pointer transparency after DSS reset. Other tweaks.
Detail:
  c/venc - Fixed corruption when PAL output was in use and the display reached the bottom two rows of the screen; the screen height was being calculated incorrectly from the VENC register settings. This was also causing the constant SYNCLOSTDIGITAL interrupts.
  c/dss - Mark the mouse pointer image as dirty inside dss_reset(), to ensure the transparency colour gets set to hardware the next time the pointer is updated
  Makefile, cmhg/modhead - Make module help string reflect which OMAP version the module is for
  c/venc, h/regs3 - Added revision ID registers to OMAP3 register blocks, to reduce the number of differences between the OMAP3 & OMAP4 versions. The revision ID registers do exist on OMAP3, they just weren't listed in the early TRM version the module was first created from. Also fixed layout of DSI registers on OMAP3.
Admin:
  OMAP3 version tested on rev A2 BB-xM
  OMAP4 version builds but untested


Version 0.23. Tagged as 'OMAPVideo-0_23'
@
text
@d1 1
a1 1
/* (0.23)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.23
d9 1
a9 1
#define Module_Date_CMHG                09 Jun 2012
d11 2
a12 2
#define Module_MajorVersion             "0.23"
#define Module_Version                  23
d14 1
a14 1
#define Module_Date                     "09 Jun 2012"
d16 1
a16 1
#define Module_ApplicationDate          "09-Jun-12"
d21 3
a23 3
#define Module_FullVersion              "0.23"
#define Module_HelpVersion              "0.23 (09 Jun 2012)"
#define Module_LibraryVersionInfo       "0:23"
@


1.22
log
@Improve TV-out support
Detail:
  c/cmodule, c/dispc, c/graphicsv, c/venc, h/venc - Updated TV-out code to center the desktop within the display, while also taking into account the border/porch timings in order to allow vertical shifting using *TV.
Admin:
  Tested on rev A2 BB-xM


Version 0.22. Tagged as 'OMAPVideo-0_22'
@
text
@d1 1
a1 1
/* (0.22)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.22
d9 1
a9 1
#define Module_Date_CMHG                05 Jun 2012
d11 2
a12 2
#define Module_MajorVersion             "0.22"
#define Module_Version                  22
d14 1
a14 1
#define Module_Date                     "05 Jun 2012"
d16 1
a16 1
#define Module_ApplicationDate          "05-Jun-12"
d21 3
a23 3
#define Module_FullVersion              "0.22"
#define Module_HelpVersion              "0.22 (05 Jun 2012)"
#define Module_LibraryVersionInfo       "0:22"
@


1.21
log
@Some pointers initialised to NULL rather than 0.
Compiles, not tested.

Version 0.21. Tagged as 'OMAPVideo-0_21'
@
text
@d1 1
a1 1
/* (0.21)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.21
d9 1
a9 1
#define Module_Date_CMHG                06 May 2012
d11 2
a12 2
#define Module_MajorVersion             "0.21"
#define Module_Version                  21
d14 1
a14 1
#define Module_Date                     "06 May 2012"
d16 1
a16 1
#define Module_ApplicationDate          "06-May-12"
d21 3
a23 3
#define Module_FullVersion              "0.21"
#define Module_HelpVersion              "0.21 (06 May 2012)"
#define Module_LibraryVersionInfo       "0:21"
@


1.20
log
@Merge of OMAP3 and OMAP4 video driver sources.
With 85%+ shared code, tracking changes between these two modules was getting complicated, so now this single module will serve both OMAP3 targets and OMAP4.
At present, the differences are simply selected at compile time with a switch. This may make sense to further rationalise either with tidier macros or run time detection (since the HAL knows which controller is running).
Tested on OMAP3 in all 8 colour depths,
Tested by Willi Theiss on OMAP4.

Version 0.20. Tagged as 'OMAPVideo-0_20'
@
text
@d1 1
a1 1
/* (0.20)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.20
d11 2
a12 2
#define Module_MajorVersion             "0.20"
#define Module_Version                  20
d21 3
a23 3
#define Module_FullVersion              "0.20"
#define Module_HelpVersion              "0.20 (06 May 2012)"
#define Module_LibraryVersionInfo       "0:20"
@


1.19
log
@Merge of headers with OMAP4Video
For the most part, this is just adding "_t" suffixes to all the typedefs.
The OMAP4 controller registers are in "regs4.h" and OMAP3 in "regs3.h", they are selected between with a compile time switch - hence !MkROM becomes !Ms !MkRom3 and !MkRom4.
OMAP3 version tested & still works, OMAP4 will not work.

Version 0.19. Tagged as 'OMAPVideo-0_19'
@
text
@d1 1
a1 1
/* (0.19)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.19
d11 2
a12 2
#define Module_MajorVersion             "0.19"
#define Module_Version                  19
d21 3
a23 3
#define Module_FullVersion              "0.19"
#define Module_HelpVersion              "0.19 (06 May 2012)"
#define Module_LibraryVersionInfo       "0:19"
@


1.18
log
@Activate display on module startup
Detail:
  c/cmodule - Issue a dummy mode change on module startup in order to activate the screen earlier on in the ROM boot sequence. Should make it clearer that the machine hasn't crashed, and increase the chances of users spotting any fatal ROM initialisation errors.
Admin:
  Tested on rev A2 BB-xM


Version 0.18. Tagged as 'OMAPVideo-0_18'
@
text
@d1 1
a1 1
/* (0.18)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.18
d9 1
a9 1
#define Module_Date_CMHG                24 Apr 2012
d11 2
a12 2
#define Module_MajorVersion             "0.18"
#define Module_Version                  18
d14 1
a14 1
#define Module_Date                     "24 Apr 2012"
d16 1
a16 1
#define Module_ApplicationDate          "24-Apr-12"
d21 3
a23 3
#define Module_FullVersion              "0.18"
#define Module_HelpVersion              "0.18 (24 Apr 2012)"
#define Module_LibraryVersionInfo       "0:18"
@


1.17
log
@Makefile changed to not fault absence of resources.

Version 0.17. Tagged as 'OMAPVideo-0_17'
@
text
@d1 1
a1 1
/* (0.17)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.17
d9 1
a9 1
#define Module_Date_CMHG                04 Feb 2012
d11 2
a12 2
#define Module_MajorVersion             "0.17"
#define Module_Version                  17
d14 1
a14 1
#define Module_Date                     "04 Feb 2012"
d16 1
a16 1
#define Module_ApplicationDate          "04-Feb-12"
d21 3
a23 3
#define Module_FullVersion              "0.17"
#define Module_HelpVersion              "0.17 (04 Feb 2012)"
#define Module_LibraryVersionInfo       "0:17"
@


1.16
log
@When disabling CLNK only clear the enable bit rather than the whole register.

Version 0.16. Tagged as 'OMAPVideo-0_16'
@
text
@d1 1
a1 1
/* (0.16)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.16
d9 1
a9 1
#define Module_Date_CMHG                15 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.16"
#define Module_Version                  16
d14 1
a14 1
#define Module_Date                     "15 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "15-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.16"
#define Module_HelpVersion              "0.16 (15 Jan 2012)"
#define Module_LibraryVersionInfo       "0:16"
@


1.15
log
@Makefile fixes.

Version 0.15. Tagged as 'OMAPVideo-0_15'
@
text
@d1 1
a1 1
/* (0.15)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.15
d9 1
a9 1
#define Module_Date_CMHG                14 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.15"
#define Module_Version                  15
d14 1
a14 1
#define Module_Date                     "14 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.15"
#define Module_HelpVersion              "0.15 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:15"
@


1.14
log
@Fixed the Makefile.

Attempted a non-existent export in the resources phase.

Version 0.14. Tagged as 'OMAPVideo-0_14'
@
text
@d1 1
a1 1
/* (0.14)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.14
d9 1
a9 1
#define Module_Date_CMHG                12 Dec 2011
d11 2
a12 2
#define Module_MajorVersion             "0.14"
#define Module_Version                  14
d14 1
a14 1
#define Module_Date                     "12 Dec 2011"
d16 1
a16 1
#define Module_ApplicationDate          "12-Dec-11"
d21 3
a23 3
#define Module_FullVersion              "0.14"
#define Module_HelpVersion              "0.14 (12 Dec 2011)"
#define Module_LibraryVersionInfo       "0:14"
@


1.13
log
@Fix black screen on boot issue. Use C99 number types.
Detail:
  c/dss - Fixed the cause of the black screens on boot on OMAP3 machines (DM37xx seems fine). It looks like the cause was due to skipping the step where you disable the LCD output before triggering the DSS reset.
  c/cmodule, c/dispc, c/dss, c/graphicsv, h/globals - Removed code relating to previous attempts to fix the black screen issue
  c/cmodule, c/dispc, c/dsi, c/dss, c/graphicsv, c/palette, c/regs, c/sdma, c/venc, h/dsi, h/dss, h/globals, h/graphicsv, h/palette, h/regs - Use the C99 number types instead of u32, u16, etc.
Admin:
  Tested on rev C2 BB, rev A2 BB-xM


Version 0.13. Tagged as 'OMAPVideo-0_13'
@
text
@d1 1
a1 1
/* (0.13)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.13
d9 1
a9 1
#define Module_Date_CMHG                23 Oct 2011
d11 2
a12 2
#define Module_MajorVersion             "0.13"
#define Module_Version                  13
d14 1
a14 1
#define Module_Date                     "23 Oct 2011"
d16 1
a16 1
#define Module_ApplicationDate          "23-Oct-11"
d21 3
a23 3
#define Module_FullVersion              "0.13"
#define Module_HelpVersion              "0.13 (23 Oct 2011)"
#define Module_LibraryVersionInfo       "0:13"
@


1.12
log
@Fix GraphicsV_Render operations being performed on wrong screen bank
Detail:
  c/cmodule, c/graphicsv, c/sdma, h/globals - Fixed GraphicsV_Render code to perform render ops to the VDU screen bank instead of the display bank.
  Also disabled the slow left-to-right DMA copy code, since the kernels' assembler loop is many times faster.
Admin:
  Tested on rev A2 BB-xM. Fixes issue reported on forums:
  http://www.riscosopen.org/forum/forums/4/topics/691


Version 0.12. Tagged as 'OMAPVideo-0_12'
@
text
@d1 1
a1 1
/* (0.12)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.12
d9 1
a9 1
#define Module_Date_CMHG                11 Jul 2011
d11 2
a12 2
#define Module_MajorVersion             "0.12"
#define Module_Version                  12
d14 1
a14 1
#define Module_Date                     "11 Jul 2011"
d16 1
a16 1
#define Module_ApplicationDate          "11-Jul-11"
d21 3
a23 3
#define Module_FullVersion              "0.12"
#define Module_HelpVersion              "0.12 (11 Jul 2011)"
#define Module_LibraryVersionInfo       "0:12"
@


1.11
log
@Fix GraphicsV_SetBlank. Improve SetBlank to turn off the overlays. Trim dead code.
Detail:
  c/cmodule, c/dispc, c/graphicsv, h/globals - Fixed do_setblank to set DISPC_CONTROL_GOLCD, to ensure the relevant clocks have their states updated. Added 'blanked' flag to allow the graphics overlays to be disabled entirely whenever the screen should be blanked.
  c/dispc - Trim some dead code related to trying to fix the IGEP display issues.
Admin:
  Tested on rev C2 BB, A2 BB-xM, C1 TouchBook.
  Fixes bug #263 - http://www.riscosopen.org/tracker/tickets/263


Version 0.11. Tagged as 'OMAPVideo-0_11'
@
text
@d1 1
a1 1
/* (0.11)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.11
d9 1
a9 1
#define Module_Date_CMHG                19 Mar 2011
d11 2
a12 2
#define Module_MajorVersion             "0.11"
#define Module_Version                  11
d14 1
a14 1
#define Module_Date                     "19 Mar 2011"
d16 1
a16 1
#define Module_ApplicationDate          "19-Mar-11"
d21 3
a23 3
#define Module_FullVersion              "0.11"
#define Module_HelpVersion              "0.11 (19 Mar 2011)"
#define Module_LibraryVersionInfo       "0:11"
@


1.10
log
@Make GraphicsV_IICOp work
Detail:
  c/graphicsv - The GraphicsV_IICOp handler now just passes on the call, so that the kernel will call HAL_Video_IICOp instead.
Admin:
  Tested on rev A2 BB-xM


Version 0.10. Tagged as 'OMAPVideo-0_10'
@
text
@d1 1
a1 1
/* (0.10)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.10
d9 1
a9 1
#define Module_Date_CMHG                19 Feb 2011
d11 2
a12 2
#define Module_MajorVersion             "0.10"
#define Module_Version                  10
d14 1
a14 1
#define Module_Date                     "19 Feb 2011"
d16 1
a16 1
#define Module_ApplicationDate          "19-Feb-11"
d21 3
a23 3
#define Module_FullVersion              "0.10"
#define Module_HelpVersion              "0.10 (19 Feb 2011)"
#define Module_LibraryVersionInfo       "0:10"
@


1.9
log
@Makefile tweak to fix export_hdrs phase.

This component doesn't have any exported headers so this change will stop
build errors during the header export phase.

Version 0.09. Tagged as 'OMAPVideo-0_09'
@
text
@d1 1
a1 1
/* (0.09)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.09
d9 1
a9 1
#define Module_Date_CMHG                08 Feb 2011
d11 2
a12 2
#define Module_MajorVersion             "0.09"
#define Module_Version                  9
d14 1
a14 1
#define Module_Date                     "08 Feb 2011"
d16 1
a16 1
#define Module_ApplicationDate          "08-Feb-11"
d21 3
a23 3
#define Module_FullVersion              "0.09"
#define Module_HelpVersion              "0.09 (08 Feb 2011)"
#define Module_LibraryVersionInfo       "0:9"
@


1.8
log
@Improve OMAPVideo power saving abilities and palette handling
Detail:
  Makefile, c/palette, h/palette, c/cmodule, c/dispc, c/graphicsv, h/globals - Rewrote palette handling code to support multiple different transformations on palettes, to adapt the palettes from the RISC OS formats to the DISPC formats. This means that palettes and the mouse cursor are now correctly R/B swapped for TV-out, RISC OS's gamma correction tables are now supported, and clever use of gamma tables allows 16bpp modes to be displayed correctly by mapping RISC OS's 555 format to the OMAP's 565 format (but there'll only be 4 blue bits instead of 5)
  c/cmodule, c/dispc, c/graphicsv, h/globals - Add support for the HAL's new display power controls, and implement GraphicsV_SetBlank. For fixed LCDs this will ignore the requested DPMS state and instead just turn the power/backlight off.
  h/sdma - Marked the functions as extern.
Admin:
  Tested on rev C2 beagleboard, rev C1 touchbook.
  Requires OMAP3 HAL 0.34.


Version 0.08. Tagged as 'OMAPVideo-0_08'
@
text
@d1 1
a1 1
/* (0.08)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.08
d9 1
a9 1
#define Module_Date_CMHG                31 Oct 2010
d11 2
a12 2
#define Module_MajorVersion             "0.08"
#define Module_Version                  8
d14 1
a14 1
#define Module_Date                     "31 Oct 2010"
d16 1
a16 1
#define Module_ApplicationDate          "31-Oct-10"
d21 3
a23 3
#define Module_FullVersion              "0.08"
#define Module_HelpVersion              "0.08 (31 Oct 2010)"
#define Module_LibraryVersionInfo       "0:8"
@


1.7
log
@OMAPVideo fixes & tweaks
Detail:
  Makefile - now rewritten to use CModule fragment instead of obsolete RAMCModule/ROMCModule fragments
  c/cmodule - Make *videoregs print out a couple more regs
  c/dsi - Fix debug output when DSI requests time out. Fix HSDIVIDER not working on AM/DM37x.
  c/graphicsv - When setting the mode from a VIDC list, add the border values to the porch values to take into account the hardware's inability to emulate VIDC's coloured border facility. Behaviour matches that of NVidia module.
  h/regs - Add definitions for SMS registers (for display rotation)
Admin:
  Tested on rev C2 beagleboard, rev A2 BB-xM (indirectly), rev C1 TouchBook


Version 0.07. Tagged as 'OMAPVideo-0_07'
@
text
@d1 1
a1 1
/* (0.07)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.07
d9 1
a9 1
#define Module_Date_CMHG                14 Sep 2010
d11 2
a12 2
#define Module_MajorVersion             "0.07"
#define Module_Version                  7
d14 1
a14 1
#define Module_Date                     "14 Sep 2010"
d16 1
a16 1
#define Module_ApplicationDate          "14-Sep-10"
d21 3
a23 3
#define Module_FullVersion              "0.07"
#define Module_HelpVersion              "0.07 (14 Sep 2010)"
#define Module_LibraryVersionInfo       "0:7"
@


1.6
log
@Add #include needed to fix compile error when debugging is disabled

Version 0.06. Tagged as 'OMAPVideo-0_06'
@
text
@d1 1
a1 1
/* (0.06)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.06
d9 1
a9 1
#define Module_Date_CMHG                28 Jun 2010
d11 2
a12 2
#define Module_MajorVersion             "0.06"
#define Module_Version                  6
d14 1
a14 1
#define Module_Date                     "28 Jun 2010"
d16 1
a16 1
#define Module_ApplicationDate          "28-Jun-10"
d21 3
a23 3
#define Module_FullVersion              "0.06"
#define Module_HelpVersion              "0.06 (28 Jun 2010)"
#define Module_LibraryVersionInfo       "0:6"
@


1.5
log
@Fix OMAPVideo build error
Detail:
  c/graphicsv - somehow I managed to miss the fact that my previous change to this file was resulting in compile errors!
Admin:
  Tested on rev C2 beagleboard.


Version 0.05. Tagged as 'OMAPVideo-0_05'
@
text
@d1 1
a1 1
/* (0.05)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.05
d9 1
a9 1
#define Module_Date_CMHG                29 May 2010
d11 2
a12 2
#define Module_MajorVersion             "0.05"
#define Module_Version                  5
d14 1
a14 1
#define Module_Date                     "29 May 2010"
d16 1
a16 1
#define Module_ApplicationDate          "29-May-10"
d21 3
a23 3
#define Module_FullVersion              "0.05"
#define Module_HelpVersion              "0.05 (29 May 2010)"
#define Module_LibraryVersionInfo       "0:5"
@


1.4
log
@Fix corrupt pointer overlay when pointer is fully off the left or top of the screen
Detail:
  c/dispc - Mixed signed & unsigned compares were causing the dispc_update_*_overlay functions to malfunction when the overlay was fully off the top or left of the screen.
  Also replaced some s16's with s32's to reduce code size a teensy bit.
Admin:
  Tested on rev C2 beagleboard.


Version 0.04. Tagged as 'OMAPVideo-0_04'
@
text
@d1 1
a1 1
/* (0.04)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.04
d9 1
a9 1
#define Module_Date_CMHG                20 May 2010
d11 2
a12 2
#define Module_MajorVersion             "0.04"
#define Module_Version                  4
d14 1
a14 1
#define Module_Date                     "20 May 2010"
d16 1
a16 1
#define Module_ApplicationDate          "20-May-10"
d21 3
a23 3
#define Module_FullVersion              "0.04"
#define Module_HelpVersion              "0.04 (20 May 2010)"
#define Module_LibraryVersionInfo       "0:4"
@


1.3
log
@Assorted OMAPVideo tweaks and fixes
Detail:
  c/dispc - Added some WIP code for programming scaling coefficients
  c/dispc, c/graphicsv - Fixed code to not allow the graphics overlay to be enabled before its DMA address had been set (as was happening on boot)
  c/dispc - Enable reporting of FIFO underflow & OCPERROR interrupts in debug builds, to help track down bugs
  c/dispc - Check in some disabled code that was an attempt to fix the IGEP display problems. Code was to force FIFO preload values to 0x100, and to force DISPC_POL_FREQ to 0.
  c/dsi - Keep the DSI complex I/O clock off
  c/dsi, c/dss, h/dss, h/regs - rewrote calculate_dss_clock_divider to remove data lane frequency restriction, and to increase speed/accuracy when calculating rates for tricky values like 25.175MHz. Also in another attempt to fix the IGEP issues, it mimics the Linux driver by trying to generate a 48MHz DSI clock.
  c/dss, c/venc - Tweaked DSS reset & VENC code to make sure VENC clcoks are enabled & disabled at the appropriate times.
  c/graphicsv - Fix GraphicsV_SetDMAAddress so it works properly no matter what overlay the desktop is on
  c/venc - A fix to get the PAL test card working, and a fudge to get PAL output working.
Admin:
  Tested on rev C2 beagleboard & IGEP.
  IGEP reported as showing no concrete improvement in display stability :(


Version 0.03. Tagged as 'OMAPVideo-0_03'
@
text
@d1 1
a1 1
/* (0.03)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.03
d9 1
a9 1
#define Module_Date_CMHG                22 Apr 2010
d11 2
a12 2
#define Module_MajorVersion             "0.03"
#define Module_Version                  3
d14 1
a14 1
#define Module_Date                     "22 Apr 2010"
d16 1
a16 1
#define Module_ApplicationDate          "22-Apr-10"
d21 3
a23 3
#define Module_FullVersion              "0.03"
#define Module_HelpVersion              "0.03 (22 Apr 2010)"
#define Module_LibraryVersionInfo       "0:3"
@


1.2
log
@Fix makefile to allow debug builds of OMAPVideo, and change default DebugLib output device to HAL_OUTPUT
Detail:
  Makefile - fixed a couple of mistakes that prevented debug builds of the module from being compiled
  c/cmodule - changed default debug output device to HAL_OUTPUT to avoid PRINTF_OUTPUT interfering with the screen and potentially breaking stuff
Admin:
  Tested in OMAP ROM on rev C2 beagleboard


Version 0.02. Tagged as 'OMAPVideo-0_02'
@
text
@d1 1
a1 1
/* (0.02)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.02
d9 1
a9 1
#define Module_Date_CMHG                23 Mar 2010
d11 2
a12 2
#define Module_MajorVersion             "0.02"
#define Module_Version                  2
d14 1
a14 1
#define Module_Date                     "23 Mar 2010"
d16 1
a16 1
#define Module_ApplicationDate          "23-Mar-10"
d21 3
a23 3
#define Module_FullVersion              "0.02"
#define Module_HelpVersion              "0.02 (23 Mar 2010)"
#define Module_LibraryVersionInfo       "0:2"
@


1.1
log
@Add initial version of OMAP video driver module
Detail:
  All-new OMAP video driver, written as a module in C.
  Functionality-wise it's basically the same as the original HAL-based driver, except it provides support for GraphicsV_Render via use of the OMAP SDMA controller, and there's currently no support for GraphicsV_IICOp.
  However under the hood the module is significantly different, to ensure it can be expanded to expose the full feature set of the video controller once the new GraphicsV API is ready.
Admin:
  Tested on rev C2 beagleboard.


Version 0.01. Tagged as 'OMAPVideo-0_01'
@
text
@d1 1
a1 1
/* (0.01)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.01
d9 1
a9 1
#define Module_Date_CMHG                28 Feb 2010
d11 2
a12 2
#define Module_MajorVersion             "0.01"
#define Module_Version                  1
d14 1
a14 1
#define Module_Date                     "28 Feb 2010"
d16 1
a16 1
#define Module_ApplicationDate          "28-Feb-10"
d21 3
a23 3
#define Module_FullVersion              "0.01"
#define Module_HelpVersion              "0.01 (28 Feb 2010)"
#define Module_LibraryVersionInfo       "0:1"
@

