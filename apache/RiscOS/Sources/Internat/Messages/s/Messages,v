head	4.9;
access;
symbols
	Messages-1_12:4.9
	Messages-1_11:4.9
	Messages-1_10:4.8
	Messages-1_09:4.8
	Messages-1_08:4.8
	Messages-1_07:4.8
	RO_5_07:4.7
	Messages-1_06:4.7
	Messages-1_05-4_25_2_3:4.7
	Messages-1_05-4_25_2_2:4.7
	Messages-1_05-4_25_2_1:4.7
	sbrodie_dev:4.7.0.2
	sbrodie_dev_bp:4.7
	Messages-1_05:4.7
	Messages-1_04:4.7
	Messages-1_03:4.7
	Messages-1_02:4.7
	Messages-1_01:4.7
	Messages-1_00:4.7
	Messages-0_99:4.7
	dellis_autobuild_BaseSW:4.7
	Messages-0_98:4.7
	Messages-0_97:4.7
	Messages-0_96:4.7
	Messages-0_95:4.7
	Messages-0_94:4.7
	dcotton_Messages_13062000:4.7
	dcotton_Messages_10062000:4.7
	Messages-0_93:4.6
	Messages-0_92:4.6
	Messages-0_91:4.5
	sbrodie_sedwards_16Mar2000:4.4
	dcotton_autobuild_BaseSW:4.7
	Messages-0_90:4.4
	Ursula_merge:4.1.4.1
	nturton_Messages-0_84:4.1
	Messages-0_89:4.3
	Messages-0_88:4.3
	Messages-0_87:4.3
	Messages-0_86:4.2
	Messages-0_85:4.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.1
	Ursula_RiscPC:4.1.4.1.0.2
	nicke_Messages-0_79:4.1.7.1
	rthornb_UrsulaBuild-19Aug1998:4.1.4.1
	UrsulaBuild_FinalSoftload:4.1.4.1
	rthornb_UrsulaBuild-12Aug1998:4.1.4.1
	aglover_UrsulaBuild-05Aug1998:4.1.4.1
	rthornb_UrsulaBuild-29Jul1998:4.1.4.1
	rthornb_UrsulaBuild-22Jul1998:4.1.4.1
	rthornb_UrsulaBuild-15Jul1998:4.1.4.1
	rthornb_UrsulaBuild-07Jul1998:4.1.4.1
	rthornb_UrsulaBuild-17Jun1998:4.1.4.1
	rthornb_UrsulaBuild-03Jun1998:4.1.4.1
	rthornb_UrsulaBuild-27May1998:4.1.4.1
	rthornb_Messages-0_85:4.1.4.1
	rthornb_UrsulaBuild-21May1998:4.1.4.1
	rthornb_UrsulaBuild_01May1998:4.1.4.1
	afrost_Funai01-33:4.1.7.1
	afrost_NC2_Generic:4.1.7.1
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.1
	ARTtmp:4.1.7.1.0.2
	RCA:4.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.9
date	2014.09.01.22.21.12;	author rsprowson;	state Exp;
branches;
next	4.8;
commitid	EkteMavdrKzy1HOx;

4.8
date	2009.06.11.21.23.52;	author bavison;	state Exp;
branches;
next	4.7;

4.7
date	2000.06.07.16.53.31;	author kbracey;	state Exp;
branches;
next	4.6;

4.6
date	2000.05.09.09.06.52;	author sforrest;	state Exp;
branches;
next	4.5;

4.5
date	2000.04.28.13.13.20;	author kbracey;	state Exp;
branches;
next	4.4;

4.4
date	99.08.04.18.19.21;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	99.04.30.15.24.27;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	99.04.29.15.45.27;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.40.04;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.40.04;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.01.50.19;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	98.04.24.11.19.46;	author rthornb;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.45.01;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.59.41;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.9
log
@Build fix
Pass the location of <resdata> in as a predefine, otherwise we end up with a dependency on <resdata> that the makefile undefines one line later, which upsets AMU.
Retagged as Messages-1_11.
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; > Sources.Messages

        GET     Common.s

GetResourceAddress
        ADR     r0, Messages
        MOV     pc, lr

      [ debug
        InsertNDRDebugRoutines
      ]

Messages
        BIN     $ResData
        ALIGN

        END
@


4.8
log
@  GET file pathnames changed
Detail:
  Uses suffixed file extensions for compatiblity with both objasm and asasm.
Admin:
  Supplied by Peter Naulls, tested at ROOL

Version 1.06. Not tagged
@
text
@d28 1
a28 1
        BIN     <resdata>
@


4.7
log
@Changes to Messages module code to support message selection by territory.
Build work for this not done yet, but ScanRes modified to output new form
of data block.

Untested.

Version 0.93. Not tagged
@
text
@d17 1
a17 1
        GET     s.Common
@


4.6
log
@
  * Failed to build on Lazarus.  Module header corrected.

Detail:

  * Line 44 of both "s.Messages" and "s.MessagesHI" was missing
    "- Module_BaseAddr", meaning that the offset was incorrect.
    This is now fixed.

Admin:

  * Untested at time of check-in; to be tested in Lazarus development
    build.

Version 0.92. Tagged as 'Messages-0_92'
@
text
@d17 1
a17 1
Module_BaseAddr
d19 1
a19 54
        GET     Hdr:ListOpts
        GET     Hdr:Macros
        GET     Hdr:System
        GET     Hdr:ModHand
        GET     Hdr:Services
        GET     Hdr:Proc
        GET     Hdr:ResourceFS
        GET     VersionASM

        GET     Hdr:NDRDebug

        GBLL    debug
        GBLL    debugxx
        GBLL    hostvdu

debug   SETL    false
debugxx SETL    false
hostvdu SETL    false


        LEADR   Module_LoadAddr


; **************** Module code starts here **********************

        ASSERT  (.-Module_BaseAddr) = 0

        DCD     0 ; Messages_Start    - Module_BaseAddr
        DCD     Messages_Init     - Module_BaseAddr
        DCD     Messages_Die      - Module_BaseAddr
        DCD     Messages_Service  - Module_BaseAddr
        DCD     Messages_Title    - Module_BaseAddr
        DCD     Messages_HelpStr  - Module_BaseAddr
        DCD     0
        DCD     0
        DCD     0
        DCD     0
        DCD     0
        DCD     0
        DCD     Messages_Flags    - Module_BaseAddr

Messages_Title          DCB     "Messages", 0
Messages_HelpStr        DCB     "UK Messages", 9, "$Module_MajorVersion ($Module_Date)", 0
                        ALIGN

Messages_Flags          DCD     ModuleFlag_32bit

; *****************************************************************************
;
;       Messages_Init - Initialisation entry
;

Messages_Init
        ENTRY
d21 1
a21 56
        SWI     XResourceFS_RegisterFiles
        EXIT


; *****************************************************************************
;
;       Messages_Die - Die entry
;

Messages_Die
        ENTRY
        ADR     r0, Messages
        SWI     XResourceFS_DeregisterFiles
        ADDS    r0, r0, #0              ; clear V
        EXIT

; *****************************************************************************
;
;       Messages_Service - Main entry point for services
;
; in:   r1 = service reason code
;       r2 = sub reason code
;       r3-r5 parameters
;
; out:  r1 = 0 if we claimed it
;       r2 preserved
;       r3-r5 = ???
;

; Ursula format

UServiceTable
        DCD     0
        DCD     UService - Module_BaseAddr
        DCD     Service_ResourceFSStarting
        DCD     0
        DCD     UServiceTable - Module_BaseAddr
Messages_Service ROUT
        MOV     r0, r0
        TEQ     r1, #Service_ResourceFSStarting
        MOVNE   pc, lr

UService

; In    r2 -> address inside ResourceFS module to call
;       r3 = workspace pointer for module
; Out   r2 called with r0 -> files, r3 -> workspace

svc_desktopstarting
        ENTRY "r0-r5"
        ADR     r0, Messages
        MOV     lr, pc                          ; get return address
        MOV     pc, r2                          ; r2 = address to call
        EXIT

; *****************************************************************************
@


4.5
log
@32-bit compatible.

Version 0.91. Tagged as 'Messages-0_91'
@
text
@d58 1
a58 1
        DCD     Messages_Flags
@


4.4
log
@Ursula branch merged (just service call changes).

Version 0.90. Tagged as 'Messages-0_90'
@
text
@d57 2
d64 2
d75 1
a75 1
        EXITS
d87 1
d114 1
a114 1
        MOVNES  pc, lr
d127 1
a127 1
        EXITS
@


4.3
log
@ScanRes utility modified to include trailing zero word in output file -
necessary for MessData export.
MessagesHI now expects to find resources at &04000000 - latest Kernel maps
top 8Mb of ROM there.

Version 0.87. Tagged as 'Messages-0_87'
@
text
@d98 8
d107 1
d110 2
@


4.2
log
@Spinner branch merged. Changed to use srccommit.
Added extra targets for placing resources beyond the first 8Mb of ROM.

Version 0.85. Tagged as 'Messages-0_85'
@
text
@a121 1
        DCD     0
@


4.1
log
@Initial revision
@
text
@d26 1
a26 1
        GET     Version
d59 1
a59 1
Messages_HelpStr        DCB     "UK Messages", 9, "$VString ($Date)", 0
@


4.1.4.1
log
@Added Ursula format service call handler.
@
text
@a97 8
; Ursula format

UServiceTable
	DCD	0
	DCD	UService - Module_BaseAddr
	DCD	Service_ResourceFSStarting
	DCD	0
	DCD	UServiceTable - Module_BaseAddr
a98 1
	MOV	r0, r0
a100 2

UService
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
