head	4.23;
access;
symbols
	IntKey-0_99:4.23
	IntKey-0_98-1:4.23
	IntKey-0_98:4.23
	IntKey-0_97:4.23
	IntKey-0_96:4.23
	IntKey-0_95:4.23
	IntKey-0_94:4.22
	IntKey-0_93:4.22
	IntKey-0_92:4.22
	IntKey-0_91:4.22
	IntKey-0_90:4.21
	RO_5_07:4.21
	IntKey-0_89:4.21
	IntKey-0_88:4.20
	IntKey-0_87:4.20
	IntKey-0_86:4.20
	IntKey-0_85:4.19
	IntKey-0_84:4.19
	IntKey-0_83:4.19
	IntKey-0_82:4.19
	IntKey-0_81:4.18
	IntKey-0_80:4.17
	IntKey-0_79:4.16
	IntKey-0_78:4.15
	IntKey-0_77:4.14
	IntKey-0_76:4.13
	dellis_autobuild_BaseSW:4.13
	IntKey-0_75:4.13
	IntKey-0_74:4.13
	IntKey-0_73:4.13
	IntKey-0_72:4.13
	IntKey-0_71:4.13
	sbrodie_sedwards_16Mar2000:4.13
	IntKey-0_70:4.13
	dcotton_autobuild_BaseSW:4.17
	IntKey-0_69:4.13
	IntKey-0_68:4.12
	IntKey-0_67:4.12
	IntKey-0_66:4.12
	IntKey-0_65:4.12
	IntKey-0_64:4.10
	IntKey-0_63:4.10
	IntKey-0_62:4.10
	IntKey-0_61:4.10
	IntKey-0_60:4.10
	IntKey-0_59:4.10
	mstphens_UrsulaRiscPCBuild_20Nov98:4.3.2.1
	Ursula_RiscPC:4.3.2.1.0.2
	IntKey-0_58:4.10
	IntKey-0_57:4.9
	IntKey-0_56:4.9
	IntKey-0_55:4.9
	IntKey-0_54:4.9
	IntKey-0_53:4.9
	IntKey-0_52:4.9
	bavison_Generic_InternationalKeyboard-0_51:4.9
	bavison_InternationalKeyboard-0_45:4.3.2.1
	nicke_IntKey-0_36:4.1.7.1
	bavison_InternationalKeyboard-0_44:4.3.2.1
	rthornb_UrsulaBuild-19Aug1998:4.3.2.1
	UrsulaBuild_FinalSoftload:4.3.2.1
	bavison_InternationalKeyboard-0_43:4.3.2.1
	rthornb_UrsulaBuild-12Aug1998:4.3.2.1
	bavison_InternationalKeyboard-0_42:4.3.2.1
	Generic_InternationalKeyboard-0_41:4.5
	aglover_UrsulaBuild-05Aug1998:4.3
	rthornb_UrsulaBuild-29Jul1998:4.3
	rthornb_UrsulaBuild-22Jul1998:4.3
	rthornb_UrsulaBuild-15Jul1998:4.3
	Generic_InternationalKeyboard-0_40:4.5
	Generic_InternationalKeyboard-0_39:4.5
	rthornb_UrsulaBuild-07Jul1998:4.3
	bavison_InternationalKeyboard-0_38:4.3
	rthornb_UrsulaBuild-17Jun1998:4.3
	rthornb_UrsulaBuild-03Jun1998:4.3
	rthornb_UrsulaBuild-27May1998:4.3
	rthornb_UrsulaBuild-21May1998:4.3
	rthornb_UrsulaBuild_01May1998:4.3
	afrost_NC2_Generic:4.1.7.1
	afrost_Funai01-33:4.1.7.1
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.3.0.4
	Daytona_bp:4.3
	Ursula:4.3.0.2
	Ursula_bp:4.3
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.2
	ARTtmp:4.1.7.1.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.23
date	2012.12.05.01.40.17;	author jlee;	state Exp;
branches;
next	4.22;
commitid	XFeMFw6wUN4JzYuw;

4.22
date	2009.06.13.23.16.49;	author bavison;	state Exp;
branches;
next	4.21;

4.21
date	2004.07.01.14.55.01;	author srevill;	state Exp;
branches;
next	4.20;

4.20
date	2001.12.06.15.21.53;	author kbracey;	state Exp;
branches;
next	4.19;

4.19
date	2001.11.27.16.57.57;	author kbracey;	state Exp;
branches;
next	4.18;

4.18
date	2001.11.05.17.55.04;	author srevill;	state Exp;
branches;
next	4.17;

4.17
date	2001.06.14.16.08.36;	author sbrodie;	state Exp;
branches;
next	4.16;

4.16
date	2001.03.22.16.37.01;	author sbrodie;	state Exp;
branches;
next	4.15;

4.15
date	2001.01.02.10.30.40;	author dcotton;	state Exp;
branches;
next	4.14;

4.14
date	2000.11.21.17.39.32;	author sforrest;	state Exp;
branches;
next	4.13;

4.13
date	99.09.16.16.12.02;	author kbracey;	state Exp;
branches;
next	4.12;

4.12
date	99.08.26.15.22.43;	author sforrest;	state Exp;
branches;
next	4.11;

4.11
date	99.08.26.13.49.10;	author kbracey;	state Exp;
branches;
next	4.10;

4.10
date	98.11.11.12.24.00;	author kbracey;	state Exp;
branches;
next	4.9;

4.9
date	98.09.28.13.44.48;	author bavison;	state Exp;
branches;
next	4.8;

4.8
date	98.09.02.08.54.31;	author kbracey;	state Exp;
branches;
next	4.7;

4.7
date	98.09.01.17.54.08;	author kbracey;	state Exp;
branches;
next	4.6;

4.6
date	98.09.01.16.36.56;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	98.07.03.13.47.00;	author sforrest;	state Exp;
branches;
next	4.4;

4.4
date	97.07.14.09.44.31;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	97.05.12.22.31.50;	author kbracey;	state Exp;
branches
	4.3.2.1;
next	4.2;

4.2
date	97.01.22.14.09.04;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.38.18;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.3.2.1
date	98.08.11.17.16.48;	author bavison;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.38.18;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.01.47.22;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.43.37;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.58.23;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.23
log
@Add support for the new 'wide' key handler format. Add support for keyboard types which have fundamentally different layouts to PC/Arc. Add a basic (UK) layout for the Pandora.
Detail:
  Doc/FileFormat, Doc/HandlerAPI - Updated docs with information about the new key handler format, and how to invoke it in layout files.
  c/keygen, c/unicdata, h/structures - Give keygen a bit of a tidy up. Add support for the new '$Type' directive to allow the keyboard type to be specified (to ensure correct intkey table is used, unique symbol names when the same country is supported by multiple keyboard types, etc.). Add support for the new key handler format.
  Sources/IntKeyBody, Sources/IntKeyMod, Sources/KeyStruct - Tidy up the code a bit to use key handler layout and key/OS_Byte numbers from Hdr:. Add support for the new key handler format, and for the new way keygen generates the layout files.
  layout/Pandora, Makefile, Sources/IntKeyBody, Sources/IntKeyMod, Sources/KeyStruct - Add a layout file for the Pandora, and modify IntKey to use different sets of layout files depending on the keyboard type.
Admin:
  New key handler format tested on Pandora. Old format tested on Pandora & BB-xM.
  Requires HdrSrc-2_20


Version 0.95. Tagged as 'IntKey-0_95'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for International Keyboard
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name         Description
# ----       ----         -----------
# 25-May-94  AMcC         Created.
# 23-Aug-94  AMcC         Updated to build International Version (from Opal)
# 01-Sep-98  KJB          Changed for new keygen tool
# 21-Nov-00  SBF          Added support for StripDepnd
# 22-Mar-01  SNB          Updated for portability
#

#
# Component specific details
#
COMPONENT  = InternationalKeyboard
TARGET     = IntKey
ROM_SOURCE = Source.IntKeyMod
RESOURCES  = no

.SUFFIXES:
.SUFFIXES: .o .s .c .layout

KBD       = -PD "Keyboard SETS \"${KEYBOARD}\""
ASFLAGS   = ${KBD} -I<hdr$dir>
CC_HOST   = %cc

include StdTools
include AAsmModule

#
# Static dependencies and specialist rules
#

LAYOUTS   = UK.s Italy.s Spain.s France.s Germany.s Esperanto.s Greece.s \
            Swed-Finl.s Denmark.s Norway.s Iceland.s Turkey.s Russia.s \
            Israel.s LatinAm.s Belgium.s Netherlands.s Japan.s \
            Switzerland.s Wales.s USA.s Korea.s Korea2.s Taiwan.s \
            DvorakUK.s DvorakUSA.s Pandora.s

${ROM_OBJECT}: ${LAYOUTS}
${LAYOUTS}: keygen

.layout.s:;  keygen ${STDTOOLOPTIONS} ${EXTRAKEYS} $< $@@

clean::
        ${WIPE} s ${WFLAGS}
        ${RM} keygen
        ${RM} keyconvert
        @@echo ${COMPONENT}: cleaned

keygen: keygen.c throwback.c unicdata.c
        ${MKDIR} s
        ${MAKE} -f keygen/mk COMPONENT=keygen THROWBACK=${THROWBACK}

keyconvert: keyconvert.c unicdata.c
        ${MKDIR} s
        ${MAKE} -f keygen/mk COMPONENT=keygen THROWBACK=${THROWBACK}

install: ${LAYOUTS}

# Dynamic dependencies:
@


4.22
log
@  Build fix
Detail:
  The build utilities keygen and keyconvert, compiled at build time, are now
  built using the HostTools shared makefile, and so will execute on any RISC OS
  build host even if the default compiler options are to target an incompatible
  ARM architecture. An attempt had already been made in this case to support a
  differing host architecture but the implementation was broken.
Admin:
  Tested using an APCS-R build on an Iyonix.

Version 0.90. Not tagged
@
text
@d55 1
a55 1
            DvorakUK.s DvorakUSA.s
@


4.21
log
@  Makefile change.
Detail:
  Even if you're using a 26-bit build environment, this will build
  on a 32-bit machine.
Admin:
  Works in Baseline 500 build.

Version 0.89. Tagged as 'IntKey-0_89'
@
text
@a60 1
.c.o:;  ${MKDIR} o ; ${CC} ${CFLAGS} -o $@@ $<
d68 1
a68 1
keygen: keygen.o throwback.o unicdata.o
d70 1
a70 1
        ${CC_HOST} -o $@@ keygen.o throwback.o unicdata.o
d72 1
a72 1
keyconvert: keyconvert.o unicdata.o
d74 1
a74 1
        ${CC_HOST} -o $@@ keyconvert.o unicdata.o
@


4.20
log
@First pass at a Taiwanese (Zhuyin) layout.

Version 0.86. Tagged as 'IntKey-0_86'
@
text
@d42 1
d71 1
a71 1
        ${CC} -o $@@ keygen.o throwback.o unicdata.o
d75 1
a75 1
        ${CC} -o $@@ keyconvert.o unicdata.o
@


4.19
log
@Added Korean layout. If you don't have a real Korean keyboard, Alt+Num-Lock
acts as Hangul Lock, and Alt+Space (in the Hangul layer) acts as convert.

Version 0.82. Tagged as 'IntKey-0_82'
@
text
@d53 1
a53 1
            Switzerland.s Wales.s USA.s Korea.s Korea2.s \
@


4.18
log
@  Added install ram phase.
Detail:
  You could not install a ram version of this module. Fixed.
Admin:
  Required for Baseline builds.

Version 0.81. Tagged as 'IntKey-0_81'
@
text
@d53 2
a54 1
            Switzerland.s Wales.s USA.s DvorakUK.s DvorakUSA.s
@


4.17
log
@  Some bugfixes for keygen and keyconvert, discovered by gcc.
  Temporary GNUmakefile added containing UNIX build system.
Detail:
  gcc complained about returning the address of a local variable as
    a function result in both keygen and keyconvert.  The two variables
    concerned have now been made static like they should have been.
    Unlikely to have caused much aggravation, but only through luck.
  The Keyboard data structure has been updated to explicitly use an
    unsigned char in some places.  This is necessary for systems on
    which char is signed by default.
  The GNUmakefile is a temporary addition until native tool support can
    be sorted out.  In the xriscos environment, do "make links" and
    then "make rom" to build the module.  "make clean" will remove all
    the built stuff and the symbolic links.  Requires access to the
    exported Unicode library files.  keyconvert is built, but will not
    work for the obvious reason that it calls SWIs.
Admin:
  GNUmakefile will be removed at a later date - it's only temporary.
  Tested - builds the same module (for Keyboard=All, Machine=Phoebe)
    byte-identically.


Version 0.80. Tagged as 'IntKey-0_80'
@
text
@d75 2
@


4.16
log
@  Tidied Makefile.
Admin:
  Built.

Version 0.79. Tagged as 'IntKey-0_79'
@
text
@d41 1
a41 1
ASFLAGS   = ${KBD}
@


4.15
log
@    KeyGen utility now links against CLib rather than ANSILib.

Detail:
    IntKey would not build correctly on machines that build only
SharedCLibrary instead of SharedRISC_OSLib because of ANSILib not being
exported.
    KeyGen was linked against AnsiLib instead of CLib due to a bug in the
qsort() alogrithm that caused highly undesirable consequences with large data
sets.
    Since this bug has been fixed in the latest versions of the C Library, it
now links against the C Library once more.

Admin:
    Tested in a build.
    Note that you must have the latest 32-bit compatible version of the C
Library (5.18) present on the build machine for this to compile.

Version 0.78. Tagged as 'IntKey-0_78'
@
text
@d26 1
d30 1
a30 1
# Generic options:
d32 4
a35 13
MKDIR   = cdir
AS      = objasm
CC	= cc
CP      = copy
LD      = link
RM      = remove
WIPE    = -wipe
STRIP   = -stripdepnd
CCFLAGS = -c -depend !Depend ${THROWBACK} -IC:
ASFLAGS = -depend !Depend ${THROWBACK} -Stamp -quit ${KBD} -To $@@ -From
LDFLAGS = -bin -o $@@
CPFLAGS = ~cfr~v
WFLAGS  = ~cfr~v
d37 2
a38 11
#
# Program specific options:
#
COMPONENT = IntKey
SOURCE    = Source.IntKeyMod
LAYOUTS   = s.UK s.Italy s.Spain s.France s.Germany s.Esperanto s.Greece \
            s.Swed-Finl s.Denmark s.Norway s.Iceland s.Turkey s.Russia \
            s.Israel s.LatinAm s.Belgium s.Netherlands s.Japan \
            s.Switzerland s.Wales s.USA s.DvorakUK s.DvorakUSA
TARGET    = rm.IntKey
OBJECT    = o.IntKey
d41 1
d43 2
a44 5
.SUFFIXES:
.SUFFIXES: .o .s .c .layout

.layout.s:;  keygen -depend !Depend ${THROWBACK} ${EXTRAKEYS} $< $@@
.c.o:;	${MKDIR} o ; ${CC} ${CCFLAGS} -o $@@ $<
d47 1
a47 1
# Generic rules:
a48 2
rom: ${TARGET}
        @@echo ${COMPONENT}: rom module built
d50 7
a56 2
export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete
d58 2
a59 3
install_rom: ${TARGET}
        ${CP} ${TARGET} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: rom module installed
d61 1
a61 2
clean:
        ${WIPE} o ${WFLAGS}
d63 2
a64 4
        ${STRIP}
        ${RM} ${TARGET}
	${RM} keygen
	${RM} keyconvert
d67 7
a73 18
keygen: o.keygen o.throwback o.unicdata
	${MKDIR} s
	${LD} -o keygen o.keygen o.throwback o.unicdata C:o.Stubs

keyconvert: o.keyconvert o.unicdata
	${MKDIR} s
	${LD} -o keyconvert o.keyconvert o.unicdata C:o.Stubs

${LAYOUTS}: keygen

${OBJECT}: ${SOURCE} ${LAYOUTS}
        If "<IKHG$Dir>"="" Then Set IKHG$Dir ^.!IKHG
        ${MKDIR} o
        ${AS} ${ASFLAGS} ${SOURCE}

${TARGET}: ${OBJECT}
        ${LD} ${LDFLAGS} ${OBJECT}
        SetType $@@ &FFA
@


4.14
log
@
  * South African keyboard layout added.

Detail:

  * South Africa utilises a standard USA layout.  IntKey now recognises
    this, and supports "*Keyboard SAfrica".

  * New layout DrawFile created that describes the South African layout.

  * StripDepnd support added to makefile.

Admin:

  * Assembled and tested on RPC.

Version 0.77. Tagged as 'IntKey-0_77'
@
text
@d89 1
a89 3
        # Link with ANSILib instead of Stubs because old shared C libraries
        # have a buggy qsort that will blow up with such a large data set.
	${LD} -o keygen o.keygen o.throwback o.unicdata C:o.ANSILib
@


4.13
log
@keygen now built with ANSILib instead of Stubs to cope with buggy old qsorts
in old shared C libraries.

Version 0.69. Tagged as 'IntKey-0_69'
@
text
@d25 1
d38 1
d81 1
@


4.12
log
@"FN" key support added by K. Bracey.  3rd party keyboard mappings
defined and included by S. Forrest.

Both changes made for the Lazarus project in order to support a third
party handset.

Tested on a Risc PC against V0.02 of the RCMM Driver.

Version 0.65. Tagged as 'IntKey-0_65'
@
text
@d86 3
a88 1
	${LD} -o keygen o.keygen o.throwback o.unicdata C:o.Stubs
@


4.11
log
@Intermediate check-in
@
text
@a103 121
o.throwback:	c.throwback
o.throwback:	C:h.swis
o.throwback:	C:h.kernel
o.throwback:	h.throwback
o.unicdata:	c.unicdata
o.unicdata:	C:Unicode.h.iso10646
s.UK: layout.UK
s.UK: inc.Invariant
s.UK: inc.FNLazarus
s.Italy: layout.Italy
s.Italy: inc.Invariant
s.Italy: inc.FNLazarus
s.Spain: layout.Spain
s.Spain: inc.Invariant
s.Spain: inc.FNLazarus
s.France: layout.France
s.France: inc.Invariant
s.France: inc.FNLazarus
s.Germany: layout.Germany
s.Germany: inc.Invariant
s.Germany: inc.FNLazarus
s.Esperanto: layout.Esperanto
s.Esperanto: inc.Invariant
s.Esperanto: inc.FNLazarus
s.Greece: layout.Greece
s.Greece: inc.Invariant
s.Greece: inc.FNLazarus
s.Swed-Finl: layout.Swed-Finl
s.Swed-Finl: inc.Invariant
s.Swed-Finl: inc.FNLazarus
s.Denmark: layout.Denmark
s.Denmark: inc.Invariant
s.Denmark: inc.FNLazarus
s.Norway: layout.Norway
s.Norway: inc.Invariant
s.Norway: inc.FNLazarus
s.Iceland: layout.Iceland
s.Iceland: inc.Invariant
s.Iceland: inc.FNLazarus
s.Turkey: layout.Turkey
s.Turkey: inc.Invariant
s.Turkey: inc.FNLazarus
s.Russia: layout.Russia
s.Russia: inc.Invariant
s.Russia: inc.Invariant
s.Russia: inc.FNLazarus
s.Israel: layout.Israel
s.Israel: inc.Invariant
s.Israel: inc.FNLazarus
s.LatinAm: layout.LatinAm
s.LatinAm: inc.Invariant
s.LatinAm: inc.FNLazarus
s.Belgium: layout.Belgium
s.Belgium: inc.Invariant
s.Belgium: inc.FNLazarus
s.Netherlands: layout.Netherlands
s.Netherlands: inc.Invariant
s.Netherlands: inc.FNLazarus
s.Japan: layout.Japan
s.Japan: inc.Invariant
s.Japan: inc.Invariant
s.Japan: inc.FNLazarus
s.Switzerland: layout.Switzerland
s.Switzerland: inc.Invariant
s.Switzerland: inc.FNLazarus
s.Wales: layout.Wales
s.Wales: inc.Invariant
s.Wales: inc.FNLazarus
s.USA: layout.USA
s.USA: inc.Invariant
s.USA: inc.FNLazarus
s.DvorakUK: layout.DvorakUK
s.DvorakUK: inc.Invariant
s.DvorakUK: inc.FNLazarus
s.DvorakUSA: layout.DvorakUSA
s.DvorakUSA: inc.Invariant
s.DvorakUSA: inc.FNLazarus
o.keygen:	c.keygen
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.unicdata
o.keygen:	h.structures
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.throwback
o.IntKey: Source.IntKeyMod
o.IntKey: VersionASM
o.IntKey: Source.IntKeyBody
o.IntKey: Hdr:ListOpts
o.IntKey: Hdr:Macros
o.IntKey: Hdr:System
o.IntKey: Hdr:SWIs
o.IntKey: Hdr:CPU.Generic26
o.IntKey: Hdr:IO.GenericIO
o.IntKey: Hdr:RISCOS
o.IntKey: Hdr:ModHand
o.IntKey: Hdr:Services
o.IntKey: Hdr:Proc
o.IntKey: Source.Accents
o.IntKey: Source.KeyStruct
o.IntKey: s.UK
o.IntKey: s.Italy
o.IntKey: s.Spain
o.IntKey: s.France
o.IntKey: s.Germany
o.IntKey: s.Esperanto
o.IntKey: s.Greece
o.IntKey: s.Swed-Finl
o.IntKey: s.Denmark
o.IntKey: s.Norway
o.IntKey: s.Iceland
o.IntKey: s.Turkey
o.IntKey: s.Russia
o.IntKey: s.Israel
o.IntKey: s.LatinAm
o.IntKey: s.Belgium
o.IntKey: s.Netherlands
o.IntKey: s.Japan
o.IntKey: s.Switzerland
o.IntKey: s.Wales
o.IntKey: s.USA
o.IntKey: s.DvorakUK
o.IntKey: s.DvorakUSA
@


4.10
log
@%Include directive implemented in layout files - this gives a simpler
way of adding in some keys and allows some commonality between layouts.
To get the keys, you need to set the option EXTRAKEYS="-extra [tag]".
!IKHG removed.

Version 0.58. Tagged as 'IntKey-0_58'
@
text
@d104 121
@


4.9
log
@Merged in 10-Sep-98 and 24-Sep-98 changes from Ursula branch:
* Updated/added layout drawfiles (Esperanto file further updated from Ursula
  branch version, to indicate characters available when alphabet is changed)
* Added dialling codes for Wales, Wales2, DvorakUK and DvorakUSA
* !IKHG.Source.Chars updated to use quoted characters
* Layout fixes applied to Belgium, Denmark, France, Germany, Greece, Israel,
  LatinAm, Russia, Switzerland and Turkey
* Ctrl-Alt-F1/F2 keyboard selection is performed on a callback

Prototype added to h.unicdata to allow keyconvert to compile.

Dynamic dependencies removed from Makefile; keyconvert removed during clean.

Delete key made special in Japan layout, to enable delete-type code.
@
text
@d37 1
a37 1
CCFLAGS = -c -depend !Depend -IC:
d60 1
a60 1
.layout.s:;  keygen ${THROWBACK} $< $@@
@


4.8
log
@Added Japan and Iceland to build.
Added hexadecimal keypad code entry.
Changed dead key tilde+space to U+007E, not U+02DC (Denmark needs this).
Added dead key stroke (only Turkey uses this).
@
text
@d81 1
a103 49
o.throwback:	c.throwback
o.throwback:	C:h.swis
o.throwback:	C:h.kernel
o.throwback:	h.throwback
o.unicdata:	c.unicdata
o.unicdata:	C:Unicode.h.iso10646
o.keygen:	c.keygen
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.unicdata
o.keygen:	h.structures
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.throwback
o.IntKey: Source.IntKeyMod
o.IntKey: Source.IntKeyBody
o.IntKey: Hdr:ListOpts
o.IntKey: Hdr:Macros
o.IntKey: Hdr:System
o.IntKey: Hdr:SWIs
o.IntKey: Hdr:CPU.Generic26
o.IntKey: Hdr:IO.GenericIO
o.IntKey: Hdr:RISCOS
o.IntKey: Hdr:ModHand
o.IntKey: Hdr:Services
o.IntKey: Hdr:Proc
o.IntKey: Source.Accents
o.IntKey: Source.KeyStruct
o.IntKey: s.UK
o.IntKey: s.Italy
o.IntKey: s.Spain
o.IntKey: s.France
o.IntKey: s.Germany
o.IntKey: s.Esperanto
o.IntKey: s.Greece
o.IntKey: s.Swed-Finl
o.IntKey: s.Denmark
o.IntKey: s.Norway
o.IntKey: s.Iceland
o.IntKey: s.Turkey
o.IntKey: s.Russia
o.IntKey: s.Israel
o.IntKey: s.LatinAm
o.IntKey: s.Belgium
o.IntKey: s.Netherlands
o.IntKey: s.Japan
o.IntKey: s.Switzerland
o.IntKey: s.Wales
o.IntKey: s.USA
o.IntKey: s.DvorakUK
o.IntKey: s.DvorakUSA
@


4.7
log
@Esperanto layout revised, as per Mark RISON's suggestions.
@
text
@d49 1
a49 1
            s.Swed-Finl s.Denmark s.Norway s.Turkey s.Russia \
d103 49
@


4.6
log
@Ursula branch merged.

Complete new keyboard definition system in terms of the UCS. See
Docs.FileFormat for information.
@
text
@d48 1
a48 1
LAYOUTS   = s.UK s.Italy s.Spain s.France s.Germany s.Greece \
a102 52
o.throwback:	c.throwback
o.throwback:	C:h.swis
o.throwback:	C:h.kernel
o.throwback:	h.throwback
o.unicdata:	c.unicdata
o.unicdata:	C:Unicode.h.iso10646
o.keygen:	c.keygen
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.unicdata
o.keygen:	h.structures
o.keygen:	C:Unicode.h.iso10646
o.keygen:	h.throwback
o.keyconvert:	c.keyconvert
o.keyconvert:	C:h.swis
o.keyconvert:	C:h.kernel
o.keyconvert:	C:Unicode.h.iso10646
o.keyconvert:	h.unicdata
o.IntKey: Source.IntKeyMod
o.IntKey: Source.IntKeyBody
o.IntKey: Hdr:ListOpts
o.IntKey: Hdr:Macros
o.IntKey: Hdr:System
o.IntKey: Hdr:SWIs
o.IntKey: Hdr:CPU.Generic26
o.IntKey: Hdr:IO.GenericIO
o.IntKey: Hdr:RISCOS
o.IntKey: Hdr:ModHand
o.IntKey: Hdr:Services
o.IntKey: Hdr:Proc
o.IntKey: Source.Accents
o.IntKey: Source.KeyStruct
o.IntKey: s.UK
o.IntKey: s.Italy
o.IntKey: s.Spain
o.IntKey: s.France
o.IntKey: s.Germany
o.IntKey: s.Greece
o.IntKey: s.Swed-Finl
o.IntKey: s.Denmark
o.IntKey: s.Norway
o.IntKey: s.Turkey
o.IntKey: s.Russia
o.IntKey: s.Israel
o.IntKey: s.LatinAm
o.IntKey: s.Belgium
o.IntKey: s.Netherlands
o.IntKey: s.Japan
o.IntKey: s.Switzerland
o.IntKey: s.Wales
o.IntKey: s.USA
o.IntKey: s.DvorakUK
o.IntKey: s.DvorakUSA
@


4.5
log
@Altered data files (in !IKHG.Files) to correct the keypad mapping errors.
Ran !IKHG on all these files to create updated assembler source files
(in !IKHG.Source) containing the corrections.

Changes made by K. Bracey and S. Forrest and checked in by S. Forrest.
@
text
@d24 1
d32 1
d36 1
a36 1
WIPE    = wipe
d38 1
a38 1
ASFLAGS = -depend !Depend -Stamp -quit ${KBD} -To $@@ -From
d48 4
d57 6
d78 1
d80 1
d83 11
a93 1
${OBJECT}: ${SOURCE}
d103 52
@


4.4
log
@Rationalised structure - now builds a module containing either one
keyboard (+UK) or all keyboards, dependent on setting of <Keyboard>.

Added several new keyboards and improved existing ones.

Modernised !IKHG. In particular allowed editing of keypad, movement of Enter
backspace and shift, and allowed Caps Lock to work on characters obtained
using Alt.
@
text
@a78 42
o.IntKey: Source.IntKeyMod
o.IntKey: Source.IntKeyBody
o.IntKey: Hdr:ListOpts
o.IntKey: Hdr:Macros
o.IntKey: Hdr:System
o.IntKey: Hdr:SWIs
o.IntKey: Hdr:CPU.Generic26
o.IntKey: Hdr:IO.GenericIO
o.IntKey: Hdr:RISCOS
o.IntKey: Hdr:ModHand
o.IntKey: Hdr:Services
o.IntKey: Hdr:Proc
o.IntKey: !IKHG.Source.Chars.Latin1
o.IntKey: Source.KeyStruct
o.IntKey: !IKHG.Source.UK
o.IntKey: !IKHG.Source.Italy
o.IntKey: !IKHG.Source.Spain
o.IntKey: !IKHG.Source.France
o.IntKey: !IKHG.Source.Germany
o.IntKey: !IKHG.Source.Greece
o.IntKey: <IKHG$Dir>.Source.Chars.Greek
o.IntKey: !IKHG.Source.Sweden
o.IntKey: !IKHG.Source.Denmark
o.IntKey: !IKHG.Source.Norway
o.IntKey: !IKHG.Source.Canada
o.IntKey: !IKHG.Source.Turkey
o.IntKey: <IKHG$Dir>.Source.Chars.Latin3
o.IntKey: !IKHG.Source.Russia
o.IntKey: <IKHG$Dir>.Source.Chars.Cyrillic
o.IntKey: !IKHG.Source.Russia2
o.IntKey: <IKHG$Dir>.Source.Chars.Cyrillic2
o.IntKey: !IKHG.Source.Israel
o.IntKey: <IKHG$Dir>.Source.Chars.Hebrew
o.IntKey: !IKHG.Source.LatinAm
o.IntKey: !IKHG.Source.Belgium
o.IntKey: !IKHG.Source.Netherlands
o.IntKey: !IKHG.Source.Switzerland
o.IntKey: !IKHG.Source.USA
o.IntKey: !IKHG.Source.DvorakUK
o.IntKey: !IKHG.Source.DvorakUSA
o.IntKey: !IKHG.Source.DvorakLH
o.IntKey: !IKHG.Source.DvorakRH
@


4.3
log
@Removed dynamic dependencies for an easy life
@
text
@d30 1
a30 1
AS      = aasm
d32 1
d34 1
d36 2
a37 1
ASFLAGS = -depend !Depend -Stamp -quit -module -To $@@ -From
d39 1
d45 1
a45 6
#
# We use <Keyboard> here instead of ${LOCALE} so that the keyboard handler
# can be built for a different country than the main build (eg. allows USA
# keyboard handler with UK ROM messages).
#
SOURCE    = <Keyboard>.Source.IntKeyMod
d47 3
d65 1
d69 3
a71 2
${TARGET}: ${SOURCE}
        set IKHG$Country <Keyboard>
d73 4
a76 1
        unset IKHG$Country
d79 42
@


4.3.2.1
log
@Changed build structure and updated to InternationalKeyboard 0.41 / !IKHG 3.01
from trunk, thereby acquiring Windows 95 and Japanese key support, and made
further changes, viz:

Fixed lastreadkey bug in !IKHG, added NOP so Int'l Keyboard assembles cleanly.
Added Welsh alphabet and Wales2 country support.
Switched Wales into and Russia2 out of build.
In UK layout, moved bullet from Alt-Shift-8 to Alt-Shift-\.
In Wales layout, added Alt-T = TM, Alt-Shift-Z = single left angle-quote,
  and Alt-Shift-X = single right angle-quote.
Fixed !IKHG to call key D16 "End" instead of "Cpy".
Merged PC-delete code and Ursula service call table back in from Ursula branch.
Added PC-delete compatibility to !IKHG.
Added Alt-E shortcut for Euro symbol as follows:
  * No further action was required:
      Italy, Norway, Esperanto
  * oe/OE moved to Q:
      UK, Spain, France, Sweden, Finland, Denmark, Canada, Belgium,
      Netherlands, Switzerland, USA
  * oe/OE moved to W:
      Germany, Iceland, LatinAm, Turkey
  * oe/OE moved to U:
      DvorakUK, DvorakUSA
  * e circumflex replaced with Euro:
      Wales, Wales2
DvorakLH and DvorakRH have not had a Euro shortcut added; Greece, Israel,
Russia and Russia2 don't have a Euro in their alphabets.
Comments on the above arrangements are welcome.

Reprocessed all handlers to encompass changes (including !IKHG.Layouts files).
@
text
@d30 1
a30 1
AS      = objasm
a31 1
LD      = link
a32 1
WIPE    = wipe
d34 1
a34 2
ASFLAGS = -depend !Depend -Stamp -quit ${KBD} -To $@@ -From
LDFLAGS = -bin -o $@@
a35 1
WFLAGS  = ~cfr~v
d41 6
a46 1
SOURCE    = Source.IntKeyMod
a47 3
OBJECT    = o.IntKey

KBD       = -PD "Keyboard SETS \"${KEYBOARD}\""
a62 1
        ${WIPE} o ${WFLAGS}
d66 2
a67 3
${OBJECT}: ${SOURCE}
        If "<IKHG$Dir>"="" Then Set IKHG$Dir ^.!IKHG
        ${MKDIR} o
d69 1
a69 4

${TARGET}: ${OBJECT}
        ${LD} ${LDFLAGS} ${OBJECT}
        SetType $@@ &FFA
@


4.2
log
@Version Spin_merge taken
@
text
@a71 15
rm.IntKey: Source.IntKeyBody
rm.IntKey: Hdr:ListOpts
rm.IntKey: Hdr:Macros
rm.IntKey: Hdr:System
rm.IntKey: Hdr:SWIs
rm.IntKey: Hdr:CPU.Generic26
rm.IntKey: Hdr:IO.GenericIO
rm.IntKey: Hdr:RISCOS
rm.IntKey: Hdr:ModHand
rm.IntKey: Hdr:Services
rm.IntKey: Hdr:Proc
rm.IntKey: !IKHG.Source.Chars.Latin1
rm.IntKey: <Keyboard>.Source.KeyStruct
rm.IntKey: UK.Source.UKPCKbd
rm.IntKey: <Keyboard>.Source.USAKbd
@


4.1
log
@Initial revision
@
text
@d41 6
a46 1
SOURCE    = ${LOCALE}.Source.IntKeyMod
d67 1
a67 1
        set IKHG$Country ${LOCALE}
d84 1
a84 1
rm.IntKey: <Locale>.Source.KeyStruct
d86 1
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@d41 1
a41 6
#
# We use <Keyboard> here instead of ${LOCALE} so that the keyboard handler
# can be built for a different country than the main build (eg. allows USA
# keyboard handler with UK ROM messages).
#
SOURCE    = <Keyboard>.Source.IntKeyMod
d62 1
a62 1
        set IKHG$Country <Keyboard>
d79 1
a79 1
rm.IntKey: <Keyboard>.Source.KeyStruct
a80 1
rm.IntKey: <Keyboard>.Source.USAKbd
@


4.1.5.1
log
@Import from SrcFiler
@
text
@d41 1
a41 6
#
# We use <Keyboard> here instead of ${LOCALE} so that the keyboard handler
# can be built for a different country than the main build (eg. allows USA
# keyboard handler with UK ROM messages).
#
SOURCE    = <Keyboard>.Source.IntKeyMod
d62 1
a62 1
        set IKHG$Country <Keyboard>
d79 1
a79 1
rm.IntKey: <Keyboard>.Source.KeyStruct
a80 1
rm.IntKey: <Keyboard>.Source.USAKbd
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
