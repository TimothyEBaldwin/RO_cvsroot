head	1.50;
access;
symbols
	Tungsten-0_46:1.49
	Tungsten-0_45:1.48
	Tungsten-0_44:1.47
	Tungsten-0_43:1.46
	Tungsten-0_42:1.45
	Tungsten-0_41:1.44
	Tungsten-0_40:1.43
	Tungsten-0_39:1.42
	Tungsten-0_38:1.41
	Tungsten-0_37:1.40
	Tungsten-0_36:1.39
	Tungsten-0_35:1.38
	Tungsten-0_34:1.37
	Tungsten-0_33:1.36
	Tungsten-0_32:1.35
	Tungsten-0_31:1.34
	Tungsten-0_30:1.33
	Tungsten-0_29:1.32
	Tungsten-0_28:1.31
	Tungsten-Official514:1.29
	Tungsten-0_27:1.29
	Tungsten-0_26:1.28
	Tungsten-0_25:1.27
	Tungsten-0_24:1.26
	Tungsten-0_23:1.25
	Tungsten-0_22:1.24
	Tungsten-0_21:1.23
	Tungsten-0_20:1.22
	RO_5_07:1.21
	Tungsten-0_19:1.21
	Tungsten-0_18:1.20
	Tungsten-0_17:1.19
	Tungsten-0_16:1.18
	Tungsten-0_15:1.17
	Tungsten-0_14:1.16
	Tungsten-0_13:1.15
	Tungsten-0_12:1.14
	Tungsten-0_11:1.13
	Tungsten-0_10:1.12
	Tungsten-0_09:1.11
	Tungsten-0_08:1.10
	Tungsten-0_07:1.9
	Tungsten-0_06:1.8
	Tungsten-0_05:1.7
	Tungsten-0_04:1.5
	Tungsten-0_03:1.4
	Tungsten-0_02:1.3
	Tungsten-0_01:1.2;
locks; strict;
comment	@# @;


1.50
date	2013.11.01.18.41.55;	author rsprowson;	state dead;
branches;
next	1.49;
commitid	s4z9LXAGCdnyABbx;

1.49
date	2013.05.28.20.52.15;	author rsprowson;	state Exp;
branches;
next	1.48;
commitid	Exmg7j7CqMF9mrRw;

1.48
date	2013.01.22.23.30.47;	author jlee;	state Exp;
branches;
next	1.47;
commitid	Q6Z3DTOeKB1EhgBw;

1.47
date	2012.10.20.18.15.53;	author rsprowson;	state Exp;
branches;
next	1.46;
commitid	xlAz6BiMg5SWy9pw;

1.46
date	2012.07.09.07.26.03;	author rsprowson;	state Exp;
branches;
next	1.45;
commitid	KRTEdlJrzUihhRbw;

1.45
date	2012.07.04.18.00.44;	author rsprowson;	state Exp;
branches;
next	1.44;
commitid	SL20BFLvbcrZWgbw;

1.44
date	2012.06.11.22.47.28;	author jlee;	state Exp;
branches;
next	1.43;
commitid	aLa9ohl0HyZbhl8w;

1.43
date	2012.03.07.21.49.09;	author jlee;	state Exp;
branches;
next	1.42;
commitid	RsSkxpv2obxv20Wv;

1.42
date	2012.02.27.22.02.35;	author jlee;	state Exp;
branches;
next	1.41;
commitid	0IYlJ4xhaQK2pQUv;

1.41
date	2012.02.25.18.04.00;	author jlee;	state Exp;
branches;
next	1.40;
commitid	2I2wEKNeqSPb9zUv;

1.40
date	2012.02.25.16.43.11;	author jlee;	state Exp;
branches;
next	1.39;
commitid	jZ2NTOmQjvfsHyUv;

1.39
date	2012.01.22.23.28.43;	author jballance;	state Exp;
branches;
next	1.38;
commitid	mLSNrWv9oU2l2eQv;

1.38
date	2012.01.21.19.48.13;	author jlee;	state Exp;
branches;
next	1.37;
commitid	EIdX26yDWEOGQ4Qv;

1.37
date	2012.01.07.17.03.38;	author rsprowson;	state Exp;
branches;
next	1.36;
commitid	YllyAWbBCMe8ogOv;

1.36
date	2012.01.01.12.19.17;	author rsprowson;	state Exp;
branches;
next	1.35;
commitid	ycuCtpBIlYyx0tNv;

1.35
date	2011.12.06.00.18.16;	author jlee;	state Exp;
branches;
next	1.34;
commitid	q4Iqqfm8nb60R3Kv;

1.34
date	2011.12.04.19.24.33;	author jlee;	state Exp;
branches;
next	1.33;
commitid	XRTSTR3yifuegUJv;

1.33
date	2011.11.26.21.39.20;	author jlee;	state Exp;
branches;
next	1.32;
commitid	dS7sZziFfWSpgTIv;

1.32
date	2011.08.08.21.13.43;	author jlee;	state Exp;
branches;
next	1.31;
commitid	xMdaqswlSv6QEKuv;

1.31
date	2010.01.19.17.00.09;	author rool;	state Exp;
branches;
next	1.30;

1.30
date	2009.06.11.21.05.11;	author bavison;	state Exp;
branches;
next	1.29;

1.29
date	2009.04.22.23.07.34;	author bavison;	state Exp;
branches;
next	1.28;

1.28
date	2008.12.22.01.53.36;	author bavison;	state Exp;
branches;
next	1.27;

1.27
date	2005.12.04.22.12.10;	author jballance;	state Exp;
branches;
next	1.26;

1.26
date	2005.08.11.00.55.32;	author jballance;	state Exp;
branches;
next	1.25;

1.25
date	2005.08.10.23.12.35;	author jballance;	state Exp;
branches;
next	1.24;

1.24
date	2005.01.25.13.46.50;	author kbracey;	state Exp;
branches;
next	1.23;

1.23
date	2004.11.02.00.50.56;	author jballance;	state Exp;
branches;
next	1.22;

1.22
date	2004.10.29.00.30.40;	author jballance;	state Exp;
branches;
next	1.21;

1.21
date	2004.09.08.11.25.24;	author jballance;	state Exp;
branches;
next	1.20;

1.20
date	2004.06.30.14.35.48;	author kbracey;	state Exp;
branches;
next	1.19;

1.19
date	2004.02.16.15.32.43;	author kbracey;	state Exp;
branches;
next	1.18;

1.18
date	2004.01.16.17.11.52;	author bavison;	state Exp;
branches;
next	1.17;

1.17
date	2003.04.15.20.11.03;	author kbracey;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.15.20.03.33;	author kbracey;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.23.18.19.41;	author rsprowson;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.21.20.26.35;	author bavison;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.16.18.55.42;	author rsprowson;	state Exp;
branches;
next	1.12;

1.12
date	2003.01.22.14.58.44;	author bavison;	state Exp;
branches;
next	1.11;

1.11
date	2003.01.20.19.00.25;	author bavison;	state Exp;
branches;
next	1.10;

1.10
date	2002.12.13.19.26.23;	author kbracey;	state Exp;
branches;
next	1.9;

1.9
date	2002.12.13.17.47.00;	author bavison;	state Exp;
branches;
next	1.8;

1.8
date	2002.11.27.18.54.51;	author kbracey;	state Exp;
branches;
next	1.7;

1.7
date	2002.11.18.10.33.59;	author rsprowson;	state Exp;
branches;
next	1.6;

1.6
date	2002.10.17.09.17.18;	author bavison;	state Exp;
branches;
next	1.5;

1.5
date	2002.10.16.17.29.05;	author bavison;	state Exp;
branches;
next	1.4;

1.4
date	2002.10.15.18.55.06;	author rsprowson;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.15.14.56.35;	author bavison;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.07.12.33.53;	author kbracey;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.07.12.33.37;	author kbracey;	state Exp;
branches;
next	;


desc
@@


1.50
log
@Add RTC device
HAL RTC device added after probing IIC address &D0.
Moved CallOS macro into a header.

Version 0.47. Tagged as 'Tungsten-0_47'
@
text
@;
; This file is automatically maintained by srccommit, do not edit manually.
; Last processed by srccommit version: 1.1.
;
                        GBLS    Module_MajorVersion
                        GBLA    Module_Version
                        GBLS    Module_MinorVersion
                        GBLS    Module_Date
                        GBLS    Module_FullVersion
                        GBLS    Module_ApplicationDate
                        GBLS    Module_HelpVersion
                        GBLS    Module_ComponentName
                        GBLS    Module_ComponentPath
Module_MajorVersion     SETS    "0.46"
Module_Version          SETA    46
Module_MinorVersion     SETS    ""
Module_Date             SETS    "28 May 2013"
Module_ApplicationDate  SETS    "28-May-13"
Module_ComponentName    SETS    "Tungsten"
Module_ComponentPath    SETS    "castle/RiscOS/Sources/HAL/Tungsten"
Module_FullVersion      SETS    "0.46"
Module_HelpVersion      SETS    "0.46 (28 May 2013)"
                        END
@


1.49
log
@Prep of ROM distribution tool
Changed 'Update,feb' to ensure boot sequence is up to date first.
Removed '!+Resource,feb" which is no longer pertinent given the theme loader replaces the former monolithic theme module
Removed 'Desktop+,feb' patch to desktop file to add 510 apps, again, the updated !Boot covers this.
Makefile simplified a little.
Version number cranked in FlashICP to reflect NVidia strap changes made 15 months ago.
Built, but not tested.

Version 0.46. Tagged as 'Tungsten-0_46'
@
text
@@


1.48
log
@Implement HAL_IRQMax
Detail:
  s/Boot, s/Interrupts - Added HAL_IRQMax implementation, to ensure correct functionality with latest Kernel
Admin:
  Tested in Iyonix ROM softload
  Requires Kernel-5_35-4_79_2_182


Version 0.45. Tagged as 'Tungsten-0_45'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.45"
Module_Version          SETA    45
d17 2
a18 2
Module_Date             SETS    "22 Jan 2013"
Module_ApplicationDate  SETS    "22-Jan-13"
d21 2
a22 2
Module_FullVersion      SETS    "0.45"
Module_HelpVersion      SETS    "0.45 (22 Jan 2013)"
@


1.47
log
@Fix to HAL_FIQEnable and HAL_FIQDisable
Interrupts.s
 A typo meant that any attempt to enable FIQs actually OR'd the mask register with the temporary PSR value. To add to the woes this PSR value has I32 and F32 set, which means the bit 7 (software generated FIQ) was getting enabled.
Mirrors change in IOMD-0_19, though as this bug seems to have been there since inception it would seem nothing much uses FIQs on Tungsten.


Version 0.44. Tagged as 'Tungsten-0_44'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.44"
Module_Version          SETA    44
d17 2
a18 2
Module_Date             SETS    "20 Oct 2012"
Module_ApplicationDate  SETS    "20-Oct-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.44"
Module_HelpVersion      SETS    "0.44 (20 Oct 2012)"
@


1.46
log
@Adopt revised HAL_PhysInfo API
Also spotted that HAL_MachineID was corrupting v1-v4 so rejigged the register use a bit.

Version 0.43. Tagged as 'Tungsten-0_43'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.43"
Module_Version          SETA    43
d17 2
a18 2
Module_Date             SETS    "09 Jul 2012"
Module_ApplicationDate  SETS    "09-Jul-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.43"
Module_HelpVersion      SETS    "0.43 (09 Jul 2012)"
@


1.45
log
@Mark some unused video entrypoints as NullEntry
Rename HAL_Video_ to HAL_Video.
Make use of IICStatus defines.
Compiles, but not tested.

Version 0.42. Tagged as 'Tungsten-0_42'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.42"
Module_Version          SETA    42
d17 2
a18 2
Module_Date             SETS    "04 Jul 2012"
Module_ApplicationDate  SETS    "04-Jul-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.42"
Module_HelpVersion      SETS    "0.42 (04 Jul 2012)"
@


1.44
log
@Fix HAL_UARTModemControl
Detail:
  s/UART:
  - HAL_UARTModemControl now uses the correct AND mask; previous code would have always had bit 0 of the mask set.
  - Fixed code in HAL_UARTModemControl that was testing for calls that don't update the register
Admin:
  Tested in Iyonix ROM
  HAL now reports modem control lines changing correctly upon calls to HAL_UARTModemControl


Version 0.41. Tagged as 'Tungsten-0_41'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.41"
Module_Version          SETA    41
d17 2
a18 2
Module_Date             SETS    "11 Jun 2012"
Module_ApplicationDate  SETS    "11-Jun-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.41"
Module_HelpVersion      SETS    "0.41 (11 Jun 2012)"
@


1.43
log
@Fix bug when linked against old kernels
Detail:
  s/Top - If a kernel which doesn't support compression was in use, a typo would lead to the ROM image size being calculated incorrectly, most likely causing the ROM relocation code to fail.
Admin:
  Tested in Iyonix ROM softload
  Bug spotted by Willi Theiss


Version 0.40. Tagged as 'Tungsten-0_40'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.40"
Module_Version          SETA    40
d17 2
a18 2
Module_Date             SETS    "07 Mar 2012"
Module_ApplicationDate  SETS    "07-Mar-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.40"
Module_HelpVersion      SETS    "0.40 (07 Mar 2012)"
@


1.42
log
@Compress ROM when creating flash programmer distribution
Detail:
  utils/ROMDistrib/Makefile - Use rompress to compress the ROM down to 4MB
Admin:
  Tested briefly; seems to produce a correct-looking programmer


Version 0.39. Tagged as 'Tungsten-0_39'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.39"
Module_Version          SETA    39
d17 2
a18 2
Module_Date             SETS    "27 Feb 2012"
Module_ApplicationDate  SETS    "27-Feb-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.39"
Module_HelpVersion      SETS    "0.39 (27 Feb 2012)"
@


1.41
log
@Teach ROM flash tool about "NVidia STRAP data" HAL device, and compressed ROM images
Detail:
  utils/ROMDistrib/Resources/UK/FlashICP,ffb - Update PROCnvidia to deal with patching the NVidia STRAP data HAL device.
  - Don't complain if the NVidia patch data can't be found (but do complain if neither patch regions are found).
  - Add PROCAdjustExtFooter function to adjust the uncompressed ROM checksum that's (potentially) contained in the extended ROM footer (in the softload hint tag). Although the ROM doesn't make any use of this data, the softload tool will use it when it tries to work out if the compressed ROM matches the running, uncompressed ROM
  - Complain if ROM isn't 4MB in size
Admin:
  Tested up to the point that flash ROM programming would start
  Both compressed and uncompressed images appear to be being patched correctly.


Version 0.38. Tagged as 'Tungsten-0_38'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.38"
Module_Version          SETA    38
d17 2
a18 2
Module_Date             SETS    "25 Feb 2012"
Module_ApplicationDate  SETS    "25-Feb-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.38"
Module_HelpVersion      SETS    "0.38 (25 Feb 2012)"
@


1.40
log
@Add compressed ROM support. Make softload-aware.
Detail:
  hdr/Post, s/FlashProg - Add sizeofROM definition, for expected size of compressed ROM/physical ROM chip. Used to replace references to OSROM_ImageSize throughout the code.
  s/ATA, s/Boot, s/Debug, s/DebugPCI, s/IIC, s/Interrupts, s/MSI, s/NVMemory, s/Timers, s/Top, s/UART - Removed unnecessary GETs of Hdr:ImageSize.<ImageSize>
  s/Boot, s/Video - Add a new 'Tungsten video' HAL device, for storing the NVidia STRAP data that the softload & ROM flash tools need to poke into the ROMs on a per-machine basis. Previously the data was stored in the NVidia module, which would have caused complications with compressed ROM images.
  s/RAM, s/Top - Add compressed ROM & softload support. Softload code just skips some hardware initialisation and relocates the ROM to the high end of RAM.
Admin:
  Tested as Tungsten ROM softload only.
  For safety, compressed ROMs that have been burnt to ROM are required to be 4MB in size. This helps to simplify the ROM consistency checks and recovery code.
  Softloaded ROMs aren't subjected to the FlashCheck code and can be any size.


Version 0.37. Tagged as 'Tungsten-0_37'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.37"
Module_Version          SETA    37
d21 2
a22 2
Module_FullVersion      SETS    "0.37"
Module_HelpVersion      SETS    "0.37 (25 Feb 2012)"
@


1.39
log
@  Changed, repaired/modded programmer builder in utils folder to correctly install all the
  strings needed that are release specific. Checked and repaired errors that had crept
  into the programmer code
Detail:
  makefile changed. now includes all files required for programmer to create the restore APP.
  FlashICP repaired. In tidying up someone had removed a space reservation, so the BASIC ran out
  of space on a DIM. Also there was a change to use OS_File to load the rom image, with a typo on
  the reason code.
Admin:
  Tested in use. Builds a programmer with correct strings auto generated. Programmer and restore
  programmer both do what is required.  JB


Version 0.36. Tagged as 'Tungsten-0_36'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.36"
Module_Version          SETA    36
d17 2
a18 2
Module_Date             SETS    "22 Jan 2012"
Module_ApplicationDate  SETS    "22-Jan-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.36"
Module_HelpVersion      SETS    "0.36 (22 Jan 2012)"
@


1.38
log
@Add support for new HAL mixer 0.1 API. Improve mixer functionality.
Detail:
  hdr/Audio, s/Audio - The audio mixer now implements version 0.1 of the API, allowing it to return information about the min/max gain values supported by each channel.
  Also added support for the +0 to +12dB additional range available on the analog mixers, and fixed a bug that would corrupt the value written to the PC beep mixer register.
Admin:
  Tested in Iyonix ROM softload


Version 0.35. Tagged as 'Tungsten-0_35'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.35"
Module_Version          SETA    35
d17 2
a18 2
Module_Date             SETS    "21 Jan 2012"
Module_ApplicationDate  SETS    "21-Jan-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.35"
Module_HelpVersion      SETS    "0.35 (21 Jan 2012)"
@


1.37
log
@Update ROM distribution tool.
Searched for date set to match 5.18 kernel.
Lowercase function changed to not leak 255 bytes on every call.
Old patches removed.
Improved indentation in a few places.
Changed longhand creation of 4 byte file to use BPUT instead.
Some variable name and comment typos ammended.

Version 0.34. Tagged as 'Tungsten-0_34'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.34"
Module_Version          SETA    34
d17 2
a18 2
Module_Date             SETS    "07 Jan 2012"
Module_ApplicationDate  SETS    "07-Jan-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.34"
Module_HelpVersion      SETS    "0.34 (07 Jan 2012)"
@


1.36
log
@Store ROM distribution tool used with 5.16.
Ought to archive it somewhere!

Version 0.33. Tagged as 'Tungsten-0_33'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.33"
Module_Version          SETA    33
d17 2
a18 2
Module_Date             SETS    "01 Jan 2012"
Module_ApplicationDate  SETS    "01-Jan-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.33"
Module_HelpVersion      SETS    "0.33 (01 Jan 2012)"
@


1.35
log
@Update to support alternate HAL sizes
Detail:
  s/Boot, s/Top - Now uses OSROM_HALSize for the HAL size instead of fixed 64K constant.
Admin:
  Tested in ROM softload with 64K & 32K HAL sizes.
  However, Aemulor doesn't seem to like a 32K HAL size.


Version 0.32. Tagged as 'Tungsten-0_32'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.32"
Module_Version          SETA    32
d17 2
a18 2
Module_Date             SETS    "06 Dec 2011"
Module_ApplicationDate  SETS    "06-Dec-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.32"
Module_HelpVersion      SETS    "0.32 (06 Dec 2011)"
@


1.34
log
@Fix HAL_UARTModemControl
Detail:
  s/UART - Fixed HAL_UARTModemControl to pay attention to the 'mask' parameter
Admin:
  Tested in Iyonix ROM softload


Version 0.31. Tagged as 'Tungsten-0_31'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.31"
Module_Version          SETA    31
d17 2
a18 2
Module_Date             SETS    "04 Dec 2011"
Module_ApplicationDate  SETS    "04-Dec-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.31"
Module_HelpVersion      SETS    "0.31 (04 Dec 2011)"
@


1.33
log
@Update keyboard scanning to work with new kernel changes
Detail:
  c/USBHAL, h/USBHAL - Updated HAL_KbdScanInterrupt to follow the behaviour that the kernel expects. The interrupting device number is passed in in a1, and the function should return a1 unmodified if the device is unrecognised, or -1 if the interrupt was handled.
Admin:
  Tested in ROM on Iyonix


Version 0.30. Tagged as 'Tungsten-0_30'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.30"
Module_Version          SETA    30
d17 2
a18 2
Module_Date             SETS    "26 Nov 2011"
Module_ApplicationDate  SETS    "26-Nov-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.30"
Module_HelpVersion      SETS    "0.30 (26 Nov 2011)"
@


1.32
log
@Tweak debug code
Detail:
  hdr/80321 - Improved notes about debug options.
  s/Boot - Don't reinit UART 3 if it's already in use for debugging
  s/Top, hdr/80321 - Use new FlashCheckInDebug option to help work out whether flash check failure code is called
  s/UART - Disable HAL UART API if UART 3 is in use for debugging
Admin:
  Tested in ROM softload


Version 0.29. Tagged as 'Tungsten-0_29'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.29"
Module_Version          SETA    29
d17 2
a18 2
Module_Date             SETS    "08 Aug 2011"
Module_ApplicationDate  SETS    "08-Aug-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.29"
Module_HelpVersion      SETS    "0.29 (08 Aug 2011)"
@


1.31
log
@Incremented version number, no other change.
Previous changes were untagged, but incrementing the version number gives
us a tag we can associate with the official RISC OS 5.16 release.

Version 0.28. Tagged as 'Tungsten-0_28'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.28"
Module_Version          SETA    28
d17 2
a18 2
Module_Date             SETS    "19 Jan 2010"
Module_ApplicationDate  SETS    "19-Jan-10"
d21 2
a22 2
Module_FullVersion      SETS    "0.28"
Module_HelpVersion      SETS    "0.28 (19 Jan 2010)"
@


1.30
log
@  GET file pathnames changed
Detail:
  Uses suffixed file extensions for compatiblity with both objasm and asasm.
Admin:
  Supplied by Peter Naulls, tested at ROOL

Version 0.27. Not tagged
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.27"
Module_Version          SETA    27
d17 2
a18 2
Module_Date             SETS    "11 Jun 2009"
Module_ApplicationDate  SETS    "11-Jun-09"
d21 2
a22 2
Module_FullVersion      SETS    "0.27"
Module_HelpVersion      SETS    "0.27 (11 Jun 2009)"
@


1.29
log
@  Added Tungsten ROM flash programmer / ROM image distribution application
Detail:
  Minimally automated - currently needs tweaking for every ROM release.
  When you've done a Tungsten ROM build and you want to release it, run
  Tungsten.utils.ROMDistrib.!MkInstall and it will create the !ROMxxx
  application in RiscOS.Install for you.
Admin:
  To be tested...

Version 0.27. Tagged as 'Tungsten-0_27'
@
text
@d17 2
a18 2
Module_Date             SETS    "23 Apr 2009"
Module_ApplicationDate  SETS    "23-Apr-09"
d22 1
a22 1
Module_HelpVersion      SETS    "0.27 (23 Apr 2009)"
@


1.28
log
@  Fixed a few bugs in the interrupt code I noticed in passing.
Detail:
  * HAL_IRQStatus would always return 0 for 80321 devices
  * HAL_FIQEnable/HAL_FIQDisable got their maths wrong and adjusted an
    unhelpful bit pattern of device enable flags in the FIQ controller
Admin:
  Not tested

Version 0.26. Tagged as 'Tungsten-0_26'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.26"
Module_Version          SETA    26
d17 2
a18 2
Module_Date             SETS    "22 Dec 2008"
Module_ApplicationDate  SETS    "22-Dec-08"
d21 2
a22 2
Module_FullVersion      SETS    "0.26"
Module_HelpVersion      SETS    "0.26 (22 Dec 2008)"
@


1.27
log
@	Removed 'AGP disable code' in PCITung.c .. sound idea.. but
	it wasn't reliable.
Detail:
Admin:


Version 0.25. Tagged as 'Tungsten-0_25'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.2.
d14 2
a15 2
Module_MajorVersion     SETS    "0.25"
Module_Version          SETA    25
d17 2
a18 2
Module_Date             SETS    "04 Dec 2005"
Module_ApplicationDate  SETS    "04-Dec-05"
d20 3
a22 3
Module_ComponentPath    SETS    "RiscOS/Sources/HAL/Tungsten"
Module_FullVersion      SETS    "0.25"
Module_HelpVersion      SETS    "0.25 (04 Dec 2005)"
@


1.26
log
@	corrected h.pci, wrong file committed in v0.23
Detail:
Admin:


Version 0.24. Tagged as 'Tungsten-0_24'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.24"
Module_Version          SETA    24
d17 2
a18 2
Module_Date             SETS    "11 Aug 2005"
Module_ApplicationDate  SETS    "11-Aug-05"
d21 2
a22 2
Module_FullVersion      SETS    "0.24"
Module_HelpVersion      SETS    "0.24 (11 Aug 2005)"
@


1.25
log
@	Ensure debug is turned off by default.
	Added code to ensure any video card is forced into
	PCI (not AGP) mode before PCI Enumeration.
Detail:
	now writes graphics card AGP Command register to 0
	to ensure card is in PCI mode. This is to help overcome
	an issue seen occasionally on Tungsten.
Admin:  in test at CTL


Version 0.23. Tagged as 'Tungsten-0_23'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.23"
Module_Version          SETA    23
d21 2
a22 2
Module_FullVersion      SETS    "0.23"
Module_HelpVersion      SETS    "0.23 (11 Aug 2005)"
@


1.24
log
@Moved Tungsten-specific setup code out of PCI.c into PCItung.c.
pci_initialise() in pci.c now calls pci_platform_setup() - for the benefit
of other HALs.

Version 0.22. Tagged as 'Tungsten-0_22'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.22"
Module_Version          SETA    22
d17 2
a18 2
Module_Date             SETS    "25 Jan 2005"
Module_ApplicationDate  SETS    "25-Jan-05"
d21 2
a22 2
Module_FullVersion      SETS    "0.22"
Module_HelpVersion      SETS    "0.22 (25 Jan 2005)"
@


1.23
log
@        updated video_features to indicate no vsync supplied
Detail:
Admin:
        tested at castle
        castle added IP


Version 0.21. Tagged as 'Tungsten-0_21'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.68.
d14 2
a15 2
Module_MajorVersion     SETS    "0.21"
Module_Version          SETA    21
d17 2
a18 2
Module_Date             SETS    "02 Nov 2004"
Module_ApplicationDate  SETS    "02-Nov-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.21"
Module_HelpVersion      SETS    "0.21 (02 Nov 2004)"
@


1.22
log
@       added HAL entry for HAL_Video_IIC_Op
Detail:
Admin:
    jb .. castle IP

Version 0.20. Tagged as 'Tungsten-0_20'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.20"
Module_Version          SETA    20
d17 2
a18 2
Module_Date             SETS    "29 Oct 2004"
Module_ApplicationDate  SETS    "29-Oct-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.20"
Module_HelpVersion      SETS    "0.20 (29 Oct 2004)"
@


1.21
log
@   HAL High level IIC checksumming did not initialise checksum to
   zero at start of read block
Detail:
   s.IIC changed to initialise checksum to zero close to 'next_transaction'
   label
Admin:
   verified at castle
   castle added IP


Version 0.19. Tagged as 'Tungsten-0_19'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.19"
Module_Version          SETA    19
d17 2
a18 2
Module_Date             SETS    "08 Sep 2004"
Module_ApplicationDate  SETS    "08-Sep-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.19"
Module_HelpVersion      SETS    "0.19 (08 Sep 2004)"
@


1.20
log
@Split USB and PCI parts of HAL into hardware-specific and generic parts.
The generic parts are included by other HALs.

Version 0.18. Tagged as 'Tungsten-0_18'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.18"
Module_Version          SETA    18
d17 2
a18 2
Module_Date             SETS    "30 Jun 2004"
Module_ApplicationDate  SETS    "30-Jun-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.18"
Module_HelpVersion      SETS    "0.18 (30 Jun 2004)"
@


1.19
log
@HAL_TimerDevice returned wrong result for Timer 1.

Version 0.17. Tagged as 'Tungsten-0_17'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.17"
Module_Version          SETA    17
d17 2
a18 2
Module_Date             SETS    "16 Feb 2004"
Module_ApplicationDate  SETS    "16-Feb-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.17"
Module_HelpVersion      SETS    "0.17 (16 Feb 2004)"
@


1.18
log
@Minor change required in order to build with cc 5.55

Version 0.16. Tagged as 'Tungsten-0_16'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.2.
d14 2
a15 2
Module_MajorVersion     SETS    "0.16"
Module_Version          SETA    16
d17 2
a18 2
Module_Date             SETS    "16 Jan 2004"
Module_ApplicationDate  SETS    "16-Jan-04"
d21 2
a22 2
Module_FullVersion      SETS    "0.16"
Module_HelpVersion      SETS    "0.16 (16 Jan 2004)"
@


1.17
log
@Add copyright message to c.PCI,move a comment.

Version 0.15. Tagged as 'Tungsten-0_15'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.68.
d14 2
a15 2
Module_MajorVersion     SETS    "0.15"
Module_Version          SETA    15
d17 2
a18 2
Module_Date             SETS    "15 Apr 2003"
Module_ApplicationDate  SETS    "15-Apr-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.15"
Module_HelpVersion      SETS    "0.15 (15 Apr 2003)"
@


1.16
log
@First venture into the world of message signalled interrupts (s.MSI).
High speed RAM clear added using AAU in the XScale.
Tighten up check on RAM modules to reject some 4 bit wide devices.
Fix for CMOS protect link being ignored.
Add table returned by ReadPhysicalMemory.
New poke to move sound DMA into the top half of physical memory.
PCI rewrite.

Version 0.14. Tagged as 'Tungsten-0_14'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.14"
Module_Version          SETA    14
d21 2
a22 2
Module_FullVersion      SETS    "0.14"
Module_HelpVersion      SETS    "0.14 (15 Apr 2003)"
@


1.15
log
@Kevin's new PCI enumeration C.
Kevin's UART control for DualSerial to talk to.
Completion of flash recovery stuff - it now flashes the floppy drive
light appropriately then requests a new OS image down the serial port
but is careful never to erase itself.To allow this has required some
shuffling to ensure the first 8k of binary is fixed and makes no
external calls - "s.Top" arranges this and effectively moves the
HAL up 8k in ROM.

Version 0.13. Tagged as 'Tungsten-0_13'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.13"
Module_Version          SETA    13
d17 2
a18 2
Module_Date             SETS    "23 Feb 2003"
Module_ApplicationDate  SETS    "23-Feb-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.13"
Module_HelpVersion      SETS    "0.13 (23 Feb 2003)"
@


1.14
log
@Added HAL devices for the sound system (controller and mixer). Requires
today's kernel to build. Required by today's SoundDMA and SoundControl in
order to function correctly at run-time.

Version 0.12. Tagged as 'Tungsten-0_12'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.12"
Module_Version          SETA    12
d17 2
a18 2
Module_Date             SETS    "21 Feb 2003"
Module_ApplicationDate  SETS    "21-Feb-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.12"
Module_HelpVersion      SETS    "0.12 (21 Feb 2003)"
@


1.13
log
@Random check in as it's been rather a long time and I don't trust
people's harddiscs.
Changes for DMA support (s.ATA)
Bug fix to HAL Counter info,it only worked if R0=0 on entry - spotted
by Dan Ellis
Power on <key held down> support in C.USBHAL and H.USBHAL
Reads the CMOS lock jumper
The beginnings of flash recovery code
Some code tidy ups and documentation updates

Version 0.11. Tagged as 'Tungsten-0_11'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.11"
Module_Version          SETA    11
d17 2
a18 2
Module_Date             SETS    "16 Feb 2003"
Module_ApplicationDate  SETS    "16-Feb-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.11"
Module_HelpVersion      SETS    "0.11 (16 Feb 2003)"
@


1.12
log
@  DMA changes.
Detail:
  * Extended HAL_ATAControllerInfo to return information for the creation of
    IDE bus mastering devices (to interface with the DMA Manager).
  * Removed some obsolete code from the M1535+ legacy DMA controller device,
    and changed it to use the ID codes exported from Kernel-5_35-4_79_2_54.
Admin:
  Tested on Tungsten.

Version 0.10. Tagged as 'Tungsten-0_10'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.10"
Module_Version          SETA    10
d17 2
a18 2
Module_Date             SETS    "22 Jan 2003"
Module_ApplicationDate  SETS    "22-Jan-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.10"
Module_HelpVersion      SETS    "0.10 (22 Jan 2003)"
@


1.11
log
@Bugfixes:
* XINT0 could not be masked using HAL_IRQDisable() (a hangover from a
  RevA hardware workaround)
* SlotTablePrototype wasn't correct

Version 0.09. Tagged as 'Tungsten-0_09'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.09"
Module_Version          SETA    9
d17 2
a18 2
Module_Date             SETS    "20 Jan 2003"
Module_ApplicationDate  SETS    "20-Jan-03"
d21 2
a22 2
Module_FullVersion      SETS    "0.09"
Module_HelpVersion      SETS    "0.09 (20 Jan 2003)"
@


1.10
log
@ATA setup now extended to handle setting of multiword and Ultra DMA modes.
If the PCI-PCI bridge is the Intel 21154, Hint HB2 or Pericom device, then
it deactivates unused clock outputs, and assigns the PCI-PCI bridge and
super-IO chip to the high-priority arbiter group.

Version 0.08. Tagged as 'Tungsten-0_08'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.08"
Module_Version          SETA    8
d17 2
a18 2
Module_Date             SETS    "13 Dec 2002"
Module_ApplicationDate  SETS    "13-Dec-02"
d21 2
a22 2
Module_FullVersion      SETS    "0.08"
Module_HelpVersion      SETS    "0.08 (13 Dec 2002)"
@


1.9
log
@  Support for latest DMA Manager module, plus some housekeeping.
Detail:
  * Removed obsolete DMA-related HAL entries (no longer required by latest
    DMA Manager).
  * Device location field now correctly constructed at initialisation time.
  * Some device entries moved around / removed (see today's DMA Manager log).
  * DMA channels now registered in reverse order, so that they come out the
    "right way" round when enumerated using SWI OS_Hardware 4.
  * Slapped various bits of C around so that they compile without warnings.
Admin:
  Tested.

Version 0.07. Tagged as 'Tungsten-0_07'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.07"
Module_Version          SETA    7
d21 2
a22 2
Module_FullVersion      SETS    "0.07"
Module_HelpVersion      SETS    "0.07 (13 Dec 2002)"
@


1.8
log
@Changed to activate UART3 instead of UART2. UART3 used for HAL debugging.

Version 0.06. Tagged as 'Tungsten-0_06'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.06"
Module_Version          SETA    6
d17 2
a18 2
Module_Date             SETS    "27 Nov 2002"
Module_ApplicationDate  SETS    "27-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "0.06"
Module_HelpVersion      SETS    "0.06 (27 Nov 2002)"
@


1.7
log
@Change to new IIC address
Uncommented HAL_SuperIOInfo,fixes bug report of ReadSysInfo 3
returning garbled R0.
Misc other serial port changes.

Version 0.05. Tagged as 'Tungsten-0_05'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.05"
Module_Version          SETA    5
d17 2
a18 2
Module_Date             SETS    "18 Nov 2002"
Module_ApplicationDate  SETS    "18-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "0.05"
Module_HelpVersion      SETS    "0.05 (18 Nov 2002)"
@


1.6
log
@HAL_PlatformInfo and HAL_CleanerSpace were the wrong way round in the HAL
entries table, so the HAL wouldn't build.

Retagged as 'Tungsten-0_04'

Version 0.04. Not tagged
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.04"
Module_Version          SETA    4
d17 2
a18 2
Module_Date             SETS    "17 Oct 2002"
Module_ApplicationDate  SETS    "17-Oct-02"
d21 2
a22 2
Module_FullVersion      SETS    "0.04"
Module_HelpVersion      SETS    "0.04 (17 Oct 2002)"
@


1.5
log
@  Now registers DMA devices with the kernel.
Detail:
  * Old temporary DMA HAL entries maintained for the time being.
  * DMA init now done during HAL_InitDevices instead of HAL_Init.
Admin:
  Requires new kernel.

Version 0.04. Tagged as 'Tungsten-0_04'
@
text
@d17 2
a18 2
Module_Date             SETS    "16 Oct 2002"
Module_ApplicationDate  SETS    "16-Oct-02"
d22 1
a22 1
Module_HelpVersion      SETS    "0.04 (16 Oct 2002)"
@


1.4
log
@Added support for soft power off
Now report this via HAL_PlatformInfo to the Kernel

Version 0.03. Tagged as 'Tungsten-0_03'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.03"
Module_Version          SETA    3
d17 2
a18 2
Module_Date             SETS    "15 Oct 2002"
Module_ApplicationDate  SETS    "15-Oct-02"
d21 2
a22 2
Module_FullVersion      SETS    "0.03"
Module_HelpVersion      SETS    "0.03 (15 Oct 2002)"
@


1.3
log
@  Added code to drive the M1535's "legacy" DMA controller for floppies etc.
Detail:
  At the moment, this is only using HAL entries that are hard-coded to the
  M1535 routines, eventually this should be chaned to use the kernel's device
  APIs.
Admin:
  Also creates/removes build directories as required.

Version 0.02. Tagged as 'Tungsten-0_02'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.02"
Module_Version          SETA    2
d21 2
a22 2
Module_FullVersion      SETS    "0.02"
Module_HelpVersion      SETS    "0.02 (15 Oct 2002)"
@


1.2
log
@Initial check-in.

Version 0.01. Tagged as 'Tungsten-0_01'
@
text
@d10 1
a10 2
                        GBLS    Module_ApplicationDate2
                        GBLS    Module_ApplicationDate4
d14 2
a15 2
Module_MajorVersion     SETS    "0.01"
Module_Version          SETA    1
d17 2
a18 3
Module_Date             SETS    "07 Oct 2002"
Module_ApplicationDate2 SETS    "07-Oct-02"
Module_ApplicationDate4 SETS    "07-Oct-2002"
d21 2
a22 2
Module_FullVersion      SETS    "0.01"
Module_HelpVersion      SETS    "0.01 (07 Oct 2002)"
@


1.1
log
@created by srccommit.
@
text
@d15 2
a16 2
Module_MajorVersion     SETS    "0.00"
Module_Version          SETA    0
d23 2
a24 2
Module_FullVersion      SETS    "0.00"
Module_HelpVersion      SETS    "0.00 (07 Oct 2002)"
@

