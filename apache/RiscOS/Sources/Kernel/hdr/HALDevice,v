head	4.3;
access;
symbols
	Kernel-6_14:4.3
	Kernel-6_01-3:4.1
	Kernel-6_13:4.3
	Kernel-6_12:4.3
	Kernel-6_11:4.3
	Kernel-6_10:4.3
	Kernel-6_09:4.3
	Kernel-6_08-4_129_2_10:4.1.2.2
	Kernel-6_08-4_129_2_9:4.1.2.2
	Kernel-6_08:4.2
	Kernel-6_07:4.2
	Kernel-6_06:4.2
	Kernel-6_05-4_129_2_8:4.1.2.2
	Kernel-6_05:4.2
	Kernel-6_04:4.1
	Kernel-6_03:4.1
	Kernel-6_01-2:4.1
	Kernel-6_01-4_146_2_1:4.1
	Kernel-6_02:4.1
	Kernel-6_01-1:4.1
	Kernel-6_01:4.1
	Kernel-6_00:4.1
	Kernel-5_99:4.1
	Kernel-5_98:4.1
	Kernel-5_97-4_129_2_7:4.1.2.1
	Kernel-5_97:4.1
	Kernel-5_96:4.1
	Kernel-5_95:4.1
	Kernel-5_94:4.1
	Kernel-5_93:4.1
	Kernel-5_92:4.1
	Kernel-5_91:4.1
	Kernel-5_90:4.1
	Kernel-5_89-4_129_2_6:4.1.2.1
	Kernel-5_89:4.1
	Kernel-5_88-4_129_2_5:4.1.2.1
	Kernel-5_88-4_129_2_4:4.1.2.1
	Kernel-5_88:4.1
	Kernel-5_87:4.1
	Kernel-5_86-4_129_2_3:4.1.2.1
	Kernel-5_86-4_129_2_2:4.1.2.1
	Kernel-5_86-4_129_2_1:4.1
	Kernel-5_86:4.1
	SMP:4.1.0.2
	SMP_bp:4.1
	Kernel-5_85:4.1
	Kernel-5_54-1:4.1
	Kernel-5_84:4.1
	Kernel-5_83:4.1
	Kernel-5_82:4.1
	Kernel-5_81:4.1
	Kernel-5_80:4.1
	Kernel-5_79:4.1
	Kernel-5_78:4.1
	Kernel-5_77:4.1
	Kernel-5_76:4.1
	Kernel-5_75:4.1
	Kernel-5_74:4.1
	Kernel-5_73:4.1
	Kernel-5_72:4.1
	Kernel-5_71:4.1
	Kernel-5_70:4.1
	Kernel-5_69:4.1
	Kernel-5_68:4.1
	Kernel-5_67:4.1
	Kernel-5_66:4.1
	Kernel-5_65:4.1
	Kernel-5_64:4.1
	Kernel-5_63:4.1
	Kernel-5_62:4.1
	Kernel-5_61:4.1
	Kernel-5_60:4.1
	Kernel-5_59:4.1
	Kernel-5_58:4.1
	Kernel-5_57:4.1
	Kernel-5_56:4.1
	Kernel-5_55:4.1
	Kernel-5_54:4.1
	Kernel-5_53:4.1
	Kernel-5_52:4.1
	Kernel-5_51:4.1
	Kernel-5_50:4.1
	Kernel-5_49:4.1
	HAL_merge:1.1.2.34
	Kernel-5_48:4.1
	Kernel-5_35-4_79_2_327:1.1.2.34
	Kernel-5_35-4_79_2_326:1.1.2.34
	Kernel-5_35-4_79_2_325:1.1.2.34
	Kernel-5_35-4_79_2_324:1.1.2.34
	Kernel-5_35-4_79_2_323:1.1.2.34
	Kernel-5_35-4_79_2_322:1.1.2.34
	Kernel-5_35-4_79_2_321:1.1.2.34
	Kernel-5_35-4_79_2_320:1.1.2.34
	Kernel-5_35-4_79_2_319:1.1.2.34
	Kernel-5_35-4_79_2_318:1.1.2.34
	Kernel-5_35-4_79_2_317:1.1.2.34
	Kernel-5_35-4_79_2_316:1.1.2.34
	Kernel-5_35-4_79_2_315:1.1.2.34
	Kernel-5_35-4_79_2_314:1.1.2.34
	Kernel-5_35-4_79_2_313:1.1.2.34
	Kernel-5_35-4_79_2_312:1.1.2.34
	Kernel-5_35-4_79_2_311:1.1.2.34
	Kernel-5_35-4_79_2_310:1.1.2.34
	Kernel-5_35-4_79_2_309:1.1.2.33
	Kernel-5_35-4_79_2_308:1.1.2.33
	Kernel-5_35-4_79_2_307:1.1.2.33
	Kernel-5_35-4_79_2_306:1.1.2.33
	Kernel-5_35-4_79_2_305:1.1.2.33
	Kernel-5_35-4_79_2_304:1.1.2.33
	Kernel-5_35-4_79_2_303:1.1.2.33
	Kernel-5_35-4_79_2_302:1.1.2.33
	Kernel-5_35-4_79_2_301:1.1.2.33
	Kernel-5_35-4_79_2_300:1.1.2.32
	Kernel-5_35-4_79_2_299:1.1.2.31
	Kernel-5_35-4_79_2_298:1.1.2.30
	Kernel-5_35-4_79_2_297:1.1.2.30
	Kernel-5_35-4_79_2_296:1.1.2.29
	Kernel-5_35-4_79_2_295:1.1.2.29
	Kernel-5_35-4_79_2_294:1.1.2.29
	Kernel-5_35-4_79_2_293:1.1.2.29
	Kernel-5_35-4_79_2_292:1.1.2.29
	Kernel-5_35-4_79_2_291:1.1.2.29
	Kernel-5_35-4_79_2_290:1.1.2.29
	Kernel-5_35-4_79_2_289:1.1.2.29
	Kernel-5_35-4_79_2_288:1.1.2.29
	Kernel-5_35-4_79_2_287:1.1.2.29
	Kernel-5_35-4_79_2_286:1.1.2.29
	Kernel-5_35-4_79_2_285:1.1.2.29
	Kernel-5_35-4_79_2_284:1.1.2.29
	Kernel-5_35-4_79_2_283:1.1.2.29
	Kernel-5_35-4_79_2_282:1.1.2.29
	Kernel-5_35-4_79_2_281:1.1.2.29
	Kernel-5_35-4_79_2_280:1.1.2.29
	Kernel-5_35-4_79_2_279:1.1.2.29
	Kernel-5_35-4_79_2_278:1.1.2.29
	Kernel-5_35-4_79_2_277:1.1.2.29
	Kernel-5_35-4_79_2_276:1.1.2.29
	Kernel-5_35-4_79_2_275:1.1.2.29
	Kernel-5_35-4_79_2_274:1.1.2.28
	Kernel-5_35-4_79_2_273:1.1.2.28
	Kernel-5_35-4_79_2_272:1.1.2.28
	Kernel-5_35-4_79_2_271:1.1.2.27
	Kernel-5_35-4_79_2_270:1.1.2.27
	Kernel-5_35-4_79_2_269:1.1.2.27
	Kernel-5_35-4_79_2_268:1.1.2.27
	Kernel-5_35-4_79_2_267:1.1.2.27
	Kernel-5_35-4_79_2_266:1.1.2.27
	Kernel-5_35-4_79_2_265:1.1.2.27
	Kernel-5_35-4_79_2_264:1.1.2.27
	Kernel-5_35-4_79_2_263:1.1.2.27
	Kernel-5_35-4_79_2_262:1.1.2.27
	Kernel-5_35-4_79_2_261:1.1.2.27
	Kernel-5_35-4_79_2_260:1.1.2.27
	Kernel-5_35-4_79_2_259:1.1.2.27
	Kernel-5_35-4_79_2_258:1.1.2.27
	Kernel-5_35-4_79_2_257:1.1.2.27
	Kernel-5_35-4_79_2_256:1.1.2.27
	Kernel-5_35-4_79_2_255:1.1.2.27
	Kernel-5_35-4_79_2_254:1.1.2.27
	Kernel-5_35-4_79_2_253:1.1.2.27
	Kernel-5_35-4_79_2_252:1.1.2.27
	Kernel-5_35-4_79_2_251:1.1.2.26
	Kernel-5_35-4_79_2_250:1.1.2.26
	Kernel-5_35-4_79_2_249:1.1.2.26
	Kernel-5_35-4_79_2_248:1.1.2.25
	Kernel-5_35-4_79_2_247:1.1.2.25
	Kernel-5_35-4_79_2_246:1.1.2.25
	Kernel-5_35-4_79_2_245:1.1.2.25
	Kernel-5_35-4_79_2_244:1.1.2.25
	Kernel-5_35-4_79_2_243:1.1.2.25
	Kernel-5_35-4_79_2_242:1.1.2.25
	Kernel-5_35-4_79_2_241:1.1.2.25
	Kernel-5_35-4_79_2_240:1.1.2.24
	Kernel-5_35-4_79_2_239:1.1.2.23
	Kernel-5_35-4_79_2_238:1.1.2.23
	Kernel-5_35-4_79_2_237:1.1.2.23
	Kernel-5_35-4_79_2_236:1.1.2.23
	Kernel-5_35-4_79_2_235:1.1.2.23
	Kernel-5_35-4_79_2_234:1.1.2.23
	Kernel-5_35-4_79_2_233:1.1.2.23
	Kernel-5_35-4_79_2_232:1.1.2.22
	Kernel-5_35-4_79_2_231:1.1.2.21
	Kernel-5_35-4_79_2_230:1.1.2.21
	Kernel-5_35-4_79_2_229:1.1.2.21
	Kernel-5_35-4_79_2_228:1.1.2.21
	Kernel-5_35-4_79_2_227:1.1.2.21
	Kernel-5_35-4_79_2_226:1.1.2.21
	Kernel-5_35-4_79_2_225:1.1.2.21
	Kernel-5_35-4_79_2_224:1.1.2.21
	Kernel-5_35-4_79_2_223:1.1.2.21
	Kernel-5_35-4_79_2_222:1.1.2.21
	Kernel-5_35-4_79_2_221:1.1.2.21
	Kernel-5_35-4_79_2_220:1.1.2.21
	Kernel-5_35-4_79_2_219:1.1.2.21
	Kernel-5_35-4_79_2_218:1.1.2.21
	Kernel-5_35-4_79_2_217:1.1.2.21
	Kernel-5_35-4_79_2_216:1.1.2.20
	Kernel-5_35-4_79_2_215:1.1.2.20
	Kernel-5_35-4_79_2_214:1.1.2.20
	Kernel-5_35-4_79_2_213:1.1.2.20
	Kernel-5_35-4_79_2_212:1.1.2.20
	Kernel-5_35-4_79_2_211:1.1.2.20
	Kernel-5_35-4_79_2_210:1.1.2.20
	Kernel-5_35-4_79_2_209:1.1.2.20
	Kernel-5_35-4_79_2_208:1.1.2.20
	Kernel-5_35-4_79_2_207:1.1.2.20
	Kernel-5_35-4_79_2_206:1.1.2.20
	Kernel-5_35-4_79_2_205:1.1.2.20
	Kernel-5_35-4_79_2_204:1.1.2.20
	Kernel-5_35-4_79_2_203:1.1.2.20
	Kernel-5_35-4_79_2_202:1.1.2.20
	Kernel-5_35-4_79_2_201:1.1.2.20
	Kernel-5_35-4_79_2_200:1.1.2.20
	Kernel-5_35-4_79_2_199:1.1.2.20
	Kernel-5_35-4_79_2_198:1.1.2.19
	Kernel-5_35-4_79_2_197:1.1.2.19
	Kernel-5_35-4_79_2_196:1.1.2.19
	Kernel-5_35-4_79_2_195:1.1.2.19
	Kernel-5_35-4_79_2_194:1.1.2.19
	Kernel-5_35-4_79_2_193:1.1.2.19
	Kernel-5_35-4_79_2_192:1.1.2.19
	Kernel-5_35-4_79_2_191:1.1.2.18
	Kernel-5_35-4_79_2_190:1.1.2.18
	Kernel-5_35-4_79_2_189:1.1.2.18
	Kernel-5_35-4_79_2_188:1.1.2.18
	Kernel-5_35-4_79_2_187:1.1.2.18
	Kernel-5_35-4_79_2_186:1.1.2.18
	Kernel-5_35-4_79_2_185:1.1.2.18
	Kernel-5_35-4_79_2_184:1.1.2.18
	Kernel-5_35-4_79_2_183:1.1.2.18
	Kernel-5_35-4_79_2_182:1.1.2.18
	Kernel-5_35-4_79_2_181:1.1.2.18
	Kernel-5_35-4_79_2_180:1.1.2.18
	Kernel-5_35-4_79_2_179:1.1.2.18
	Kernel-5_35-4_79_2_178:1.1.2.18
	Kernel-5_35-4_79_2_177:1.1.2.18
	Kernel-5_35-4_79_2_176:1.1.2.17
	Kernel-5_35-4_79_2_175:1.1.2.17
	Kernel-5_35-4_79_2_174:1.1.2.15
	Kernel-5_35-4_79_2_173:1.1.2.14
	Kernel-5_35-4_79_2_172:1.1.2.14
	Kernel-5_35-4_79_2_171:1.1.2.14
	Kernel-5_35-4_79_2_170:1.1.2.14
	Kernel-5_35-4_79_2_169:1.1.2.14
	Kernel-5_35-4_79_2_168:1.1.2.14
	Kernel-5_35-4_79_2_167:1.1.2.13
	Kernel-5_35-4_79_2_166:1.1.2.13
	Kernel-5_35-4_79_2_165:1.1.2.12
	RPi_merge:1.1.2.9.2.5
	Kernel-5_35-4_79_2_147_2_23:1.1.2.9.2.5
	Kernel-5_35-4_79_2_147_2_22:1.1.2.9.2.5
	Kernel-5_35-4_79_2_147_2_21:1.1.2.9.2.4
	Kernel-5_35-4_79_2_147_2_20:1.1.2.9.2.4
	Kernel-5_35-4_79_2_147_2_19:1.1.2.9.2.4
	Kernel-5_35-4_79_2_147_2_18:1.1.2.9.2.4
	Kernel-5_35-4_79_2_164:1.1.2.11
	Kernel-5_35-4_79_2_163:1.1.2.10
	Kernel-5_35-4_79_2_147_2_17:1.1.2.9.2.4
	Kernel-5_35-4_79_2_147_2_16:1.1.2.9.2.3
	Kernel-5_35-4_79_2_147_2_15:1.1.2.9.2.2
	Kernel-5_35-4_79_2_162:1.1.2.10
	Kernel-5_35-4_79_2_161:1.1.2.10
	Kernel-5_35-4_79_2_147_2_14:1.1.2.9.2.1
	Kernel-5_35-4_79_2_147_2_13:1.1.2.9.2.1
	Kernel-5_35-4_79_2_160:1.1.2.10
	Kernel-5_35-4_79_2_159:1.1.2.10
	Kernel-5_35-4_79_2_158:1.1.2.10
	Kernel-5_35-4_79_2_157:1.1.2.10
	Kernel-5_35-4_79_2_156:1.1.2.10
	Kernel-5_35-4_79_2_147_2_12:1.1.2.9
	Kernel-5_35-4_79_2_147_2_11:1.1.2.9
	Kernel-5_35-4_79_2_155:1.1.2.10
	Kernel-5_35-4_79_2_147_2_10:1.1.2.9
	Kernel-5_35-4_79_2_154:1.1.2.10
	Kernel-5_35-4_79_2_153:1.1.2.10
	Kernel-5_35-4_79_2_147_2_9:1.1.2.9
	Kernel-5_35-4_79_2_152:1.1.2.9
	Kernel-5_35-4_79_2_151:1.1.2.9
	Kernel-5_35-4_79_2_147_2_8:1.1.2.9
	Kernel-5_35-4_79_2_147_2_7:1.1.2.9
	Kernel-5_35-4_79_2_150:1.1.2.9
	Kernel-5_35-4_79_2_147_2_6:1.1.2.9
	Kernel-5_35-4_79_2_147_2_5:1.1.2.9
	Kernel-5_35-4_79_2_149:1.1.2.9
	Kernel-5_35-4_79_2_147_2_4:1.1.2.9
	Kernel-5_35-4_79_2_147_2_3:1.1.2.9
	Kernel-5_35-4_79_2_148:1.1.2.9
	Kernel-5_35-4_79_2_147_2_2:1.1.2.9
	Kernel-5_35-4_79_2_147_2_1:1.1.2.9
	RPi:1.1.2.9.0.2
	RPi_bp:1.1.2.9
	Kernel-5_35-4_79_2_98_2_52_2_1:1.1.2.4.2.7
	alees_Kernel_dev:1.1.2.4.2.7.0.2
	alees_Kernel_dev_bp:1.1.2.4.2.7
	Kernel-5_35-4_79_2_147:1.1.2.9
	Kernel-5_35-4_79_2_146:1.1.2.9
	Kernel-5_35-4_79_2_145:1.1.2.9
	Kernel-5_35-4_79_2_144:1.1.2.8
	Kernel-5_35-4_79_2_143:1.1.2.8
	Kernel-5_35-4_79_2_142:1.1.2.8
	Kernel-5_35-4_79_2_141:1.1.2.8
	Kernel-5_35-4_79_2_140:1.1.2.8
	Kernel-5_35-4_79_2_139:1.1.2.8
	Kernel-5_35-4_79_2_138:1.1.2.8
	Kernel-5_35-4_79_2_137:1.1.2.7
	Kernel-5_35-4_79_2_136:1.1.2.7
	Kernel-5_35-4_79_2_135:1.1.2.7
	Kernel-5_35-4_79_2_134:1.1.2.7
	Kernel-5_35-4_79_2_133:1.1.2.7
	Kernel-5_35-4_79_2_132:1.1.2.7
	Kernel-5_35-4_79_2_131:1.1.2.7
	Kernel-5_35-4_79_2_130:1.1.2.7
	Kernel-5_35-4_79_2_129:1.1.2.7
	Kernel-5_35-4_79_2_128:1.1.2.7
	Kernel-5_35-4_79_2_127:1.1.2.7
	Kernel-5_35-4_79_2_126:1.1.2.7
	Kernel-5_35-4_79_2_125:1.1.2.7
	Kernel-5_35-4_79_2_124:1.1.2.7
	Kernel-5_35-4_79_2_123:1.1.2.7
	Cortex_merge:1.1.2.4.2.8
	Kernel-5_35-4_79_2_122:1.1.2.7
	Kernel-5_35-4_79_2_98_2_54:1.1.2.4.2.8
	Kernel-5_35-4_79_2_98_2_53:1.1.2.4.2.7
	Kernel-5_35-4_79_2_98_2_52:1.1.2.4.2.7
	Kernel-5_35-4_79_2_98_2_51:1.1.2.4.2.7
	Kernel-5_35-4_79_2_98_2_50:1.1.2.4.2.7
	Kernel-5_35-4_79_2_98_2_49:1.1.2.4.2.6
	Kernel-5_35-4_79_2_98_2_48:1.1.2.4.2.6
	Kernel-5_35-4_79_2_121:1.1.2.6
	Kernel-5_35-4_79_2_98_2_47:1.1.2.4.2.6
	Kernel-5_35-4_79_2_120:1.1.2.6
	Kernel-5_35-4_79_2_98_2_46:1.1.2.4.2.6
	Kernel-5_35-4_79_2_119:1.1.2.6
	Kernel-5_35-4_79_2_98_2_45:1.1.2.4.2.6
	Kernel-5_35-4_79_2_98_2_44:1.1.2.4.2.6
	Kernel-5_35-4_79_2_118:1.1.2.6
	Kernel-5_35-4_79_2_98_2_43:1.1.2.4.2.6
	Kernel-5_35-4_79_2_117:1.1.2.6
	Kernel-5_35-4_79_2_116:1.1.2.6
	Kernel-5_35-4_79_2_98_2_42:1.1.2.4.2.6
	Kernel-5_35-4_79_2_115:1.1.2.5
	Kernel-5_35-4_79_2_98_2_41:1.1.2.4.2.5
	Kernel-5_35-4_79_2_98_2_40:1.1.2.4.2.5
	Kernel-5_35-4_79_2_114:1.1.2.5
	Kernel-5_35-4_79_2_98_2_39:1.1.2.4.2.5
	Kernel-5_35-4_79_2_98_2_38:1.1.2.4.2.5
	Kernel-5_35-4_79_2_113:1.1.2.5
	Kernel-5_35-4_79_2_112:1.1.2.5
	Kernel-5_35-4_79_2_98_2_37:1.1.2.4.2.5
	Kernel-5_35-4_79_2_98_2_36:1.1.2.4.2.5
	Kernel-5_35-4_79_2_98_2_35:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_34:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_33:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_32:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_31:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_30:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_29:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_28:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_27:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_26:1.1.2.4.2.4
	Kernel-5_35-4_79_2_111:1.1.2.5
	Kernel-5_35-4_79_2_98_2_25:1.1.2.4.2.4
	Kernel-5_35-4_79_2_98_2_24:1.1.2.4.2.3
	Kernel-5_35-4_79_2_98_2_23:1.1.2.4.2.3
	Kernel-5_35-4_79_2_110:1.1.2.4
	Kernel-5_35-4_79_2_98_2_22:1.1.2.4.2.3
	Kernel-5_35-4_79_2_109:1.1.2.4
	Kernel-5_35-4_79_2_98_2_21:1.1.2.4.2.3
	Kernel-5_35-4_79_2_98_2_20:1.1.2.4.2.3
	Kernel-5_35-4_79_2_108:1.1.2.4
	Kernel-5_35-4_79_2_107:1.1.2.4
	Kernel-5_35-4_79_2_98_2_19:1.1.2.4.2.3
	Kernel-5_35-4_79_2_98_2_18:1.1.2.4.2.2
	Kernel-5_35-4_79_2_98_2_17:1.1.2.4.2.2
	Kernel-5_35-4_79_2_98_2_16:1.1.2.4.2.2
	Kernel-5_35-4_79_2_98_2_15:1.1.2.4.2.1
	Kernel-5_35-4_79_2_106:1.1.2.4
	Kernel-5_35-4_79_2_105:1.1.2.4
	Kernel-5_35-4_79_2_104:1.1.2.4
	Kernel-5_35-4_79_2_98_2_14:1.1.2.4.2.1
	Kernel-5_35-4_79_2_98_2_13:1.1.2.4.2.1
	Kernel-5_35-4_79_2_98_2_12:1.1.2.4.2.1
	Kernel-5_35-4_79_2_98_2_11:1.1.2.4.2.1
	Kernel-5_35-4_79_2_98_2_10:1.1.2.4
	Kernel-5_35-4_79_2_98_2_9:1.1.2.4
	Kernel-5_35-4_79_2_103:1.1.2.4
	Kernel-5_35-4_79_2_102:1.1.2.4
	Kernel-5_35-4_79_2_98_2_8:1.1.2.4
	Kernel-5_35-4_79_2_98_2_7:1.1.2.4
	Kernel-5_35-4_79_2_98_2_6:1.1.2.4
	Kernel-5_35-4_79_2_98_2_5:1.1.2.4
	Kernel-5_35-4_79_2_98_2_4:1.1.2.4
	Kernel-5_35-4_79_2_101:1.1.2.4
	Kernel-5_35-4_79_2_100:1.1.2.4
	Kernel-5_35-4_79_2_99:1.1.2.4
	Kernel-5_35-4_79_2_98_2_3:1.1.2.4
	Kernel-5_35-4_79_2_98_2_2:1.1.2.4
	Kernel-5_35-4_79_2_98_2_1:1.1.2.4
	Cortex:1.1.2.4.0.2
	Cortex_bp:1.1.2.4
	Kernel-5_35-4_79_2_98:1.1.2.4
	Kernel-5_35-4_79_2_97:1.1.2.4
	Kernel-5_35-4_79_2_96:1.1.2.4
	Kernel-5_35-4_79_2_95:1.1.2.4
	Kernel-5_35-4_79_2_94:1.1.2.4
	Kernel-5_35-4_79_2_93:1.1.2.4
	Kernel-5_35-4_79_2_92:1.1.2.4
	Kernel-5_35-4_79_2_91:1.1.2.4
	Kernel-5_35-4_79_2_90:1.1.2.4
	Kernel-5_35-4_79_2_89:1.1.2.4
	Kernel-5_35-4_79_2_88:1.1.2.4
	Kernel-5_35-4_79_2_87:1.1.2.4
	Kernel-5_35-4_79_2_86:1.1.2.4
	Kernel-5_35-4_79_2_85:1.1.2.4
	Kernel-5_35-4_79_2_84:1.1.2.4
	Kernel-5_35-4_79_2_83:1.1.2.4
	Kernel-5_35-4_79_2_82:1.1.2.4
	Kernel-5_35-4_79_2_81:1.1.2.4
	Kernel-5_35-4_79_2_80:1.1.2.4
	Kernel-5_35-4_79_2_79:1.1.2.4
	Kernel-5_35-4_79_2_78:1.1.2.4
	Kernel-5_35-4_79_2_77:1.1.2.4
	RO_5_07:1.1.2.4
	Kernel-5_35-4_79_2_76:1.1.2.4
	Kernel-5_35-4_79_2_75:1.1.2.4
	Kernel-5_35-4_79_2_74:1.1.2.4
	Kernel-5_35-4_79_2_73:1.1.2.4
	Kernel-5_35-4_79_2_72:1.1.2.4
	Kernel-5_35-4_79_2_71:1.1.2.4
	Kernel-5_35-4_79_2_70:1.1.2.4
	Kernel-5_35-4_79_2_69:1.1.2.4
	Kernel-5_35-4_79_2_68:1.1.2.4
	Kernel-5_35-4_79_2_67:1.1.2.4
	Kernel-5_35-4_79_2_66:1.1.2.4
	Kernel-5_35-4_79_2_65:1.1.2.4
	Kernel-5_35-4_79_2_64:1.1.2.4
	Kernel-5_35-4_79_2_63:1.1.2.4
	Kernel-5_35-4_79_2_62:1.1.2.4
	Kernel-5_35-4_79_2_61:1.1.2.4
	Kernel-5_35-4_79_2_59:1.1.2.4
	Kernel-5_35-4_79_2_58:1.1.2.4
	Kernel-5_35-4_79_2_57:1.1.2.4
	Kernel-5_35-4_79_2_56:1.1.2.4
	Kernel-5_35-4_79_2_55:1.1.2.3
	Kernel-5_35-4_79_2_54:1.1.2.3
	Kernel-5_35-4_79_2_53:1.1.2.2
	Kernel-5_35-4_79_2_52:1.1.2.2
	Kernel-5_35-4_79_2_51:1.1.2.1
	Kernel-5_35-4_79_2_50:1.1.2.1
	Kernel-5_35-4_79_2_49:1.1.2.1
	Kernel-5_35-4_79_2_48:1.1.2.1
	HAL:1.1.0.2;
locks; strict;
comment	@# @;


4.3
date	2018.07.07.14.06.26;	author jlee;	state Exp;
branches;
next	4.2;
commitid	VD8qInwgaJB98dJA;

4.2
date	2018.05.13.22.00.10;	author jballance;	state Exp;
branches;
next	4.1;
commitid	0Ad4ACl9Dw7iwbCA;

4.1
date	2016.06.30.20.07.58;	author jlee;	state Exp;
branches
	4.1.2.1;
next	1.1;
commitid	IWoXxARWeuLDOwcz;

1.1
date	2002.10.07.17.29.36;	author kbracey;	state dead;
branches
	1.1.2.1;
next	;

4.1.2.1
date	2017.07.29.11.13.05;	author jlee;	state Exp;
branches;
next	4.1.2.2;
commitid	E0o1zV5A8r2fc71A;

4.1.2.2
date	2018.05.14.19.33.40;	author jlee;	state Exp;
branches;
next	;
commitid	wrVtYH84nAz1GiCA;

1.1.2.1
date	2002.10.07.17.29.36;	author kbracey;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2002.12.13.17.38.11;	author bavison;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2003.01.22.14.50.27;	author bavison;	state Exp;
branches;
next	1.1.2.4;

1.1.2.4
date	2003.02.21.20.21.51;	author bavison;	state Exp;
branches
	1.1.2.4.2.1;
next	1.1.2.5;

1.1.2.5
date	2010.03.20.00.57.41;	author jlee;	state Exp;
branches;
next	1.1.2.6;

1.1.2.6
date	2011.08.01.19.22.43;	author jlee;	state Exp;
branches;
next	1.1.2.7;
commitid	W9KQSALkptyGgQtv;

1.1.2.7
date	2011.11.13.13.15.22;	author bavison;	state Exp;
branches;
next	1.1.2.8;
commitid	gvNF6YneLTqoTaHv;

1.1.2.8
date	2012.02.25.16.19.33;	author jlee;	state Exp;
branches;
next	1.1.2.9;
commitid	ad3WnPntkzrizyUv;

1.1.2.9
date	2012.04.08.22.23.13;	author jlee;	state Exp;
branches
	1.1.2.9.2.1;
next	1.1.2.10;
commitid	B0183mTQ4nlmc70w;

1.1.2.10
date	2012.06.18.20.17.52;	author rsprowson;	state Exp;
branches;
next	1.1.2.11;
commitid	KeuVX14bDnORde9w;

1.1.2.11
date	2012.08.20.20.48.24;	author jlee;	state Exp;
branches;
next	1.1.2.12;
commitid	2TpgJev4yQbPmkhw;

1.1.2.12
date	2012.09.18.22.01.12;	author jlee;	state Exp;
branches;
next	1.1.2.13;
commitid	eFa3Y1QY0MjZP3lw;

1.1.2.13
date	2012.09.21.15.04.59;	author jlee;	state Exp;
branches;
next	1.1.2.14;
commitid	d6gwHuzOJO4frplw;

1.1.2.14
date	2012.09.30.16.29.19;	author jlee;	state Exp;
branches;
next	1.1.2.15;
commitid	sRDLisRa5FxeCzmw;

1.1.2.15
date	2012.10.28.16.51.42;	author rsprowson;	state Exp;
branches;
next	1.1.2.16;
commitid	ruXZqdTJKJ85Qaqw;

1.1.2.16
date	2012.10.28.22.24.40;	author rsprowson;	state Exp;
branches;
next	1.1.2.17;
commitid	B9NnCK3waH5lGcqw;

1.1.2.17
date	2012.10.28.22.30.45;	author rsprowson;	state Exp;
branches;
next	1.1.2.18;
commitid	znpyLMlGF1EaIcqw;

1.1.2.18
date	2012.11.21.23.23.52;	author jlee;	state Exp;
branches;
next	1.1.2.19;
commitid	3OrXb9rCAj7Peitw;

1.1.2.19
date	2013.07.12.20.57.09;	author rsprowson;	state Exp;
branches;
next	1.1.2.20;
commitid	aRzoxDZelFL8WdXw;

1.1.2.20
date	2013.10.27.17.46.15;	author rsprowson;	state Exp;
branches;
next	1.1.2.21;
commitid	LTAQStOMyOaprXax;

1.1.2.21
date	2014.04.07.09.15.58;	author jballance;	state Exp;
branches;
next	1.1.2.22;
commitid	scbQTjK7SLtupJvx;

1.1.2.22
date	2014.07.26.08.25.44;	author jballance;	state Exp;
branches;
next	1.1.2.23;
commitid	XoVBn4TFlog2BRJx;

1.1.2.23
date	2014.07.31.11.18.01;	author jballance;	state Exp;
branches;
next	1.1.2.24;
commitid	xRA45v1MEqWbowKx;

1.1.2.24
date	2014.10.08.21.24.59;	author rsprowson;	state Exp;
branches;
next	1.1.2.25;
commitid	BL1tvnKpiUC4wrTx;

1.1.2.25
date	2014.10.18.19.06.25;	author jlee;	state Exp;
branches;
next	1.1.2.26;
commitid	XP7ttgn3mmcrrIUx;

1.1.2.26
date	2014.12.06.10.28.49;	author rsprowson;	state Exp;
branches;
next	1.1.2.27;
commitid	bHUalvxulCRc0Y0y;

1.1.2.27
date	2015.01.11.23.10.45;	author jlee;	state Exp;
branches;
next	1.1.2.28;
commitid	a9HNIsO4R7LP3F5y;

1.1.2.28
date	2015.07.26.18.48.54;	author jlee;	state Exp;
branches;
next	1.1.2.29;
commitid	MsaU2P7TfcjpjPuy;

1.1.2.29
date	2015.08.10.07.57.58;	author jballance;	state Exp;
branches;
next	1.1.2.30;
commitid	0neU531BSnMceHwy;

1.1.2.30
date	2015.11.07.18.50.32;	author rool;	state Exp;
branches;
next	1.1.2.31;
commitid	fatEKQJAzhHGYbIy;

1.1.2.31
date	2015.11.14.17.14.54;	author jlee;	state Exp;
branches;
next	1.1.2.32;
commitid	AQFG2wz0zKqWd5Jy;

1.1.2.32
date	2015.12.01.20.28.30;	author jlee;	state Exp;
branches;
next	1.1.2.33;
commitid	Eayw1rAkMCKtKhLy;

1.1.2.33
date	2016.01.05.21.29.10;	author rsprowson;	state Exp;
branches;
next	1.1.2.34;
commitid	1c4UwSKrWAexXMPy;

1.1.2.34
date	2016.03.25.19.53.40;	author jlee;	state Exp;
branches;
next	;
commitid	O8J0qDtpWkNmR30z;

1.1.2.4.2.1
date	2009.07.23.00.57.10;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.2;

1.1.2.4.2.2
date	2009.11.28.22.22.19;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.3;

1.1.2.4.2.3
date	2010.01.16.03.19.29;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.4;

1.1.2.4.2.4
date	2010.03.20.00.53.18;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.5;

1.1.2.4.2.5
date	2011.03.19.18.25.02;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.6;
commitid	Na7ovxBALQiWhucv;

1.1.2.4.2.6
date	2011.07.31.18.50.48;	author jlee;	state Exp;
branches;
next	1.1.2.4.2.7;
commitid	wkRt8xN38USJ7Itv;

1.1.2.4.2.7
date	2011.09.12.18.52.29;	author bavison;	state Exp;
branches;
next	1.1.2.4.2.8;
commitid	KJtDPjWMk0KCKezv;

1.1.2.4.2.8
date	2011.11.13.13.11.53;	author bavison;	state Exp;
branches;
next	;
commitid	4seOP18I4nobSaHv;

1.1.2.9.2.1
date	2012.07.07.19.28.56;	author jlee;	state Exp;
branches;
next	1.1.2.9.2.2;
commitid	aIRZWBHf5LdflFbw;

1.1.2.9.2.2
date	2012.07.20.00.51.53;	author bavison;	state Exp;
branches;
next	1.1.2.9.2.3;
commitid	ELcSZZYPVgQ6Kedw;

1.1.2.9.2.3
date	2012.08.02.00.38.17;	author jlee;	state Exp;
branches;
next	1.1.2.9.2.4;
commitid	c9QZpAiugoByfUew;

1.1.2.9.2.4
date	2012.08.14.23.42.14;	author jlee;	state Exp;
branches;
next	1.1.2.9.2.5;
commitid	TbwQU6RrwF9qwzgw;

1.1.2.9.2.5
date	2012.09.18.13.44.36;	author jlee;	state Exp;
branches;
next	;
commitid	2BntgJjnyfkD51lw;


desc
@@


4.3
log
@Merge SMP branch to trunk
Detail:
  Since the current SMP changes are fairly minor, and the trunk is seeing most development, from a maintenance perspective it makes sense to merge the changes to trunk. This will also make sure they get some wider testing ready for when the next round of SMP development takes place.
  Changes:
  - Docs/SMP - New docs folder describing SMP-related changes to the HAL and interrupt handling. Some of the IRQ changes can also be taken advantage of by single-core devices, since it introduces a way to describe which interrupt sources can be routed to IRQ & FIQ
  - Makefile, hdr/DBellDevice, hdr/HALDevice - New HAL device for an inter-processor software-generated interrupt source ("doorbell")
  - hdr/HALEntries - Reuse the unused matrix keyboard & touchscreen HAL entry points for the new IRQ handling & SMP-related HAL calls
  - hdr/KernelWS - Bump up MaxInterrupts
  - hdr/OSMem, s/MemInfo - Introduce OS_Memory 19, to allow for DMA to/from cacheable memory without actually altering the cacheability of the pages (which can be even more tricky in SMP systems than it is in uniprocessor systems)
  - hdr/Options - Introduce SMP build switch. Currently this controls whether the ARMops will operate in "SMP-friendly" mode or not (when running on MP processors)
  - s/ARMops, s/MemMap2 - Introduce the ARMv7MP ARMop implementation. Simplify DCache_LineLen / ICache_LineLen handling for WB_CR7_Lx so that it's the plain value rather than log2(n)-2
  - s/ExtraSWIs - If ARMops are in SMP-friendly mode, global OS_SynchroniseCodeAreas now only syncs application space and the RMA. This is because there is no trivial MP-safe global IMB operation available. This will also make global OS_SynchroniseCodeAreas significantly slower, but the documentation has always warned against performing a global IMB for just that reason, so code that suffers performance penalties should really try and switch to a ranged IMB.
  - s/NewIRQs - Update some comments regarding IRQ handler entry/exit conditions
Admin:
  Untested


Version 6.09. Tagged as 'Kernel-6_09'
@
text
@; Copyright 2002 Tematic Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;

; Structure of generic HAL devices, as described in Kernel.Docs.HAL.NewAPI

OldOpt  SETA    {OPT}
        OPT     OptNoList+OptNoP1List

 [ :LNOT: :DEF: Included_Hdr_HALDevice
                       GBLL Included_Hdr_HALDevice
Included_Hdr_HALDevice SETL {TRUE}


                        ^       0
HALDevice_Type          #       2
HALDevice_ID            #       2
HALDevice_Location      #       4
HALDevice_Version       #       4
HALDevice_Description   #       4
HALDevice_Address       #       4
HALDevice_Reserved1     #       12
HALDevice_Activate      #       4
HALDevice_Deactivate    #       4
HALDevice_Reset         #       4
HALDevice_Sleep         #       4
HALDevice_Device        #       4
HALDevice_TestIRQ       #       4
HALDevice_ClearIRQ      #       4
HALDevice_Reserved2     #       4
HALDeviceSize           *       :INDEX: @@


HALDeviceType_Video     *       1 :SHL: 8
                        ^       1
HALDeviceVideo_VDU      #       1       ; VDU display

HALDeviceType_Audio     *       2 :SHL: 8
                        ^       1
HALDeviceAudio_AudC     #       1       ; 16-bit sound input/output controller
HALDeviceAudio_Mixer    #       1       ; Sound I/O mixer

HALDeviceType_SysPeri   *       3 :SHL: 8
                        ^       1
HALDeviceSysPeri_IntC   #       1       ; Interrupt controller
HALDeviceSysPeri_DMAC   #       1       ; DMA controller
HALDeviceSysPeri_DMAB   #       1       ; DMA channel - buffer type
HALDeviceSysPeri_DMAL   #       1       ; DMA channel - list type
HALDeviceSysPeri_RTC    #       1       ; RTCDevice
HALDeviceSysPeri_CPUClk #       1       ; CPU clock generator
HALDeviceSysPeri_BMU    #       1       ; Battery management unit
HALDeviceSysPeri_NVRAM  #       1       ; Low capacity non volatile storage
HALDeviceSysPeri_CacheC #       1       ; Cache controller 

HALDeviceType_Comms      *      4 :SHL: 8
                         ^      1
HALDeviceComms_UART      #      1       ; UART
HALDeviceComms_EtherNIC  #      1       ; Ethernet NIC
HALDeviceComms_GPIO      #      1       ; GPIO interface
HALDeviceComms_InterProc #      1       ; Inter-processor mailboxes, etc.
HALDeviceComms_SPI       #      1       ; SPI
HALDeviceComms_ARMDBell  #      1       ; Doorbell for signaling other ARM cores

HALDeviceType_ExpCtl    *       5 :SHL: 8
                        ^       1
HALDeviceExpCtl_SDIO    #       1       ; SD/SDIO host controller
HALDeviceExpCtl_AHCI    #       1       ; AHCI SATA bus interface
HALDeviceExpCtl_IDE     #       1       ; IDE PATA bus interface
                                        ; things like USB, FireWire, SAS controllers might go here

HALDeviceType_HID       *       6 :SHL: 8
                        ^       1
HALDeviceHID_Keyboard   #       1       ; Standard data entry keyboard
HALDeviceHID_Touchscreen #      1

HALDeviceBus_Pro        *       0 :SHL: 28

HALDeviceProBus_Core    *       0 :SHL: 24
HALDeviceProBus_CoPro   *       1 :SHL: 24

HALDeviceBus_Sys        *       1 :SHL: 28

HALDeviceSysBus_AHB     *       0 :SHL: 24 ; AMBA 2, ARM
HALDeviceSysBus_ASB     *       1 :SHL: 24 ; AMBA 2, ARM
HALDeviceSysBus_PXBus   *       2 :SHL: 24 ; Intel PXA
HALDeviceSysBus_OPEN    *       3 :SHL: 24 ; Acorn Risc PC
HALDeviceSysBus_SonicsMX *      4 :SHL: 24 ; Sonics Inc - OMAP3 'L3'
HALDeviceSysBus_NoC     *       5 :SHL: 24 ; Network on Chip, Arteris Inc - OMAP4 'L3'
HALDeviceSysBus_AXI     *       6 :SHL: 24 ; AMBA 3, ARM

HALDeviceBus_Peri       *       2 :SHL: 28

HALDevicePeriBus_APB    *       0 :SHL: 24 ; ARM
HALDevicePeriBus_Rsvd1  *       1 :SHL: 24 ; Reserved
HALDevicePeriBus_Sonics3220 *   2 :SHL: 24 ; Sonics Inc - OMAP3/OMAP4 'L4'

HALDeviceBus_Exp        *       3 :SHL: 28

HALDeviceExpBus_Acorn   *       0 :SHL: 24 ; DEBI, EASI, IOC, MEMC
HALDeviceExpBus_ISA     *       1 :SHL: 24 ; IBM
HALDeviceExpBus_PCI     *       2 :SHL: 24 ; PCI SIG
HALDeviceExpBus_GPMC    *       3 :SHL: 24 ; General purpose memory controller

HALDeviceBus_Ser        *       4 :SHL: 28

HALDeviceSerBus_ACLink  *       0 :SHL: 24 ; Audio codec
HALDeviceSerBus_IIC     *       1 :SHL: 24 ; Inter IC
HALDeviceSerBus_IIS     *       2 :SHL: 24 ; Inter IC sound

                                ^       0
HALDeviceID_AudC_M5451          #       1
HALDeviceID_AudC_TPS65950       #       1
HALDeviceID_AudC_TWL6040        #       1
HALDeviceID_AudC_VCHIQ          #       1
HALDeviceID_AudC_Pandora        #       1
HALDeviceID_AudC_SGTL5000       #       1
HALDeviceID_AudC_TLV320AIC310x  #       1
HALDeviceID_AudC_IMX6HDMI       #       1

                                ^       0
HALDeviceID_Mixer_STAC9750      #       1
HALDeviceID_Mixer_TPS65950      #       1
HALDeviceID_Mixer_TWL6040       #       1
HALDeviceID_Mixer_VCHIQ         #       1
HALDeviceID_Mixer_SGTL5000      #       1
HALDeviceID_Mixer_TLV320AIC310x #       1
HALDeviceID_Mixer_Software      #       1 ; Any kind of software mixer (e.g. generic mixer created by SoundDMA)

                                ^       0
HALDeviceID_DMAC_M1535          #       1
HALDeviceID_DMAC_M5229          #       1
HALDeviceID_DMAC_OMAP3          #       1
HALDeviceID_DMAC_OMAP4          #       1
HALDeviceID_DMAC_BCM2835        #       1
HALDeviceID_DMAC_IOMD21         #       1
HALDeviceID_DMAC_IMX6           #       1
HALDeviceID_DMAC_SDMA           #       1 ; Same enough as OMAP3?
HALDeviceID_DMAC_OMAP5          #       1

                                ^       0
HALDeviceID_DMAB_M1535          #       1
HALDeviceID_DMAB_OMAP3          #       1
HALDeviceID_DMAB_OMAP4          #       1
HALDeviceID_DMAB_IOMD21         #       1
HALDeviceID_DMAB_SDMA           #       1 ; Same enough as OMAP3?
HALDeviceID_DMAB_OMAP5          #       1

                                ^       0
HALDeviceID_DMAL_M5229          #       1
HALDeviceID_DMAL_BCM2835        #       1
HALDeviceID_DMAL_IMX6           #       1

                                ^       0
HALDeviceID_RTC_TPS65950        #       1
HALDeviceID_RTC_TWL6030         #       1
HALDeviceID_RTC_DS1307          #       1
HALDeviceID_RTC_PCF8583         #       1
HALDeviceID_RTC_PCF8523         #       1

                                ^       0
HALDeviceID_CPUClk_OMAP3        #       1
HALDeviceID_CPUClk_OMAP4        #       1
HALDeviceID_CPUClk_AMDM37x_SR   #       1
HALDeviceID_CPUClk_IMX6         #       1
HALDeviceID_CPUClk_AM572x       #       1
HALDeviceID_CPUClk_OMAP5        #       1
HALDeviceID_CPUClk_BCM283x      #       1

                                ^       0
HALDeviceID_BMU_TPS65950        #       1
HALDeviceID_BMU_BQ27200         #       1
HALDeviceID_BMU_BQ27500         #       1
HALDeviceID_BMU_TWL6037         #       1

                                ^       0
HALDeviceID_NVRAM_24C02         #       1  ; 2kb = 256B
HALDeviceID_NVRAM_24C04         #       1
HALDeviceID_NVRAM_24C08         #       1
HALDeviceID_NVRAM_24C16         #       1  ; 16kb = 2kB

                                ^       0
HALDeviceID_VDU_OMAP3           #       1
HALDeviceID_VDU_OMAP4           #       1
HALDeviceID_VDU_Tungsten        #       1
HALDeviceID_VDU_VIDC20          #       1
HALDeviceID_VDU_BCM2835         #       1
HALDeviceID_VDU_IMX6            #       1
HALDeviceID_VDU_GC320           #       1
HALDeviceID_VDU_OMAP5           #       1

                                ^       0
HALDeviceID_EtherNIC_SMSC9221   #       1
HALDeviceID_EtherNIC_DM9000     #       1
HALDeviceID_EtherNIC_IMX6       #       1
HALDeviceID_EtherNIC_CPSW       #       1

                                ^       0
HALDeviceID_GPIO_OMAP3          #       1                                
HALDeviceID_GPIO_OMAP4          #       1
HALDeviceID_GPIO_BCM2835        #       1
HALDeviceID_GPIO_IMX6           #       1
HALDeviceID_GPIO_OMAP5          #       1

                                ^       0
HALDeviceID_InterProc_VCHIQ     #       1
HALDeviceID_InterProc_BCMMBox   #       1

                                ^       0
HALDeviceID_SPI_BCM2835_0       #       1
HALDeviceID_SPI_BCM2835_12      #       1
HALDeviceID_SPI_IMX6            #       1

                                ^       0
HALDeviceID_ARMDBell_BCM2836    #       1
HALDeviceID_ARMDBell_GIC        #       1

                                ^       0
HALDeviceID_SDIO_SDHCI          #       1

                                ^       0
HALDeviceID_Keyboard_Pandora    #       1

                                ^       0
HALDeviceID_Touchscreen_FT5406  #       1

                                ^       0
HALDeviceID_AHCI_IMX6           #       1 
HALDeviceID_AHCI_SynopsisDWC    #       1 

                                ^       0
HALDeviceID_IDE_SMC37C66x       #       1  ; SMSC super IO '665/'669
HALDeviceID_IDE_M5229           #       1  ; ALi super IO

                                ^       0
HALDeviceID_CacheC_PL310        #       1 

 ] ; Included_Hdr_HALDevice

        OPT     OldOpt
        END
@


4.2
log
@  Added HALDeviceID_RTC_PCF8523
Detail:
Admin:


Version 6.05. Tagged as 'Kernel-6_05'
@
text
@d73 1
d225 4
@


4.1
log
@Merge HAL branch to trunk
Detail:
  This change merges the past 15+ years of HAL branch development back to the trunk.
  This is effectively the end for non-HAL builds of the kernel, as no attempt has been made to maintain it during this merge, and all non-HAL & non-32bit code will soon be removed anyway.
  Rather than list everything that's been added to the HAL branch, it's easier to describe the change in terms of the things that the HAL branch was lacking:
  * Trunk version of Docs/32bit contained updated comments for the SVC stack structure during ErrorV
  * Trunk version of s/HeapMan contained a tweak to try and reduce the number of small free blocks that are created
  * Trunk version of s/Kernel contained a change to only copy 248 bytes of the error string to the error buffer (down from 252 bytes), to take into account the extra 4 bytes needed by the PSR. However this goes against the decision that's been made in the HAL branch that the error buffer should be enlarged to 260 bytes instead (ref: https://www.riscosopen.org/tracker/tickets/201), so the HAL build will retain its current behaviour.
  * Trunk version of s/MsgCode had RMNot32bit error in the list of error messages to count when countmsgusage {TRUE}
  * Trunk version of s/PMF/i2cutils contained support for OS_Memory 5, "read/write value of NVRamWriteSize". Currently the HAL branch doesn't have a use for this (in particular, the correct NVRamWriteSize should be specified by the HAL, so there should be no need for software to change it at runtime), and so this code will remain switched out in the HAL build.
Admin:
  Tested on Raspberry Pi


Version 5.48. Tagged as 'Kernel-5_48'
@
text
@d168 1
@


4.1.2.1
log
@Initial SMP changes
Detail:
  This commit lays some of the groundwork for SMP support within the HAL, kernel, and OS.
  Makefile, hdr/HALDevice, hdr/DBellDevice - Add definitions for a doorbell HAL device, to allow CPU cores to signal each other via interrupts
  hdr/HALEntries - Repurpose HAL_Matrix and HAL_Touchscreen entry points for new SMP-related entry points. Add a couple of IRQ-related definitions.
  hdr/KernelWS - Boost MaxInterrupts to 256
  hdr/Options - Add new SMP build switch to control whether the kernel is built in SMP-friendly mode or not. SMP-friendly kernels should still run on single-core machines, but may behave slightly differently.
  s/ARMops - Make as many ARMops SMP-safe as possible, relying on hardware support for broadcasting of cache/TLB maintenance operations
  s/ExtraSWIs - Make SMP-friendly full OS_SynchroniseCodeAreas only sync application space and the RMA (full-cache IMB not really possible with SMP)
  s/NewIRQs - Update IRQ despatcher comments to (hopefully) reflect reality
  Docs/SMP/HAL, Docs/SMP/IRQ - Add documentation covering the new HAL calls and IRQ behaviour
Admin:
  Tested on Raspberry Pi 2, 3, OMAP4, iMX6


Version 5.86, 4.129.2.2. Tagged as 'Kernel-5_86-4_129_2_2'
@
text
@a72 1
HALDeviceComms_ARMDBell  #      1       ; Doorbell for signaling other ARM cores
a222 4
HALDeviceID_ARMDBell_BCM2836    #       1
HALDeviceID_ARMDBell_GIC        #       1

                                ^       0
@


4.1.2.2
log
@Merge in latest changes from main branch

Version 6.05, 4.129.2.8. Tagged as 'Kernel-6_05-4_129_2_8'
@
text
@a168 1
HALDeviceID_RTC_PCF8523         #       1
@


1.1
log
@file HALDevice was initially added on branch HAL.
@
text
@d1 245
@


1.1.2.1
log
@Lots of Tungsten work.

Version 5.35, 4.79.2.48. Tagged as 'Kernel-5_35-4_79_2_48'
@
text
@a0 45
; Copyright 2002 Tematic Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;

; Structure of generic HAL devices, as described in Kernel.Docs.HAL.NewAPI

OldOpt  SETA    {OPT}
        OPT     OptNoList+OptNoP1List

 [ :LNOT: :DEF: Included_Hdr_HALDevice
                       GBLL Included_Hdr_HALDevice
Included_Hdr_HALDevice SETL {TRUE}

                        ^       0
HALDevice_Type          #       2
HALDevice_ID            #       2
HALDevice_Location      #       4
HALDevice_Version       #       4
HALDevice_Description   #       4
HALDevice_Address       #       4
                        #       12
HALDevice_Activate      #       4
HALDevice_Deactivate    #       4
HALDevice_Reset         #       4
HALDevice_Sleep         #       4
HALDevice_Device        #       4
HALDevice_TestIRQ       #       4
                        #       8
HALDeviceSize           *       :INDEX: @@

 ]

        OPT     OldOpt
        END
@


1.1.2.2
log
@  HAL device support, and a couple of new service calls.
Detail:
  * Rejigged documented meaning of device "Location" field so that we can
    fit full PCI locations in.
  * Defined lots of device "Type" values in Hdr:HALDevice.
  * Removed obsolete DMA-related HAL entries in Hdr:HALEntries (no longer
    required by DMAManager 0_15-4_4_2_6, no longer provided by Tungsten HAL
    0.07).
  * OS_Hardware 2 and 3 actually work now.
  * Changed OS_Hardware 4 to take a maximum major version number to match.
  * HAL workspace is now USR mode readable.
  * Service calls issued after module initialisation/finalisation (see
    Docs.ModPostServ).
Admin:
  OS_Hardware tested, service calls not tested.

Version 5.35, 4.79.2.52. Tagged as 'Kernel-5_35-4_79_2_52'
@
text
@a24 1

a40 41


HALDeviceType_Video     *       1 :SHL: 8
                        ^       1
HALDeviceVideo_VDU      #       1       ; VDU display

HALDeviceType_Audio     *       2 :SHL: 8
                        ^       1
HALDeviceAudio_PCM16    #       1       ; 16-bit PCM sound output

HALDeviceType_SysPeri   *       3 :SHL: 8
                        ^       1
HALDeviceSysPeri_IntC   #       1       ; Interrupt controller
HALDeviceSysPeri_DMAC   #       1       ; DMA controller
HALDeviceSysPeri_DMAB   #       1       ; DMA channel - buffer type
HALDeviceSysPeri_DMAL   #       1       ; DMA channel - list type

HALDeviceType_Comms     *       4 :SHL: 8
                        ^       1
HALDeviceComms_UART     #       1       ; UART


HALDeviceBus_Pro        *       0 :SHL: 28
                        ^       0
HALDeviceProBus_Core    #       1 :SHL: 24
HALDeviceProBus_CoPro   #       1 :SHL: 24

HALDeviceBus_Sys        *       1 :SHL: 28
                        ^       0
HALDeviceSysBus_AHB     #       1 :SHL: 24
HALDeviceSysBus_ASB     #       1 :SHL: 24

HALDeviceBus_Peri       *       2 :SHL: 28
                        ^       0
HALDevicePeriBus_APB    #       1 :SHL: 24

HALDeviceBus_Exp        *       3 :SHL: 28
                        ^       0
HALDeviceExpBus_Acorn   #       1 :SHL: 24
HALDeviceExpBus_ISA     #       1 :SHL: 24
HALDeviceExpBus_PCI     #       1 :SHL: 24
@


1.1.2.3
log
@Added some symbols to the export hdr.DMADevice to define the HAL device ID
codes within each Type.
Also enabled the Service_ModulePostInit/Final service calls now that the
service call allocations have been confirmed.

Version 5.35, 4.79.2.54. Tagged as 'Kernel-5_35-4_79_2_54'
@
text
@a83 10
                                ^       0
HALDeviceID_DMAC_M1535Legacy    #       1
HALDeviceID_DMAC_M1535IDE       #       1

                                ^       0
HALDeviceID_DMAB_M1535Legacy    #       1

                                ^       0
HALDeviceID_DMAL_M1535IDE       #       1

@


1.1.2.4
log
@  Miscellaneous stuff.
Detail:
  * Merged in the change to RISC OS 4.02 kernel that moved the GSTrans
    workspace out of scratch space.
  * Fixed a few bugs in callback postponement, and interrupt holes in
    callback dispatch. See Docs.CallbackChange for full info.
  * Fixed SystemSizeCMOS to SysHeapCMOS - wouldn't build as was.
  * Added an export of a C version of Hdr:HALDevice, based on the Hdr2H
    translation but with an additional struct definition. Required by
    SoundControl 1.00.
  * Added some additional location and ID allocations to Hdr:HALDevice.
    Required by today's HAL and SoundControl.
Admin:
  Partially tested.

Version 5.35, 4.79.2.56. Tagged as 'Kernel-5_35-4_79_2_56'
@
text
@d33 1
a33 1
HALDevice_Reserved1     #       12
d40 1
a40 1
HALDevice_Reserved2     #       8
d50 1
a50 2
HALDeviceAudio_AudC     #       1       ; 16-bit sound input/output controller
HALDeviceAudio_Mixer    #       1       ; Sound I/O mixer
d65 3
a67 3

HALDeviceProBus_Core    *       0 :SHL: 24
HALDeviceProBus_CoPro   *       1 :SHL: 24
d70 3
a72 4

HALDeviceSysBus_AHB     *       0 :SHL: 24
HALDeviceSysBus_ASB     *       1 :SHL: 24
HALDeviceSysBus_PXBus   *       2 :SHL: 24
d75 2
a76 2

HALDevicePeriBus_APB    *       0 :SHL: 24
d79 4
a82 15

HALDeviceExpBus_Acorn   *       0 :SHL: 24
HALDeviceExpBus_ISA     *       1 :SHL: 24
HALDeviceExpBus_PCI     *       2 :SHL: 24

HALDeviceBus_Ser        *       4 :SHL: 28

HALDeviceSerBus_ACLink  *       0 :SHL: 24


                                ^       0
HALDeviceID_AudC_M5451          #       1

                                ^       0
HALDeviceID_Mixer_STAC9750      #       1
d85 2
a86 2
HALDeviceID_DMAC_M1535          #       1
HALDeviceID_DMAC_M5229          #       1
d89 1
a89 1
HALDeviceID_DMAB_M1535          #       1
d92 1
a92 1
HALDeviceID_DMAL_M5229          #       1
@


1.1.2.5
log
@Bring HAL branch of hdr/HALDevice, h/HALDevice in line with Cortex branch
Detail:
  A fair number of bus/device types and IDs have been added to the Cortex branch since the branch was created.
  Now that the ClearIRQ entry has also been added, it's about time that the HAL branch was brought up to date.
Admin:
  Untested, but should be fine.


Version 5.35, 4.79.2.111. Tagged as 'Kernel-5_35-4_79_2_111'
@
text
@d40 1
a40 2
HALDevice_ClearIRQ      #       4
HALDevice_Reserved2     #       4
a58 1
HALDeviceSysPeri_RTC    #       1       ; RTCDevice
a62 1
HALDeviceComms_EtherNIC #       1       ; Ethernet NIC
a78 1
HALDevicePeriBus_GPMC   *       1 :SHL: 24
a88 1
HALDeviceSerBus_IIC     *       1 :SHL: 24
a89 4
HALDeviceBus_Interconnect    *  5 :SHL: 28 ; Not really a bus type, but the OMAP stuff had to go somewhere!

HALDeviceInterconnectBus_L3  *  0 :SHL: 24
HALDeviceInterconnectBus_L4  *  1 :SHL: 24
a92 1
HALDeviceID_AudC_TPS65950       #       1
a95 1
HALDeviceID_Mixer_TPS65950      #       1
a99 1
HALDeviceID_DMAC_OMAP3          #       1
a102 1
HALDeviceID_DMAB_OMAP3          #       1
a106 10
                                ^       0
HALDeviceID_RTC_TPS65950        #       1

                                ^       0
HALDeviceID_VDU_OMAP3           #       1

                                ^       0
HALDeviceID_EtherNIC_SMSC9221   #       1
HALDeviceID_EtherNIC_DM9000     #       1                                

@


1.1.2.6
log
@Keep hdr/HALDevice & hdr/HALEntries in sync with Cortex branch
Detail:
  hdr/HALDevice - Device types & IDs for CPU clock generator and GPIO interface
  hdr/HALEntries - HAL_ExtMachineID entry (but not used by this kernel yet)
Admin:
  Tungsten ROM built OK, but untested at runtime.


Version 5.35, 4.79.2.116. Tagged as 'Kernel-5_35-4_79_2_116'
@
text
@a60 1
HALDeviceSysPeri_CPUClk #       1       ; CPU clock generator
a65 1
HALDeviceComms_GPIO     #       1       ; GPIO interface
a123 3
HALDeviceID_CPUClk_OMAP3        #       1

                                ^       0
d128 1
a128 4
HALDeviceID_EtherNIC_DM9000     #       1

                                ^       0
HALDeviceID_GPIO_OMAP3          #       1                                
@


1.1.2.7
log
@Resync Hdr:HALDevice on HAL branch (nominally the master copy) with the Cortex branch

Version 5.35, 4.79.2.122. Tagged as 'Kernel-5_35-4_79_2_122'
@
text
@a68 4
HALDeviceType_ExpCtl    *       5 :SHL: 8
                        ^       1
HALDeviceExpCtl_SDIO    #       1       ; SD/SDIO host controller
                                        ; things like USB, FireWire, SATA, SAS controllers might go here
a104 1
HALDeviceID_AudC_TWL6040	#	1
a108 1
HALDeviceID_Mixer_TWL6040	#	1
a113 1
HALDeviceID_DMAC_OMAP4		#	1
a117 1
HALDeviceID_DMAB_OMAP4		#	1
a123 1
HALDeviceID_RTC_TWL6030		#	1
a126 1
HALDeviceID_CPUClk_OMAP4	#	1
a129 1
HALDeviceID_VDU_OMAP4		#	1
a136 1
HALDeviceID_GPIO_OMAP4		#	1
d138 1
a138 4
                                ^       0
HALDeviceID_SDIO_SDHCI          #       1

 ] ; Included_Hdr_HALDevice
@


1.1.2.8
log
@Add compressed ROM support. Make more use of ARMv5+ instructions. Other misc tweaks.
Detail:
  hdr/OSEntries, s/HAL, s/Kernel - Add compressed ROM support.
  With the current scheme, a compressed ROM will have everything except the HAL and kernel compressed.
  During the keyboard scan period the kernel will allocate some temporary decompression workspace and call the decompression stub that was appended to the ROM.
  The decompression stub is expected to perform in-place decompression of the ROM. Once decompression is complete the workspace will be freed and the page tables updated to make the ROM image readonly.
  It's the HAL's responsibility to make sure any compressed ROM is located in an area of physically contiguous RAM large enough to hold the uncompressed image.
  More info here: http://www.riscosopen.org/wiki/documentation/show/Compressed%20ROMs
  Makefile, h/OSEntries - Add C export of hdr/OSEntries
  hdr/HALDevice - Add device ID for Tungsten video device. Convert tabs to spaces for consistency.
  hdr/HALEntries, s/NewReset - Moved KbdFlag_* definitions to hdr/HALEntries so HALs can use them in their keyboard scan code
  s/ArthurSWIs, S/HAL, s/HeapSort, s/Kernel, s/MemInfo, s/Middle, s/NewIRQs, s/TickEvents, s/vdu/vdugrafb - Make use of BLX, BFI and long multiplies if the CPU supports them. Don't support SWI calls from thumb mode if the CPU doesn't support thumb.
  s/HAL - Made the LDMIA in Init_MapInRAM more sensible (register order was backwards). The old code did work, but wasn't doing what the comments described. Removed unused/unfinished HAL_Write0 function. Improve RISCOS_LogToPhys to check L1PT for any section mappings if the logical_to_physical call fails
  s/ModHand - Save one instruction by using ADR instead of MOV+ADD to compute lr
  s/NewReset, s/PMF/key - Pass L1PT to HAL_Reset to allow machines without hardware reset (e.g. IOMD) to perform resets by manually disabling the MMU and restarting the ROM
  s/vdu/vdudriver, s/vdu/vdugrafv - Use GVEntry macro borrowed from NVidia module for setting up the GraphicsV jump table. Make GraphicsV_ReadPaletteEntry call HAL_Video_ReadPaletteEntry if left unclaimed. Fixup GV_Render to only call HAL_Video_Render if the HAL call is implemented.
Admin:
  Tested with OMAP3, IOMD & Tungsten ROMs/softloads.


Version 5.35, 4.79.2.138. Tagged as 'Kernel-5_35-4_79_2_138'
@
text
@d109 1
a109 1
HALDeviceID_AudC_TWL6040        #       1
d114 1
a114 1
HALDeviceID_Mixer_TWL6040       #       1
d120 1
a120 1
HALDeviceID_DMAC_OMAP4          #       1
d125 1
a125 1
HALDeviceID_DMAB_OMAP4          #       1
d132 1
a132 1
HALDeviceID_RTC_TWL6030         #       1
d136 1
a136 1
HALDeviceID_CPUClk_OMAP4        #       1
d140 1
a140 2
HALDeviceID_VDU_OMAP4           #       1
HALDeviceID_VDU_Tungsten        #       1
d148 1
a148 1
HALDeviceID_GPIO_OMAP4          #       1
@


1.1.2.9
log
@Add device ID for AM/DM37x SmartReflex CPU clock controller
Detail:
  hdr/HALDevice - Add device ID for new SmartReflex-based CPUClk device that takes over from the current OMAP3 one on AM/DM37x devices
Admin:
  Tested in OMAP3 ROM


Version 5.35, 4.79.2.145. Tagged as 'Kernel-5_35-4_79_2_145'
@
text
@a136 1
HALDeviceID_CPUClk_AMDM37x_SR   #       1
@


1.1.2.9.2.1
log
@Add device IDs for BCM2835 DMA controller/channels
Detail:
  hdr/HALDevice - Added new device IDs used by BCM2835 DMA controller & DMA channels
Admin:
  Tested in BCM2835 ROM


Version 5.35, 4.79.2.147.2.13. Tagged as 'Kernel-5_35-4_79_2_147_2_13'
@
text
@a120 1
HALDeviceID_DMAC_BCM2835        #       1
a128 1
HALDeviceID_DMAL_BCM2835        #       1
@


1.1.2.9.2.2
log
@  Merged OS_Memory 8 changes across from HAL branch to RPi branch
Detail:
  Revisions Kernel-5_35-4_79_2_153 and Kernel-5_35-4_79_2_161 merged with one
  trivial conflict.
Admin:
  Confirmed that this builds, but not tested on hardware.

Version 5.35, 4.79.2.147.2.15. Tagged as 'Kernel-5_35-4_79_2_147_2_15'
@
text
@a144 1
HALDeviceID_VDU_VIDC20          #       1
@


1.1.2.9.2.3
log
@Add new HAL device IDs for Raspberry Pi GPIO interface & VCHIQ
Detail:
  hdr/HALDevice - Add new inter-processor communications device type. Add device IDs for Pi/BCM2835 GPIO interface & VCHIQ
  hdr/GPIODevice - Add Raspberry Pi GPIO type & interface revision (currently 'unknown')
Admin:
  Tested in Raspberry Pi ROM with high processor vectors
  New IDs required for BCM2835-0_17


Version 5.35, 4.79.2.147.2.16. Tagged as 'Kernel-5_35-4_79_2_147_2_16'
@
text
@d63 5
a67 6
HALDeviceType_Comms      *      4 :SHL: 8
                         ^      1
HALDeviceComms_UART      #      1       ; UART
HALDeviceComms_EtherNIC  #      1       ; Ethernet NIC
HALDeviceComms_GPIO      #      1       ; GPIO interface
HALDeviceComms_InterProc #      1       ; Inter-processor mailboxes, etc.
a153 4
HALDeviceID_GPIO_BCM2835        #       1

                                ^       0
HALDeviceID_InterProc_VCHIQ     #       1                                
@


1.1.2.9.2.4
log
@Fix crash in OS_Hardware 4 when encountering devices which are newer than the caller supports. Add new device IDs for Raspberry Pi audio devices.
Detail:
  s/HAL - Fixed crash in OS_Hardware 4 when encountering devices which are newer than the caller supports
  hdr/HALDevice - Added new HAL devices for Raspberry Pi audio devices
Admin:
  Tested on Raspberry Pi with high processor vectors


Version 5.35, 4.79.2.147.2.17. Tagged as 'Kernel-5_35-4_79_2_147_2_17'
@
text
@a110 1
HALDeviceID_AudC_VCHIQ          #       1
a115 1
HALDeviceID_Mixer_VCHIQ         #       1
@


1.1.2.9.2.5
log
@Fix addresses sent to GraphicsV_SetDMAAddress when external framestore in use. Add ID for BCM2835 VDU HAL device.
Detail:
  hdr/KernelWS, s/vdu/vdudriver, s/vdu/vduwrch - Fixed wrong addresses being sent to GraphicsV_SetDMAAddress when an external framestore is in use. Previously VideoPhysAddr was being treated as if it was the base of screen memory, but that's only the case if an internal framestore is in use. Since VideoPhysAddr is part of PhysRamTable it's not possible to change it to point to an external framestore, so a new workspace variable, TrueVideoPhysAddr, is used instead.
  hdr/HALDevice - Added device ID for BCM2835 VDU device
  s/PMF/IIC - Corrected an incorrect comment in IICDoOp
Admin:
  Tested on Raspberry Pi with high processor vectors


Version 5.35, 4.79.2.147.2.22. Tagged as 'Kernel-5_35-4_79_2_147_2_22'
@
text
@a148 1
HALDeviceID_VDU_BCM2835         #       1
@


1.1.2.10
log
@Make OS_Memory 8 return more correct values
The only fake result now is the hard ROM amount, which is hardwired to 4MB and might not be correct.
Unrelated changes
 hdr.HALDevice: Assign a device for VIDC20.
 hdr.KernelWS: Reorder into ascending order, remove legacy addresses.
 s.ARM600: Move PhysSpaceSize inside :LNOT:HAL switch.
 s.Kernel: Move PhysSpaceSize inside :LNOT:HAL switch.

Version 5.35, 4.79.2.153. Tagged as 'Kernel-5_35-4_79_2_153'
@
text
@a142 1
HALDeviceID_VDU_VIDC20          #       1
@


1.1.2.11
log
@Bring hdr/HALDevice in line with RPi branch
Detail:
  hdr/HALDevice - Added new HAL devices and types from RPi branch
Admin:
  Untested!


Version 5.35, 4.79.2.164. Tagged as 'Kernel-5_35-4_79_2_164'
@
text
@d63 5
a67 6
HALDeviceType_Comms      *      4 :SHL: 8
                         ^      1
HALDeviceComms_UART      #      1       ; UART
HALDeviceComms_EtherNIC  #      1       ; Ethernet NIC
HALDeviceComms_GPIO      #      1       ; GPIO interface
HALDeviceComms_InterProc #      1       ; Inter-processor mailboxes, etc.
a109 1
HALDeviceID_AudC_VCHIQ          #       1
a114 1
HALDeviceID_Mixer_VCHIQ         #       1
a120 1
HALDeviceID_DMAC_BCM2835        #       1
a128 1
HALDeviceID_DMAL_BCM2835        #       1
a151 4
HALDeviceID_GPIO_BCM2835        #       1

                                ^       0
HALDeviceID_InterProc_VCHIQ     #       1                                
@


1.1.2.12
log
@Merge with RPi branch
Detail:
  Merge the RPi branch with the HAL branch, ending RPi branch development
  Brief summary of changes brought in:
  * Added HAL_VideoStartupMode to allow the HAL to specify a startup mode for the OS
  * Fixed addresses being sent to GraphicsV_SetDMAAddress being wrong for external framestores (addresses were given as if internal framestore was in use)
  * Add InverseTextTransparency option for limited compile-time support for targets where framebuffer alpha channel is important
  * Fix ConfiguredLanguage for non-Tungsten builds
  * Update ARMv6 CPU detection to read cache parameters from cache type register instead of using KnownCPUTable
  * Add HALDebugHexTX/TX2/TX4 debug routines for writing out numbers via HAL
  * Use HAL_TimerIRQClear when clearing timer 0 interrupt instead of just HAL_IRQClear
  * Initialise FileLangCMOS using defines from Hdr:FSNumbers instead of magic numbers. Use SDFS on M_ARM11ZF.
  * Improved software mouse pointer support; software pointer now removed & restored in some of the same places the text cursor is
  * Improve support for external framestores; driver is now able to grow/shrink/move the framestore on mode changes if bit 5 of GraphicsV_DisplayFeatures R0 is set
  * GraphicsV_FramestoreAddress now has a default claimant which calls HAL_VideoFramestoreAddress
Admin:
  Tested on Raspberry Pi, Iyonix, OMAP3, IOMD


Version 5.35, 4.79.2.165. Tagged as 'Kernel-5_35-4_79_2_165'
@
text
@a148 1
HALDeviceID_VDU_BCM2835         #       1
@


1.1.2.13
log
@Add new HID device type & ID for Pandora keyboard
Detail:
  hdr/HALDevice - Added new HID device type, Keyboard sub-type, and Pandora keyboard device ID
Admin:
  Tested on Pandora, rev C2 BB, rev A2 BB-xM, rev C1 TouchBook


Version 5.35, 4.79.2.166. Tagged as 'Kernel-5_35-4_79_2_166'
@
text
@a74 4
HALDeviceType_HID       *       6 :SHL: 8
                        ^       1
HALDeviceHID_Keyboard   #       1       ; Standard data entry keyboard

a165 3
                                ^       0
HALDeviceID_Keyboard_Pandora    #       1

@


1.1.2.14
log
@Initialise IIC earlier in the startup sequence. Add ID for Pandora audio HAL device
Detail:
  s/HAL, s/NewReset - Moved IIC initialisation to just after timer initialisation, and crucially, before keyboard scan initialisation. This makes things a lot easier for the HAL if it wants to use IIC during the keyboard scan (previously IIC would be enabled inbetween HAL_KbdScanSetup and the first call to HAL_KbdScan)
  hdr/HALDevice - Added a device ID for the Pandora audio controller
Admin:
  Tested on Pandora


Version 5.35, 4.79.2.168. Tagged as 'Kernel-5_35-4_79_2_168'
@
text
@a115 1
HALDeviceID_AudC_Pandora        #       1
@


1.1.2.15
log
@Review of Internation switch
Variously the call to TranslateError was either followed (outside the switch) by an unnecessary SETV, or missing SETV for the non international case.
Added DMA controller HAL device for IOMD.

Version 5.35, 4.79.2.174. Tagged as 'Kernel-5_35-4_79_2_174'
@
text
@a129 1
HALDeviceID_DMAC_IOMD21         #       1
a134 1
HALDeviceID_DMAB_IOMD21         #       1
@


1.1.2.16
log
@Add OPEN bus as a known system bus type

Version 5.35, 4.79.2.175. Tagged as 'Kernel-5_35-4_79_2_175'
@
text
@a88 1
HALDeviceSysBus_OpenBus *       3 :SHL: 24
@


1.1.2.17
log
@Docs use OPEN not Open
More haste, less speed. Retagged as Kernel-5_35-4_79_2_175.
@
text
@d86 4
a89 4
HALDeviceSysBus_AHB     *       0 :SHL: 24 ; ARM
HALDeviceSysBus_ASB     *       1 :SHL: 24 ; ARM
HALDeviceSysBus_PXBus   *       2 :SHL: 24 ; Intel PXA
HALDeviceSysBus_OPEN    *       3 :SHL: 24 ; Acorn Risc PC
@


1.1.2.18
log
@Add new BMU HAL device type & IDs
Detail:
  hdr/HALDevice - Added HALDeviceSysPeri_BMU device type and some device IDs for the BMUs in the Pandora & TouchBook
Admin:
  Tested in OMAP3 ROM build


Version 5.35, 4.79.2.177. Tagged as 'Kernel-5_35-4_79_2_177'
@
text
@a61 1
HALDeviceSysPeri_BMU    #       1       ; Battery management unit
a152 5
HALDeviceID_BMU_TPS65950        #       1
HALDeviceID_BMU_BQ27200         #       1
HALDeviceID_BMU_BQ27500         #       1
                                
                                ^       0
@


1.1.2.19
log
@Add system peripheral type NVRAM for some common types/sizes

Version 5.35, 4.79.2.192. Tagged as 'Kernel-5_35-4_79_2_192'
@
text
@a62 1
HALDeviceSysPeri_NVRAM  #       1       ; Low capacity non volatile storage
d157 1
a157 7

                                ^       0
HALDeviceID_NVRAM_24C02         #       1  ; 2kb = 256B
HALDeviceID_NVRAM_24C04         #       1
HALDeviceID_NVRAM_24C08         #       1
HALDeviceID_NVRAM_24C16         #       1  ; 16kb = 2kB

@


1.1.2.20
log
@Fixes to NeedsYearHelp clock case
Want LSR not ROR otherwise in the need help + HAL + 2 bit case the IIC address in R1 comes out as &800000A1.
Added HAL device ids for a couple more RTC devices.

Version 5.35, 4.79.2.199. Tagged as 'Kernel-5_35-4_79_2_199'
@
text
@a147 2
HALDeviceID_RTC_DS1307          #       1
HALDeviceID_RTC_PCF8583         #       1
@


1.1.2.21
log
@  Added ix6 variants of HALDevice
Detail:
Admin:


Version 5.35, 4.79.2.217. Tagged as 'Kernel-5_35-4_79_2_217'
@
text
@a112 1
HALDeviceInterconnectBus_IMX6 * 2 :SHL: 24
a154 1
HALDeviceID_CPUClk_IMX6         #       1
a172 1
HALDeviceID_VDU_IMX6            #       1
a181 1
HALDeviceID_GPIO_IMX6           #       1
@


1.1.2.22
log
@Added HAL device for iMx6 ethernet
JB

Version 5.35, 4.79.2.232. Tagged as 'Kernel-5_35-4_79_2_232'
@
text
@a179 1
HALDeviceID_EtherNIC_IMX6       #       1
@


1.1.2.23
log
@  AHCI hal device support added
  Admin:
JB

Version 5.35, 4.79.2.233. Tagged as 'Kernel-5_35-4_79_2_233'
@
text
@a74 1
HALDeviceExpCtl_AHCI	#	1	; AHCI sata bus interface
a196 3
                                ^       0
HALDeviceID_AHCI_IMX6           #       1 

@


1.1.2.24
log
@Header defs for Pi Compute module and IIC
OSEntries.h: added a C structure for RISCOS_IICOpV.
GPIODevice.hdr: allocate Pandora and Pi Compute module sub device nos.
HALDevice.hdr/Options.hdr: tabs expanded, capitalised abbreviations.
Not tagged.
@
text
@d75 2
a76 2
HALDeviceExpCtl_AHCI    #       1       ; AHCI SATA bus interface
                                        ; things like USB, FireWire, SAS controllers might go here
@


1.1.2.25
log
@Update HAL device ID allocations
Detail:
  hdr/HALDevice - Added some extra HAL device IDs
Admin:
  Tested by building BCM2835 ROM


Version 5.35, 4.79.2.241. Tagged as 'Kernel-5_35-4_79_2_241'
@
text
@a121 1
HALDeviceID_AudC_SGTL5000       #       1
a127 1
HALDeviceID_Mixer_SGTL5000      #       1
a135 1
HALDeviceID_DMAC_IMX6           #       1
a145 1
HALDeviceID_DMAL_IMX6           #       1
@


1.1.2.26
log
@Untangle some buses
Docs/HAL/NewAPI:
 More clearly describe the intent of the different bus types.
hdr/HALDevice
 Reclassify the OMAP interconnect as either a system bus or peripheral bus, noting their names from the datasheet.
 Reclassify the GPMC as an expansion bus.
 Add AMBA 3's AXI bus, which (along with the existing AHB/APB) is what iMx6 uses. Delete redundant iMx6 interconnect type.

Version 5.35, 4.79.2.249. Tagged as 'Kernel-5_35-4_79_2_249'
@
text
@d89 2
a90 2
HALDeviceSysBus_AHB     *       0 :SHL: 24 ; AMBA 2, ARM
HALDeviceSysBus_ASB     *       1 :SHL: 24 ; AMBA 2, ARM
a92 3
HALDeviceSysBus_SonicsMX *      4 :SHL: 24 ; Sonics Inc - OMAP3 'L3'
HALDeviceSysBus_NoC     *       5 :SHL: 24 ; Network on Chip, Arteris Inc - OMAP4 'L3'
HALDeviceSysBus_AXI     *       6 :SHL: 24 ; AMBA 3, ARM
d96 2
a97 3
HALDevicePeriBus_APB    *       0 :SHL: 24 ; ARM
HALDevicePeriBus_Rsvd1  *       1 :SHL: 24 ; Reserved
HALDevicePeriBus_Sonics3220 *   2 :SHL: 24 ; Sonics Inc - OMAP3/OMAP4 'L4'
d101 3
a103 4
HALDeviceExpBus_Acorn   *       0 :SHL: 24 ; DEBI, EASI, IOC, MEMC
HALDeviceExpBus_ISA     *       1 :SHL: 24 ; IBM
HALDeviceExpBus_PCI     *       2 :SHL: 24 ; PCI SIG
HALDeviceExpBus_GPMC    *       3 :SHL: 24 ; General purpose memory controller
d107 8
a114 3
HALDeviceSerBus_ACLink  *       0 :SHL: 24 ; Audio codec
HALDeviceSerBus_IIC     *       1 :SHL: 24 ; Inter IC
HALDeviceSerBus_IIS     *       2 :SHL: 24 ; Inter IC sound
@


1.1.2.27
log
@Add ARMops for PL310 L2 cache controller
Detail:
  Unlike on the Cortex-A8 or Cortex-A15, the L2 cache that's used with the Cortex-A9 isn't hooked up to the standard ARMv7 CP15 cache maintenance ops. Instead, memory-mapped registers must be used to program and maintain the cache.
  Since the PL310 can't be detected automatically, this change adds support for a 'cache controller' HAL device which the HAL can use to advertise the presence of any external caches. If a cache device is registered during HAL_InitDevices the kernel will then check it against a list of known cache types and replace the appropriate ARMop routines with the alternatives for that controller.
  File changes:
  - hdr/PL310 - New header containing PL310 register listing
  - Makefile - Add export for PL310 header. Reorder exports to be alphabetical
  - hdr/HALDevice - Add cache controller device type, PL310 device
  - hdr/KernelWS - Allocate some workspace for storing a pointer to the current cache HAL device
  - s/ARMops - Add code for searching for known cache types, and implementation of PL310-specific ARMops
  - s/GetAll - Get Hdr:PL310
  - s/NewReset - Look for a cache controller after calling HAL_InitDevices
Admin:
  Tested on Pandaboard
  Fixes various assorted instability issues


Version 5.35, 4.79.2.252. Tagged as 'Kernel-5_35-4_79_2_252'
@
text
@a63 1
HALDeviceSysPeri_CacheC #       1       ; Cache controller 
a204 3
                                ^       0
HALDeviceID_CacheC_PL310        #       1 

@


1.1.2.28
log
@Add HAL device numbers for Raspberry Pi SPI controllers
Detail:
  hdr/HALDevice - Add a new device type for SPI controllers, and allocate two device numbers for use on the Pi (to differentiate between the main and aux controllers)
Admin:
  Tested on Raspberry Pi B & 2 B


Version 5.35, 4.79.2.272. Tagged as 'Kernel-5_35-4_79_2_272'
@
text
@a71 1
HALDeviceComms_SPI       #      1       ; SPI
d195 1
a195 5
HALDeviceID_InterProc_VCHIQ     #       1

                                ^       0
HALDeviceID_SPI_BCM2835_0       #       1
HALDeviceID_SPI_BCM2835_12      #       1
@


1.1.2.29
log
@  Added iMx6 spi device and GPIO revision types to relevant device headers
Detail:
Admin:


Version 5.35, 4.79.2.275. Tagged as 'Kernel-5_35-4_79_2_275'
@
text
@a200 1
HALDeviceID_SPI_IMX6            #       1
@


1.1.2.30
log
@Raise some workspace limits, define extra devices
Detail:
  Raise the maximum number of interrupts and IIC buses acceptable, to account for the OMAP5 port.
  Add TLV320/TLV320/SDMA/SDMA/AM572x/GC320/CPSW/SynopsisDWC for Titanium.
  Add OMAP5/OMAP5/OMAP5/TWL6037/OMAP5/OMAP5/SynopsisDWC for OMAP5.
Admin:
  There's likely some rationalisation to be had here, these controllers especially across the OMAP3/4/5 are probably the same thing really and don't merit individual allocations.

Version 5.35, 4.79.2.297. Tagged as 'Kernel-5_35-4_79_2_297'
@
text
@a124 1
HALDeviceID_AudC_TLV320AIC310x  #       1
a131 1
HALDeviceID_Mixer_TLV320AIC310x #       1
a140 2
HALDeviceID_DMAC_SDMA           #       1 ; Same enough as OMAP3?
HALDeviceID_DMAC_OMAP5          #       1
a146 2
HALDeviceID_DMAB_SDMA           #       1 ; Same enough as OMAP3?
HALDeviceID_DMAB_OMAP5          #       1
a163 2
HALDeviceID_CPUClk_AM572x       #       1
HALDeviceID_CPUClk_OMAP5        #       1
a168 1
HALDeviceID_BMU_TWL6037         #       1
a182 2
HALDeviceID_VDU_GC320           #       1
HALDeviceID_VDU_OMAP5           #       1
a187 1
HALDeviceID_EtherNIC_CPSW       #       1
a193 1
HALDeviceID_GPIO_OMAP5          #       1
a210 1
HALDeviceID_AHCI_SynopsisDWC    #       1 
@


1.1.2.31
log
@Fix overriding of default CMOS settings. Reserve HAL device ID for the official Raspberry Pi touchscreen/display.
Detail:
  s/PMF/i2cutils - Move $CMOS_Override to the start of DefaultCMOSTable, so that it can be used to override values which are already in the table (since NVMemory_ResetValue stops its search on the first address match)
  hdr/HALDevice - Add new Touchscreen device type and reserve an ID for the official Pi touchscreen controller
Admin:
  Tested on Raspberry Pi
  Fixes filesystem incorrectly defaulting to ADFS


Version 5.35, 4.79.2.299. Tagged as 'Kernel-5_35-4_79_2_299'
@
text
@a82 1
HALDeviceHID_Touchscreen #      1
a222 3
HALDeviceID_Touchscreen_FT5406  #       1

                                ^       0
@


1.1.2.32
log
@Allocate some extra HAL device IDs
Detail:
  hdr/HALDevice - Allocate device IDs for iMX6 HDMI audio controller, and a generic software mixer
Admin:
  Tested in iMX6 ROM build


Version 5.35, 4.79.2.300. Tagged as 'Kernel-5_35-4_79_2_300'
@
text
@a126 1
HALDeviceID_AudC_IMX6HDMI       #       1
a134 1
HALDeviceID_Mixer_Software      #       1 ; Any kind of software mixer (e.g. generic mixer created by SoundDMA)
@


1.1.2.33
log
@Add OS_ReadSysInfo 9,6 and 9,7
Subreason 7 returns a string naming the HAL platform. Use HAL entry 97 to get this, and obsolete 97/98/99 in favour of using a HAL device. Line up the HAL video entries to match the others.
Subreason 6 is just back filling one ROL added, testing this on RISC OS Select just returned the OS name so we do the same now (same as subreason 0, not sure what ROL's distinction was for).
Allocate a HAL device for PATA IDE controllers, and the 2 known ones to date - Tungsten and IOMD systems.

Version 5.35, 4.79.2.301. Tagged as 'Kernel-5_35-4_79_2_301'
@
text
@a77 1
HALDeviceExpCtl_IDE     #       1       ; IDE PATA bus interface
a232 4
HALDeviceID_IDE_SMC37C66x       #       1  ; SMSC super IO '665/'669
HALDeviceID_IDE_M5229           #       1  ; ALi super IO

                                ^       0
@


1.1.2.34
log
@New HAL device ID reservations
Detail:
  hdr/HALDevice - Reserve device IDs for BCM283x CPU clock device and GPU mailbox device
Admin:
  Tested on Raspberry Pi 1B/2B/3B


Version 5.35, 4.79.2.310. Tagged as 'Kernel-5_35-4_79_2_310'
@
text
@a175 1
HALDeviceID_CPUClk_BCM283x      #       1
a213 1
HALDeviceID_InterProc_BCMMBox   #       1
@


1.1.2.4.2.1
log
@Add HAL RTC support to Cortex branch of kernel, clean up RTCSupport code
Detail:
  HAL kernels (on the Cortex branch at least) now support HALDevice-based RTCs. If the kernels own RTC code is disabled or fails to detect an RTC, then after HAL_InitDevices is called the HALDevice list will be scanned for any HAL-resident RTC devices.
  Additionally, the RTCSupport flag (in Hdr:Machine.Machine), which was previously TRUE for all HAL kernels, can now be set to FALSE in HAL kernels to disable the kernels own IIC RTC code. This allows the unwanted legacy RTC code to be disabled for machines which are known to use HAL RTCs instead.
  hdr/RTCDevice - new header describing data structures used for HAL RTC device
  hdr/HALDevice - added RTCDevice device type, IIC serial bus type
  hdr/KernelWS - upgraded RTCFitted from a 1 byte field to 4 byte. It now stores either a null value (for no RTC), a value <2048 for an IIC RTC address, or a value >= 2048 for a RTCDevice ptr
  Makefile - added header export of hdr/RTCDevice
  s/GetAll - include hdr/RTCDevice
  s/NewReset - initialise HAL RTC after HAL_InitDevices if required
  s/PMF/i2cutils, s/PMF/osinit, s/PMF/osword - modifications to allow use of HAL RTC (and disallow use of builtin IIC RTC)
Admin:
  Tested on rev C2 beagleboard


Version 5.35, 4.79.2.98.2.11. Tagged as 'Kernel-5_35-4_79_2_98_2_11'
@
text
@a58 1
HALDeviceSysPeri_RTC    #       1       ; RTCDevice
d89 1
a89 1
HALDeviceSerBus_IIC     *       1 :SHL: 24
a106 3
                                ^       0
HALDeviceID_RTC_TPS65950        #       1

@


1.1.2.4.2.2
log
@Add header for video HAL devices, device IDs for OMAP3 DMA & video controllers to Cortex kernel
Detail:
  hdr/VideoDevice, Makefile - Add initial version of header for video HAL devices
  hdr/HALDevice - Add device IDs for OMAP3 DMA & video devices.
Admin:
  Tested on rev C2 beagleboard


Version 5.35, 4.79.2.98.2.16. Tagged as 'Kernel-5_35-4_79_2_98_2_16'
@
text
@a100 1
HALDeviceID_DMAC_OMAP3          #       1
a103 1
HALDeviceID_DMAB_OMAP3          #       1
a110 3
                                ^       0
HALDeviceID_VDU_OMAP3           #       1

@


1.1.2.4.2.3
log
@Add TPS65950 audio & mixer devices to Cortex HALDevice.hdr

Version 5.35, 4.79.2.98.2.19. Tagged as 'Kernel-5_35-4_79_2_98_2_19'
@
text
@a93 1
HALDeviceID_AudC_TPS65950       #       1
a96 1
HALDeviceID_Mixer_TPS65950      #       1
@


1.1.2.4.2.4
log
@Add ClearIRQ entry to base HAL device struct, plus a couple of new HAL device IDs & bus types
Detail:
  hdr/HALDevice, h/HALDevice - inserted the new 'ClearIRQ' entry point into one of the reserved areas.
  Once the RISC OS-side driver has serviced the device's IRQ the ClearIRQ entry point should be called to allow the HAL device to clear any latched interrupt states in intermediate IRQ controllers (e.g. when using GPIO IRQs on OMAP)
  Since this entry point is new, support for it in existing device drivers isn't guaranteed; HAL device implementations of existing APIs must make sure the use a new major version number to indicate that they require ClearIRQ to be called.
  hdr/HALDevice - added some new bus types to represent the GPMC & L3/L4 interconnects in the OMAP.
  hdr/HALDevice - added ethernet NIC device type & IDs for SMSC9221 & DM9000 NICs
Admin:
  Tested on rev C2 beagleboard


Version 5.35, 4.79.2.98.2.25. Tagged as 'Kernel-5_35-4_79_2_98_2_25'
@
text
@d40 1
a40 2
HALDevice_ClearIRQ      #       4
HALDevice_Reserved2     #       4
a63 1
HALDeviceComms_EtherNIC #       1       ; Ethernet NIC
a79 1
HALDevicePeriBus_GPMC   *       1 :SHL: 24
a91 5
HALDeviceBus_Interconnect    *  5 :SHL: 28 ; Not really a bus type, but the OMAP stuff had to go somewhere!

HALDeviceInterconnectBus_L3  *  0 :SHL: 24
HALDeviceInterconnectBus_L4  *  1 :SHL: 24

a117 4
                                ^       0
HALDeviceID_EtherNIC_SMSC9221   #       1
HALDeviceID_EtherNIC_DM9000     #       1                                

@


1.1.2.4.2.5
log
@Add ID's for CPUClk HAL device. Trim dead code.
Detail:
  hdr/HALDevice - Added device type & ID for new CPUClk device, as used by the new OMAP3 HAL/PortableHAL versions.
  s/PMF/osinit - Disable a block of dead code that was getting compiled in.
Admin:
  Tested on rev C2 BB, rev A2 BB-xM, rev C1 TouchBook
  These changes are needed by the latest OMAP3 HAL & PortableHAL versions.


Version 5.35, 4.79.2.98.2.36. Tagged as 'Kernel-5_35-4_79_2_98_2_36'
@
text
@a60 1
HALDeviceSysPeri_CPUClk #       1       ; CPU clock generator
a123 3
HALDeviceID_CPUClk_OMAP3        #       1

                                ^       0
@


1.1.2.4.2.6
log
@Add new GPIO device type & OMAP3 GPIO device ID
Detail:
  hdr/HALDevice - Added GPIO device type in the Comms group, and an ID for a generic OMAP3 GPIO device
  hdr/GPIODevice - Definition of GPIO device structure. Currently only used to store the type and revision of the main board, so the GPIO manager module can tailor its features appropriately.
  Makefile - Export hdr/GPIODevice
Admin:
  Tested on rev A2 BB-xM


Version 5.35, 4.79.2.98.2.42. Tagged as 'Kernel-5_35-4_79_2_98_2_42'
@
text
@a66 1
HALDeviceComms_GPIO     #       1       ; GPIO interface
d132 1
a132 4
HALDeviceID_EtherNIC_DM9000     #       1

                                ^       0
HALDeviceID_GPIO_OMAP3          #       1                                
@


1.1.2.4.2.7
log
@  Kernel updates to support Cortex-A9 CPUs
Detail:
  hdr.ARMops
    added Cortex_A9
  hdr.HALDevice
    added OMAP4 specific device IDs
  hdr.KernelWS
    changed definition of DefIRQ1Vspace for M_CortexA9
  s.ARMops
    added CortexA9 specific code for enabling L2 cache
    added CPUDesc Cortex_A9
  s.NewIRQs
    added CortexA9 specific definition of MaxInterrupts
  s.NewReset
    added M_CortexA9 options
    line 1444: corrected typo
    line 187: commented out unnecessary operation
Admin:
  Submission from Willi Thei

Version 5.35, 4.79.2.98.2.50. Tagged as 'Kernel-5_35-4_79_2_98_2_50'
@
text
@a104 1
HALDeviceID_AudC_TWL6040	#	1
a108 1
HALDeviceID_Mixer_TWL6040	#	1
a113 1
HALDeviceID_DMAC_OMAP4		#	1
a117 1
HALDeviceID_DMAB_OMAP4		#	1
a123 1
HALDeviceID_RTC_TWL6030		#	1
a126 1
HALDeviceID_CPUClk_OMAP4	#	1
a129 1
HALDeviceID_VDU_OMAP4		#	1
a136 1
HALDeviceID_GPIO_OMAP4		#	1
d138 1
a138 1
 ] ; Included_Hdr_HALDevice
@


1.1.2.4.2.8
log
@Added definitions to Hdr:HALDevice required by SDIODriver

Version 5.35, 4.79.2.98.2.54. Tagged as 'Kernel-5_35-4_79_2_98_2_54'
@
text
@a68 4
HALDeviceType_ExpCtl    *       5 :SHL: 8
                        ^       1
HALDeviceExpCtl_SDIO    #       1       ; SD/SDIO host controller
                                        ; things like USB, FireWire, SATA, SAS controllers might go here
a145 3
                                ^       0
HALDeviceID_SDIO_SDHCI          #       1

@


