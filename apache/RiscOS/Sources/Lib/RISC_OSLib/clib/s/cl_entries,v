head	4.8;
access;
symbols
	RISC_OSLib-5_97:4.8
	RISC_OSLib-5_96:4.8
	RISC_OSLib-5_95:4.8
	RISC_OSLib-5_94:4.8
	RISC_OSLib-5_93:4.8
	RISC_OSLib-5_92:4.8
	RISC_OSLib-5_91:4.8
	RISC_OSLib-5_90:4.7
	RISC_OSLib-5_89:4.7
	RISC_OSLib-5_88:4.7
	RISC_OSLib-5_87:4.7
	RISC_OSLib-5_86-1:4.7
	RISC_OSLib-5_86:4.7
	RISC_OSLib-5_85:4.7
	RISC_OSLib-5_84:4.7
	RISC_OSLib-5_83-2:4.7
	RISC_OSLib-5_83-1:4.7
	RISC_OSLib-5_83:4.7
	RISC_OSLib-5_82:4.7
	RISC_OSLib-5_81:4.7
	RISC_OSLib-5_75-2:4.7
	RISC_OSLib-5_80:4.7
	RISC_OSLib-5_79:4.7
	RISC_OSLib-5_78:4.7
	RISC_OSLib-5_75-1:4.7
	RISC_OSLib-5_77:4.7
	RISC_OSLib-5_76:4.7
	RISC_OSLib-5_75:4.7
	RISC_OSLib-5_74:4.7
	RISC_OSLib-5_73:4.7
	RISC_OSLib-5_72:4.7
	RISC_OSLib-5_71:4.7
	RISC_OSLib-5_70:4.7
	RISC_OSLib-5_69:4.7
	RISC_OSLib-5_68:4.7
	RISC_OSLib-5_67:4.7
	RISC_OSLib-5_66:4.6
	RISC_OSLib-5_65:4.6
	RISC_OSLib-5_64:4.6
	RISC_OSLib-5_63:4.5
	RISC_OSLib-5_62:4.5
	RISC_OSLib-5_61:4.5
	RISC_OSLib-5_60:4.5
	RISC_OSLib-5_59:4.5
	RISC_OSLib-5_58:4.5
	RISC_OSLib-5_57:4.5
	RISC_OSLib-5_56:4.5
	RISC_OSLib-5_55:4.5
	RISC_OSLib-5_54:4.5
	RISC_OSLib-5_53:4.5
	RISC_OSLib-5_52:4.5
	RISC_OSLib-5_51:4.5
	RO_5_07:4.5
	RISC_OSLib-5_50:4.5
	RISC_OSLib-5_49:4.5
	RISC_OSLib-5_46-4_64_2_1:4.4
	NoInlineAsm:4.4.0.2
	RISC_OSLib-5_48:4.4
	RISC_OSLib-5_47:4.4
	RISC_OSLib-5_46:4.4
	RISC_OSLib-5_45:4.4
	RISC_OSLib-5_44:4.4
	RISC_OSLib-5_43:4.4
	RISC_OSLib-5_42:4.4
	RISC_OSLib-5_41:4.4
	RISC_OSLib-5_40:4.3
	RISC_OSLib-5_39:4.3
	RISC_OSLib-5_38:4.2
	RISC_OSLib-5_37:4.2
	RISC_OSLib-5_36:4.1
	RISC_OSLib-5_35:4.1
	RISC_OSLib-5_34:4.1
	RISC_OSLib-5_33-4_50_2_1:4.1
	sbrodie_dev:4.1.0.14
	sbrodie_dev_bp:4.1
	RISC_OSLib-5_33:4.1
	RISC_OSLib-5_32:4.1
	RISC_OSLib-5_31:4.1
	RISC_OSLib-5_30:4.1
	RISC_OSLib-5_29:4.1
	RISC_OSLib-5_28:4.1
	RISC_OSLib-5_27:4.1
	RISC_OSLib-5_26:4.1
	RISC_OSLib-5_25:4.1
	RISC_OSLib-5_24:4.1
	RISC_OSLib-5_01-4_16_2_5:4.1
	RISC_OSLib-5_23:4.1
	RISC_OSLib-5_22:4.1
	RISC_OSLib-5_21:4.1
	RISC_OSLib-5_20:4.1
	RISC_OSLib-5_19:4.1
	RISC_OSLib-5_18:4.1
	RISC_OSLib-5_17:4.1
	RISC_OSLib-5_16:4.1
	RISC_OSLib-5_15:4.1
	dellis_autobuild_BaseSW:4.1
	RISC_OSLib-5_14:4.1
	RISC_OSLib-5_13:4.1
	RISC_OSLib-5_12:4.1
	RISC_OSLib-5_01-4_16_2_4:4.1
	RISC_OSLib-5_11:4.1
	RISC_OSLib-5_01-4_16_2_3:4.1
	RISC_OSLib-5_01-4_16_2_2:4.1
	RISC_OSLib-5_10:4.1
	RISC_OSLib-5_01-4_16_2_1:4.1
	Bethany:4.1.0.12
	RISC_OSLib-5_09:4.1
	RISC_OSLib-5_08:4.1
	RISC_OSLib-5_07:4.1
	RISC_OSLib-5_06:4.1
	RISC_OSLib-4_97-4_12_2_8:4.1
	RISC_OSLib-5_05:4.1
	RISC_OSLib-5_04:4.1
	sbrodie_sedwards_16Mar2000:4.1
	RISC_OSLib-5_03:4.1
	RISC_OSLib-5_02:4.1
	RISC_OSLib-4_97-4_12_2_7:4.1
	RISC_OSLib-5_01:4.1
	RISC_OSLib-5_00:4.1
	RISC_OSLib-4_99:4.1
	RISC_OSLib-4_98:4.1
	RISC_OSLib-4_97-4_12_2_6:4.1
	RISC_OSLib-4_97-4_12_2_5:4.1
	RISC_OSLib-4_97-4_12_2_4:4.1
	RISC_OSLib-4_97-4_12_2_3:4.1
	RISC_OSLib-4_97-4_12_2_2:4.1
	sbrodie_RISC_OSLib-4_97-4_12_2_1:4.1
	kbracey_32bit:4.1.0.10
	kbracey_32bit_bp:4.1
	dcotton_autobuild_BaseSW:4.1
	RISC_OSLib-4_97:4.1
	RISC_OSLib-4_96:4.1
	RISC_OSLib-4_95:4.1
	RISC_OSLib-4_94:4.1
	RISC_OSLib-4_93:4.1
	RISC_OSLib-4_92:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1
	Ursula_RiscPC:4.1.0.8
	sforrest_daytona_appflash-0_31:4.1
	RISC_OSLib-4_91:4.1
	RISC_OSLib-4_90:4.1
	RISC_OSLib-4_89:4.1
	Ursula_merge:4.1
	RISC_OSLib-4_88:4.1
	RISC_OSLib-4_87:4.1
	blaughto_daytona_appflash-0_30:4.1
	rmanby_clib-4_86:4.1
	rthornb_UrsulaBuild-19Aug1998:4.1
	UrsulaBuild_FinalSoftload:4.1
	rthornb_UrsulaBuild-12Aug1998:4.1
	aglover_UrsulaBuild-05Aug1998:4.1
	rthornb_UrsulaBuild-29Jul1998:4.1
	rthornb_UrsulaBuild-22Jul1998:4.1
	rthornb_UrsulaBuild-15Jul1998:4.1
	rthornb_UrsulaBuild-07Jul1998:4.1
	rthornb_UrsulaBuild-17Jun1998:4.1
	rthornb_UrsulaBuild-03Jun1998:4.1
	rthornb_UrsulaBuild-27May1998:4.1
	rthornb_UrsulaBuild-21May1998:4.1
	rthornb_UrsulaBuild_01May1998:4.1
	afrost_NC2_Generic:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.8
date	2016.05.24.22.50.23;	author jlee;	state Exp;
branches;
next	4.7;
commitid	RYaH5CsBb1WpUM7z;

4.7
date	2012.03.27.22.55.02;	author jlee;	state Exp;
branches;
next	4.6;
commitid	4ahLgmOK8LufLzYv;

4.6
date	2011.10.28.14.23.31;	author bavison;	state Exp;
branches;
next	4.5;
commitid	hIG6j26y6NoxM7Fv;

4.5
date	2004.01.23.19.10.21;	author kbracey;	state Exp;
branches;
next	4.4;

4.4
date	2002.05.22.10.45.25;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	2002.04.11.16.37.53;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	2002.03.21.14.36.25;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.24.58;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.24.58;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.19.52.40;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.11.28.37;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.19.48.23;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.8
log
@When multiple CPU architectures are supported, allow dynamically linked clients to be given optimal versions of routines where possible
Detail:
  This set of changes adds support for representing architecture-specific variants of routines within the export tables which the shared C library uses to fill in the client's stubs.
  This allows builds of the module which target multiple architectures (e.g. IOMD, Raspberry Pi, or softloads) to offer the most optimal versions of routines to clients wherever multiple variants exist.
  If only one architecture is supported, only one version of each routine will be built, and no variant tables will be generated.
  Currently routine selection for staticly linked clients isn't supported - staticly linked targets will only use the most backwards-compatible version of the routines, as before. Also not all routines are catered for yet (e.g. _ll_udiv)
  File changes:
  - s/h_common - New file containing macros used during variant table construction
  - Makefile - Set SHARED_C_LIBRARY to {TRUE} for SCL builds of assembler code, as per the SHARED_C_LIBRARY #define
  - kernel/s/k_body, s/longlong - For routines which have multiple variants available for the target architectures, build all variants, and generate variant table entries using the new RoutineVariant macro. This has required some reordering of the different variants to make sure that when both versions are built, the most backwards-compatible one will be first (and thus will be called by staticly linked clients)
  - s/h_modmacro - "Entry" macro (when building SCL export tables) changed to use DCD instead of B, to allow byte-aligned symbols to be represented (low bits of symbol address is now used as 'is a variant table' flag)
  - s/initmodule - Client stub initialisation rewritten to take into account the B -> DCD change, and to detect and evaluate variant entries
  - clib/s/cl_entries, kernel/s/k_entries, kernel/s/k_entries2 - Update library entry tables to reference the variant forms of routines where relevant
Admin:
  Tested on Raspberry Pi 1, 2, 3 (ROM), RISC OS 3.1 & StrongARM 3.7 (softload 26bit build)
  Requires Kernel-5_35-4_79_2_325


Version 5.91. Tagged as 'RISC_OSLib-5_91'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
;-*- Mode: Assembler -*-
; 19-Nov-91 ECN Added _swi and _swix
;
; Copyright (C) Acorn Computers Ltd., 1989.
;
; Add new entries ONLY AT THE END of the list
;
; IDJ: 11-Apr-94:  Entry2 added to allow aliasing of entry points known to the ARM compiler
;                  eg x$stack_overflow and __rt_stkovf_split_small
;

        Entry   TrapHandler, , , , 2
        Entry   UncaughtTrapHandler, , , , 2
        Entry   EventHandler, , , , 2
        Entry   UnhandledEventHandler, , , , 2

        Entry2  |x$stack_overflow|, imported, _kernel_stkovf_split_0frame, _kernel_stkovfs_0v, , IMPORT, __rt_stkovf_split_small
        Entry2  |x$stack_overflow_1|, imported, _kernel_stkovf_split, _kernel_stkovfs_v, , IMPORT, __rt_stkovf_split_big
        Entry2   |x$udivide|    , imported , |_kernel_udiv$variant| , , 2, ,__rt_udiv
        Entry   |x$uremainder| , imported , _kernel_urem , , 2
        Entry2   |x$divide|     , imported , |_kernel_sdiv$variant| , , 2, ,__rt_sdiv
        Entry2   |x$divtest|    ,          ,              , , 1, ,__rt_divtest
        Entry   |x$remainder|  , imported , _kernel_srem , , 2
        Entry   |x$multiply|   ,          ,              , direct, 2
        Entry2   _rd1chk      , , , , 1,, __rt_rd1chk
        Entry2   _rd2chk      , , , , 1,, __rt_rd2chk
        Entry2   _rd4chk      , , , , 1,, __rt_rd4chk
        Entry2   _wr1chk      , , , , 1,, __rt_wr1chk
        Entry2   _wr2chk      , , , , 1,, __rt_wr2chk
        Entry2   _wr4chk      , , , , 1,, __rt_wr4chk
        Entry   _main, imported , , , 2
        Entry   _exit        , , , , 1
        Entry   _clib_initialise, , , , 3
        Entry   _backtrace, imported, , , 3
        Entry   _count       , , , , 0
        Entry   _count1      , , , , 0
        Entry   _stfp        , , , , 3
        Entry   _ldfp        , , , , 1

        Entry   _printf, imported  , , , varargs
        Entry   _fprintf, imported , , , varargs
        Entry   _sprintf, imported , , , varargs
        Entry   clock, imported, , , 0
        Entry   difftime, imported, , , 2
        Entry   mktime, imported, , , 1
        Entry   time, imported, , , 1
        Entry   asctime, imported, , , 1
        Entry   ctime, imported, , , 1
        Entry   gmtime, imported, , , 1
        Entry   localtime, imported, , , 1
        Entry   strftime, imported, , , 4
        Entry   memcpy, imported, , , 3
        Entry   memmove, imported, , , 3
        Entry   strcpy, imported, , , 2
        Entry   strncpy, imported, , , 3
        Entry   strcat, imported, , , 2
        Entry   strncat, imported, , , 3
        Entry   memcmp, imported, , , 3
        Entry   strcmp, imported, , , 2
        Entry   strncmp, imported, , , 3
        Entry   memchr, imported, , , 3
        Entry   strchr, imported, , , 2
        Entry   strcspn, imported, , , 2
        Entry   strpbrk, imported, , , 2
        Entry   strrchr, imported, , , 2
        Entry   strspn, imported, , , 2
        Entry   strstr, imported, , , 2
        Entry   strtok, imported, , , 2
        Entry   memset, imported, , , 3
        Entry   strerror, imported, , , 1
        Entry   strlen, imported, , , 1
        Entry   atof, imported, , , 1
        Entry   atoi, imported, , , 1
        Entry   atol, imported, , , 1
        Entry   strtod, imported, , , 2
        Entry   strtol, imported, , , 3
        Entry   strtoul, imported, , , 3
        Entry   rand, imported, , , 1
        Entry   srand, imported, , , 1
        Entry   calloc, imported, , , 2
        Entry   free, imported, , , 1
        Entry   malloc, imported, , , 1
        Entry   realloc, imported, , , 2
        Entry   abort, imported, , , 0
        Entry   atexit, imported, , , 1
        Entry   exit, imported, , , 1
        Entry   getenv, imported, , , 1
        Entry   system, imported, , , 1
        Entry   bsearch, imported, , __bsearch, , IMPORT
        Entry   qsort, imported, , , 4
        Entry   abs, imported, , , 1
        Entry   div, , , , 2
        Entry   labs, imported, , , 1
        Entry   ldiv, , , , 2
        Entry   remove, imported, , , 1
        Entry   rename, imported, , , 2
        Entry   tmpfile, imported, , , 1
        Entry   __old_tmpnam, imported, tmpnam, , 1
        Entry   fclose, imported, , , 1
        Entry   fflush, imported, , , 1
        Entry   fopen, imported, , , 2
        Entry   freopen, imported, , , 3
        Entry   setbuf, imported, , , 2
        Entry   setvbuf, imported, , , 4
        Entry   printf, imported   , , , varargs
        Entry   fprintf, imported  , , , varargs
        Entry   sprintf, imported  , , , varargs
        Entry   scanf, imported    , , , varargs
        Entry   fscanf, imported   , , , varargs
        Entry   sscanf, imported   , , , varargs
        Entry   vprintf, imported  , , , 2
        Entry   vfprintf, imported , , , 3
        Entry   vsprintf, imported , , , 3
        Entry   _vfprintf, imported, , , 3
        Entry   fgetc, imported    , , , 1
        Entry   fgets, imported    , , , 3
        Entry   fputc, imported    , , , 2
        Entry   fputs, imported    , , , 2
        Entry   __filbuf, imported , , , 1
        Entry   getc, imported     , , , 1
        Entry   getchar, imported  , , , 0
        Entry   gets, imported     , , , 1
        Entry   __flsbuf, imported , , , 2
        Entry   putc, imported     , , , 2
        Entry   putchar, imported  , , , 1
        Entry   puts, imported     , , , 1
        Entry   ungetc, imported   , , , 2
        Entry   fread, imported    , , , 4
        Entry   fwrite, imported   , , , 4
        Entry   fgetpos, imported  , , , 2
        Entry2  fseek, imported    , , , 3, , _fseeko
        Entry   fsetpos, imported  , , , 2
        Entry2  ftell, imported    , , , 1, , _ftello
        Entry   rewind, imported   , , , 1
        Entry   clearerr, imported , , , 1
        Entry   feof, imported     , , , 1
        Entry   ferror, imported   , , , 1
        Entry   perror, imported   , , , 1
        Entry   __ignore_signal_handler, imported, , , 1
        Entry   __default_signal_handler, imported, , , 1
        Entry   __error_signal_marker, imported, , , 1
        Entry   signal, imported , , , 2
        Entry   raise, imported , , , 1
        Entry   setjmp, , , , 1
        Entry   longjmp, , , , 2

        Entry   acos , , , , 2
        Entry   asin , , , , 2
        Entry   atan , imported, , , 2
        Entry   atan2, imported, , , 4
        Entry   cos  , , , , 2
        Entry   sin  , , , , 2
        Entry   tan  , , , , 2
        Entry   cosh, imported, , , 2
        Entry   sinh, imported, , , 2
        Entry   tanh, imported, , , 2
        Entry   exp, , , , 2
        Entry   frexp, imported, , , 3
        Entry   ldexp, imported, , , 3
        Entry   log  , , , , 2
        Entry   log10, , , , 2
        Entry   modf, imported, , , 4
        Entry   pow  , , , , 4
        Entry   sqrt , , , , 2
        Entry   ceil, imported, , , 2
        Entry   fabs, imported, , , 2
        Entry   floor, imported, , , 2
        Entry   fmod, imported, , , 4
        Entry   setlocale, imported , , , 2
        Entry   isalnum, imported , , , 1
        Entry   isalpha, imported , , , 1
        Entry   iscntrl, imported , , , 1
        Entry   isdigit, imported , , , 1
        Entry   isgraph, imported , , , 1
        Entry   islower, imported , , , 1
        Entry   isprint, imported , , , 1
        Entry   ispunct, imported , , , 1
        Entry   isspace, imported , , , 1
        Entry   isupper, imported , , , 1
        Entry   isxdigit, imported , , , 1
        Entry   tolower, imported , , , 1
        Entry   toupper, imported , , , 1
        Entry   __assert, imported , , , 3
        Entry   _memcpy, , , , 3
        Entry   _memset, , , , 3
        Entry   localeconv, imported , , , 0
        Entry   mblen, imported, , , 2
        Entry   mbtowc, imported, , , 3
        Entry   wctomb, imported, , , 2
        Entry   mbstowcs, imported, , , 3
        Entry   wcstombs, imported, , , 3
        Entry   strxfrm, imported, , , 3
        Entry   strcoll, imported, , , 2

        Entry   _clib_finalisemodule, , , unveneered
        Entry   _clib_version, imported, , unveneered
        Entry   _CLib_Finalise, imported, _lib_shutdown, unveneered
        Entry   tmpnam, imported, , unveneered

        Entry   _swi, imported, , unveneered
        Entry   _swix, imported, , unveneered

; __va_illegal_arg 0
        END
@


4.7
log
@Fix asasm 2.00 warnings
Detail:
  clib/s/cl_entries - Symbol names containing $'s are now wrapped in |'s to prevent potential unintended variable expansion
  s/h_modmacro, s/h_stubs - Modify Entry/Entry2 to not add their own vertical bars to symbol names (causing two sets of bars that cancel each other out)
Admin:
  Tungsten ROM version identical to before when built under objasm
  Needs Library-1_54 for ROM link symbol files to be generated correctly


Version 5.67. Retagged as 'RISC_OSLib-5_67'
@
text
@d33 1
a33 1
        Entry2   |x$udivide|    , imported , _kernel_udiv , , 2, ,__rt_udiv
d35 1
a35 1
        Entry2   |x$divide|     , imported , _kernel_sdiv , , 2, ,__rt_sdiv
@


4.6
log
@  File handling improvements
Detail:
  * Added 64-bit file pointer API support, following the LFS spec v1.5
    (see Docs directory). Internally, now uses 64-bit file pointers
    exclusively. For now, the backend still limits you to 4GB-1 files, but
    clients of the C library won't need recompiling again to support larger
    files than this once they use the new API.
  * Fixed a large number of warnings produced in compilation, assembly and
    linking, many of them new and resulting from the improved checks in the
    latest toolchain.
  * Increased the maximum stream buffer size from 16MB to 1GB.
  * Added Hdr:SDFS and Hdr:SDIO to the list of headers used to build swis.h
    if they are present.
Admin:
  Verified that the new 64-bit file pointer buffering code works using a
  ROM build (since the toolchain makes extensive use of reading, writing
  and seeking internally).

Version 5.64. Tagged as 'RISC_OSLib-5_64'
@
text
@d31 8
a38 8
        Entry2  x$stack_overflow, imported, _kernel_stkovf_split_0frame, _kernel_stkovfs_0v, , IMPORT, __rt_stkovf_split_small
        Entry2  x$stack_overflow_1, imported, _kernel_stkovf_split, _kernel_stkovfs_v, , IMPORT, __rt_stkovf_split_big
        Entry2   x$udivide    , imported , _kernel_udiv , , 2, ,__rt_udiv
        Entry   x$uremainder , imported , _kernel_urem , , 2
        Entry2   x$divide     , imported , _kernel_sdiv , , 2, ,__rt_sdiv
        Entry2   x$divtest    ,          ,              , , 1, ,__rt_divtest
        Entry   x$remainder  , imported , _kernel_srem , , 2
        Entry   x$multiply   ,          ,              , direct, 2
@


4.5
log
@<ctype.h> * isblank() added.
          * isprint() now true for non-breaking spaces
<math.h>  * FP_INFINITY corrected to FP_INFINITE
          * fma(), fmal(), llrint(), llrintf(), llrintl(),
            llround(), llroundf(), llroundl(),
            remquo(), remquof(), remquol() added.
          * added inlining for remainder() and fmaf() and various
            float functions.
          * math_errhandling removed pending overhaul - it was misleading.
          * expm1() and log1p() now provide decent (< 1 ulp) accuracy,
            rather than only being marginally better than exp(x)-1 and
            log(1+x).
          * new version of copysign() with standard calling conventions.
          * some C99 functions changed to use infinity/NaNs and exceptions
            for error handling - see comments in header file about the
            changes in progress.
<stdio.h>  * output from %a now correctly rounded
<stdlib.h> * strtof() and strtold() added.
<string.h> * strerror() no longer clears _kernel_last_oserror().

Version 5.49. Tagged as 'RISC_OSLib-5_49'
@
text
@d145 1
a145 1
        Entry   fseek, imported    , , , 3
d147 1
a147 1
        Entry   ftell, imported    , , , 1
@


4.4
log
@* Added two new library chunks, 4 and 5, which contain extensions to the kernel
  and C library respectively. These have no static data associated with them,
  just being extensions of the stub tables. The reason for this is to minimise
  wasted space in programs that don't use the C99 facilities; o.stubs is now
  a library split into 3 pieces - basic kernel and CLib, extra kernel and extra
  CLib; only the bits a program needs get included.

* Previous extensions to the C library stubs revoked - they now stop at _swix;
  all the new C99 functions now live in chunk 4. Anyone using those new
  functions should relink with new stubs and ensure this C library version.

* printf/scanf now support 64-bit types through "ll" and "j" length modifiers.

* Run-time support for VLAs (__rt_allocauto and __rt_freeauto) added. No
  attempt is currently made to clear up on longjmp or to cope with someone
  changing the kernel allocator while a VLA is active. These would be a
  future enhancement.

* Added complete 64-bit run-time support (48 functions) to kernel library;
  these functions are compatible with the ones used by the ARM ADS. Many of
  the simpler functions will not normally be used by the compiler, as it
  will generate inline code. There is scope for improvement by switching
  in MULL and CLZ-using forms of multiply and divide when possible.

* llabs and lldiv added to C library.

* Header files corrected in a few areas, and changed to match the C compiler.
  <stdint.h> and <stdbool.h> now require the compiler to be in C99 mode
  (as detected using __STDC_VERSION__).


Version 5.41. Tagged as 'RISC_OSLib-5_41'
@
text
@d165 2
a166 2
        Entry   cos  , imported, , , 2
        Entry   sin  , imported, , , 2
@


4.3
log
@* Added C99 functions floorf, ceilf, [l]rint[f], trunc[f], [l]round[f],
  nearbyint[f] and remainder[f].
* Added macros (only) for sinf, cosf, atanf.
* Requires cc 5.43

Version 5.39. Tagged as 'RISC_OSLib-5_39'
@
text
@a216 56
        Entry   __fpclassifyf, , , unveneered
        Entry   __fpclassifyd, , , unveneered
        Entry   __signbitf, , , unveneered
        Entry   __signbitd, , , unveneered
        Entry   copysign, , , unveneered
        Entry   copysignf, , , unveneered
        Entry   nan, imported, , unveneered
        Entry   nanf, imported, , unveneered
        Entry   nextafter, , , unveneered
        Entry   nextafterf, , , unveneered
        Entry   fdim, imported, , unveneered
        Entry   fdimf, imported, , unveneered
        Entry   fmax, , , unveneered
        Entry   fmaxf, , , unveneered
        Entry   fmin, , , unveneered
        Entry   fminf, , , unveneered
        Entry   fabsf, imported, , unveneered
        Entry   hypot, , , unveneered
        Entry   hypotf, , , unveneered

        Entry   feclearexcept, imported, , unveneered
        Entry   fegetexceptflag, imported, , unveneered
        Entry   feraiseexcept, imported, , unveneered
        Entry   fesetexceptflag, imported, , unveneered
        Entry   fetestexcept, imported, , unveneered
        Entry   fegetround, imported, , unveneered
        Entry   fesetround, imported, , unveneered
        Entry   fegetenv, imported, , unveneered
        Entry   feholdexcept, imported, , unveneered
        Entry   fesetenv, imported, , unveneered
        Entry   feupdateenv, imported, , unveneered

        Entry   _snprintf, imported, , unveneered
        Entry   snprintf, imported, , unveneered
        Entry   vsnprintf, imported, , unveneered
        Entry   vfscanf, imported, , unveneered
        Entry   vscanf, imported, , unveneered
        Entry   vsscanf, imported, , unveneered

        Entry   ceilf, imported, , unveneered
        Entry   floorf, imported, , unveneered
        Entry   nearbyint, , , unveneered
        Entry   nearbyintf, , , unveneered
        Entry   rint, imported, , unveneered
        Entry   rintf, imported, , unveneered
        Entry   lrint, imported, , unveneered
        Entry   lrintf, imported, , unveneered
        Entry   round, , , unveneered
        Entry   roundf, , , unveneered
        Entry   lround, , , unveneered
        Entry   lroundf, , , unveneered
        Entry   trunc, imported, , unveneered
        Entry   truncf, imported, , unveneered
        Entry   remainder, , , unveneered
        Entry   remainderf, , , unveneered

@


4.2
log
@Added the following C99 features:

  * snprintf(), vsnprintf(), vfscanf(), vscanf(), vsscanf()
  * hh, j, z and t printf length modifiers (indicating char, intmax_t, size_t
    and ptrdiff_t respectively)
  * Hexadecimal floating-point printing and scanning (%a/%A)
  * %F printf() specifier (upper-case form of %F)
  * Input/output of NaNs and Infinities
  * imaxdiv_t, imaxdiv(), strtoimax(), strtoumax() (simulated through macros)
  * <fenv.h>: feclearexcept(), fegetexceptflag(), feraiseexcept(),
              fesetexceptflag(), fetestexcept(), fegetround(), fesetround(),
              fegetenv(), feholdexcept(), fesetenv(), feupdateenv()
  * FLT_EVAL_METHOD, DECIMAL_DIG
  * hypot(), hypotf(), fabsf(), fdim(), fdimf(), fmax(), fmaxf(), fmin(),
    fminf()
  * INFINITY, NAN, fpclassify(), isfinite(), isinf(), isnan(), isnormal(),
    signbit(), copysign(), copysignf(), nan(), nanf(), nextafter(),
    nextafterf() isgreater(), isgreaterequal(), isless(), islessequal(),
    islessgreater(), isunordered()

This involves adding 36 new entries to the stubs. Current versions of the C
library will not fault client programs with such larger stubs, but will fill
in the extra entries with junk. Programs requiring the new functions will have
to RMEnsure this version of the Shared C Library.

This version of the C library has been fixed so that in future, any extra
unknown stubs entries will be filled in with a branch to zero, rather than
corrupted.

Requires cc 5.41 or later, both to build, and to make use of some of the extra
facilities.


Version 5.37. Tagged as 'RISC_OSLib-5_37'
@
text
@d163 1
a163 1
        Entry   atan , , , , 2
d165 2
a166 2
        Entry   cos  , , , , 2
        Entry   sin  , , , , 2
d234 2
a235 2
        Entry   hypot, imported, , unveneered
        Entry   hypotf, imported, , unveneered
d255 17
@


4.1
log
@Initial revision
@
text
@d106 1
a106 1
        Entry   div, imported, , , 2
d108 1
a108 1
        Entry   ldiv, imported, , , 2
d216 39
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
