head	4.6;
access;
symbols
	RISC_OSLib-5_64:4.5
	RISC_OSLib-5_63:4.5
	RISC_OSLib-5_62:4.5
	RISC_OSLib-5_61:4.5
	RISC_OSLib-5_60:4.5
	RISC_OSLib-5_59:4.5
	RISC_OSLib-5_58:4.5
	RISC_OSLib-5_57:4.5
	RISC_OSLib-5_56:4.5
	RISC_OSLib-5_55:4.5
	RISC_OSLib-5_54:4.5
	RISC_OSLib-5_53:4.5
	RISC_OSLib-5_52:4.5
	RISC_OSLib-5_51:4.5
	RO_5_07:4.5
	RISC_OSLib-5_50:4.5
	RISC_OSLib-5_49:4.5
	RISC_OSLib-5_46-4_64_2_1:4.5
	NoInlineAsm:4.5.0.6
	RISC_OSLib-5_48:4.5
	RISC_OSLib-5_47:4.5
	RISC_OSLib-5_46:4.5
	RISC_OSLib-5_45:4.5
	RISC_OSLib-5_44:4.5
	RISC_OSLib-5_43:4.5
	RISC_OSLib-5_42:4.5
	RISC_OSLib-5_41:4.5
	RISC_OSLib-5_40:4.5
	RISC_OSLib-5_39:4.5
	RISC_OSLib-5_38:4.5
	RISC_OSLib-5_37:4.5
	RISC_OSLib-5_36:4.5
	RISC_OSLib-5_35:4.5
	RISC_OSLib-5_34:4.5
	RISC_OSLib-5_33-4_50_2_1:4.5
	sbrodie_dev:4.5.0.4
	sbrodie_dev_bp:4.5
	RISC_OSLib-5_33:4.5
	RISC_OSLib-5_32:4.5
	RISC_OSLib-5_31:4.5
	RISC_OSLib-5_30:4.5
	RISC_OSLib-5_29:4.5
	RISC_OSLib-5_28:4.5
	RISC_OSLib-5_27:4.5
	RISC_OSLib-5_26:4.5
	RISC_OSLib-5_25:4.5
	RISC_OSLib-5_24:4.5
	RISC_OSLib-5_01-4_16_2_5:4.5
	RISC_OSLib-5_23:4.5
	RISC_OSLib-5_22:4.5
	RISC_OSLib-5_21:4.5
	RISC_OSLib-5_20:4.5
	RISC_OSLib-5_19:4.5
	RISC_OSLib-5_18:4.5
	RISC_OSLib-5_17:4.5
	RISC_OSLib-5_16:4.5
	RISC_OSLib-5_15:4.5
	dellis_autobuild_BaseSW:4.5
	RISC_OSLib-5_14:4.5
	RISC_OSLib-5_13:4.5
	RISC_OSLib-5_12:4.5
	RISC_OSLib-5_01-4_16_2_4:4.5
	RISC_OSLib-5_11:4.5
	RISC_OSLib-5_01-4_16_2_3:4.5
	RISC_OSLib-5_01-4_16_2_2:4.5
	RISC_OSLib-5_10:4.5
	RISC_OSLib-5_01-4_16_2_1:4.5
	Bethany:4.5.0.2
	RISC_OSLib-5_09:4.5
	RISC_OSLib-5_08:4.5
	RISC_OSLib-5_07:4.5
	RISC_OSLib-5_06:4.5
	RISC_OSLib-5_05:4.5
	RISC_OSLib-5_04:4.5
	sbrodie_sedwards_16Mar2000:4.5
	RISC_OSLib-5_03:4.5
	RISC_OSLib-5_02:4.5
	RISC_OSLib-5_01:4.5
	RISC_OSLib-5_00:4.5
	RISC_OSLib-4_99:4.5
	RISC_OSLib-4_97-4_12_2_2:4.3
	sbrodie_RISC_OSLib-4_97-4_12_2_1:4.3
	kbracey_32bit:4.3.0.2
	kbracey_32bit_bp:4.3
	dcotton_autobuild_BaseSW:4.5
	RISC_OSLib-4_97:4.3
	RISC_OSLib-4_96:4.3
	RISC_OSLib-4_95:4.3
	RISC_OSLib-4_94:4.3
	RISC_OSLib-4_93:4.3
	RISC_OSLib-4_92:4.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.3.2
	Ursula_RiscPC:4.1.3.2.0.6
	sforrest_daytona_appflash-0_31:4.1.3.2
	RISC_OSLib-4_91:4.3
	RISC_OSLib-4_90:4.3
	RISC_OSLib-4_89:4.3
	Ursula_merge:4.1.3.2
	RISC_OSLib-4_88:4.2
	RISC_OSLib-4_87:4.2
	blaughto_daytona_appflash-0_30:4.1.3.2
	rmanby_clib-4_86:4.1.3.2
	rthornb_UrsulaBuild-19Aug1998:4.1.3.2
	UrsulaBuild_FinalSoftload:4.1.3.2
	rthornb_UrsulaBuild-12Aug1998:4.1.3.2
	aglover_UrsulaBuild-05Aug1998:4.1.3.2
	rthornb_UrsulaBuild-29Jul1998:4.1.3.2
	rthornb_UrsulaBuild-22Jul1998:4.1.3.2
	rthornb_UrsulaBuild-15Jul1998:4.1.3.2
	rthornb_UrsulaBuild-07Jul1998:4.1.3.2
	rthornb_UrsulaBuild-17Jun1998:4.1.3.2
	rthornb_UrsulaBuild-03Jun1998:4.1.3.2
	rthornb_UrsulaBuild-27May1998:4.1.3.2
	rthornb_UrsulaBuild-21May1998:4.1.3.2
	rthornb_UrsulaBuild_01May1998:4.1.3.2
	Daytona:4.1.3.2.0.4
	Daytona_bp:4.1.3.2
	Ursula:4.1.3.2.0.2
	Ursula_bp:4.1.3.2
	RO_3_71:4.1.3.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	StrongARM:4.1.3;
locks; strict;
comment	@# @;


4.6
date	2011.11.26.13.04.59;	author rsprowson;	state dead;
branches;
next	4.5;
commitid	oqcep4Kpl6STpQIv;

4.5
date	99.11.25.12.59.51;	author sbrodie;	state Exp;
branches;
next	4.4;

4.4
date	99.11.10.14.02.37;	author kbracey;	state dead;
branches;
next	4.3;

4.3
date	98.10.01.09.14.38;	author kbracey;	state Exp;
branches
	4.3.2.1;
next	4.2;

4.2
date	98.08.27.15.07.31;	author smiddle;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.19.56.20;	author nturton;	state Exp;
branches
	4.1.3.1;
next	;

4.3.2.1
date	99.11.10.16.59.11;	author kbracey;	state dead;
branches;
next	;

4.1.3.1
date	96.11.05.19.56.20;	author nturton;	state Exp;
branches
	4.1.3.1.2.1;
next	4.1.3.2;

4.1.3.2
date	97.05.01.14.22.17;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1.2.1
date	97.04.29.20.33.49;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.6
log
@Review use of StrongARM switch.
Was being used to conditionalise things which aren't really StrongARM related, now should be read as "support split I+D caches" switch.

Version 5.65. Tagged as 'RISC_OSLib-5_65'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;

	GET	Hdr:ListOpts
	GET	Hdr:Machine.<Machine>
	GET	Hdr:CPU.Generic26
	GET	Hdr:Macros
	GET	Hdr:SWIs
	GET	Hdr:RISCOS

        GBLL    StrongARM
	GBLL	SASTMhatbroken

StrongARM	SETL :DEF: AMBKernel
SASTMhatbroken	SETL {TRUE} :LAND: StrongARM

  [ StrongARM
        ;macro to synchronise to $Ncodewords words of code on (FD) stack
        MACRO
        SyncStackCode $Ncodewords
        STMFD  sp!,{r0-r2,lr}
        MOV    r0,#1                    ;means range specified in r1,r2
        ADD    r1,sp,#4*4               ;start address (allowing for stacked r0-r2,lr)
        ADD    r2,r1,#($Ncodewords-1)*4 ;end address (inclusive) for $Ncodewords words of code
        SWI    XOS_SynchroniseCodeAreas ;do the necessary
        LDMFD  sp!,{r0-r2,lr}
        MEND
  ]

        END
@


4.5
log
@Resurrected file removed from TRUNK by mistake
@
text
@@


4.4
log
@_kernel_unwind now understands SFMFD instructions in function entry.
It also copes with STFE now - it was totally broken.
32-bit stubs and corresponding LibInit SWIs created.
All rather untested.

Version 4.97, 4.12.2.3. Tagged as 'RISC_OSLib-4_97-4_12_2_3'
@
text
@@


4.3
log
@Ursula branch merged.
StrongARMfudge flag removed.
StrongARM compatibility set according to AMBKernel flag in Hdr:RISCOS
strftime %U and %W specifiers fixed for week 0.

Version 4.89. Tagged as 'RISC_OSLib-4_89'
@
text
@@


4.3.2.1
log
@Most of the obvious problems in the last check-in fixed. It now builds, at
least.
Stubs now correctly, and internationalisably, report "C library too old".
Both BL and LDR PC forms of branch table successfully created.
Tested on various existing 26-bit programs, and one 32-bit program tested.

Version 4.97, 4.12.2.4. Tagged as 'RISC_OSLib-4_97-4_12_2_4'
@
text
@@


4.2
log
@Fixed h_StrongA to pick up the processor type and fixed knock-on problems
@
text
@d18 4
a23 1
        GBLL    StrongARMfudge
d26 1
a26 2
StrongARM	SETL :LNOT:STB
StrongARMfudge	SETL StrongARM
a27 4

XOS_SynchroniseCodeAreas * &2006e
XOS_CallASWIR12          * &20071
XOS_PlatformFeatures     * &2006d
@


4.1
log
@Initial revision
@
text
@d16 3
d20 2
a21 1
StrongARM SETL {TRUE}
d23 3
a25 2
        GBLL    SAnaffsilicon
SAnaffsilicon  SETL {TRUE} :LAND: StrongARM
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.3.2
log
@Version RO_3_70 taken
@
text
@d17 1
a17 1
	GBLL	SASTMhatbroken
d19 2
a20 2
StrongARM	SETL {TRUE}
SASTMhatbroken	SETL {TRUE} :LAND: StrongARM
@


4.1.3.1.2.1
log
@Import from 3.71 CD
@
text
@d17 1
a17 1
	GBLL	SASTMhatbroken
d19 2
a20 2
StrongARM	SETL {TRUE}
SASTMhatbroken	SETL {TRUE} :LAND: StrongARM
@
