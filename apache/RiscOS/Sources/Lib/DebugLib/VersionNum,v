head	1.68;
access;
symbols
	DebugLib-0_72:1.68
	DebugLib-0_71:1.67
	DebugLib-0_70:1.66
	DebugLib-0_69:1.65
	DebugLib-0_68:1.64
	DebugLib-0_67:1.63
	DebugLib-0_66:1.62
	DebugLib-0_65:1.61
	DebugLib-0_64:1.60
	RO_5_07:1.59
	DebugLib-0_63:1.59
	DebugLib-0_62:1.58
	DebugLib-0_61:1.57
	DebugLib-0_60:1.56
	DebugLib-0_59:1.55
	DebugLib-0_58:1.53
	DebugLib-0_57:1.52
	dellis_autobuild_BaseSW:1.51
	DebugLib-0_56:1.51
	DebugLib-0_55:1.50
	DebugLib-0_54:1.49
	DebugLib-0_53:1.48
	DebugLib-0_52:1.47
	DebugLib-0_51:1.46
	DebugLib-0_50:1.45
	DebugLib-0_49:1.44
	sbrodie_sedwards_16Mar2000:1.43
	DebugLib-0_48:1.43
	DebugLib-0_47:1.42
	DebugLib-0_46:1.41
	dcotton_autobuild_BaseSW:1.57
	DebugLib-0_45:1.40
	DebugLib-0_44:1.39
	DebugLib-0_43:1.38
	DebugLib-0_42:1.37
	DebugLib-0_41:1.36
	DebugLib-0_40:1.35
	DebugLib-0_39:1.34
	DebugLib-0_38:1.33
	DebugLib-0_33-1_28_2_1:1.28.2.1
	DebugLib-0_37:1.32
	DebugLib-0_36:1.31
	DebugLib-0_35:1.30
	DebugLib-0_34:1.29
	nturton_DebugLib-0_24:1.19
	DebugLib-0_33:1.28
	DebugLib-0_32:1.27
	DebugLib-0_31:1.26
	DebugLib-0_30:1.25
	DebugLib-0_29:1.24
	DebugLib-0_28:1.23
	DebugLib-0_27:1.22
	DebugLib-0_26:1.21
	DebugLib-0_25:1.20
	DebugLib-0_24:1.18
	DebugLib-0_23:1.17
	DebugLib-0_22:1.16
	DebugLib-0_21:1.15
	DebugLib-0_20:1.14
	DebugLib-0_19:1.13
	DebugLib-0_18:1.11
	DebugLib-0_17:1.10
	DebugLib-0_16:1.9
	DebugLib-0_15:1.8
	DebugLib-0_14:1.7
	DebugLib-0_13:1.6
	DebugLib-0_12:1.5
	DebugLib-0_11:1.3
	DebugLib-0_10:1.2;
locks; strict;
comment	@# @;


1.68
date	2018.07.14.14.50.32;	author rsprowson;	state Exp;
branches;
next	1.67;
commitid	V19ZLEiOPZCm97KA;

1.67
date	2015.01.10.11.48.07;	author rsprowson;	state Exp;
branches;
next	1.66;
commitid	ErIQE2MFjocGjt5y;

1.66
date	2014.12.02.22.47.24;	author rsprowson;	state Exp;
branches;
next	1.65;
commitid	XZLMY963xMlAdw0y;

1.65
date	2014.10.18.13.29.02;	author srevill;	state Exp;
branches;
next	1.64;
commitid	NhCUXseMtVDHzGUx;

1.64
date	2014.10.01.07.56.21;	author rsprowson;	state Exp;
branches;
next	1.63;
commitid	I4DkrDPuu5YshtSx;

1.63
date	2014.05.27.19.09.59;	author jlee;	state Exp;
branches;
next	1.62;
commitid	q3CKSpFBAsDE5dCx;

1.62
date	2012.01.14.22.54.40;	author srevill;	state Exp;
branches;
next	1.61;
commitid	1AHo2G30D6qB6cPv;

1.61
date	2010.03.23.00.36.47;	author jlee;	state Exp;
branches;
next	1.60;

1.60
date	2008.09.10.15.39.54;	author srevill;	state Exp;
branches;
next	1.59;

1.59
date	2003.12.02.16.28.40;	author bavison;	state Exp;
branches;
next	1.58;

1.58
date	2002.05.24.09.33.02;	author jberanek;	state Exp;
branches;
next	1.57;

1.57
date	2001.09.17.10.53.30;	author jberanek;	state Exp;
branches;
next	1.56;

1.56
date	2001.05.02.17.08.17;	author mjenning;	state Exp;
branches;
next	1.55;

1.55
date	2001.03.27.13.11.19;	author sbrodie;	state Exp;
branches;
next	1.54;

1.54
date	2001.02.02.10.24.44;	author jberanek;	state Exp;
branches;
next	1.53;

1.53
date	2001.02.01.16.55.15;	author bavison;	state Exp;
branches;
next	1.52;

1.52
date	2000.10.16.11.52.50;	author jberanek;	state Exp;
branches;
next	1.51;

1.51
date	2000.07.13.12.00.11;	author jberanek;	state Exp;
branches;
next	1.50;

1.50
date	2000.05.18.15.33.03;	author jberanek;	state Exp;
branches;
next	1.49;

1.49
date	2000.05.17.09.56.20;	author jberanek;	state Exp;
branches;
next	1.48;

1.48
date	2000.05.16.16.01.41;	author jberanek;	state Exp;
branches;
next	1.47;

1.47
date	2000.04.20.17.50.03;	author jberanek;	state Exp;
branches;
next	1.46;

1.46
date	2000.04.13.11.25.48;	author sbrodie;	state Exp;
branches;
next	1.45;

1.45
date	2000.04.11.17.57.32;	author blaughto;	state Exp;
branches;
next	1.44;

1.44
date	2000.04.05.09.14.57;	author jberanek;	state Exp;
branches;
next	1.43;

1.43
date	2000.03.07.14.48.09;	author jberanek;	state Exp;
branches;
next	1.42;

1.42
date	2000.01.21.10.56.20;	author jberanek;	state Exp;
branches;
next	1.41;

1.41
date	2000.01.21.10.43.38;	author sbrodie;	state Exp;
branches;
next	1.40;

1.40
date	99.09.21.08.58.34;	author jberanek;	state Exp;
branches;
next	1.39;

1.39
date	99.09.21.08.54.00;	author jberanek;	state Exp;
branches;
next	1.38;

1.38
date	99.09.13.14.20.20;	author jberanek;	state Exp;
branches;
next	1.37;

1.37
date	99.09.10.16.19.00;	author jberanek;	state Exp;
branches;
next	1.36;

1.36
date	99.09.08.13.40.04;	author jberanek;	state Exp;
branches;
next	1.35;

1.35
date	99.05.28.15.21.50;	author jberanek;	state Exp;
branches;
next	1.34;

1.34
date	99.05.27.15.51.47;	author nbingham;	state Exp;
branches;
next	1.33;

1.33
date	99.05.26.13.19.20;	author jberanek;	state Exp;
branches;
next	1.32;

1.32
date	99.05.20.10.00.49;	author jberanek;	state Exp;
branches;
next	1.31;

1.31
date	99.05.19.19.12.32;	author jberanek;	state Exp;
branches;
next	1.30;

1.30
date	99.05.19.19.10.54;	author jberanek;	state Exp;
branches;
next	1.29;

1.29
date	99.05.19.15.20.12;	author sbrodie;	state Exp;
branches;
next	1.28;

1.28
date	99.05.10.15.48.31;	author jberanek;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	99.04.29.15.51.00;	author jberanek;	state Exp;
branches;
next	1.26;

1.26
date	99.04.26.08.38.58;	author jberanek;	state Exp;
branches;
next	1.25;

1.25
date	99.03.19.18.48.15;	author jberanek;	state Exp;
branches;
next	1.24;

1.24
date	99.03.19.11.54.11;	author blaughto;	state Exp;
branches;
next	1.23;

1.23
date	99.03.11.18.22.50;	author nbingham;	state Exp;
branches;
next	1.22;

1.22
date	99.01.22.15.28.44;	author jberanek;	state Exp;
branches;
next	1.21;

1.21
date	99.01.14.17.43.47;	author jberanek;	state Exp;
branches;
next	1.20;

1.20
date	99.01.11.16.03.46;	author nbingham;	state Exp;
branches;
next	1.19;

1.19
date	98.11.24.17.05.19;	author kbracey;	state Exp;
branches;
next	1.18;

1.18
date	98.11.17.12.34.42;	author jberanek;	state Exp;
branches;
next	1.17;

1.17
date	98.11.11.17.32.37;	author jberanek;	state Exp;
branches;
next	1.16;

1.16
date	98.11.11.17.18.25;	author jberanek;	state Exp;
branches;
next	1.15;

1.15
date	98.11.11.15.20.00;	author jberanek;	state Exp;
branches;
next	1.14;

1.14
date	98.11.05.15.14.43;	author Spin;	state Exp;
branches;
next	1.13;

1.13
date	98.11.05.14.52.37;	author Spin;	state Exp;
branches;
next	1.12;

1.12
date	98.11.03.11.26.20;	author nbingham;	state Exp;
branches;
next	1.11;

1.11
date	98.11.02.16.45.51;	author jberanek;	state Exp;
branches;
next	1.10;

1.10
date	98.10.22.16.32.21;	author jberanek;	state Exp;
branches;
next	1.9;

1.9
date	98.10.07.08.39.22;	author nbingham;	state Exp;
branches;
next	1.8;

1.8
date	98.09.21.11.22.33;	author jberanek;	state Exp;
branches;
next	1.7;

1.7
date	98.09.17.12.48.08;	author jberanek;	state Exp;
branches;
next	1.6;

1.6
date	98.09.16.13.48.41;	author jberanek;	state Exp;
branches;
next	1.5;

1.5
date	98.09.16.11.28.38;	author jberanek;	state Exp;
branches;
next	1.4;

1.4
date	98.09.16.09.33.04;	author jberanek;	state Exp;
branches;
next	1.3;

1.3
date	98.09.15.14.31.03;	author jberanek;	state Exp;
branches;
next	1.2;

1.2
date	98.09.04.17.18.09;	author jberanek;	state Exp;
branches;
next	1.1;

1.1
date	98.09.04.15.32.46;	author jberanek;	state Exp;
branches;
next	;

1.28.2.1
date	99.05.20.12.57.13;	author nbingham;	state Exp;
branches;
next	;


desc
@@


1.68
log
@Fix for pointer compare confusion
Don't compare a pointer (that can never be NULL) when a nul terminator was intended.
Avoid strcmp() of potentially NULL area_level_in in the DEBUG case.
Found by cppcheck static analysis.

Version 0.72. Tagged as 'DebugLib-0_72'
@
text
@/* (0.72)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.72
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                14 Jul 2018

#define Module_MajorVersion             "0.72"
#define Module_Version                  72
#define Module_MinorVersion             ""
#define Module_Date                     "14 Jul 2018"

#define Module_ApplicationDate          "14-Jul-18"

#define Module_ComponentName            "DebugLib"
#define Module_ComponentPath            "castle/RiscOS/Sources/Lib/DebugLib"

#define Module_FullVersion              "0.72"
#define Module_HelpVersion              "0.72 (14 Jul 2018)"
#define Module_LibraryVersionInfo       "0:72"
@


1.67
log
@Makefile recreated from fragments
One subtle difference here is there's no intermediate link step any more, since the ${DEBUGLIBS} already drags in all the required libraries. As a result, when linking with DebugLib the linker should be able to throw away unused sections, making your debug executable a bit smaller.
Tested with a debug build of USBDriver in PRINTF_OUTPUT mode.

Version 0.71. Tagged as 'DebugLib-0_71'
@
text
@d1 1
a1 1
/* (0.71)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.71
d9 1
a9 1
#define Module_Date_CMHG                10 Jan 2015
d11 2
a12 2
#define Module_MajorVersion             "0.71"
#define Module_Version                  71
d14 1
a14 1
#define Module_Date                     "10 Jan 2015"
d16 1
a16 1
#define Module_ApplicationDate          "10-Jan-15"
d21 3
a23 3
#define Module_FullVersion              "0.71"
#define Module_HelpVersion              "0.71 (10 Jan 2015)"
#define Module_LibraryVersionInfo       "0:71"
@


1.66
log
@Repoint PDEBUG
Requires PDebug-0_09 or later.

Version 0.70. Tagged as 'DebugLib-0_70'
@
text
@d1 1
a1 1
/* (0.70)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.70
d9 1
a9 1
#define Module_Date_CMHG                02 Dec 2014
d11 2
a12 2
#define Module_MajorVersion             "0.70"
#define Module_Version                  70
d14 1
a14 1
#define Module_Date                     "02 Dec 2014"
d16 1
a16 1
#define Module_ApplicationDate          "02-Dec-14"
d21 3
a23 3
#define Module_FullVersion              "0.70"
#define Module_HelpVersion              "0.70 (02 Dec 2014)"
#define Module_LibraryVersionInfo       "0:70"
@


1.65
log
@Added an install phase to support CTools builds.

Version 0.69. Tagged as 'DebugLib-0_69'
@
text
@d1 1
a1 1
/* (0.69)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.69
d9 1
a9 1
#define Module_Date_CMHG                18 Oct 2014
d11 2
a12 2
#define Module_MajorVersion             "0.69"
#define Module_Version                  69
d14 1
a14 1
#define Module_Date                     "18 Oct 2014"
d16 1
a16 1
#define Module_ApplicationDate          "18-Oct-14"
d21 3
a23 3
#define Module_FullVersion              "0.69"
#define Module_HelpVersion              "0.69 (18 Oct 2014)"
#define Module_LibraryVersionInfo       "0:69"
@


1.64
log
@Relocate remotedb
Requires remotedb-0_12.

Version 0.68. Tagged as 'DebugLib-0_68'
@
text
@d1 1
a1 1
/* (0.68)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.68
d9 1
a9 1
#define Module_Date_CMHG                01 Oct 2014
d11 2
a12 2
#define Module_MajorVersion             "0.68"
#define Module_Version                  68
d14 1
a14 1
#define Module_Date                     "01 Oct 2014"
d16 1
a16 1
#define Module_ApplicationDate          "01-Oct-14"
d21 3
a23 3
#define Module_FullVersion              "0.68"
#define Module_HelpVersion              "0.68 (01 Oct 2014)"
#define Module_LibraryVersionInfo       "0:68"
@


1.63
log
@Fix null pointer dereference
Detail:
  c/debug - Fixed a null pointer dereference in debug_setup_filename()
Admin:
  Tested on BB-xM with high processor vectors


Version 0.67. Tagged as 'DebugLib-0_67'
@
text
@d1 1
a1 1
/* (0.67)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.67
d9 1
a9 1
#define Module_Date_CMHG                27 May 2014
d11 2
a12 2
#define Module_MajorVersion             "0.67"
#define Module_Version                  67
d14 1
a14 1
#define Module_Date                     "27 May 2014"
d16 1
a16 1
#define Module_ApplicationDate          "27-May-14"
d21 3
a23 3
#define Module_FullVersion              "0.67"
#define Module_HelpVersion              "0.67 (27 May 2014)"
#define Module_LibraryVersionInfo       "0:67"
@


1.62
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 0.66. Tagged as 'DebugLib-0_66'
@
text
@d1 1
a1 1
/* (0.66)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.66
d9 1
a9 1
#define Module_Date_CMHG                14 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.66"
#define Module_Version                  66
d14 1
a14 1
#define Module_Date                     "14 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.66"
#define Module_HelpVersion              "0.66 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:66"
@


1.61
log
@Add HAL_DebugTX support to DebugLib
Detail:
  Makefile, c/hal, h/hal, c/debug, h/DebugLib - Added new HAL_OUTPUT debug device that calls HAL_DebugTX
  Docs/DebugLib,3d6 - updated StrongHelp docs
Admin:
  Tested in OMAP ROM on rev C2 beagleboard


Version 0.65. Tagged as 'DebugLib-0_65'
@
text
@d1 1
a1 1
/* (0.65)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.65
d9 1
a9 1
#define Module_Date_CMHG                23 Mar 2010
d11 2
a12 2
#define Module_MajorVersion             "0.65"
#define Module_Version                  65
d14 1
a14 1
#define Module_Date                     "23 Mar 2010"
d16 1
a16 1
#define Module_ApplicationDate          "23-Mar-10"
d21 3
a23 3
#define Module_FullVersion              "0.65"
#define Module_HelpVersion              "0.65 (23 Mar 2010)"
#define Module_LibraryVersionInfo       "0:65"
@


1.60
log
@  Adding SysLog and Reporter logging backends to the DebugLib library.
Detail:
  I've added simple backends for the standard SysLog SWI interface and
  the Reporter module. Both of these provide line based APIs so the output
  is line buffered (to a width of 80 characters). I also removed two
  unnecessary forward declarations for static functions in debug.c which
  were producing warnings from Norcroft CC.
Admin:
   Compiled with Norcroft 5.65. Tested on RISC OS 5.13, using DoggySoft
   SysLog 0.20, Reporter 2.64d via a debug build of the USBDriver module.

Version 0.64. Tagged as 'DebugLib-0_64'
@
text
@d1 1
a1 1
/* (0.64)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.64
d9 1
a9 1
#define Module_Date_CMHG                10 Sep 2008
d11 2
a12 2
#define Module_MajorVersion             "0.64"
#define Module_Version                  64
d14 1
a14 1
#define Module_Date                     "10 Sep 2008"
d16 1
a16 1
#define Module_ApplicationDate          "10-Sep-08"
d21 3
a23 3
#define Module_FullVersion              "0.64"
#define Module_HelpVersion              "0.64 (10 Sep 2008)"
#define Module_LibraryVersionInfo       "0:64"
@


1.59
log
@Because the partially-linked versions of PDebugLib and TraceLib now export
all the DeskLib symbols, they can't both be linked into DebugLib. Instead,
DebugLib no longer contains any copies of DeskLib, and you will need to
explicitly link DeskLib into any debug builds.

Version 0.63. Tagged as 'DebugLib-0_63'
@
text
@d1 1
a1 1
/* (0.63)
d4 1
a4 1
 * Last processed by srccommit version: 1.2.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.63
d9 1
a9 1
#define Module_Date_CMHG                02 Dec 2003
d11 2
a12 2
#define Module_MajorVersion             "0.63"
#define Module_Version                  63
d14 1
a14 1
#define Module_Date                     "02 Dec 2003"
d16 1
a16 1
#define Module_ApplicationDate          "02-Dec-03"
d19 1
a19 1
#define Module_ComponentPath            "RiscOS/Sources/Lib/DebugLib"
d21 3
a23 3
#define Module_FullVersion              "0.63"
#define Module_HelpVersion              "0.63 (02 Dec 2003)"
#define Module_LibraryVersionInfo       "0:63"
@


1.58
log
@  Added support for variadic macros
Detail:

* If your C compiler supports variadic macros, you can now define
 DEBUGLIB_NOBRACKETS and use dprintf(...) instead of dprintf((...))
 This works with cc 5.45

Admin:
  Tested by taking test harnesses and defining DEBUGLIB_NOBRACKETS
 and removing the extra brackets around all the dprintf statements.


Version 0.62. Tagged as 'DebugLib-0_62'
@
text
@d1 1
a1 1
/* (0.62)
d4 1
a4 1
 * Last processed by srccommit version: 1.63.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.62
d9 1
a9 1
#define Module_Date_CMHG                24 May 2002
d11 2
a12 2
#define Module_MajorVersion             "0.62"
#define Module_Version                  62
d14 1
a14 1
#define Module_Date                     "24 May 2002"
d16 1
a16 2
#define Module_ApplicationDate2         "24-May-02"
#define Module_ApplicationDate4         "24-May-2002"
d21 3
a23 3
#define Module_FullVersion              "0.62"
#define Module_HelpVersion              "0.62 (24 May 2002)"
#define Module_LibraryVersionInfo       "0:62"
@


1.57
log
@  Updated Copyrights, tidied comment header blocks
Detail:
  Updated Copyright messages to show range of years, up to 2001...a bit
 late in the year for that...

  Tidied a few file header comment blocks.

Admin:
  Built on RiscPC.


Version 0.61. Tagged as 'DebugLib-0_61'
@
text
@d1 1
a1 1
/* (0.61)
d4 1
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.61
d9 1
a9 1
#define Module_Date_CMHG                17 Sep 2001
d11 2
a12 2
#define Module_MajorVersion             "0.61"
#define Module_Version                  61
d14 1
a14 1
#define Module_Date                     "17 Sep 2001"
d16 2
a17 2
#define Module_ApplicationDate2         "17-Sep-01"
#define Module_ApplicationDate4         "17-Sep-2001"
d22 3
a24 3
#define Module_FullVersion              "0.61"
#define Module_HelpVersion              "0.61 (17 Sep 2001)"
#define Module_LibraryVersionInfo       "0:61"
@


1.56
log
@  A new DebugLib device added to allow debugging via the BrainLink module.
  The GUI_test program has been modified to support the new DebugLib device.
  DebugLib stronghelp documentaion has been updated.
Detail:

Admin:
  Tested on my RiscPC, seems to work fine.


Version 0.60. Tagged as 'DebugLib-0_60'
@
text
@d1 1
a1 1
/* (0.60)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.60
d8 1
a8 1
#define Module_Date_CMHG                02 May 2001
d10 2
a11 2
#define Module_MajorVersion             "0.60"
#define Module_Version                  60
d13 1
a13 1
#define Module_Date                     "02 May 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "02-May-01"
#define Module_ApplicationDate4         "02-May-2001"
d21 3
a23 2
#define Module_FullVersion              "0.60"
#define Module_HelpVersion              "0.60 (02 May 2001)"
@


1.55
log
@  New option for export_libs.
Detail:
  If you have -options NOLIBS=NOLIBS in your components file, then
    DebugLib won't attempt to build its binaries.  This avoids the
    need for several other libraries to be built just to enable
    DebugLib to build when actually all that a build needs is the
    header DebugLib.h
Admin:
  Tested with and without the option.

Version 0.59. Tagged as 'DebugLib-0_59'
@
text
@d1 1
a1 1
/* (0.59)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.59
d8 1
a8 1
#define Module_Date_CMHG                27 Mar 2001
d10 2
a11 2
#define Module_MajorVersion             "0.59"
#define Module_Version                  59
d13 1
a13 1
#define Module_Date                     "27 Mar 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "27-Mar-01"
#define Module_ApplicationDate4         "27-Mar-2001"
d21 2
a22 2
#define Module_FullVersion              "0.59"
#define Module_HelpVersion              "0.59 (27 Mar 2001)"
@


1.54
log
@  Updated docs.
Detail:
  Updated StrongHelp manual to include information about DADebug.


Version 0.58. Not tagged
@
text
@d1 1
a1 1
/* (0.58)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.58
d8 1
a8 1
#define Module_Date_CMHG                02 Feb 2001
d10 2
a11 2
#define Module_MajorVersion             "0.58"
#define Module_Version                  58
d13 1
a13 1
#define Module_Date                     "02 Feb 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "02-Feb-01"
#define Module_ApplicationDate4         "02-Feb-2001"
d21 2
a22 2
#define Module_FullVersion              "0.58"
#define Module_HelpVersion              "0.58 (02 Feb 2001)"
@


1.53
log
@Added DADebug support (see RiscOS/Sources/Programmer/DADebug). Original work
was done against version 0.45 of DebugLib, but I don't think anything's
changed that cvs update can't deal with. Not tested.

Version 0.58. Tagged as 'DebugLib-0_58'
@
text
@d8 1
a8 1
#define Module_Date_CMHG                01 Feb 2001
d13 1
a13 1
#define Module_Date                     "01 Feb 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "01-Feb-01"
#define Module_ApplicationDate4         "01-Feb-2001"
d22 1
a22 1
#define Module_HelpVersion              "0.58 (01 Feb 2001)"
@


1.52
log
@  A number of changes, made over the months, but which I'd failed to
   checkin.  Tsk.
Detail:
  Some additions to CLI test harness.

  Bits of code in CLI and GUI test harness to check at compile time if
   OSLib and "Toolbox" style boolean definitions work with DebugLib.h

  Changed GUI test harness Makefile to use LocalRes:

  Removed calls to debug_atexit() in test harnesses, they're no longer
   necessary.

  Behaviour change: if you set a device in DebugLib$Device_<taskname>,
   debug_set_device() is called for that device on debug_initialise().

  Added check into debug_set_device(), if it's called with the current
   device, and the current device is initialised, it now does nothing,
   because it doesn't need to.

  Added extra checks into file and socket output methods that ensure
   initialising and/or terminating these devices repeatedly won't
   cause problems.

  Added some extra preprocessor malarky into DebugLib.h so that it should
   handle more boolean definitions.  It should handle (at least) "Toolbox"
   style ones and OSLib ones.

  Changed some used of debug_output_device() to debug_set_device() in Module
   test harness. debug_output_device() is deprecated.

  Fixed a bug in the core termination code...all open devices should now
   be closed correctly on exit.
Admin:
  Built library.
  Built and ran through some tests in the 3 test harnesses.


Version 0.57. Tagged as 'DebugLib-0_57'
@
text
@d1 1
a1 1
/* (0.57)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.57
d8 1
a8 1
#define Module_Date_CMHG                16 Oct 2000
d10 2
a11 2
#define Module_MajorVersion             "0.57"
#define Module_Version                  57
d13 1
a13 1
#define Module_Date                     "16 Oct 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "16-Oct-00"
#define Module_ApplicationDate4         "16-Oct-2000"
d18 5
a22 2
#define Module_FullVersion              "0.57"
#define Module_HelpVersion              "0.57 (16 Oct 2000)"
@


1.51
log
@  Few little fixes
Detail:
  Levels specifier in DebugLib header now outputs correctly.  It now
   prints out a human readable form of what it's parsed from the
   DebugLib$Level_<taskname> system variable, showing the areas and
   levels specified.

  Added a few variable resets into "quit" functions of some of the
   output devices.  Done after a report from Ben that calling
   debug_terminate twice could cause a crash.  Not sure what
   device was used to cause the crash, also not sure if any of my
   changes will have changed the behaviour.  Added an extra test
   into the CLI_App test harness, it calls debug_terminate twice
   at the end. (Didn't manage to make it crash before or after
   changes).
Admin:
  StrongHelp document now gets copied to Export dir, along with
   headers, library and LibVersion.


Version 0.56. Tagged as 'DebugLib-0_56'
@
text
@d1 1
a1 1
/* (0.56)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.56
d8 1
a8 1
#define Module_Date_CMHG                13 Jul 2000
d10 2
a11 2
#define Module_MajorVersion             "0.56"
#define Module_Version                  56
d13 1
a13 1
#define Module_Date                     "13 Jul 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "13-Jul-00"
#define Module_ApplicationDate4         "13-Jul-2000"
d18 2
a19 1
#define Module_FullVersion              "0.56"
@


1.50
log
@  Efficiency improvement and obscure overflow fix in area checking code
Detail:
  Every dprintf() call calls debug_check_level() to check whether the
   statement should be printed or not.  This function did take 2
   parameters, the 2nd of which was no longer being used.  The function
   now only takes 1 parameter.

  You are limited to having 16 comma-seperated area/level
   pairs in each dprintf(), but the routine to tokenise this string
   would've written into and beyond position 16 of a 16 element
   array if you passed a string with more than 16 pairs.  Routine now
   bails out after 16 pairs.
Admin:
  MemCheck rule of CLI test harness now uses correct MemCheck library,
   so actually does check memory. Only violations appear to be deep
   inside trace library.

  Added debug statement into CLI test harness with 18 levels, and
   verified DebugLib only uses 16. [Unfortunately couldn't verify
   array bounds were(n't) being violated, cos of MemCheck's limited
   stack protection].

  Fiddled with DebugLib's internal debugging so that DebugLib internal
   debug gets labelled with the level "__DebugLib".


Version 0.55. Tagged as 'DebugLib-0_55'
@
text
@d1 1
a1 1
/* (0.55)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.55
d8 1
a8 1
#define Module_Date_CMHG                18 May 2000
d10 2
a11 2
#define Module_MajorVersion             "0.55"
#define Module_Version                  55
d13 1
a13 1
#define Module_Date                     "18 May 2000"
d15 4
a18 1
#define Module_FullVersion              "0.55"
@


1.49
log
@  More boolean type changes.
Detail:
  More drastic changes to try and fix all the wonderful variants of
   the boolean type.

  DebugLib now uses <stdbool.h>, "bool", "false" and "true"
   internally.

  DebugLib.h now prototypes its functions with the type DebugLib_BOOL,
   and does preprocessor jiggery-pokery to try and ensure that
   it, plus TRUE, FALSE and BOOL get defined as something appropriate.
Admin:
  Tested by changing some of the test harnesses to include OSLib,
   stdbool and tboxlib headers.
  Fixed test harness module Makefile to include zm versions of
   libraries in all cases.


Version 0.54. Tagged as 'DebugLib-0_54'
@
text
@d1 1
a1 1
/* (0.54)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.54
d8 1
a8 1
#define Module_Date_CMHG                17 May 2000
d10 2
a11 2
#define Module_MajorVersion             "0.54"
#define Module_Version                  54
d13 1
a13 1
#define Module_Date                     "17 May 2000"
d15 1
a15 1
#define Module_FullVersion              "0.54"
@


1.48
log
@  Boolean definitions updated
Detail:
  Definitions updated to catch OSLib's view on booleans.  If BOOL isn't
   defined, but TRUE is, then we define BOOL to bool and don't redefine
   TRUE and FALSE.

Admin:
  The sooner we're all using <stdbool.h> the better.


Version 0.53. Tagged as 'DebugLib-0_53'
@
text
@d1 1
a1 1
/* (0.53)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.53
d8 1
a8 1
#define Module_Date_CMHG                16 May 2000
d10 2
a11 2
#define Module_MajorVersion             "0.53"
#define Module_Version                  53
d13 1
a13 1
#define Module_Date                     "16 May 2000"
d15 1
a15 1
#define Module_FullVersion              "0.53"
@


1.47
log
@  Build changes + doc update
Detail:
  DebugLib now gets the Trace header file from the build system, now
   that it lives there.  Deleted local copy.

  Checked in updated StrongHelp manual that shows deprecation of
   debug_atexit() function, and that no longer tells you to use
   it in the "Setting up the library" section.
Admin:
  Built.


Version 0.52. Tagged as 'DebugLib-0_52'
@
text
@d1 1
a1 1
/* (0.52)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.52
d8 1
a8 1
#define Module_Date_CMHG                20 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.52"
#define Module_Version                  52
d13 1
a13 1
#define Module_Date                     "20 Apr 2000"
d15 1
a15 1
#define Module_FullVersion              "0.52"
@


1.46
log
@  Moved hashes to left hand column in DebugLib.h
Detail:
  Without this, any RPC software (eg. NFS, rpclib) cannot be compiled
    to use DebugLib for debugging.
Admin:
  Required by anything which uses the current version of rpcgen.


Version 0.51. Tagged as 'DebugLib-0_51'
@
text
@d1 1
a1 1
/* (0.51)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.51
d8 1
a8 1
#define Module_Date_CMHG                13 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.51"
#define Module_Version                  51
d13 1
a13 1
#define Module_Date                     "13 Apr 2000"
d15 1
a15 1
#define Module_FullVersion              "0.51"
@


1.45
log
@  Modified to use newly imported version of Trace that is built from source,
  rather than using pre-built binaries.

Admin:
  Tested using the ATM driver, which uses DebugLib.  Appears to work as
  previous version using binary-only Trace did.

Version 0.50. Tagged as 'DebugLib-0_50'
@
text
@d1 1
a1 1
/* (0.50)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.50
d8 1
a8 1
#define Module_Date_CMHG                11 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.50"
#define Module_Version                  50
d13 1
a13 1
#define Module_Date                     "11 Apr 2000"
d15 1
a15 1
#define Module_FullVersion              "0.50"
@


1.44
log
@  Changed atexit handling + code tidying
Detail:
  debug_atexit() is now deprecated and DebugLib adds its own atexit
  handler to close down debug devices.  debug_atexit() calls in code
  are now removed by the preprocessor even when DEBUGLIB is defined.
  The atexit handler is added in the debug_initialise() call.

  Tidied debug.c.  Made more functions static, and moved all the static
  functions to before the exported functions.
Admin:
  Built and tested.
  StrongHelp manual updated to reflect atexit change.


Version 0.49. Tagged as 'DebugLib-0_49'
@
text
@d1 1
a1 1
/* (0.49)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.49
d8 1
a8 1
#define Module_Date_CMHG                05 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.49"
#define Module_Version                  49
d13 1
a13 1
#define Module_Date                     "05 Apr 2000"
d15 1
a15 1
#define Module_FullVersion              "0.49"
@


1.43
log
@  PDebug output method improved.
Detail:
  DebugLib's PDebug output method will now use the PDebugM module to
  send output if it finds it.  This allows more than one task/module
  to output to the parallel port using DebugLib.
Admin:
  Tested with 2 modules on STB400.


Version 0.48. Tagged as 'DebugLib-0_48'
@
text
@d1 1
a1 1
/* (0.48)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.48
d8 1
a8 1
#define Module_Date_CMHG                07 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.48"
#define Module_Version                  48
d13 1
a13 1
#define Module_Date                     "07 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.48"
@


1.42
log
@  Tidy-up
Detail:
  Stewart's checkin about LibVersion reminded me I'd done some tidying
  (including the LibVersion thing) and not checked it in.  So here it is.

  Tidied Makefile, added standard headers to all the c and h files,
  including the regulation copyright message.

  Changed options.c so that it fits the coding style of the rest of
  DebugLib (naughty Stewart).

  Improved "strdup" routine.

  Moved stripdepend call into Makefile.

Admin:
  Built and tested.


Version 0.47. Tagged as 'DebugLib-0_47'
@
text
@d1 1
a1 1
/* (0.47)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.47
d8 1
a8 1
#define Module_Date_CMHG                21 Jan 2000
d10 2
a11 2
#define Module_MajorVersion             "0.47"
#define Module_Version                  47
d13 1
a13 1
#define Module_Date                     "21 Jan 2000"
d15 1
a15 1
#define Module_FullVersion              "0.47"
@


1.41
log
@  Altered exported VersionNum file to be called LibVersion.
Detail:
  Change made to avoid problems with components doing #include "VersionNum"
    whilst DebugLib's export directory is on the include search path.
Admin:
  Not tested - just changed the name.


Version 0.46. Tagged as 'DebugLib-0_46'
@
text
@d1 1
a1 1
/* (0.46)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.46
d10 2
a11 2
#define Module_MajorVersion             "0.46"
#define Module_Version                  46
d15 1
a15 1
#define Module_FullVersion              "0.46"
@


1.40
log
@ * Ahem.  TTOTD, when you make a change to a library header file to make
   something that uses the library work, check that the library still
   builds too.  Fixed now.


Version 0.45. Tagged as 'DebugLib-0_45'
@
text
@d1 1
a1 1
/* (0.45)
d6 3
a8 3
#define Module_MajorVersion_CMHG     	0.45
#define Module_MinorVersion_CMHG	
#define Module_Date_CMHG      		21 Sep 1999
d10 4
a13 4
#define Module_MajorVersion     	"0.45"
#define Module_Version                  45
#define Module_MinorVersion		""
#define Module_Date      		"21 Sep 1999"
d15 1
a15 1
#define Module_FullVersion              "0.45"
@


1.39
log
@ * Requires remotedb 0.07.  Now uses new namespacing that remotedb received at
   version 0.07.  DebugLib.h updated so that it will always build, there
   was a problem with #including the remotedb header file without defining
   "REMOTE_DEBUG".


Version 0.44. Tagged as 'DebugLib-0_44'
@
text
@d1 1
a1 1
/* (0.44)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.44
d10 2
a11 2
#define Module_MajorVersion     	"0.44"
#define Module_Version                  44
d15 1
a15 1
#define Module_FullVersion              "0.44"
@


1.38
log
@ * Forgot to copy h directory back to NFS before previous check-in.  This
   is now rectified, which should allow DebugLib to build correctly.


Version 0.43. Tagged as 'DebugLib-0_43'
@
text
@d1 1
a1 1
/* (0.43)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.43
d8 1
a8 1
#define Module_Date_CMHG      		13 Sep 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.43"
#define Module_Version                  43
d13 1
a13 1
#define Module_Date      		"13 Sep 1999"
d15 1
a15 1
#define Module_FullVersion              "0.43"
@


1.37
log
@ * Updated DebugLib StrongHelp manual to add information on the use of
   the debug level specifier.

 * DebugLib.h now exports the remotedb session handle, this should mean
   that apps can use the 2-way capabilites of remotedb to control their
   applications via remotedb-sent commands.  Note that the new function
   call debug_read_device should be used to check the current DebugLib
   device is SOCKET_OUTPUT and that the remotedb session handle is valid
   before registering a remotedb command handler.  Added for use by
   NCFresco.


Version 0.42. Tagged as 'DebugLib-0_42'
@
text
@d1 1
a1 1
/* (0.42)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.42
d8 1
a8 1
#define Module_Date_CMHG      		10 Sep 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.42"
#define Module_Version                  42
d13 1
a13 1
#define Module_Date      		"10 Sep 1999"
d15 1
a15 1
#define Module_FullVersion              "0.42"
@


1.36
log
@ * Improved DebugLib's area handling system.  Lines of debug may now belong
   to multiple "areas" of code, each at a specific level.  The filtering of
   debug at runtime is now done with a much more flexible system,
   areas/levels are masked in/out based on a new format for the
   DebugLib$Level_<taskname> system variable.  The description of this
   format has not made it into the StrongHelp document, it will go into
   this, and into the DebugLib web docs ASAP.

 * Added a new option to allow the area/level prefix in debug output to
   be padded to a particular width.  This makes the prefix much more
   useable.  The prefixing is turned on with the option
   "debug_set_area_level_prefix", and the padding controlled with
   "debug_set_area_pad_limit".

 * Added test cases for new levelling scheme into CLI test harness.

 * Updated StrongHelp manual somewhat.


Version 0.41. Tagged as 'DebugLib-0_41'
@
text
@d1 1
a1 1
/* (0.41)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.41
d8 1
a8 1
#define Module_Date_CMHG      		08 Sep 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.41"
#define Module_Version                  41
d13 1
a13 1
#define Module_Date      		"08 Sep 1999"
d15 1
a15 1
#define Module_FullVersion              "0.41"
@


1.35
log
@ * Fixed the logic in debug_close_device.  The changes made for raw mode
   meant that the raw device wouldn't be closed.

 * Changed the copyright messages a little.


Version 0.40. Tagged as 'DebugLib-0_40'
@
text
@d1 1
a1 1
/* (0.40)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.40
d8 1
a8 1
#define Module_Date_CMHG      		28 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.40"
#define Module_Version                  40
d13 1
a13 1
#define Module_Date      		"28 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.40"
@


1.34
log
@Summary
-------
  * Initial checkin of code to allow data to be output in a raw form.
  * Added copyright messages to DebugLib.h (the exported header) as
    DebugLib has now been shipped to one customer.
Detail
------
  * Two new functions debug_set_raw_device() and dprintf_raw() have been
    added to debug.c.  This allows debug data to be output unprocessed;
    i.e. without taskname prefixing, timestamping etc.  This was done for
    HierProf, MemCheck and McCabe.  This is especially important for McCabe
    as no formatting must be done to the output generated by the program.
    Subject to testing against McCabe, it will be possible to send output
    for analysis via any debug stream (except RemoteDB due to the nature
    of the daemon).  DebugLib$RawDevice_<taskname> can be used to override
    debug_set_raw_device().
Admin
-----
  * Tested that the data is output in a raw form.  Testing with McCabe
    not yet accomplished.

Version 0.39. Tagged as 'DebugLib-0_39'
@
text
@d1 1
a1 1
/* (0.39)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.39
d8 1
a8 1
#define Module_Date_CMHG      		27 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.39"
#define Module_Version                  39
d13 1
a13 1
#define Module_Date      		"27 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.39"
@


1.33
log
@ * Continued tidy-up of DebugLib:

 * All DebugLib functions now namespaced, they all start debug_<filename>_
  (except the functions in debug.c which are debug_).

 * Device specific #defines etc moved into device specific header files,
   e.g. debugit.h

 * Moved taskname prefixing to a central location, moved timestamping here
   also, added area/level prefixing, and tidied up this prefixing to make
   sure it looks good on all the possible debug devices.

 * Can now do any debuglib function to any debug device, including trace
   output, this hasn't been the case for a while.

 * Added new option, to set whether you want to prefix all debug lines
   with the area/level pair specified in dprintf, dfprintf etc.  Added
   new function to set this option.  debug_set_area_level_prefix ()

 * remotedb output now uses new "raw" output mode added to remotedb in
   version 0.06.  _DebugLib now requires remotedb version >= 0.06_

 * Added new test cases into CLI_App test harness, and changed a few things
   in TestMod.

 * Added Memcheck misc block registration into buffering code, which allows
   buffering to be used on the DebugLib Memcheck build.

 * Added lots of new function names into the always_ignore field which is
   used to tell trace which functions to ignore.  It seems that some the
   internet libraries have function names emebedded, which causes horrible
   loops when using DebugLib to output trace info to remotedb.  Also added
   debug_* and remote_debug_*

 * Added StrongHelp topics for ddumpbuf, debug_output_buffer_* and
   debug_set_area_level_prefix.  Updated the "Setting up the library"
   section.

 * Checked with all the debug devices except TML and serial.


Version 0.38. Tagged as 'DebugLib-0_38'
@
text
@d1 1
a1 1
/* (0.38)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.38
d8 1
a8 1
#define Module_Date_CMHG      		26 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.38"
#define Module_Version                  38
d13 1
a13 1
#define Module_Date      		"26 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.38"
@


1.32
log
@ * Continued tidy of DebugLib structure/implementation...added an "Open"
   variable to the debug_output_method structure, to replace the
   sessions_available struct that was used previously.  Now check for
   whether a device is open at the top level (debug.c) instead of once
   for each device.  Removed the "quit" function for a few devices, because
   it was doing nothing.
 * Reduced global variable count to 1. :)

 * Split option setting functions to options.[ch], left debug_set_device
   in c.debug, as it does a bit more that just set an option.


Version 0.37. Tagged as 'DebugLib-0_37'
@
text
@d1 1
a1 1
/* (0.37)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.37
d8 1
a8 1
#define Module_Date_CMHG      		20 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.37"
#define Module_Version                  37
d13 1
a13 1
#define Module_Date      		"20 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.37"
@


1.31
log
@ * Oops, forgot new Makefile for re-org introduced at version 0.35


Version 0.36. Tagged as 'DebugLib-0_36'
@
text
@d1 1
a1 1
/* (0.36)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.36
d8 1
a8 1
#define Module_Date_CMHG      		19 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.36"
#define Module_Version                  36
d13 1
a13 1
#define Module_Date      		"19 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.36"
@


1.30
log
@ * Initial work on tidying design of DebugLib.  Each output method is now
   more or less independant, and in its own file.  The common functions
   of each debug output method are accessed using an array of function
   pointers.  In the fullness of time this should make it easy to add new
   devices (and perhaps some cunning stuff with the linker).

 * Code re-org has been tested, and seen to work for at least one debug
   method.


Version 0.35. Tagged as 'DebugLib-0_35'
@
text
@d1 1
a1 1
/* (0.35)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.35
d10 2
a11 2
#define Module_MajorVersion     	"0.35"
#define Module_Version                  35
d15 1
a15 1
#define Module_FullVersion              "0.35"
@


1.29
log
@  Buffer dumper added.
  A handful of miscellaneous header file fixes.
Detail:
  ddumpbuf(area, buffer pointer, size of buffer, offset) added to enable
    binary data to be dumped out to debug.
  debug_set_dump_width(width) sets the number of bytes of data per line
    of debug output.  This must be a positive integer greater than zero
    and less than 64.
  Macro out of serial port function fixed.
  Pragma declarations fixed.
Admin:
  Modified CLI test program to dump buffers out and verified the widthing
    and offset work.

Version 0.34. Tagged as 'DebugLib-0_34'
@
text
@d1 1
a1 1
/* (0.34)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.34
d10 2
a11 2
#define Module_MajorVersion     	"0.34"
#define Module_Version                  34
d15 1
a15 1
#define Module_FullVersion              "0.34"
@


1.28
log
@ * Overhauled how DebugLib options are handled.  Options are now held in
   an options structure internal to DebugLib.  Options are set one at a
   time by function calls, this makes it much easier to add new options
   over time.  debug_set_options and debug_output_device now deprecated,
   but still provided.  Updated StrongHelp manual to document this
   new behaviour.

 * Fixed trace output somewhat...should now look better on remotedb
   output (no extraneous CRs), and you can now set the trace device to
   be the same as the main debug device.  Setting trace device to "printf"
   now also works (file still to do, as you still can't "dfprintf" to file)

 * Added one of the new options function calls to the CLI_App test harness,
   to test functionality.

 * Improved the !MkCleans for the test harnesses.


Version 0.33. Tagged as 'DebugLib-0_33'
@
text
@d1 1
a1 1
/* (0.33)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.33
d8 1
a8 1
#define Module_Date_CMHG      		10 May 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.33"
#define Module_Version                  33
d13 1
a13 1
#define Module_Date      		"10 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.33"
@


1.28.2.1
log
@Produced a version for Alastair Roger to use which has copyright
messages in place on debug output and the header files.
Branch work.

Version 0.33, 1.28.2.1. Tagged as 'DebugLib-0_33-1_28_2_1'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG	1.28.2.1
#define Module_Date_CMHG      		20 May 1999
d12 2
a13 2
#define Module_MinorVersion		"1.28.2.1"
#define Module_Date      		"20 May 1999"
d15 1
a15 1
#define Module_FullVersion              "0.33 (1.28.2.1)"
@


1.27
log
@ * Added debug and MemCheck targets to DebugLib.  They don't get exported,
   as they are only for DebugLib development.  They were used to spot...

 * Found and fixed malloc block overwrite in the level checking code.  I
   was mallocing too small of a block by doing strlen on the wrong
   string.  This bug was causing problems when level filtering was used
   with apps compiled with DebugLib.

 * Tidied OS_ReadVarVal veneer.

 * Added MemCheck code and build target to CLI_App test program, which uses
   the new MemCheck target of DebugLib.


Version 0.32. Tagged as 'DebugLib-0_32'
@
text
@d1 1
a1 1
/* (0.32)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.32
d8 1
a8 1
#define Module_Date_CMHG      		29 Apr 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.32"
#define Module_Version                  32
d13 1
a13 1
#define Module_Date      		"29 Apr 1999"
d15 1
a15 1
#define Module_FullVersion              "0.32"
@


1.26
log
@ * Renamed function "strdup" in c.misc to avoid conflicts when building
   with other code that define strdup

 * Added extra option to debug_set_options to allow timestamping of debug
   output...doesn't handle \n chars in debug output very elegantly, but
   it'll do for now.  Option is DebugLib_Options_StampDebug_(On/Off)


Version 0.31. Tagged as 'DebugLib-0_31'
@
text
@d1 1
a1 1
/* (0.31)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.31
d8 1
a8 1
#define Module_Date_CMHG      		26 Apr 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.31"
#define Module_Version                  31
d13 1
a13 1
#define Module_Date      		"26 Apr 1999"
d15 1
a15 1
#define Module_FullVersion              "0.31"
@


1.25
log
@ * Tidied debug_initialise function greatly.  It now uses a number of
   auxiliary functions to reduce the size and complexity of the function.
   The auxiliary functions use functions in the new file misc.c, most
   importantly a veneer to use OS_ReadVarVal nicely.

 * Storage of taskname, and filename for file output method is now done
   with dynamic memory allocation, used to be statically sized buffers.


Version 0.30. Tagged as 'DebugLib-0_30'
@
text
@d1 1
a1 1
/* (0.30)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.30
d8 1
a8 1
#define Module_Date_CMHG      		19 Mar 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.30"
#define Module_Version                  30
d13 1
a13 1
#define Module_Date      		"19 Mar 1999"
d15 1
@


1.24
log
@Summary
    * Added dvprintf courtesy of Neil Bingham.
    * Fixed module tracing.
Detail
    * dvprintf speaks for iteslf.
    * Fixed module trace builds - they were not linking against the module
      version of the trace library.  It was mostly working, but one of the
      things that wasn't was the ability to ignore certain functions.
    * Tidied up debug_trace_initialise a bit to find the length of the string
      of functions it always ignores by using strlen, instead of having a
      hard-coded integer.  Also fixed a memory leak - wasn't freeing the
      string of ignored functions.
Admin
    * dvprintf tested with the test harnesses and with the ATM driver.
    * Module trace fixes tested with the ATM driver.

Version 0.29. Tagged as 'DebugLib-0_29'
@
text
@d1 1
a1 1
/* (0.29)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.29
d10 2
a11 2
#define Module_MajorVersion     	"0.29"
#define Module_Version                  29
@


1.23
log
@* Added EraseCVS command to !MkClean.
* BLaughton spotted that DebugLib's object code was still being linked into
  apps when DEBUGLIB was not defined.  This is because the object code is of
  type AOF.  DebugLib must generate an AOF file to partially link in PDebug
  and Trace.  What happens now is that the generated AOF is now run through
  libfile to produce an ALF file.  Takes approx 31k off binary size when not
  compiled in.

Version 0.28. Tagged as 'DebugLib-0_28'
@
text
@d1 1
a1 1
/* (0.28)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.28
d8 1
a8 1
#define Module_Date_CMHG      		11 Mar 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.28"
#define Module_Version                  28
d13 1
a13 1
#define Module_Date      		"11 Mar 1999"
@


1.22
log
@ * Removed the stripdepend command from the Makefile, because it was pointed
   out to me that it was already being done in the !MkClean :)


Version 0.27. Tagged as 'DebugLib-0_27'
@
text
@d1 1
a1 1
/* (0.27)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.27
d8 1
a8 1
#define Module_Date_CMHG      		22 Jan 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.27"
#define Module_Version                  27
d13 1
a13 1
#define Module_Date      		"22 Jan 1999"
@


1.21
log
@ * DebugLib now uses PDebug object and header from inside build tree
   Export.Lib directory.  Removed header and objects from DebugLib itself

 * Added stripdepend call to Makefile, requires new Library.

 * DebugLib.h now include "kernel.h", to stop complaints about
   _kernel_oserror


Version 0.26. Tagged as 'DebugLib-0_26'
@
text
@d1 1
a1 1
/* (0.26)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.26
d8 1
a8 1
#define Module_Date_CMHG      		14 Jan 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.26"
#define Module_Version                  26
d13 1
a13 1
#define Module_Date      		"14 Jan 1999"
@


1.20
log
@--------
  * Added buffering support.
Detail:
-------
  * DebugLib output can now be buffered and then output.  This is primarily
    for debugging ROM modules that would be active before the parallel
    port is alive during boot up.  Two new functions have been added to
    support this; debug_output_buffer_on() and debug_output_buffer_off().
    Updated documentation to follow.
Admin:
------
  * Tested on RiscPC/NC with Parallel, DebugIt and System variable
    override of output settings.

Version 0.25. Tagged as 'DebugLib-0_25'
@
text
@d1 1
a1 1
/* (0.25)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.25
d8 1
a8 1
#define Module_Date_CMHG      		11 Jan 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.25"
#define Module_Version                  25
d13 1
a13 1
#define Module_Date      		"11 Jan 1999"
@


1.19
log
@Fixed a couple of _swix calls that cc 5.10 complained about.

Version 0.24. Not tagged
@
text
@d1 1
a1 1
/* (0.24)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.24
d8 1
a8 1
#define Module_Date_CMHG      		24 Nov 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.24"
#define Module_Version                  24
d13 1
a13 1
#define Module_Date      		"24 Nov 1998"
@


1.18
log
@ * Fixed Makefile so that it doesn't use "newer" when copying files.  This
   meant that an export wouldn't overwrite newer libraries, when you'd
   expect it to.

 * Tidied test app Makefiles and build obey files.

 * Fixed GUI test app, wasn't declaring it's windows as autocreate and/or
   shared, which meant it missed events.  Removed all warnings also.

 * Now outputs the PDebug version information when a device is activiated.


Version 0.24. Tagged as 'DebugLib-0_24'
@
text
@d8 1
a8 1
#define Module_Date_CMHG      		17 Nov 1998
d13 1
a13 1
#define Module_Date      		"17 Nov 1998"
@


1.17
log
@ * Updated PDebug version to version of PDebug that will be going into
   CVS at some point (hopefully relatively soon) as source.  This should fix
   PDebug so that it works in ROM, because the Makefile now specifies -zm for
   the module build.


Version 0.23. Tagged as 'DebugLib-0_23'
@
text
@d1 1
a1 1
/* (0.23)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.23
d8 1
a8 1
#define Module_Date_CMHG      		11 Nov 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.23"
#define Module_Version                  23
d13 1
a13 1
#define Module_Date      		"11 Nov 1998"
@


1.16
log
@ * Fixed bug in area debugging.  This bug meant that if you specified the
   levels to output as e.g. "Main,Error", dprintfs with "Error" as the level
   would not be output.  Tracked it down to a misbracketed expression.

 * Made it possible to debug debuglib by adding another macro
   "internal_dprintf".  To turn on internal debugging you must define
   "DEBUG" in the make system.


Version 0.22. Tagged as 'DebugLib-0_22'
@
text
@d1 1
a1 1
/* (0.22)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.22
d10 2
a11 2
#define Module_MajorVersion     	"0.22"
#define Module_Version                  22
@


1.15
log
@ * Added new feature.  Can now override the filename which the file output
   method uses at runtime by setting a system variable
   "DebugLib$Filename_<Taskname>"

 * Can now tell debuglib to turn off file buffering for the file output
   method, with a system variable. "DebugLib$UnbufferedFiles<Taskname>" set
   to any value

 * Tidied make system, so throwback is only turned on by the build obey
   files

 * Tidied a few switch statements

 * Updated StrongHelp manual to reflect new system variables and features.


Version 0.21. Tagged as 'DebugLib-0_21'
@
text
@d1 1
a1 1
/* (0.21)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.21
d10 2
a11 2
#define Module_MajorVersion     	"0.21"
#define Module_Version                  21
@


1.14
log
@ * Added version number method (debuglib_version).


Version 0.20. Tagged as 'DebugLib-0_20'
@
text
@d1 1
a1 1
/* (0.20)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.20
d8 1
a8 1
#define Module_Date_CMHG      		05 Nov 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.20"
#define Module_Version                  20
d13 1
a13 1
#define Module_Date      		"05 Nov 1998"
@


1.13
log
@ * Now uses remotedb's version method (requires v0.03 or later) so it can
   report the version of remotedb that is compiled into the DebugLib
   library file.


Version 0.19. Tagged as 'DebugLib-0_19'
@
text
@d1 1
a1 1
/* (0.19)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.19
d10 2
a11 2
#define Module_MajorVersion     	"0.19"
#define Module_Version                  19
@


1.12
log
@Updated StrongHelp docs to reflect recent improvements

Version 0.18. Not tagged
@
text
@d1 1
a1 1
/* (0.18)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.18
d8 1
a8 1
#define Module_Date_CMHG      		03 Nov 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.18"
#define Module_Version                  18
d13 1
a13 1
#define Module_Date      		"03 Nov 1998"
@


1.11
log
@ * The remotedb output method was "double vsprintf"ing things.  i.e.
   DebugLib was doing a vsprintf, and then passing this to a function in
   remotedb that did a vsprintf.  This meant that if a string came out of
   vsprintf that had, for example, '%f' in it, horrible things would happen.
   Fixed by making DebugLib use "debug_print_line" instead, which doesn't
   do any vsprintf'ing.


Version 0.18. Tagged as 'DebugLib-0_18'
@
text
@d8 1
a8 1
#define Module_Date_CMHG      		02 Nov 1998
d13 1
a13 1
#define Module_Date      		"02 Nov 1998"
@


1.10
log
@ * You can now specify the debug device that DebugLib uses for trace
   output with a system variable (DebugLib$TraceDevice_<taskname>).
   The corresponding behaviour for normal debug statements is now
   more appropriate. (i.e. The debug device specified in the variable is
   only initialised at the first call of debug_out_device())

 * Increased vsprintf buffer size to 1Kbyte (Previous buffer was overrun
   by some applications).  Could put in a hack to fprintf to Null: to
   discover the size, then create a big enough buffer to do the vsprintf...


Version 0.17. Tagged as 'DebugLib-0_17'
@
text
@d1 1
a1 1
/* (0.17)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.17
d8 1
a8 1
#define Module_Date_CMHG      		22 Oct 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.17"
#define Module_Version                  17
d13 1
a13 1
#define Module_Date      		"22 Oct 1998"
@


1.9
log
@Changed Makefile to remove mistake in Module build.

Version 0.16. Tagged as 'DebugLib-0_16'
@
text
@d1 1
a1 1
/* (0.16)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.16
d8 1
a8 1
#define Module_Date_CMHG      		07 Oct 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.16"
#define Module_Version                  16
d13 1
a13 1
#define Module_Date      		"07 Oct 1998"
@


1.8
log
@Added NULL checking to debug_initialise_trace to fix any potential
  problems from cropping up.

Version 0.15. Tagged as 'DebugLib-0_15'
@
text
@d1 1
a1 1
/* (0.15)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.15
d8 1
a8 1
#define Module_Date_CMHG      		21 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.15"
#define Module_Version                  15
d13 1
a13 1
#define Module_Date      		"21 Sep 1998"
@


1.7
log
@  Updated Documentation for debug_initialise, to clarify some of the
parameters.
  Fixed a few cases where NULLs could be passed to strcpy etc. in
debug_initialise.
  VersionNum file now gets exported to the DebugLib's Export directory, so
you always know what version you've got compiled.
  Tidied some header files a bit.

Version 0.14. Tagged as 'DebugLib-0_14'
@
text
@d1 1
a1 1
/* (0.14)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.14
d8 1
a8 1
#define Module_Date_CMHG      		17 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.14"
#define Module_Version                  14
d13 1
a13 1
#define Module_Date      		"17 Sep 1998"
@


1.6
log
@The stub for debug_set_options had too few dummy arguments, so a
  program with debug_set_options wouldn't build if debugging was turned off.
  Fixed this oversight.

Version 0.13. Tagged as 'DebugLib-0_13'
@
text
@d1 1
a1 1
/* (0.13)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.13
d8 1
a8 1
#define Module_Date_CMHG      		16 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.13"
#define Module_Version                  13
d13 1
a13 1
#define Module_Date      		"16 Sep 1998"
@


1.5
log
@ * New features:
   - You can now set a system variable to override the output method
     compiled into the program. (DebugLib$Device_<Taskname>)
   - Printf output now has an option bit associated with it.  This option
     being whether or not the cursor is sent to the top-left of the screen
     before outputting text.  Default is on.

 * Bug fix - printf output wasn't working due to an oversight in the device
   selection function.
 * Updated manual for new features

Version 0.12. Tagged as 'DebugLib-0_12'
@
text
@d1 1
a1 1
/* (0.12)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.12
d10 2
a11 2
#define Module_MajorVersion     	"0.12"
#define Module_Version                  12
@


1.4
log
@Added __cplusplus wrappers to the exportable headers, no real functional
  change, so major version number not incremented.

Version 0.11. Not tagged
@
text
@d1 1
a1 1
/* (0.11)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.11
d10 2
a11 2
#define Module_MajorVersion     	"0.11"
#define Module_Version                  11
@


1.3
log
@Somehow the serial_lib header file got corrupted when it got copied to
  the Unix domain for CVS checkin
Rectified this by checking in the proper header file

Version 0.11. Tagged as 'DebugLib-0_11'
@
text
@d8 1
a8 1
#define Module_Date_CMHG      		15 Sep 1998
d13 1
a13 1
#define Module_Date      		"15 Sep 1998"
@


1.2
log
@Added Serial Output device.
Added CLI, Module and Toolbox test applications
Tidied various sections
Tidied StrongHelp manual
Removed remotedb from Libs folder, now fetched from build structure
Removed svcprint from Libs folder, wasn't being used
Added srccommit support

Version 0.10. Tagged as 'DebugLib-0_10'
@
text
@d1 1
a1 1
/* (0.10)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.10
d8 1
a8 1
#define Module_Date_CMHG      		04 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.10"
#define Module_Version                  10
d13 1
a13 1
#define Module_Date      		"04 Sep 1998"
@


1.1
log
@created by srccommit.
@
text
@d1 1
a1 1
/* (0.09)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.09
d10 2
a11 2
#define Module_MajorVersion     	"0.09"
#define Module_Version                  9
@
