head	4.6;
access;
symbols
	PDumpers-1_46:4.6
	PDumpers-1_45:4.6
	PDumpers-1_44:4.6
	PDumpers-1_43:4.6
	PDumpers-1_42:4.6
	PDumpers-1_41:4.6
	RO_5_07:4.6
	PDumpers-1_40:4.6
	PDumpers-1_39:4.6
	PDumpers-1_38:4.6
	PDumpers-1_37:4.6
	PDumpers-1_36:4.5
	PDumpers-1_35:4.5
	PDumpers-1_33:4.5
	PDumpers-1_32:4.5
	PDumpers-1_31:4.4
	PDumpers-1_30:4.4
	PDumpers-1_29:4.4
	PDumpers-1_27:4.4
	PDumpers-1_26:4.4
	PDumpers-1_25:4.4
	Spin_merge-1_21:4.1.7.2
	PDumpers-1_24:4.4
	PDumpers-1_23:4.4
	PDumpers-1_22:4.4
	dellis_autobuild_BaseSW:4.4
	PDumpers-1_21:4.4
	sbrodie_sedwards_16Mar2000:4.3
	dcotton_autobuild_BaseSW:4.4
	dcotton_MPT2_build_16061999:4.1.7.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.7.2
	Ursula_RiscPC:4.1.7.2.0.4
	nicke_PDumpers-1_21:4.1.7.2
	rthornb_UrsulaBuild-19Aug1998:4.1.7.2
	UrsulaBuild_FinalSoftload:4.1.7.2
	rthornb_UrsulaBuild-12Aug1998:4.1.7.2
	aglover_UrsulaBuild-05Aug1998:4.1.7.2
	rthornb_UrsulaBuild-29Jul1998:4.1.7.2
	rthornb_UrsulaBuild-22Jul1998:4.1.7.2
	hsimons_BOCA-1_2-Release:4.1.7.2
	rthornb_UrsulaBuild-15Jul1998:4.1.7.2
	rthornb_UrsulaBuild-07Jul1998:4.1.7.2
	rthornb_UrsulaBuild-17Jun1998:4.1.7.2
	rthornb_UrsulaBuild-03Jun1998:4.1.7.2
	rthornb_UrsulaBuild-27May1998:4.1.7.2
	rthornb_UrsulaBuild-21May1998:4.1.7.2
	rthornb_UrsulaBuild_01May1998:4.1.7.2
	afrost_NC2_Generic:4.1.7.2
	afrost_Funai01-33:4.1.7.2
	Ursula:4.1.7.2.0.2
	Ursula_bp:4.1.7.2
	Ursula_31Mar1998:4.3
	Spinner_RCA116:4.1.7.2
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spin_merge_28May97:4.1.7.1
	Spinner_B10:4.1.7.2
	Spin_merge_16May97:4.1.7.1
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.2
	ARTtmp:4.1.7.1.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.6
date	2002.12.14.11.41.57;	author rsprowson;	state Exp;
branches;
next	4.5;

4.5
date	2002.01.28.16.57.44;	author mboura;	state Exp;
branches;
next	4.4;

4.4
date	2000.06.09.11.08.06;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	97.05.28.12.20.14;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.22.15.09.08;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.49.27;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.49.27;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.03.13.52;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.31.46;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.35.09;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.05.22.10.49.54;	author jcoxhead;	state Exp;
branches;
next	;


desc
@@


4.6
log
@Turned off 10k leading zero switch in PDumperLJ,this broke more than
it fixed but will almost certainly mean HP810C's wont work now.
Added PDumperCX2 dumper,infact this is derived from PDumperCX since
they're closely related - new Canon printers use 16 bit margin setup
code whereas old ones used 8 bit margin setup.

Version 1.37. Tagged as 'PDumpers-1_37'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; > Version

; ********************
; *** CHANGES LIST ***
; ********************

; 24-Jun-91 0.01 DDV Created the LaserJet PDumper module in seconds
; 25-Jun-91      DDV Modified compression algorithm to skip two byte run lengths
; 25-Jun-91 0.02 DDV Bug fix; data before run length correctly sent
; 27-Jun-91 0.03 DDV Changed location of configuration word
; 18-Jul-91      DDV Bug fix: Non-compressed imaging works again
; 18-Jul-91      DDV Bug fix: When compressing data length output for bit image was 2 bytes too long
; 19-Jul-91 0.04 DDV Bug fix: Run length encoding now gets cut of point handling correct in all cases
; 19-Jul-91      DDV Bug fix: Number of copies to be sent
; 20-Jul-91 0.10 DDV Bug fix: Output grey-level sprites performs STRB not STR
; 23-Jul-91 0.11 DDV Bug fix: Multiple copies sequence suffixed with a "X"
;  2-Aug-91 0.12 DDV Send PDumperLJ$Extra after possible copies sequence
; 14-Aug-91      DDV Bug fix: L2 compress working again
; 15-Aug-91 0.13 DDV Bug fix: L2 compress routine copes with back wrapping after long run length encountered
; 15-Aug-91 0.14 DDV Added control bit for page eject command - needed for LJ150/350 printers
;  5-Sep-91      DDV Reapplied the compression fixes
;  5-Sep-91 0.15 DDV Reapplied the form feed fix
;  5-Sep-91      DDV Tweeked to overcome the pips problem
;  5-Sep-91 0.16 DDV Reapplied the PDumperLJ$Extra GSTrans feature
;  6-Sep-91 0.17 DDV New handling of abort jobs added to cope with multi-page documents correctly
; 21-Oct-91 0.20 DDV Intergrated with PDumper Support module / new common code
; 25-Oct-91 0.21 DDV Bug fix: Gump and end of line fixed
; 25-Nov-91 0.24 OSS Fix 4 bytes instead of 244 bytes workspace element for pd_data.
; 26-Nov-91 0.25 OSS Increase version number to match DM and IW.
; 10-Dec-91 0.26 SMC Shortened message tokens.
; 16-Dec-91 0.27 OSS Fixed Worspace palette_file_end to be 2544 + 1024
;                    rather than 2344 + 1024 (2544 = 1520 + 1024) fix.
;                    PDumper_Entry to store SP and not R0 in FramePointer.
;                    Fixed Pumper_Error to not try to be clever (and fail).
;  1-Jan-92 0.28 OSS Version number increment to match IW and DM.
; 20-Feb-92 0.29 JSR Version number incremented for r8 corruption fix in common.header.
;  5-Feb-92 0.30 DDV Sorted out Owen's little mess up with version field.
; 19-Mar-92 0.31 DDV Bug fix: Left margin is correctly send out.
; 25-Mar-92 0.32 DDV Bug fix: $Extra variables reliably GSTrans'd.
;  1-Apr-92 0.33 DDV Further tweek to $Extra sending, ensures it is always terminated.
; 24-Apr-92 0.34 DDV Support for extended margin information (v3 data files)
;
; 26-Oct-92 1.01 TC  Added support for 550C
; 22-Jun-93 1.03 TC  Put in extra Page start codes, so user can control stippling/depletion
; 08-Sep-93 1.04 PAH Added support for 24bit, plus striptype_mask extended on call to add_pdumper
; 08-Feb-94 1.05 PAH Allow for printer reset on abnormally terminating a job
; 24-Feb-94 1.06 PAH above bug did not make it onto srcfiler!
; 11-Aug-94 1.07 SMC Introduce pdf_SupportsColour flag and only output palette selection if set.
; 15-Sep-94 1.08 AMcC Use common version number
; 10-Jul-95 1.15 MJS Generally faster in colour mode. Also, optimises sequence of blank white
;                    rows to relative vertical move (colour and grey).
;

                GET     ^.VersionASM

                GBLA    PDumperNumber
                GBLS    PDumperTitle
                GBLS    PDumperHelp
                GBLL    PDumperDebug

PDumperNumber   SETA    PDumperLJ_Number
PDumperTitle    SETS    "PDumperLJ"
PDumperHelp     SETS    "$PDumperTitle"
PDumperDebug    SETL    true

                GBLL    sendformfeed
sendformfeed    SETL    true                    ; don't send form feeds
                GBLL    FourPlanes
FourPlanes      SETL    true                    ; allow 4-plane output

                 GBLL   PrefixWithZeroes
PrefixWithZeroes SETL   false

                GBLS    PrivMessages
PrivMessages    SETS    ""                      ; no private messages

                END
@


4.5
log
@File missed from previous commit

Version 1.32. Tagged as 'PDumpers-1_32'
@
text
@d86 1
a86 1
PrefixWithZeroes SETL   true
@


4.4
log
@32-bit compatible.

Version 1.21. Tagged as 'PDumpers-1_21'
@
text
@d85 3
@


4.3
log
@Spinner branch taken
@
text
@d16 1
a16 1
                
d56 1
a56 1
;           
d68 1
a68 1
                GET     ^.Version
d79 1
a79 1
                              
@


4.2
log
@Version Spin_merge taken
@
text
@d78 1
a78 1
PDumperDebug    SETL    false
@


4.1
log
@Initial revision
@
text
@d64 2
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a63 2
; 10-Jul-95 1.15 MJS Generally faster in colour mode. Also, optimises sequence of blank white
;                    rows to relative vertical move (colour and grey).
@


4.1.7.2
log
@   Unbreak 15- and 24-bit strip-type code.
@
text
@d78 1
a78 1
PDumperDebug    SETL    true
@


4.1.5.1
log
@Import from SrcFiler
@
text
@a63 2
; 10-Jul-95 1.15 MJS Generally faster in colour mode. Also, optimises sequence of blank white
;                    rows to relative vertical move (colour and grey).
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a63 2
; 10-Jul-95 1.15 MJS Generally faster in colour mode. Also, optimises sequence of blank white
;                    rows to relative vertical move (colour and grey).
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
