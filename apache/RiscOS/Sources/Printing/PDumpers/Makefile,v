head	4.14;
access;
symbols
	PDumpers-1_46:4.14
	PDumpers-1_45:4.13
	PDumpers-1_44:4.12
	PDumpers-1_43:4.11
	PDumpers-1_42:4.10
	PDumpers-1_41:4.10
	RO_5_07:4.10
	PDumpers-1_40:4.10
	PDumpers-1_39:4.10
	PDumpers-1_38:4.9
	PDumpers-1_37:4.8
	PDumpers-1_36:4.7
	PDumpers-1_35:4.7
	PDumpers-1_34:4.7
	PDumpers-1_33:4.6
	PDumpers-1_32:4.5
	PDumpers-1_31:4.5
	PDumpers-1_30:4.5
	PDumpers-1_29:4.5
	PDumpers-1_27:4.5
	PDumpers-1_26:4.5
	PDumpers-1_25:4.4
	Spin_merge-1_21:4.1.7.2
	PDumpers-1_24:4.4
	PDumpers-1_23:4.4
	PDumpers-1_22:4.4
	dellis_autobuild_BaseSW:4.4
	PDumpers-1_21:4.4
	sbrodie_sedwards_16Mar2000:4.3
	dcotton_autobuild_BaseSW:4.5
	dcotton_MPT2_build_16061999:4.1.7.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.7.2.4.1
	Ursula_RiscPC:4.1.7.2.0.4
	nicke_PDumpers-1_21:4.1.7.2
	rthornb_UrsulaBuild-19Aug1998:4.1.7.2
	UrsulaBuild_FinalSoftload:4.1.7.2
	rthornb_UrsulaBuild-12Aug1998:4.1.7.2
	aglover_UrsulaBuild-05Aug1998:4.1.7.2
	rthornb_UrsulaBuild-29Jul1998:4.1.7.2
	rthornb_UrsulaBuild-22Jul1998:4.1.7.2
	hsimons_BOCA-1_2-Release:4.1.7.2
	rthornb_UrsulaBuild-15Jul1998:4.1.7.2
	rthornb_UrsulaBuild-07Jul1998:4.1.7.2
	rthornb_UrsulaBuild-17Jun1998:4.1.7.2
	rthornb_UrsulaBuild-03Jun1998:4.1.7.2
	rthornb_UrsulaBuild-27May1998:4.1.7.2
	rthornb_UrsulaBuild-21May1998:4.1.7.2
	rthornb_UrsulaBuild_01May1998:4.1.7.2
	afrost_NC2_Generic:4.1.7.2
	afrost_Funai01-33:4.1.7.2
	Ursula:4.1.7.2.0.2
	Ursula_bp:4.1.7.2
	Ursula_31Mar1998:4.3
	Spinner_RCA116:4.1.7.2
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spin_merge_28May97:4.1.7.2
	Spinner_B10:4.1.7.2
	Spin_merge_16May97:4.1.7.1
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.2
	ARTtmp:4.1.7.1.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.14
date	2012.01.14.22.58.29;	author srevill;	state Exp;
branches;
next	4.13;
commitid	0abGtjHzUzmU7cPv;

4.13
date	2009.04.24.02.16.41;	author srevill;	state Exp;
branches;
next	4.12;

4.12
date	2008.06.14.17.31.55;	author srevill;	state Exp;
branches;
next	4.11;

4.11
date	2008.06.05.22.49.43;	author bavison;	state Exp;
branches;
next	4.10;

4.10
date	2003.01.17.10.54.41;	author srevill;	state Exp;
branches;
next	4.9;

4.9
date	2002.12.17.18.54.42;	author srevill;	state Exp;
branches;
next	4.8;

4.8
date	2002.12.14.11.41.55;	author rsprowson;	state Exp;
branches;
next	4.7;

4.7
date	2002.11.15.16.05.22;	author srevill;	state Exp;
branches;
next	4.6;

4.6
date	2002.02.21.12.55.42;	author srevill;	state Exp;
branches;
next	4.5;

4.5
date	2001.06.01.14.18.37;	author sbrodie;	state Exp;
branches;
next	4.4;

4.4
date	2000.06.09.11.07.55;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	97.05.16.12.46.54;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.21.17.13.52;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.49.07;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.49.07;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.03.09.53;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.29.55;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.33.21;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.05.14.09.40.54;	author jcoxhead;	state Exp;
branches
	4.1.7.2.4.1;
next	;

4.1.7.2.4.1
date	98.11.20.20.13.46;	author aglover;	state Exp;
branches;
next	;


desc
@@


4.14
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 1.46. Tagged as 'PDumpers-1_46'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for PDumper (Printer Dumpers)
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name         Description
# ----       ----         -----------
# 27-May-94  AMcC         Created.
# 03-Nov-94  MJS          Added EscapeP2 dumper
# 24-Jul-95  MJS          Added CanonX dumper
# 13-Dec-02  SAR          Added CanonX2 dumper created from common CanonX sources
#

#
#
EXP_HDR = <export$dir>

#
# Program specific options:
#
COMPONENT = PDumpers
EXPORTS   = ${EXP_HDR}.PDumper
DUMPERS   = DotMatrix \
            ImageWriter \
            LaserJet \
            PCL \
            EscapeP2 \
            CanonX2 \
            CanonX \
            24Pin \
            Sprite

#
# Generic options:
#
CP      = copy
MKDIR   = do mkdir -p
DIR     = @@dir
WIPE    = x wipe
MAKE   ?= amu
SUBMAKE = @@${MAKE} ${MFLAGS} ${MAKECMDGOALS}

STRIPDEPEND = stripdepnd

CPFLAGS = ~cfr~v
WFLAGS  = ~c~v

#
# Generic rules:
#
all: ${DUMPERS}
        @@echo ${COMPONENT}: all built (disc)

rom: ${DUMPERS}
        @@echo ${COMPONENT}: all built (rom)

export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete

install: ${DUMPERS}
        Set Alias$CPFD $(CP) rm.%0 $(INSTDIR).%0 $(CPFLAGS)
        Set Alias$CPFDL CPFD %0|MAccess $(INSTDIR).%0 LR/r
        |
        $(MKDIR) $(INSTDIR)
        CPFDL PDumperDM
        CPFDL PDumperIW
        CPFDL PDumperLJ
        CPFDL PDumperPCL
        CPFDL PDumperE2
        CPFDL PDumperCX2
        CPFDL PDumperCX
        |
        Unset Alias$CPFDL
        Unset Alias$CPFD
        @@echo ${COMPONENT}: installed (disc)

install_rom: ${DUMPERS}
        ${CP} rm.PDumperDM  ${INSTDIR}.PDumperDM  ${CPFLAGS}
        ${CP} rm.PDumperIW  ${INSTDIR}.PDumperIW  ${CPFLAGS}
        ${CP} rm.PDumperLJ  ${INSTDIR}.PDumperLJ  ${CPFLAGS}
        ${CP} rm.PDumperPCL ${INSTDIR}.PDumperPCL ${CPFLAGS}
        ${CP} rm.PDumperE2  ${INSTDIR}.PDumperE2  ${CPFLAGS}
        ${CP} rm.PDumperCX2 ${INSTDIR}.PDumperCX2 ${CPFLAGS}
        ${CP} rm.PDumperCX  ${INSTDIR}.PDumperCX  ${CPFLAGS}
        @@echo ${COMPONENT}: installed (rom)

clean: ${DUMPERS}
        ${XWIPE} rm.* ${WFLAGS}
        ${STRIPDEPEND} PDumper24.Makefile
        ${STRIPDEPEND} PDumperCX.Makefile
        ${STRIPDEPEND} PDumperDM.Makefile
        ${STRIPDEPEND} PDumperE2.Makefile
        ${STRIPDEPEND} PDumperIW.Makefile
        ${STRIPDEPEND} PDumperLJ.Makefile
        ${STRIPDEPEND} PDumperPCL.Makefile
        ${STRIPDEPEND} PDumperSP.Makefile
        @@echo ${COMPONENT}: cleaned

${EXP_HDR}.PDumper: hdr.PDumper
        ${CP} hdr.PDumper $@@ ${CPFLAGS}

#----------------------------------------------------------------------
# Supported bit image printers
#----------------------------------------------------------------------

DotMatrix:
        ${DIR} PDumperDM
        ${SUBMAKE} ^.rm.PDumperDM INSTDIR=^.rm
        @@back

ImageWriter:
        ${DIR} PDumperIW
        ${SUBMAKE} ^.rm.PDumperIW INSTDIR=^.rm
        @@back

LaserJet:
        ${DIR} PDumperLJ
        ${SUBMAKE} ^.rm.PDumperLJ INSTDIR=^.rm
        @@back

PCL:
        ${DIR} PDumperPCL
        ${SUBMAKE} ^.rm.PDumperPCL INSTDIR=^.rm
        @@back

EscapeP2:
        ${DIR} PDumperE2
        ${SUBMAKE} ^.rm.PDumperE2 INSTDIR=^.rm
        @@back

CanonX2:
        ${DIR} PDumperCX
        ${SUBMAKE} ^.rm.PDumperCX2 TARGET=PDumperCX2 INSTDIR=^.rm 
        @@back

CanonX:
        ${DIR} PDumperCX
        ${SUBMAKE} ^.rm.PDumperCX TARGET=PDumperCX INSTDIR=^.rm 
        @@back

24Pin:
        ${DIR} PDumper24
        ${SUBMAKE} ^.rm.PDumper24 INSTDIR=^.rm
        @@back

Sprite:
        ${DIR} PDumperSP
        ${SUBMAKE} ^.rm.PDumperSP25 INSTDIR=^.rm
        @@back

# Dynamic dependencies:
@


4.13
log
@Resolved a name and PDumper number clash.

A public PDumper module was released by a third party which stole a private
allocation (and leafname) from an Acorn PDumper. Now the Acorn module is
public, there's a clash. It's easier to fix by changing the Acorn module
to be called PDumperSP25 (dumper number 25) to avoid the clash.

Resolves ticket #178

Version 1.45. Tagged as 'PDumpers-1_45'
@
text
@d53 1
a53 1
WIPE    = -wipe
@


4.12
log
@Just some makefile tweaks. No code changes.

Version 1.44. Tagged as 'PDumpers-1_44'
@
text
@d162 1
a162 1
        ${SUBMAKE} ^.rm.PDumperSP INSTDIR=^.rm
@


4.11
log
@  Added PDumperPCL.
Detail:
  Contributed by Herbert zur Nedden and based upon PDumperLJ, this is a
  dumper designed for PCL printers that support duplex printing, such as the
  Canon i-Sensys MF4690PL. See PDumperPCL/!Info for full details.
Admin:
  Tested by the author on the aforementioned printer; ROOL have merely
  checked that it compiles. See PrintDefs 0.46 for the associated printer
  definition file.

Version 1.43. Tagged as 'PDumpers-1_43'
@
text
@d102 1
a102 1
        ${WIPE} rm.* ${WFLAGS}
@


4.10
log
@Build tweaks to allow these to be assembled with an objasm which doesn't
have a '-J' option - see previous check in.
Fix for macro "PrintCountedString",the length was a factor 256 out.

Version 1.39. Tagged as 'PDumpers-1_39'
@
text
@d40 1
d82 1
d95 1
d109 1
d135 5
@


4.9
log
@Build changes,no code changes.
Took out the bodge of prefixing all the files GOT from the Generic
directory with a G,and replaced it with use of new flag "-J" in objasm.
Improved clean rule in top MakeFile.
Deleted some unused !Mk files.

Version 1.38. Tagged as 'PDumpers-1_38'
@
text
@d42 3
a44 1
            CanonX
@


4.8
log
@Turned off 10k leading zero switch in PDumperLJ,this broke more than
it fixed but will almost certainly mean HP810C's wont work now.
Added PDumperCX2 dumper,infact this is derived from PDumperCX since
they're closely related - new Canon printers use 16 bit margin setup
code whereas old ones used 8 bit margin setup.

Version 1.37. Tagged as 'PDumpers-1_37'
@
text
@a52 1
RM      = remove
d96 1
a96 1
clean:
@


4.7
log
@Renamed generic driver sources
Makefiles rewritten
Converted to use objasm
First pass at 32 bit compatibility.

Version 1.34. Tagged as 'PDumpers-1_34'
@
text
@d25 1
d41 1
d53 1
d81 1
d89 6
a94 5
        ${CP} rm.PDumperDM ${INSTDIR}.PDumperDM ${CPFLAGS}
        ${CP} rm.PDumperIW ${INSTDIR}.PDumperIW ${CPFLAGS}
        ${CP} rm.PDumperLJ ${INSTDIR}.PDumperLJ ${CPFLAGS}
        ${CP} rm.PDumperE2 ${INSTDIR}.PDumperE2 ${CPFLAGS}
        ${CP} rm.PDumperCX ${INSTDIR}.PDumperCX ${CPFLAGS}
d135 5
d142 1
a142 1
        ${SUBMAKE} ^.rm.PDumperCX INSTDIR=^.rm
@


4.6
log
@  Changed all of the makefile install rules.
Detail:
  All of the makefiles in this component will now use "do mkdir -p" rather
  than "cdir" to create directories and they create INSTDIR before doing
  the installation.
Admin:
  Builds and installs.

Version 1.33. Tagged as 'PDumpers-1_33'
@
text
@d46 1
d112 1
a112 1
        ${SUBMAKE} ^.rm.PDumperDM
d117 1
a117 1
        ${SUBMAKE} ^.rm.PDumperIW
d122 1
a122 1
        ${SUBMAKE} ^.rm.PDumperLJ
d127 1
a127 1
        ${SUBMAKE} ^.rm.PDumperE2
d132 1
a132 1
        ${SUBMAKE} ^.rm.PDumperCX
d137 1
a137 1
        ${SUBMAKE} ^.rm.PDumper24
d142 1
a142 1
        ${SUBMAKE} ^.rm.PDumperSP
@


4.5
log
@  Fixed Makefile to use the correct predefined macros for submakes.
Detail:
  It is now necessary to use ${MAKE} ${MFLAGS} ${MAKECMDGOALS}
    if you want ALL (except -f) the CLI parameters to be passed down.
Admin:
  Tested in manual build.


Version 1.26. Tagged as 'PDumpers-1_26'
@
text
@d72 1
@


4.4
log
@32-bit compatible.

Version 1.21. Tagged as 'PDumpers-1_21'
@
text
@a27 1
# Paths
a44 1
AS      = aasm
a45 2
MAKE    = @@amu ${MFLAGS}
MKDIR   = cdir
a46 1
RM      = remove
d48 2
a52 2
CCFLAGS = -c -depend !Depend -IC:
ASFLAGS = -depend !Depend -stamp -quit -module
d110 1
a110 1
        ${MAKE} ^.rm.PDumperDM
d115 1
a115 1
        ${MAKE} ^.rm.PDumperIW
d120 1
a120 1
        ${MAKE} ^.rm.PDumperLJ
d125 1
a125 1
        ${MAKE} ^.rm.PDumperE2
d130 1
a130 1
        ${MAKE} ^.rm.PDumperCX
d135 1
a135 1
        ${MAKE} ^.rm.PDumper24
d140 1
a140 1
        ${MAKE} ^.rm.PDumperSP
@


4.3
log
@Spinner branch merged
@
text
@d54 2
d97 7
@


4.2
log
@Version Spin_merge taken
@
text
@d55 1
a55 1
ASFLAGS = -depend !Depend -Stamp -quit -module
@


4.1
log
@Initial revision
@
text
@d24 1
d40 2
a41 1
            EscapeP2
d79 1
d90 1
d122 5
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a23 1
# 24-Jul-95  MJS          Added CanonX dumper
d39 1
a39 2
            EscapeP2 \
            CanonX
a76 1
        CPFDL PDumperCX
a86 1
        ${CP} rm.PDumperCX ${INSTDIR}.PDumperCX ${CPFLAGS}
a117 5
        @@back

CanonX:
        ${DIR} PDumperCX
        ${MAKE} ^.rm.PDumperCX
@


4.1.7.2
log
@   Return an error EscDisabled if any PDumper is called with escape disabled.
   Check the GBPB error flag before checking the error-suppress flag.
   Copy the error block returned by OS_GBPB so FileSwitch doesn't overwrite it.
@
text
@d55 1
a55 1
ASFLAGS = -depend !Depend -stamp -quit -module
@


4.1.7.2.4.1
log
@Makefile edits and various plumbing to make the darn thing build
@
text
@d86 5
a90 5
        ${CP} PDumperDM.rm.PDumperDM ${INSTDIR}.PDumperDM ${CPFLAGS}
        ${CP} PDumperIW.rm.PDumperIW ${INSTDIR}.PDumperIW ${CPFLAGS}
        ${CP} PDumperLJ.rm.PDumperLJ ${INSTDIR}.PDumperLJ ${CPFLAGS}
        ${CP} PDumperE2.rm.PDumperE2 ${INSTDIR}.PDumperE2 ${CPFLAGS}
        ${CP} PDumperCX.rm.PDumperCX ${INSTDIR}.PDumperCX ${CPFLAGS}
@


4.1.5.1
log
@Import from SrcFiler
@
text
@a23 1
# 24-Jul-95  MJS          Added CanonX dumper
d39 1
a39 2
            EscapeP2 \
            CanonX
a76 1
        CPFDL PDumperCX
a86 1
        ${CP} rm.PDumperCX ${INSTDIR}.PDumperCX ${CPFLAGS}
a117 5
        @@back

CanonX:
        ${DIR} PDumperCX
        ${MAKE} ^.rm.PDumperCX
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a23 1
# 24-Jul-95  MJS          Added CanonX dumper
d39 1
a39 2
            EscapeP2 \
            CanonX
a76 1
        CPFDL PDumperCX
a86 1
        ${CP} rm.PDumperCX ${INSTDIR}.PDumperCX ${CPFLAGS}
a117 5
        @@back

CanonX:
        ${DIR} PDumperCX
        ${MAKE} ^.rm.PDumperCX
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
