head	4.14;
access;
symbols
	Manager-1_89:4.14
	Manager-1_88:4.14
	Manager-1_87:4.14
	Manager-1_86:4.14
	Manager-1_85:4.14
	Manager-1_84:4.13
	Manager-1_83:4.12
	Manager-1_82:4.11
	Manager-1_81:4.11
	Manager-1_80:4.10
	Manager-1_79:4.9
	Manager-1_78:4.8
	Manager-1_77:4.8
	Manager-1_76:4.7
	Manager-1_75:4.7
	Manager-1_74:4.7
	Manager-1_73:4.7
	Manager-1_72:4.7
	Manager-1_71:4.6
	Manager-1_70:4.6
	Manager-1_69:4.6
	Manager-1_68:4.6
	Manager-1_67:4.6
	Manager-1_66:4.5
	Manager-1_65:4.4
	Manager-1_64:4.3
	Manager-1_63:4.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2
	Ursula_RiscPC:4.2.0.2
	rthornb_UrsulaBuild-19Aug1998:4.2
	UrsulaBuild_FinalSoftload:4.2
	rthornb_UrsulaBuild-12Aug1998:4.2
	aglover_UrsulaBuild-05Aug1998:4.2
	rthornb_UrsulaBuild-29Jul1998:4.2
	rthornb_UrsulaBuild-22Jul1998:4.2
	rthornb_UrsulaBuild-15Jul1998:4.2
	rthornb_UrsulaBuild-07Jul1998:4.2
	rthornb_UrsulaBuild-17Jun1998:4.2
	rthornb_UrsulaBuild-03Jun1998:4.2
	rthornb_UrsulaBuild-27May1998:4.2
	Ursula_bp:4.2
	Ursula:4.2
	rthornb_UrsulaBuild-21May1998:4.1.7.1
	rthornb_UrsulaBuild_01May1998:4.1.7.1
	Ursula_31Mar1998:4.2
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.2.0.4
	Daytona_bp:4.2
	RO_3_71:4.1.3.1
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.14
date	2016.05.07.08.30.21;	author rsprowson;	state Exp;
branches;
next	4.13;
commitid	wEg2ZmGeIYXeHw5z;

4.13
date	2016.02.21.12.42.54;	author rsprowson;	state Exp;
branches;
next	4.12;
commitid	bUGL4rSmOpGhxMVy;

4.12
date	2014.02.19.08.57.12;	author rsprowson;	state Exp;
branches;
next	4.11;
commitid	TTRACK0bWSxHOGpx;

4.11
date	2013.06.01.08.10.27;	author rsprowson;	state Exp;
branches;
next	4.10;
commitid	Vn0VjA4MVEQF0TRw;

4.10
date	2013.04.08.19.50.25;	author rsprowson;	state Exp;
branches;
next	4.9;
commitid	AVSf2DpB5xcyC0Lw;

4.9
date	2013.04.06.07.17.41;	author rsprowson;	state Exp;
branches;
next	4.8;
commitid	trGUc148W1xkwGKw;

4.8
date	2012.08.30.07.55.19;	author rsprowson;	state Exp;
branches;
next	4.7;
commitid	7Y3vkvUHSAvCLxiw;

4.7
date	2004.11.05.13.18.19;	author jballance;	state Exp;
branches;
next	4.6;

4.6
date	2003.04.11.22.29.40;	author rsprowson;	state Exp;
branches;
next	4.5;

4.5
date	2003.04.03.10.21.57;	author srevill;	state Exp;
branches;
next	4.4;

4.4
date	2003.01.17.14.37.32;	author srevill;	state Exp;
branches;
next	4.3;

4.3
date	2002.11.26.10.55.39;	author rsprowson;	state Exp;
branches;
next	4.2;

4.2
date	97.05.13.14.48.58;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.48.07;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.48.07;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.03.00.48;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.25.27;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.29.22;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.14
log
@Make path search order consistent
Change Printers$Path definition so !Run and !Boot agree with eachother, and with the (less often used) ROM variants of same (spotted by Steffen Huber).
Also, rename temporary use of Choices$ variable since that's not registered to !Printers.

Version 1.85. Tagged as 'Manager-1_85'
@
text
@|
| This application is © 1991-2003 Acorn Computers Ltd.
|                  All Rights Reserved.
|
RMEnsure UtilityModule 3.10 Error This application is only suitable for use with RISC OS 3.10 or later versions
|
Set Printers$Dir  <Obey$Dir>
|
| Check for choices
Set Printers$NoChoices 0
IF "<Choices$Path>"="" THEN Set Printers$NoChoices 1
IF "<Choices$Write>"="" THEN Set Printers$NoChoices 1
IF "<Printers$NoChoices>"="1" THEN Error !Printers requires a Choices directory to operate
Unset Printers$NoChoices
|
| Note that this version of !Printers is totally disc based
Set Printers$Path Choices:Printers.,<Obey$Dir>.
Set File$Type_FC6 PrintDfn
Set Alias$@@RunType_FC6 Run <Obey$Dir> -pdf %%0
|
| Maximum memory to be used by PDriverDP (kbytes)
If "<PDriverDP$MaxMem>" = "" Then Set PDriverDP$MaxMem 8192
|
| Ensure that there is enough memory for !Printers, some modules and some workspace
WimpSlot -min 320K -max 320K
WimpSlot -min 128K -max 128K
|
| If there isn't any PDriver module at all, load the one we've got. This ensures that
| the loading of RemotePrinterSupport will at least get past that point.
RMEnsure PDriver               0.00 RMLoad Printers:Modules.PDriver
|
RMEnsure RemotePrinterSupport  1.12 RMLoad Printers:Modules.RemPrnSpt
RMEnsure RemotePrinterSupport  1.12 Error !Printers needs RemotePrinterSupport 1.12 or later
|
IconSprites Printers:Themes.!Sprites
/<Printers$Dir>.SetPrint
WimpSlot -min 320K -max 320K
/<Printers$Dir>.!RunImage %*0
@


4.13
log
@Correction to file type name
Hdr:FileTypes and the User Guide say FC6 = PrintDfn. Make it so.

Version 1.84. Tagged as 'Manager-1_84'
@
text
@d10 5
a14 5
Set Choices$Absent 0
IF "<Choices$Path>"="" THEN Set Choices$Absent 1
IF "<Choices$Write>"="" THEN Set Choices$Absent 1
IF "<Choices$Absent>"="1" THEN Error !Printers requires a Choices directory to operate
Unset Choices$Absent
@


4.12
log
@Four MSR's changed to a neutral equivalent
 - Allowing the printer manager to run on RISC OS 3.10 again
 - Also slightly recoded the heap claim so top bit set addresses wouldn't accidentally set V and return a bogus error
 - Fix stack imbalance in the out of memory case
Ensure Wimp_ResizeIcon is available when doing Wimp_Initialise.
Built, but not tested.

Version 1.83. Tagged as 'Manager-1_83'
@
text
@d18 1
a18 1
Set File$Type_FC6 PrntDefn
@


4.11
log
@Import of Ursula and Morris4 themed sprites
Moved default application sprites from UK into DataFiles as they're not UK territory specific.
Added Morris4 sprites from RISC OS 3.70 ROM.
Added Ursula dp/lj/ps sprites designed by Chris Wraight.

Version 1.81. Tagged as 'Manager-1_81'
@
text
@d5 1
a5 1
RMEnsure UtilityModule 3.50 Error This application is only suitable for use with RISC OS 3.50 or later versions
@


4.10
log
@Fix for overwriting the filename when a USB printer is manually changed to print to file
When the connection type is changed from USB to file the USB vendor/product id is kept so that, when saved, it can be recognised again later even if the printer isn't plugged in on startup.
However, on reloading the check was assuming that the vendor/product would be zero in the manually changed connection type case, which it wasn't, and would then overwrite the filename string with the DeviceFS string & special fields.
* RunImage: comment/trace update
* Sparrow: add a check of the connection type to FNis_usb_printer
* !Run: tweaked to RMENSURE the remote printer support which includes its own messages
Fixes ticket #110.

Version 1.80. Tagged as 'Manager-1_80'
@
text
@d35 1
a35 1
IconSprites Printers:!Sprites
@


4.9
log
@Remove RMLOADing from makefile and remote printer messages module
Squish 1.15: It's no longer necessary to have all the modules loaded since the SWI names are checked in <swis.h>
RemPrnSpt 1.12: Now carries its own messages so doesn't need the messages module sidekick

Version 1.79. Tagged as 'Manager-1_79'
@
text
@d32 2
a33 2
RMEnsure RemotePrinterSupport  1.10 RMLoad Printers:Modules.RemPrnSpt
RMEnsure RemotePrinterSupport  1.10 Error !Printers needs RemotePrinterSupport 1.10 or later
@


4.8
log
@Import of missing Sprites11 file
Also removed T's&C's from !Boot/!Run copied to output application.

Version 1.77. Tagged as 'Manager-1_77'
@
text
@a31 2
RMEnsure RemotePrinterMessages 1.04 RMLoad Printers:Modules.RemPrnMsgs
RMEnsure RemotePrinterMessages 1.04 Error !Printers needs RemotePrinterMessages version 1.04 or later
@


4.7
log
@      another change to popups .. use discovered printer data always, rather than
       possibly incorrect data in the settings file for interface and alternate
Detail:
Admin:
      Castle added IP
      Castle checked


Version 1.72. Tagged as 'Manager-1_72'
@
text
@a0 14
| Copyright 1996 Acorn Computers Ltd
|
| Licensed under the Apache License, Version 2.0 (the "License");
| you may not use this file except in compliance with the License.
| You may obtain a copy of the License at
|
|     http://www.apache.org/licenses/LICENSE-2.0
|
| Unless required by applicable law or agreed to in writing, software
| distributed under the License is distributed on an "AS IS" BASIS,
| WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
| See the License for the specific language governing permissions and
| limitations under the License.
|
@


4.6
log
@Fix to FNsupported_baudrates to avoid "Bad DIM" when no serialdevdriver
is present.
Fix usb_device_removed to start looking at the list from 0.
Make shared USB printers remember their shared settings.
Change in SuppSrc to avoid oflaofla in the queue display with two digit
connection types (eg.CN13 for USB).
Template changes to connection window.
Added "duplicate" entry to control menu.
Added "install new printer" to iconbar menu (opens PrintDefs:)
Rename control menu to have title "Control"
Added laserjet 5 and 6 paper definitions to the built in sizes so it
doesn't default to size A2.
Fix to store_string so it only asks for the right amount of store.
Change to Makefile to rmensure some modules so SWI names get squished.
Removed a whole load of unused variables.
Plugging in an unknown USB printer prompts the user to tell us which
it really is.
Now appends "#alternateN" to the devicefs filename for USB.
Fix to loading of old style PDF files (borken ungstrans in suppsrc).

Version 1.67. Tagged as 'Manager-1_67'
@
text
@d48 2
a49 2
RMEnsure RemotePrinterSupport  1.07 RMLoad Printers:Modules.RemPrnSpt
RMEnsure RemotePrinterSupport  1.07 Error !Printers needs RemotePrinterSupport 1.07 or later
@


4.5
log
@Addition of USB "plug-and-play" support.This version is a little ropey and
is here for reference rather than use.
Fix to SupportPS to silently ignore the absence of a "Feeds" directory
and simply have a default menu entry instead (OSGBPB -> XOSGBPB).

Version 1.66. Tagged as 'Manager-1_66'
@
text
@d16 1
a16 1
| This application is © 1991-1999 Acorn Computers Ltd.
d35 1
a35 1
| maximum memory to be used by PDriverDP (kbytes)
d39 1
a39 1
WimpSlot -min 192K -max 192K
d48 2
a49 2
RMEnsure RemotePrinterSupport  1.04 RMLoad Printers:Modules.RemPrnSpt
RMEnsure RemotePrinterSupport  1.04 Error !Printers needs RemotePrinterSupport 1.04 or later
d53 1
a53 1
WimpSlot -min 256K -max 256K
@


4.4
log
@Dustbinned all the !Sprites23 files.
Addition of long dump string support (requires appropriate modules too).
Serial baud rates now detected at run time with OS_SerialOp rather than
plucking them out of a messages file.
Debug build made to work (use !MkDebug) outputs much debugging to a RAM
disc.
Adobe PDF support removed (the sources remain) as this is RISC OS Ltd code.
Test PDF files added to the Test directory.

Version 1.65. Tagged as 'Manager-1_65'
@
text
@d46 4
a49 4
RMEnsure RemotePrinterMessages 1.01 RMLoad Printers:Modules.RemPrnMsgs
RMEnsure RemotePrinterMessages 1.01 Error !Printers needs RemotePrinterMessages version 1.01 or later
RMEnsure RemotePrinterSupport  1.01 RMLoad Printers:Modules.RemPrnSpt
RMEnsure RemotePrinterSupport  1.01 Error !Printers needs RemotePrinterSupport 1.01 or later
@


4.3
log
@Changes to SetPrint util for additional printer$type understanding
Template tidy up
Change to get version number from VesionNum file
Tweak to SuppSrc for 32 bit high bit addresses
Change !Run file to look for OS3.50 as we use MSR and MRS now
Pick up all but 2 of the changes added to 1.65 on 26-Jun-2001,mostly
cosmetic,with two exceptions
 - use of Parallel_IgnoreErrors
 - warning about dropping "bundled" printer definitions onto it

Version 1.63. Tagged as 'Manager-1_63'
@
text
@d16 1
a16 1
| This application is © 1991-1999 Acorn Computers Ltd. 
a53 10

| *********************************************
| *
| * ADDED FOR DEBUGGING PURPOSES ONLY...
|Set Printers$Trace ADFS::4.$.TraceProc
Set Trace$To fADFS::4.$.TracePrint
| *
| *
| *********************************************

@


4.2
log
@Version RO_3_71 taken
@
text
@d16 1
a16 1
| This application is © 1991, 1992, 1993, 1994,1995 Acorn Computers Ltd. 
d19 1
a19 1
RMEnsure UtilityModule 3.10 Error This application is only suitable for use with RISC OS 3.10 or later versions
d22 8
d31 1
a31 1
Set Printers$Path <Obey$Dir>.
d53 11
a63 1
WimpSlot -min 128K -max 128K
@


4.1
log
@Initial revision
@
text
@d16 1
a16 1
| This application is © 1991, 1992, 1993, 1994 Acorn Computers Ltd. 
d25 4
d34 4
d46 1
a46 1
/<Printers$Dir>.!RunImage
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@d16 1
a16 1
| This application is © 1991, 1992, 1993, 1994,1995 Acorn Computers Ltd. 
a24 4
Set Alias$@@RunType_FC6 Run <Obey$Dir> -pdf %%0
|
| maximum memory to be used by PDriverDP (kbytes)
If "<PDriverDP$MaxMem>" = "" Then Set PDriverDP$MaxMem 8192
a29 4
| If there isn't any PDriver module at all, load the one we've got. This ensures that
| the loading of RemotePrinterSupport will at least get past that point.
RMEnsure PDriver               0.00 RMLoad Printers:Modules.PDriver
|
d38 1
a38 1
/<Printers$Dir>.!RunImage %*0
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
