head	4.17;
access;
symbols
	Manager-1_89:4.17
	Manager-1_88:4.17
	Manager-1_87:4.16
	Manager-1_86:4.16
	Manager-1_85:4.16
	Manager-1_84:4.16
	Manager-1_83:4.16
	Manager-1_82:4.16
	Manager-1_81:4.16
	Manager-1_80:4.15
	Manager-1_79:4.15
	Manager-1_78:4.14
	Manager-1_77:4.13
	Manager-1_76:4.12
	Manager-1_75:4.11
	Manager-1_74:4.10
	Manager-1_73:4.9
	Manager-1_72:4.8
	Manager-1_71:4.8
	Manager-1_70:4.8
	Manager-1_69:4.7
	Manager-1_68:4.6
	Manager-1_67:4.6
	Manager-1_66:4.5
	Manager-1_65:4.4
	Manager-1_64:4.3
	Manager-1_63:4.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2
	Ursula_RiscPC:4.2.0.2
	rthornb_UrsulaBuild-19Aug1998:4.2
	UrsulaBuild_FinalSoftload:4.2
	rthornb_UrsulaBuild-12Aug1998:4.2
	aglover_UrsulaBuild-05Aug1998:4.2
	rthornb_UrsulaBuild-29Jul1998:4.2
	rthornb_UrsulaBuild-22Jul1998:4.2
	rthornb_UrsulaBuild-15Jul1998:4.2
	rthornb_UrsulaBuild-07Jul1998:4.2
	rthornb_UrsulaBuild-17Jun1998:4.2
	rthornb_UrsulaBuild-03Jun1998:4.2
	rthornb_UrsulaBuild-27May1998:4.2
	Ursula_bp:4.2
	Ursula:4.2
	rthornb_UrsulaBuild-21May1998:4.1.7.1
	rthornb_UrsulaBuild_01May1998:4.1.7.1
	Ursula_31Mar1998:4.2
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.2.0.4
	Daytona_bp:4.2
	RO_3_71:4.1.3.1
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.17
date	2018.02.26.20.43.55;	author rsprowson;	state Exp;
branches;
next	4.16;
commitid	Dcj3YMcKdSLBxpsA;

4.16
date	2013.06.01.08.09.59;	author rsprowson;	state Exp;
branches;
next	4.15;
commitid	Vn0VjA4MVEQF0TRw;

4.15
date	2013.04.06.07.17.39;	author rsprowson;	state Exp;
branches;
next	4.14;
commitid	trGUc148W1xkwGKw;

4.14
date	2012.10.27.08.08.28;	author rsprowson;	state Exp;
branches;
next	4.13;
commitid	oVGqfoyIprHCYZpw;

4.13
date	2012.08.30.07.55.07;	author rsprowson;	state Exp;
branches;
next	4.12;
commitid	7Y3vkvUHSAvCLxiw;

4.12
date	2012.01.14.22.57.49;	author srevill;	state Exp;
branches;
next	4.11;
commitid	rmsSjlU9tKwG7cPv;

4.11
date	2008.09.25.15.09.13;	author srevill;	state Exp;
branches;
next	4.10;

4.10
date	2008.06.14.17.31.21;	author srevill;	state Exp;
branches;
next	4.9;

4.9
date	2007.10.19.14.32.02;	author srevill;	state Exp;
branches;
next	4.8;

4.8
date	2004.08.12.15.49.45;	author jballance;	state Exp;
branches;
next	4.7;

4.7
date	2003.11.12.19.20.29;	author bavison;	state Exp;
branches;
next	4.6;

4.6
date	2003.04.11.22.29.37;	author rsprowson;	state Exp;
branches;
next	4.5;

4.5
date	2003.04.03.10.21.56;	author srevill;	state Exp;
branches;
next	4.4;

4.4
date	2003.01.17.14.37.25;	author srevill;	state Exp;
branches;
next	4.3;

4.3
date	2002.11.26.10.39.24;	author rsprowson;	state Exp;
branches;
next	4.2;

4.2
date	97.05.13.14.48.35;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.47.27;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.47.27;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.02.56.16;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.23.13;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.27.19;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.17
log
@Write through the right system variable
Remove the misuse of PrinterChoices$Path for writing through
* It's stated in the sources it only ever has one directory on it, so might as well not be a path
* It's not in !Printers allocated namespace
* We can save some effort canonicalising it
Drop support for the define 'UseChoices'; always use them.
Global search and replace of PrinterChoices: for <Printers$ChoicesRW>. (cf. Boot$ChoicesRW).

Version 1.88. Tagged as 'Manager-1_88'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Printers {Printer Manager}
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name   Description
# ----       ----   -----------
# 16-Sep-94  AMcC   Merged PrintersF and PrintersB
# 20-Oct-94  AMcC   Corrected disc-based installation
#                   Corrected rmensures for remote printer modules
# 29-Oct-94  AMcC   Don't include !Printers.!Sprites in Resources (now in Wimp.Sprites)
#                   Do include Sprites22 for dp, lj, ps Resources
#                   Make sure that ${LDIR}.!RunLink gets made before copying Resources
# 08-Nov-94  MJS    Add Palettes.1 (as 0, but gamma is 0.4 instead of 0.6), used by
#                   Stylus-Col and Stylus-Cmw PDF's
# 03-Mar-95  MJS    Add Palettes.2 (very special palette for Stylus at 720 dpi)
# 25-Nov-02  RPS    Insert the version number in the Messages file at build time
# 12-May-04  JWB    Build using DummyParallel for tungsten usage
#

#
# Program specific options:
#
COMPONENT  = Printers
APP        = !Printers
ROM_MODULE = rm.Printers
DDIR       = DataFiles
LDIR       = ${LOCALE}
SDIR       = sources

#
# Export Paths for Messages module
#
RESDIR     = <resource$dir>.Resources.${COMPONENT}
RESAPP     = <resource$dir>.Apps.${APP}

include StdTools

#
# Specific (weird) tools:
#
CRUNCH     = bascrunch
PSSHRINK   = psshrink

#
# Tool flags:
#
ASFLAGS    = -Stamp -quit -depend !Depend ${THROWBACK}
DFLAGS    += -DSparrow
CFLAGS     = -c++ -j^ ${THROWBACK} ${DFLAGS}
CPFLAGS    = ~cfr~v
CRFLAGS    = %11111
SQFLAGS    =  -nolist

DPFILES = \
        ${DDIR}.dp.PrData \
        ${DDIR}.dp.Template \
        squished.SupportDP \
        ${DDIR}.dp.Resources.!Sprites \
        ${DDIR}.dp.Resources.!Sprites22 \
        ${DDIR}.dp.Resources.!Sprites11 \
        ${DDIR}.dp.Resources.Ursula.!Sprites \
        ${DDIR}.dp.Resources.Ursula.!Sprites22 \
        ${DDIR}.dp.Resources.Morris4.!Sprites \
        ${DDIR}.dp.Resources.Morris4.!Sprites22 \
        ${LDIR}.dp.Resources.Messages \
        ${DDIR}.dp.Resources.PaperRO \
        ${LDIR}.dp.Resources.Template3D \
        ${LDIR}.dp.Resources.Templates
#
LJFILES = \
        ${DDIR}.lj.PrData \
        ${DDIR}.lj.Template \
        squished.SupportLJ \
        ${DDIR}.lj.Resources.!Sprites \
        ${DDIR}.lj.Resources.!Sprites22 \
        ${DDIR}.lj.Resources.!Sprites11 \
        ${DDIR}.lj.Resources.Ursula.!Sprites \
        ${DDIR}.lj.Resources.Ursula.!Sprites22 \
        ${DDIR}.lj.Resources.Morris4.!Sprites \
        ${DDIR}.lj.Resources.Morris4.!Sprites22 \
        ${LDIR}.lj.Resources.Messages \
        ${DDIR}.lj.Resources.PaperRO \
        ${LDIR}.lj.Resources.Template3D \
        ${LDIR}.lj.Resources.Templates
#
PROLOGS = \
        prolog.OldLatin1 \
        prolog.PSepilog \
        prolog.PSprolog \
        prolog_z.Level1.PSprolog2 \
        prolog_z.Level2.PSprolog2 \
        prolog_z.PStprolog \
        prolog.Selwyn \
        prolog.Sidney

PSFILES = \
        ${DDIR}.ps.PrData \
        ${DDIR}.ps.Template \
        squished.SupportPS \
        ${DDIR}.ps.Resources.!Sprites \
        ${DDIR}.ps.Resources.!Sprites22 \
        ${DDIR}.ps.Resources.!Sprites11 \
        ${DDIR}.ps.Resources.Ursula.!Sprites \
        ${DDIR}.ps.Resources.Ursula.!Sprites22 \
        ${DDIR}.ps.Resources.Morris4.!Sprites \
        ${DDIR}.ps.Resources.Morris4.!Sprites22 \
        ${LDIR}.ps.Resources.Messages \
        ${DDIR}.ps.Resources.PaperRO \
        ${LDIR}.ps.Resources.Template3D \
        ${LDIR}.ps.Resources.Templates \
        ${DDIR}.ps.Adobe.Special \
        ${DDIR}.ps.Adobe.Standard \
        $(DDIR).ps.Paper.a0 \
        $(DDIR).ps.Paper.a1 \
        $(DDIR).ps.Paper.a2 \
        $(DDIR).ps.Paper.a3 \
        $(DDIR).ps.Paper.a4 \
        $(DDIR).ps.Paper.a5 \
        $(DDIR).ps.Paper.legal \
        $(DDIR).ps.Paper.letter \
        ${PROLOGS}

FILES = \
        ${DDIR}.!Boot \
        ${LDIR}.!Help \
        ${LDIR}.!Run \
        ${DDIR}.!Sprites \
        ${DDIR}.!Sprites22 \
        ${DDIR}.!Sprites11 \
        ${DDIR}.Ursula.!Sprites \
        ${DDIR}.Ursula.!Sprites22 \
        ${DDIR}.Morris4.!Sprites \
        ${DDIR}.Morris4.!Sprites22 \
        ${DDIR}.Code \
        ${DDIR}.Messages \
        ${DDIR}.Palettes.0 \
        ${DDIR}.Palettes.1 \
        ${DDIR}.Palettes.2 \
        ${DDIR}.Palettes.3 \
        ${DDIR}.Palettes.4 \
        ${DDIR}.Palettes.5 \
        ${DDIR}.Palettes.6 \
        ${DDIR}.Palettes.7 \
        ${DDIR}.Palettes.8 \
        ${DDIR}.Palettes.9 \
        ${DDIR}.Palettes.10 \
        ${DDIR}.Palettes.11 \
        ${DDIR}.Palettes.12 \
        ${DDIR}.Palettes.13 \
        ${DDIR}.Palettes.14 \
        ${DDIR}.Palettes.15 \
        ${DDIR}.Palettes.20 \
        ${LDIR}.PaperRO \
        ${LDIR}.Template3D \
        ${LDIR}.Templates \
        util.SetPrint \
        ${DPFILES} \
        ${LJFILES} \
        ${PSFILES}

DISC_FILES =\
        squished.RunImage \
        ${FILES}

# these are included in the ROM module
RESFILES =\
        squished.RunImageR \
        ${DDIR}.Code \
        ${DDIR}.Palettes.0 \
        ${DDIR}.Palettes.1 \
        ${DDIR}.Palettes.2 \
        ${DDIR}.Palettes.3 \
        ${DDIR}.Palettes.4 \
        ${DDIR}.Palettes.5 \
        ${DDIR}.Palettes.6 \
        ${DDIR}.Palettes.7 \
        ${DDIR}.Palettes.8 \
        ${DDIR}.Palettes.9 \
        ${DDIR}.Palettes.10 \
        ${DDIR}.Palettes.11 \
        ${DDIR}.Palettes.12 \
        ${DDIR}.Palettes.13 \
        ${DDIR}.Palettes.14 \
        ${DDIR}.Palettes.15 \
        ${DDIR}.Palettes.20 \
        util.SetPrint \
        sources.DummyDP \
        ${DDIR}.dp.PrData \
        ${DDIR}.dp.Template \
        ${DDIR}.dp.Resources.!Sprites \
        ${DDIR}.dp.Resources.!Sprites22 \
        ${DDIR}.dp.Resources.PaperRO \
        sources.DummyLJ \
        ${DDIR}.lj.PrData \
        ${DDIR}.lj.Template \
        ${DDIR}.lj.Resources.!Sprites \
        ${DDIR}.lj.Resources.!Sprites22 \
        ${DDIR}.lj.Resources.PaperRO \
        sources.DummyPS \
        ${DDIR}.ps.PrData \
        ${DDIR}.ps.Template \
        ${DDIR}.ps.Resources.!Sprites \
        ${DDIR}.ps.Resources.!Sprites22 \
        ${DDIR}.ps.Resources.PaperRO \
        ${DDIR}.ps.Adobe.Special \
        ${DDIR}.ps.Adobe.Standard \
        $(DDIR).ps.Paper.a0 \
        $(DDIR).ps.Paper.a1 \
        $(DDIR).ps.Paper.a2 \
        $(DDIR).ps.Paper.a3 \
        $(DDIR).ps.Paper.a4 \
        $(DDIR).ps.Paper.a5 \
        $(DDIR).ps.Paper.legal \
        $(DDIR).ps.Paper.letter \
        ${PROLOGS}

#
# Rule patterns
#
.SUFFIXES: .prolog .prolog_z

.prolog.prolog_z:;  ${PSSHRINK} -in $< -out $@@ -type FFF

#
# Generic rules:
#
all: ${DISC_FILES} local_dirs
        @@${ECHO} ${COMPONENT}: all built (Disc version)

rom:  ${ROM_MODULE} local_dirs
        @@${ECHO} ${COMPONENT}: all built (ROM version)

export: ${EXPORTS}
        @@${ECHO} ${COMPONENT}: export complete

install: ${DISC_FILES} dirs local_dirs
        Access ${INSTDIR} WR/r
        |
        Access ${INSTDIR}.dp WR/r
        Access ${INSTDIR}.lj WR/r
        Access ${INSTDIR}.ps WR/r
        Access ${INSTDIR}.dp.Resources WR/r
        Access ${INSTDIR}.lj.Resources WR/r
        Access ${INSTDIR}.ps.Resources WR/r
        Access ${INSTDIR}.ps.Adobe WR/r
        Access ${INSTDIR}.ps.Paper WR/r
        Access ${INSTDIR}.ps.Printers WR/r
        Access ${INSTDIR}.ps.PSFiles WR/r
        Access ${INSTDIR}.ps.PSFiles.Level1 WR/r
        Access ${INSTDIR}.ps.PSFiles.Level2 WR/r
        Access ${INSTDIR}.Remote WR/wr
        Access ${INSTDIR}.Palettes WR/r
        |
        set Alias$CPFD ${CP} %0 ${INSTDIR}.%1 ${CPFLAGS}
        set Alias$CPFDL CPFD %*0|MAccess ${INSTDIR}.%1 LR/r
        |
        CPFDL ${DDIR}.!Boot      !Boot
        CPFDL ${LDIR}.!Run       !Run
        CPFDL ${LDIR}.!Help      !Help
        CPFDL squished.RunImage  !RunImage
        CPFDL ${DDIR}.!Sprites   Themes.!Sprites
        CPFDL ${DDIR}.!Sprites22 Themes.!Sprites22
        CPFDL ${DDIR}.!Sprites11 Themes.!Sprites11
        CPFDL ${DDIR}.Ursula.!Sprites    Themes.Ursula.!Sprites
        CPFDL ${DDIR}.Ursula.!Sprites22  Themes.Ursula.!Sprites22
        CPFDL ${DDIR}.Morris4.!Sprites   Themes.Morris4.!Sprites
        CPFDL ${DDIR}.Morris4.!Sprites22 Themes.Morris4.!Sprites22
        CPFDL ${DDIR}.Code       Code
        CPFDL ${DDIR}.Messages   Messages
        CPFDL ${DDIR}.Palettes.0 Palettes.0
        CPFDL ${DDIR}.Palettes.1 Palettes.1
        CPFDL ${DDIR}.Palettes.2 Palettes.2
        CPFDL ${DDIR}.Palettes.3 Palettes.3
        CPFDL ${DDIR}.Palettes.4 Palettes.4
        CPFDL ${DDIR}.Palettes.5 Palettes.5
        CPFDL ${DDIR}.Palettes.6 Palettes.6
        CPFDL ${DDIR}.Palettes.7 Palettes.7
        CPFDL ${DDIR}.Palettes.8 Palettes.8
        CPFDL ${DDIR}.Palettes.9 Palettes.9
        CPFDL ${DDIR}.Palettes.10 Palettes.10
        CPFDL ${DDIR}.Palettes.11 Palettes.11
        CPFDL ${DDIR}.Palettes.12 Palettes.12
        CPFDL ${DDIR}.Palettes.13 Palettes.13
        CPFDL ${DDIR}.Palettes.14 Palettes.14
        CPFDL ${DDIR}.Palettes.20 Palettes.20
        CPFDL ${LDIR}.PaperRO    PaperRO
        CPFDL util.SetPrint      SetPrint
        CPFDL ${LDIR}.Templates  Templates
        CPFDL ${LDIR}.Template3D Template3D
        |
        CPFD  ${DDIR}.dp.PrData               dp.PrData
        CPFDL ${DDIR}.dp.Template             dp.Template
        CPFDL ${DDIR}.dp.Resources.!Sprites   dp.Resources.!Sprites
        CPFDL ${DDIR}.dp.Resources.!Sprites22 dp.Resources.!Sprites22
        CPFDL ${DDIR}.dp.Resources.!Sprites11 dp.Resources.!Sprites11
        CPFDL ${DDIR}.dp.Resources.Morris4.!Sprites   dp.Resources.Morris4.!Sprites
        CPFDL ${DDIR}.dp.Resources.Morris4.!Sprites22 dp.Resources.Morris4.!Sprites22
        CPFDL ${DDIR}.dp.Resources.Ursula.!Sprites    dp.Resources.Ursula.!Sprites
        CPFDL ${DDIR}.dp.Resources.Ursula.!Sprites22  dp.Resources.Ursula.!Sprites22
        CPFDL ${LDIR}.dp.Resources.Messages   dp.Resources.Messages
        CPFDL ${DDIR}.dp.Resources.PaperRO    dp.Resources.PaperRO
        CPFDL squished.SupportDP              dp.Resources.Support
        CPFDL ${LDIR}.dp.Resources.Templates  dp.Resources.Templates
        CPFDL ${LDIR}.dp.Resources.Template3D dp.Resources.Template3D
        |
        CPFD  ${DDIR}.lj.PrData               lj.PrData
        CPFDL ${DDIR}.lj.Template             lj.Template
        CPFDL ${DDIR}.lj.Resources.!Sprites   lj.Resources.!Sprites
        CPFDL ${DDIR}.lj.Resources.!Sprites22 lj.Resources.!Sprites22
        CPFDL ${DDIR}.lj.Resources.!Sprites11 lj.Resources.!Sprites11
        CPFDL ${DDIR}.lj.Resources.Morris4.!Sprites   lj.Resources.Morris4.!Sprites
        CPFDL ${DDIR}.lj.Resources.Morris4.!Sprites22 lj.Resources.Morris4.!Sprites22
        CPFDL ${DDIR}.lj.Resources.Ursula.!Sprites    lj.Resources.Ursula.!Sprites
        CPFDL ${DDIR}.lj.Resources.Ursula.!Sprites22  lj.Resources.Ursula.!Sprites22
        CPFDL ${LDIR}.lj.Resources.Messages   lj.Resources.Messages
        CPFDL ${DDIR}.lj.Resources.PaperRO    lj.Resources.PaperRO
        CPFDL squished.SupportLJ              lj.Resources.Support
        CPFDL ${LDIR}.lj.Resources.Templates  lj.Resources.Templates
        CPFDL ${LDIR}.lj.Resources.Template3D lj.Resources.Template3D
        |
        CPFD  ${DDIR}.ps.PrData               ps.PrData
        CPFDL ${DDIR}.ps.Template             ps.Template
        CPFDL ${DDIR}.ps.Resources.!Sprites   ps.Resources.!Sprites
        CPFDL ${DDIR}.ps.Resources.!Sprites22 ps.Resources.!Sprites22
        CPFDL ${DDIR}.ps.Resources.!Sprites11 ps.Resources.!Sprites11
        CPFDL ${DDIR}.ps.Resources.Morris4.!Sprites   ps.Resources.Morris4.!Sprites
        CPFDL ${DDIR}.ps.Resources.Morris4.!Sprites22 ps.Resources.Morris4.!Sprites22
        CPFDL ${DDIR}.ps.Resources.Ursula.!Sprites    ps.Resources.Ursula.!Sprites
        CPFDL ${DDIR}.ps.Resources.Ursula.!Sprites22  ps.Resources.Ursula.!Sprites22
        CPFDL ${LDIR}.ps.Resources.Messages   ps.Resources.Messages
        CPFDL ${DDIR}.ps.Resources.PaperRO    ps.Resources.PaperRO
        CPFDL squished.SupportPS              ps.Resources.Support
        CPFDL ${LDIR}.ps.Resources.Templates  ps.Resources.Templates
        CPFDL ${LDIR}.ps.Resources.Template3D ps.Resources.Template3D
        CPFDL ${DDIR}.ps.Adobe.Special        ps.Adobe.Special
        CPFDL ${DDIR}.ps.Adobe.Standard       ps.Adobe.Standard
        CPFDL ${DDIR}.ps.Paper.a0             ps.Paper.a0
        CPFDL ${DDIR}.ps.Paper.a1             ps.Paper.a1
        CPFDL ${DDIR}.ps.Paper.a2             ps.Paper.a2
        CPFDL ${DDIR}.ps.Paper.a3             ps.Paper.a3
        CPFDL ${DDIR}.ps.Paper.a4             ps.Paper.a4
        CPFDL ${DDIR}.ps.Paper.a5             ps.Paper.a5
        CPFDL ${DDIR}.ps.Paper.legal          ps.Paper.legal
        CPFDL ${DDIR}.ps.Paper.letter         ps.Paper.letter
        CPFDL prolog.OldLatin1                ps.PSFiles.OldLatin1
        CPFDL prolog.PSepilog                 ps.PSFiles.PSepilog
        CPFDL prolog.PSprolog                 ps.PSFiles.PSprolog
        CPFDL prolog_z.Level1.PSprolog2       ps.PSFiles.Level1.PSprolog2
        CPFDL prolog_z.Level2.PSprolog2       ps.PSFiles.Level2.PSprolog2
        CPFDL prolog_z.PStprolog              ps.PSFiles.PStprolog
        CPFDL prolog.Selwyn                   ps.PSFiles.Selwyn
        CPFDL prolog.Sidney                   ps.PSFiles.Sidney
        |
        Unset Alias$CPFD
        Unset Alias$CPFDL
        @@${ECHO} ${COMPONENT}: disc install done

install_rom: ${ROM_MODULE} local_dirs
        ${CP} ${ROM_MODULE} ${INSTDIR}.Printers ${CPFLAGS}
        @@${ECHO} ${COMPONENT}: rom module installed

resources: ${LDIR}.!RunLink
        ${MKDIR} ${RESAPP}
        ${MKDIR} ${RESDIR}.dp.Resources
        ${MKDIR} ${RESDIR}.lj.Resources
        ${MKDIR} ${RESDIR}.ps.Resources
        ${CP} ${DDIR}.ROM.!Boot               ${RESAPP}.!Boot     ${CPFLAGS}
        ${CP} ${LDIR}.!Help                   ${RESAPP}.!Help     ${CPFLAGS}
        ${CP} ${DDIR}.ROM.!Run                ${RESAPP}.!Run      ${CPFLAGS}
        ${CP} ${LDIR}.!RunLink                ${RESDIR}.!RunLink  ${CPFLAGS}
        ${CP} ${DDIR}.Messages                ${RESDIR}.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.PaperRO                 ${RESDIR}.PaperRO   ${CPFLAGS}
        ${CP} ${LDIR}.Template3D              ${RESDIR}.Templates ${CPFLAGS}
        ${CP} ${LDIR}.dp.Resources.Messages   ${RESDIR}.dp.Resources.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.lj.Resources.Messages   ${RESDIR}.lj.Resources.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.ps.Resources.Messages   ${RESDIR}.ps.Resources.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.dp.Resources.Template3D ${RESDIR}.dp.Resources.Templates ${CPFLAGS}
        ${CP} ${LDIR}.lj.Resources.Template3D ${RESDIR}.lj.Resources.Templates ${CPFLAGS}
        ${CP} ${LDIR}.ps.Resources.Template3D ${RESDIR}.ps.Resources.Templates ${CPFLAGS}
        @@${ECHO} ${COMPONENT}: resource files copied to Messages module

clean:
        ${RM} ${DDIR}.Code
        ${RM} ${DDIR}.Messages
        ${RM} ${LDIR}.!RunLink
        ${RM} ${ROM_MODULE}
        ${RM} rm.PrintersD
        ${RM} s.Version
        ${RM} util.SetPrint
        ${RM} h.ConstVals
        ${XWIPE} crunched ${WFLAGS}
        ${XWIPE} i ${WFLAGS}
        ${XWIPE} n ${WFLAGS}
        ${XWIPE} o ${WFLAGS}
        ${XWIPE} rm ${WFLAGS}
        ${XWIPE} squished ${WFLAGS}
        ${XWIPE} prolog_z.Level1.* ${WFLAGS}
        ${XWIPE} prolog_z.Level2.* ${WFLAGS}
        @@${ECHO} ${COMPONENT}: cleaned

local_dirs:
        ${MKDIR} crunched
        ${MKDIR} i
        ${MKDIR} n
        ${MKDIR} o
        ${MKDIR} rm
        ${MKDIR} squished

dirs:
        ${MKDIR} ${INSTDIR}.dp.Resources
        ${MKDIR} ${INSTDIR}.dp.Resources.Ursula
        ${MKDIR} ${INSTDIR}.dp.Resources.Morris4
        ${MKDIR} ${INSTDIR}.lj.Resources
        ${MKDIR} ${INSTDIR}.lj.Resources.Ursula
        ${MKDIR} ${INSTDIR}.lj.Resources.Morris4
        ${MKDIR} ${INSTDIR}.ps.Adobe
        ${MKDIR} ${INSTDIR}.ps.Paper
        ${MKDIR} ${INSTDIR}.ps.Feeds
        ${MKDIR} ${INSTDIR}.ps.Printers
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level1
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level2
        ${MKDIR} ${INSTDIR}.ps.Resources
        ${MKDIR} ${INSTDIR}.ps.Resources.Ursula
        ${MKDIR} ${INSTDIR}.ps.Resources.Morris4
        ${MKDIR} ${INSTDIR}.Palettes
        ${MKDIR} ${INSTDIR}.Remote
        ${MKDIR} ${INSTDIR}.Modules
        ${MKDIR} ${INSTDIR}.Themes.Ursula
        ${MKDIR} ${INSTDIR}.Themes.Morris4

${ROM_MODULE}: s.Main s.Version ${RESFILES}
        ${MKDIR} o
        ${AS} ${ASFLAGS} -o o.Printers s.Main
        ${LD} -rmf -o $@@ o.Printers

${DDIR}.Messages: ${LDIR}.Messages awk.Version
        ${AWK} -f awk.Version ${LDIR}.Messages > $@@

s.Version: ${DDIR}.Messages
        ${AWK} -f awk.VersionS ${DDIR}.Messages > $@@

rm.PrintersD: s.MainD
        ${MKDIR} o
        ${AS} ${ASFLAGS} -o o.PrintersD s.MainD
        ${LD} -rmf -o $@@ o.PrintersD
        @@${ECHO} ${COMPONENT}: debugging module built

${LDIR}.!RunLink: sources.!RunLink
        ${SQUISH} ${SQFLAGS} -from sources.!RunLink -to $@@

util.SetPrint: s.SetPrint
        ${MKDIR} o
        ${AS} ${ASFLAGS} -o o.SetPrint s.SetPrint
        ${LD} -bin -o $@@ o.SetPrint
        ${SETTYPE} $@@ FFC

prolog_z.Level1.PSprolog2: prolog.PSprolog2 \
    ; ${PSSHRINK} -in prolog.PSprolog2 -out $@@ -type FFF -level 1

prolog_z.Level2.PSprolog2: prolog.PSprolog2 \
    ; ${PSSHRINK} -in prolog.PSprolog2 -out $@@ -type FFF -level 2

#----------------------------------------------------------------------------
# Printer Manager (front-end): !Printers.!RunImage - DISC
#----------------------------------------------------------------------------

squished.RunImage: crunched.RunImage  ${SDIR}.Export
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -from crunched.RunImage -to $@@

crunched.RunImage: n.RunImage
        ${RUN}crunch.RunImage; BASIC

n.RunImage: i.RunImage
        ${NUMBER} i.RunImage $@@

i.RunImage: ${SDIR}.RunImage ${SDIR}.Sparrow h.Values
        ${CC} -DDISC ${CFLAGS} -E ${SDIR}.RunImage > $@@

#----------------------------------------------------------------------------
# Printer Manager (front-end): !Printers.!RunImage - ROM
#----------------------------------------------------------------------------

squished.RunImageR: crunched.RunImageR  ${SDIR}.Export
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -from crunched.RunImageR -to $@@

crunched.RunImageR: n.RunImageR
        ${RUN}crunch.RunImageR; BASIC

n.RunImageR: i.RunImageR
        ${NUMBER} i.RunImageR $@@

i.RunImageR: ${SDIR}.RunImage ${SDIR}.Sparrow h.Values
        ${CC} -UDISC ${CFLAGS} -E ${SDIR}.RunImage > $@@

#----------------------------------------------------------------------------
# Note: output filename "DataFiles.Code" is coded into SuppSrc
DataFiles.Code: i.SuppSrc
        ${RUN}BASIC -quit i.SuppSrc        

i.SuppSrc: ${SDIR}.SuppSrc  h.Values
        ${RUN}util.MkConstVal h.Values h.ConstVals
        ${RUN}util.Constants  ${SDIR}.SuppSrc $@@ h.ConstVals

#----------------------------------------------------------------------------
# Dot-matrix support: !Printers.dp.Resources.Support
#----------------------------------------------------------------------------

squished.SupportDP: crunched.SupportDP  ${SDIR}.Export
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -prefix dp_ -from crunched.SupportDP -to $@@

crunched.SupportDP: n.SupportDP
        ${RUN}crunch.SupportDP; BASIC

n.SupportDP: i.SupportDP
        ${NUMBER} i.SupportDP $@@

i.SupportDP: ${SDIR}.SupportDP  h.Values
        ${CC} ${CFLAGS} -E ${SDIR}.SupportDP > $@@

#----------------------------------------------------------------------------
# LaserJet support: !Printers.lj.Resources.Support
#----------------------------------------------------------------------------

squished.SupportLJ: crunched.SupportLJ  ${SDIR}.Export
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -prefix lj_ -from crunched.SupportLJ -to $@@

crunched.SupportLJ: n.SupportLJ
        ${RUN}crunch.SupportLJ; BASIC

n.SupportLJ: i.SupportLJ
        ${NUMBER} i.SupportLJ $@@

i.SupportLJ: ${SDIR}.SupportLJ h.values
        ${CC} ${CFLAGS} -E ${SDIR}.SupportLJ > $@@

#----------------------------------------------------------------------------
# PostScript support: !Printers.ps.Resources.Support
#----------------------------------------------------------------------------

squished.SupportPS: crunched.SupportPS  ${SDIR}.Export
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -prefix ps_ -from crunched.SupportPS -to $@@

crunched.SupportPS: n.SupportPS
        ${RUN}crunch.SupportPS; BASIC

n.SupportPS: i.SupportPS
        ${NUMBER} i.SupportPS $@@

i.SupportPS: ${SDIR}.SupportPS h.values
        ${CC} ${CFLAGS} -E ${SDIR}.SupportPS > $@@

#----------------------------------------------------------------------------
# Dynamic dependencies:
@


4.16
log
@Import of Ursula and Morris4 themed sprites
Moved default application sprites from UK into DataFiles as they're not UK territory specific.
Added Morris4 sprites from RISC OS 3.70 ROM.
Added Ursula dp/lj/ps sprites designed by Chris Wraight.

Version 1.81. Tagged as 'Manager-1_81'
@
text
@d492 1
a492 1
        ${CC} -DDISC -DUseChoices ${CFLAGS} -E ${SDIR}.RunImage > $@@
d508 1
a508 1
        ${CC} ${CFLAGS} -E ${SDIR}.RunImage > $@@
@


4.15
log
@Remove RMLOADing from makefile and remote printer messages module
Squish 1.15: It's no longer necessary to have all the modules loaded since the SWI names are checked in <swis.h>
RemPrnSpt 1.12: Now carries its own messages so doesn't need the messages module sidekick

Version 1.79. Tagged as 'Manager-1_79'
@
text
@d76 4
d92 4
d118 4
d142 7
a148 3
        ${LDIR}.!Sprites \
        ${LDIR}.!Sprites22 \
        ${LDIR}.!Sprites11 \
d276 7
a282 3
        CPFDL ${LDIR}.!Sprites   !Sprites
        CPFDL ${LDIR}.!Sprites22 !Sprites22
        CPFDL ${LDIR}.!Sprites11 !Sprites11
d311 4
d326 4
d341 4
d411 1
a413 1
        ${XWIPE} squished ${WFLAGS}
d426 2
d429 2
d438 2
d443 2
@


4.14
log
@Makefile adjustments
Use things from StdTools where possible.
Briefly checked 'install' and 'rom' targets, still seem to work.

Version 1.78. Tagged as 'Manager-1_78'
@
text
@a68 12
#
# Modules (should be loaded when various BASIC sources are Squished)
#
FREEWAY    = <Build$Dir>.Modules.Freeway
DUMMYECONET= <Build$Dir>.Modules.Testing.DummyEconet
DUMMYPARALLEL= <Build$Dir>.Modules.Testing.DummyParallel
NETPRINT   = <Build$Dir>.Modules.NetPrint
PDRIVER    = <Build$Dir>.Modules.PDriver
MAKEPSFONT = <Build$Dir>.Modules.MakePSFont
REMPRNMSGS = <Build$Dir>.Modules.RemPrnMsgs
REMPRNSPT  = <Build$Dir>.Modules.RemPrnSpt

a442 8
        rmensure freeway    rmload ${FREEWAY}
        @@|rmensure econet     rmload ${DUMMYECONET}
        @@|rmensure parallel   rmload ${DUMMYPARALLEL}
        @@|rmensure netprint   rmload ${NETPRINT}
        @@${ECHO} WARNING: the best way to ensure the following modules are loaded is to run !Printers before doing this build
        rmensure pdriver               rmload ${PDRIVER}
        rmensure remoteprintermessages rmload ${REMPRNMSGS}
        rmensure remoteprintersupport  rmload ${REMPRNSPT}
a458 6
        rmensure freeway               rmload ${FREEWAY}
        rmensure makepsfont            rmload ${MAKEPSFONT}
        rmensure netprint              rmload ${NETPRINT}
        rmensure pdriver               rmload ${PDRIVER}
        rmensure remoteprintermessages rmload ${REMPRNMSGS}
        rmensure remoteprintersupport  rmload ${REMPRNSPT}
a483 1
        rmensure pdriver rmload ${PDRIVER}
a499 1
        rmensure pdriver rmload ${PDRIVER}
a515 2
        rmensure pdriver rmload ${PDRIVER}
        rmensure makepsfont rmload ${MAKEPSFONT}
@


4.13
log
@Import of missing Sprites11 file
Also removed T's&C's from !Boot/!Run copied to output application.

Version 1.77. Tagged as 'Manager-1_77'
@
text
@d51 2
d54 1
a54 1
# Tools:
a55 5
MKDIR      = do mkdir -p
AS         = objasm
LD         = link
CC         = cc
CP         = copy
a56 1
NUMBER     = util.Number
a57 3
RM         = remove
SQUISH     = squish
WIPE       = x wipe
a67 1
WFLAGS     = ~c~v
d239 1
a239 1
        @@echo ${COMPONENT}: all built (Disc version)
d242 1
a242 1
        @@echo ${COMPONENT}: all built (ROM version)
d245 1
a245 1
        @@echo ${COMPONENT}: export complete
d351 1
a351 1
        @@echo ${COMPONENT}: disc install done
d355 1
a355 1
        @@echo ${COMPONENT}: rom module installed
d375 1
a375 1
        @@echo ${COMPONENT}: resource files copied to Messages module
d386 9
a394 9
        ${WIPE} crunched ${WFLAGS}
        ${WIPE} i ${WFLAGS}
        ${WIPE} n ${WFLAGS}
        ${WIPE} o ${WFLAGS}
        ${WIPE} rm ${WFLAGS}
        ${WIPE} prolog_z.Level1.* ${WFLAGS}
        ${WIPE} prolog_z.Level2.* ${WFLAGS}
        ${WIPE} squished ${WFLAGS}
        @@echo ${COMPONENT}: cleaned
d424 1
a424 1
        gnu.gawk -f awk.Version ${LDIR}.Messages > $@@
d427 1
a427 1
        awk -f awk.VersionS ${DDIR}.Messages > $@@
d433 1
a433 1
        @@echo ${COMPONENT}: debugging module built
d442 1
a442 1
        settype $@@ FFC
d459 1
a459 1
        @@echo WARNING: the best way to ensure the following modules are loaded is to run !Printers before doing this build
d466 1
a466 1
        crunch.RunImage; BASIC
d488 1
a488 1
        crunch.RunImageR; BASIC
d499 1
a499 1
        BASIC -quit i.SuppSrc        
d502 2
a503 2
        util.MkConstVal h.Values h.ConstVals
        util.Constants  ${SDIR}.SuppSrc $@@ h.ConstVals
d514 1
a514 1
        crunch.SupportDP; BASIC
d531 1
a531 1
        crunch.SupportLJ; BASIC
d549 1
a549 1
        crunch.SupportPS; BASIC
@


4.12
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 1.76. Tagged as 'Manager-1_76'
@
text
@d32 1
a32 1
# 12-May-04  JWB    build using DummyParallel for tungsten usage
d95 1
d107 1
d129 1
d152 1
d282 1
d310 1
d321 1
d332 1
@


4.11
log
@No code change, just up-versioned because other components within
!Printers have been updated and we want a new version number.

Version 1.75. Tagged as 'Manager-1_75'
@
text
@d64 1
a64 1
WIPE       = -wipe
@


4.10
log
@Makefile tweaks. Also up-versioned so that the new PCL PDumper module
has a new revision of !Printers to be introduced in.

Version 1.74. Tagged as 'Manager-1_74'
@
text
@d460 1
a460 1
        rmensure pdriver    rmload ${PDRIVER}
@


4.9
log
@Fixed so that it builds and installs. No runtime checking.

Version 1.73. Tagged as 'Manager-1_73'
@
text
@d459 1
@


4.8
log
@  updated to build on Iyonix.
  Updated to use both interface and alternate when opening a USB printer
  Includes proper check for space when outputting to USB
Detail:

Admin:
  Tested at Castle


Version 1.70. Tagged as 'Manager-1_70'
@
text
@d456 3
a458 3
        rmensure econet     rmload ${DUMMYECONET}
        rmensure parallel   rmload ${DUMMYPARALLEL}
        rmensure netprint   rmload ${NETPRINT}
@


4.7
log
@Changed to use gawk instead of awk.

Version 1.68. Not tagged
@
text
@d32 1
d82 1
d424 1
a424 1
        GNU.gawk -f awk.Version ${LDIR}.Messages > $@@
d427 1
a427 1
        GNU.gawk -f awk.VersionS ${DDIR}.Messages > $@@
d457 1
@


4.6
log
@Fix to FNsupported_baudrates to avoid "Bad DIM" when no serialdevdriver
is present.
Fix usb_device_removed to start looking at the list from 0.
Make shared USB printers remember their shared settings.
Change in SuppSrc to avoid oflaofla in the queue display with two digit
connection types (eg.CN13 for USB).
Template changes to connection window.
Added "duplicate" entry to control menu.
Added "install new printer" to iconbar menu (opens PrintDefs:)
Rename control menu to have title "Control"
Added laserjet 5 and 6 paper definitions to the built in sizes so it
doesn't default to size A2.
Fix to store_string so it only asks for the right amount of store.
Change to Makefile to rmensure some modules so SWI names get squished.
Removed a whole load of unused variables.
Plugging in an unknown USB printer prompts the user to tell us which
it really is.
Now appends "#alternateN" to the devicefs filename for USB.
Fix to loading of old style PDF files (borken ungstrans in suppsrc).

Version 1.67. Tagged as 'Manager-1_67'
@
text
@d422 1
a422 1
        gnu.gawk -f awk.Version ${LDIR}.Messages > $@@
d425 1
a425 1
        awk -f awk.VersionS ${DDIR}.Messages > $@@
@


4.5
log
@Addition of USB "plug-and-play" support.This version is a little ropey and
is here for reference rather than use.
Fix to SupportPS to silently ignore the absence of a "Feeds" directory
and simply have a default menu entry instead (OSGBPB -> XOSGBPB).

Version 1.66. Tagged as 'Manager-1_66'
@
text
@d360 7
a366 7
        ${CP} ${DDIR}.ROM.!Boot  ${RESAPP}.!Boot     ${CPFLAGS}
        ${CP} ${LDIR}.!Help      ${RESAPP}.!Help     ${CPFLAGS}
        ${CP} ${DDIR}.ROM.!Run   ${RESAPP}.!Run      ${CPFLAGS}
        ${CP} ${LDIR}.!RunLink   ${RESDIR}.!RunLink  ${CPFLAGS}
        ${CP} ${DDIR}.Messages   ${RESDIR}.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.PaperRO    ${RESDIR}.PaperRO   ${CPFLAGS}
        ${CP} ${LDIR}.Template3D ${RESDIR}.Templates ${CPFLAGS}
d384 3
a388 4
        ${WIPE} n.* ${WFLAGS}
        ${WIPE} i.* ${WFLAGS}
        ${WIPE} squished.* ${WFLAGS}
        ${WIPE} crunched.* ${WFLAGS}
d391 1
d407 1
d455 1
a455 1
        | rmensure netprint   rmload ${NETPRINT}
d475 4
a478 4
        rmensure freeway    rmload ${FREEWAY}
        rmensure makepsfont rmload ${MAKEPSFONT}
        rmensure netprint   rmload ${NETPRINT}
        rmensure pdriver    rmload ${PDRIVER}
@


4.4
log
@Dustbinned all the !Sprites23 files.
Addition of long dump string support (requires appropriate modules too).
Serial baud rates now detected at run time with OS_SerialOp rather than
plucking them out of a messages file.
Debug build made to work (use !MkDebug) outputs much debugging to a RAM
disc.
Adobe PDF support removed (the sources remain) as this is RISC OS Ltd code.
Test PDF files added to the Test directory.

Version 1.65. Tagged as 'Manager-1_65'
@
text
@a383 3
        ${WIPE} crunched ${WFLAGS}
        ${WIPE} i ${WFLAGS}
        ${WIPE} n ${WFLAGS}
d386 4
a391 1
        ${WIPE} squished ${WFLAGS}
@


4.3
log
@Addition of VersionNum file
@
text
@d59 1
a59 1
NUMBER     = number
d69 1
a69 2
DFLAGS     = -DSparrow
#DFLAGS     = -DSparrow -DTrace
a92 1
        ${DDIR}.dp.Resources.!Sprites23 \
a103 1
        ${DDIR}.lj.Resources.!Sprites23 \
a124 1
        ${DDIR}.ps.Resources.!Sprites23 \
a140 12
PDFFILES = \
        ${DDIR}.pdf.PrData \
        ${DDIR}.pdf.Template \
        squished.SupportPDF \
        ${DDIR}.pdf.Resources.!Sprites \
        ${DDIR}.pdf.Resources.!Sprites22 \
        ${DDIR}.pdf.Resources.!Sprites23 \
        ${LDIR}.pdf.Resources.Messages \
        ${DDIR}.pdf.Resources.PaperRO \
        ${LDIR}.pdf.Resources.Template3D \
        ${LDIR}.pdf.Resources.Templates

a146 1
        ${LDIR}.!Sprites23 \
d172 1
a172 5
        ${PSFILES} \
        ${PDFFILES}

#        ${DDIR}.Modules.310.Parallel \
#        ${DDIR}.Modules.350.Parallel \
d240 1
a240 1
all: ${DISC_FILES}
d243 1
a243 1
rom:  ${ROM_MODULE}
d249 1
a249 1
install: ${DISC_FILES} dirs
a270 1
        CPFDL ${DDIR}.!Boot      !Boot
a275 1
        CPFDL ${LDIR}.!Sprites23 !Sprites23
a302 1
        CPFDL ${DDIR}.dp.Resources.!Sprites23 dp.Resources.!Sprites23
a312 1
        CPFDL ${DDIR}.lj.Resources.!Sprites23 lj.Resources.!Sprites23
a322 1
        CPFDL ${DDIR}.ps.Resources.!Sprites23 ps.Resources.!Sprites23
a346 19
        CPFD  ${DDIR}.pdf.PrData               pdf.PrData
        CPFDL ${DDIR}.pdf.Template             pdf.Template
        CPFDL ${DDIR}.pdf.Resources.!Sprites   pdf.Resources.!Sprites
        CPFDL ${DDIR}.pdf.Resources.!Sprites22 pdf.Resources.!Sprites22
        CPFDL ${DDIR}.pdf.Resources.!Sprites23 pdf.Resources.!Sprites23
        CPFDL ${LDIR}.pdf.Resources.Messages   pdf.Resources.Messages
        CPFDL ${DDIR}.pdf.Resources.PaperRO    pdf.Resources.PaperRO
        CPFDL squished.SupportPDF              pdf.Resources.Support
        CPFDL ${LDIR}.pdf.Resources.Templates  pdf.Resources.Templates
        CPFDL ${LDIR}.pdf.Resources.Template3D pdf.Resources.Template3D
        CPFDL ${DDIR}.pdf.Paper.a0             pdf.Paper.a0
        CPFDL ${DDIR}.pdf.Paper.a1             pdf.Paper.a1
        CPFDL ${DDIR}.pdf.Paper.a2             pdf.Paper.a2
        CPFDL ${DDIR}.pdf.Paper.a3             pdf.Paper.a3
        CPFDL ${DDIR}.pdf.Paper.a4             pdf.Paper.a4
        CPFDL ${DDIR}.pdf.Paper.a5             pdf.Paper.a5
        CPFDL ${DDIR}.pdf.Paper.legal          pdf.Paper.legal
        CPFDL ${DDIR}.pdf.Paper.letter         pdf.Paper.letter
        |
d351 1
a351 1
install_rom: ${ROM_MODULE}
d383 6
a388 4
        ${WIPE} crunched.* ${WFLAGS}
        ${WIPE} i.* ${WFLAGS}
        ${WIPE} n.* ${WFLAGS}
        ${WIPE} o.* ${WFLAGS}
d391 1
a391 1
        ${WIPE} squished.* ${WFLAGS}
d394 8
a404 2
        ${MKDIR} ${INSTDIR}.pdf.Paper
        ${MKDIR} ${INSTDIR}.pdf.Resources
d454 1
a454 1
        |rmensure netprint  rmload ${NETPRINT}
d464 1
a464 1
        ${NUMBER} i.RunImage > $@@
d486 1
a486 1
        ${NUMBER} i.RunImageR > $@@
d496 3
a498 2
i.SuppSrc: ${SDIR}.SuppSrc  h.ConstVals
        util.Constants ${SDIR}.SuppSrc $@@ h.ConstVals
d512 1
a512 1
        ${NUMBER} i.SupportDP > $@@
d529 1
a529 1
        ${NUMBER} i.SupportLJ > $@@
d547 1
a547 1
        ${NUMBER} i.SupportPS > $@@
a550 18

#----------------------------------------------------------------------------
# Adobe Acrobat support: !Printers.pdf.Resources.Support
#----------------------------------------------------------------------------

squished.SupportPDF: crunched.SupportPDF  ${SDIR}.Export
        rmensure pdriver rmload ${PDRIVER}
        rmensure makepsfont rmload ${MAKEPSFONT}
        ${SQUISH} ${SQFLAGS} -keep ${SDIR}.Export -prefix pdf_ -from crunched.SupportPDF -to $@@

crunched.SupportPDF: n.SupportPDF
        crunch.SupportPDF; BASIC

n.SupportPDF: i.SupportPDF
        ${NUMBER} i.SupportPDF > $@@

i.SupportPDF: ${SDIR}.SupportPDF h.values
        ${CC} ${CFLAGS} -E ${SDIR}.SupportPDF > $@@
@


4.2
log
@Version RO_3_71 taken
@
text
@d31 1
d47 2
a48 2
RESDIR = <resource$dir>.Resources.${COMPONENT}
RESAPP = <resource$dir>.Apps.${APP}
d53 11
a63 10
MKDIR     = cdir
AS        = aasm
CC        = cc410
CP        = copy
CRUNCH    = bascrunch
NUMBER    = number
PSSHRINK  = psshrink
RM        = remove
SQUISH    = squish
WIPE      = -wipe
d68 8
a75 7
ASFLAGS = -depend !Depend -Stamp -quit -module
DFLAGS  = -DSparrow
CFLAGS  = ${THROWBACK} ${DFLAGS}
CPFLAGS = ~cfr~v
CRFLAGS = %11111
SQFLAGS =  -nolist
WFLAGS  = ~c~v
d78 1
a78 1
# Modules (need to be loaded when various BASIC sources are Squished)
d81 1
d145 12
d165 1
a165 1
        ${LDIR}.Messages \
d181 1
d189 5
a193 1
        ${PSFILES}
d218 1
d270 1
a270 1
install: ${DISC_FILES}
a271 14
        ${MKDIR} ${INSTDIR}.dp
        ${MKDIR} ${INSTDIR}.lj
        ${MKDIR} ${INSTDIR}.ps
        ${MKDIR} ${INSTDIR}.dp.Resources
        ${MKDIR} ${INSTDIR}.lj.Resources
        ${MKDIR} ${INSTDIR}.ps.Resources
        ${MKDIR} ${INSTDIR}.ps.Adobe
        ${MKDIR} ${INSTDIR}.ps.Paper
        ${MKDIR} ${INSTDIR}.ps.Printers
        ${MKDIR} ${INSTDIR}.ps.PSFiles
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level1
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level2
        ${MKDIR} ${INSTDIR}.Remote
        ${MKDIR} ${INSTDIR}.Palettes
d292 1
d300 1
a300 1
        CPFDL ${LDIR}.Messages   Messages
d373 19
a401 4
        ${MKDIR} ${RESDIR}
        ${MKDIR} ${RESDIR}.dp
        ${MKDIR} ${RESDIR}.lj
        ${MKDIR} ${RESDIR}.ps
d409 1
a409 1
        ${CP} ${LDIR}.Messages   ${RESDIR}.Messages  ${CPFLAGS}
d421 8
d431 1
a431 3
        ${WIPE} crunched.* ${WFLAGS}
        ${WIPE} squished.* ${WFLAGS}
        ${WIPE} prolog_z.* ${WFLAGS}
d434 1
a434 6
        ${RM} ${ROM_MODULE}
        ${RM} rm.PrintersD
        ${RM} s.Version
        ${RM} ${DDIR}.Code
        ${RM} ${LDIR}.!RunLink
        ${RM} util.SetPrint
d437 15
d453 3
a455 1
        ${AS} ${ASFLAGS} -from s.Main -to $@@
d457 5
a461 2
s.Version: ${LDIR}.Messages
        awk -f awk.Version ${LDIR}.Messages > $@@
d464 3
a466 1
        ${AS} ${ASFLAGS} -from s.MainD -to $@@
d473 3
a475 1
        ${AS} ${ASFLAGS} -from s.SetPrint -to $@@
d490 2
a491 1
        rmensure netprint   rmload ${NETPRINT}
d504 1
a504 1
        ${CC} -DDISC ${CFLAGS} -E ${SDIR}.RunImage > $@@
d534 1
a534 1
        Constants ${SDIR}.SuppSrc $@@ h.ConstVals
d589 18
a607 25
rm.Printers: s.AppName
rm.Printers: Hdr:ListOpts
rm.Printers: Hdr:Macros
rm.Printers: Hdr:System
rm.Printers: Hdr:SWIs
rm.Printers: Hdr:CPU.Generic26
rm.Printers: Hdr:IO.GenericIO
rm.Printers: Hdr:RISCOS
rm.Printers: Hdr:ModHand
rm.Printers: Hdr:Services
rm.Printers: Hdr:Proc
rm.Printers: Hdr:ResourceFS
rm.Printers: s.Version
rm.Printers: s.ResFiles
util.SetPrint: Hdr:ListOpts
util.SetPrint: Hdr:Macros
util.SetPrint: Hdr:System
util.SetPrint: Hdr:SWIs
util.SetPrint: Hdr:CPU.Generic26
util.SetPrint: Hdr:IO.GenericIO
util.SetPrint: Hdr:RISCOS
util.SetPrint: Hdr:ModHand
util.SetPrint: Hdr:Services
util.SetPrint: Hdr:Proc
util.SetPrint: Hdr:Variables
@


4.1
log
@Initial revision
@
text
@d112 2
a113 1
        prolog_z.PSprolog2 \
d131 8
d153 13
d185 13
d219 8
d257 1
d260 2
d272 1
d275 2
d295 13
d347 8
d358 2
a359 1
        CPFDL prolog_z.PSprolog2              ps.PSFiles.PSprolog2
d402 2
d429 6
a539 11
util.SetPrint: Hdr:ListOpts
util.SetPrint: Hdr:Macros
util.SetPrint: Hdr:System
util.SetPrint: Hdr:SWIs
util.SetPrint: Hdr:CPU.Generic26
util.SetPrint: Hdr:IO.GenericIO
util.SetPrint: Hdr:RISCOS
util.SetPrint: Hdr:ModHand
util.SetPrint: Hdr:Services
util.SetPrint: Hdr:Proc
util.SetPrint: Hdr:Variables
d554 11
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@d112 1
a112 2
        prolog_z.Level1.PSprolog2 \
        prolog_z.Level2.PSprolog2 \
a129 8
        $(DDIR).ps.Paper.a0 \
        $(DDIR).ps.Paper.a1 \
        $(DDIR).ps.Paper.a2 \
        $(DDIR).ps.Paper.a3 \
        $(DDIR).ps.Paper.a4 \
        $(DDIR).ps.Paper.a5 \
        $(DDIR).ps.Paper.legal \
        $(DDIR).ps.Paper.letter \
a143 13
        ${DDIR}.Palettes.3 \
        ${DDIR}.Palettes.4 \
        ${DDIR}.Palettes.5 \
        ${DDIR}.Palettes.6 \
        ${DDIR}.Palettes.7 \
        ${DDIR}.Palettes.8 \
        ${DDIR}.Palettes.9 \
        ${DDIR}.Palettes.10 \
        ${DDIR}.Palettes.11 \
        ${DDIR}.Palettes.12 \
        ${DDIR}.Palettes.13 \
        ${DDIR}.Palettes.14 \
        ${DDIR}.Palettes.20 \
a162 13
        ${DDIR}.Palettes.3 \
        ${DDIR}.Palettes.4 \
        ${DDIR}.Palettes.5 \
        ${DDIR}.Palettes.6 \
        ${DDIR}.Palettes.7 \
        ${DDIR}.Palettes.8 \
        ${DDIR}.Palettes.9 \
        ${DDIR}.Palettes.10 \
        ${DDIR}.Palettes.11 \
        ${DDIR}.Palettes.12 \
        ${DDIR}.Palettes.13 \
        ${DDIR}.Palettes.14 \
        ${DDIR}.Palettes.20 \
a183 8
        $(DDIR).ps.Paper.a0 \
        $(DDIR).ps.Paper.a1 \
        $(DDIR).ps.Paper.a2 \
        $(DDIR).ps.Paper.a3 \
        $(DDIR).ps.Paper.a4 \
        $(DDIR).ps.Paper.a5 \
        $(DDIR).ps.Paper.legal \
        $(DDIR).ps.Paper.letter \
a213 1
        ${MKDIR} ${INSTDIR}.ps.Paper
a215 2
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level1
        ${MKDIR} ${INSTDIR}.ps.PSFiles.Level2
a225 1
        Access ${INSTDIR}.ps.Paper WR/r
a227 2
        Access ${INSTDIR}.ps.PSFiles.Level1 WR/r
        Access ${INSTDIR}.ps.PSFiles.Level2 WR/r
a245 13
        CPFDL ${DDIR}.Palettes.3 Palettes.3
        CPFDL ${DDIR}.Palettes.4 Palettes.4
        CPFDL ${DDIR}.Palettes.5 Palettes.5
        CPFDL ${DDIR}.Palettes.6 Palettes.6
        CPFDL ${DDIR}.Palettes.7 Palettes.7
        CPFDL ${DDIR}.Palettes.8 Palettes.8
        CPFDL ${DDIR}.Palettes.9 Palettes.9
        CPFDL ${DDIR}.Palettes.10 Palettes.10
        CPFDL ${DDIR}.Palettes.11 Palettes.11
        CPFDL ${DDIR}.Palettes.12 Palettes.12
        CPFDL ${DDIR}.Palettes.13 Palettes.13
        CPFDL ${DDIR}.Palettes.14 Palettes.14
        CPFDL ${DDIR}.Palettes.20 Palettes.20
a284 8
        CPFDL ${DDIR}.ps.Paper.a0             ps.Paper.a0
        CPFDL ${DDIR}.ps.Paper.a1             ps.Paper.a1
        CPFDL ${DDIR}.ps.Paper.a2             ps.Paper.a2
        CPFDL ${DDIR}.ps.Paper.a3             ps.Paper.a3
        CPFDL ${DDIR}.ps.Paper.a4             ps.Paper.a4
        CPFDL ${DDIR}.ps.Paper.a5             ps.Paper.a5
        CPFDL ${DDIR}.ps.Paper.legal          ps.Paper.legal
        CPFDL ${DDIR}.ps.Paper.letter         ps.Paper.letter
d288 1
a288 2
        CPFDL prolog_z.Level1.PSprolog2       ps.PSFiles.Level1.PSprolog2
        CPFDL prolog_z.Level2.PSprolog2       ps.PSFiles.Level2.PSprolog2
a330 2
        ${WIPE} prolog_z.Level1.* ${WFLAGS}
        ${WIPE} prolog_z.Level2.* ${WFLAGS}
a355 6
prolog_z.Level1.PSprolog2: prolog.PSprolog2 \
    ; ${PSSHRINK} -in prolog.PSprolog2 -out $@@ -type FFF -level 1

prolog_z.Level2.PSprolog2: prolog.PSprolog2 \
    ; ${PSSHRINK} -in prolog.PSprolog2 -out $@@ -type FFF -level 2

d461 11
a485 11
util.SetPrint: Hdr:ListOpts
util.SetPrint: Hdr:Macros
util.SetPrint: Hdr:System
util.SetPrint: Hdr:SWIs
util.SetPrint: Hdr:CPU.Generic26
util.SetPrint: Hdr:IO.GenericIO
util.SetPrint: Hdr:RISCOS
util.SetPrint: Hdr:ModHand
util.SetPrint: Hdr:Services
util.SetPrint: Hdr:Proc
util.SetPrint: Hdr:Variables
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
