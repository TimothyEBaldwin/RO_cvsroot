head	4.2;
access;
symbols
	HdrSrc-2_77:4.2
	HdrSrc-2_76:4.2
	HdrSrc-2_75:4.2
	HdrSrc-2_74:4.2
	HdrSrc-2_73:4.2
	HdrSrc-2_72:4.2
	HdrSrc-2_71:4.2
	HdrSrc-2_70:4.2
	HdrSrc-2_69:4.2
	HdrSrc-2_68:4.2
	HdrSrc-2_67:4.2
	HdrSrc-2_66:4.2
	HdrSrc-2_65:4.2
	HdrSrc-2_64:4.2
	HdrSrc-2_63:4.2
	HdrSrc-2_62:4.2
	HdrSrc-2_61:4.2
	HdrSrc-2_60:4.2
	HdrSrc-2_59:4.2
	HdrSrc-2_58:4.2
	HdrSrc-2_57:4.2
	HdrSrc-2_56:4.2
	HdrSrc-2_55:4.2
	HdrSrc-2_54:4.2
	HdrSrc-2_53:4.2
	HdrSrc-2_52:4.2
	HdrSrc-2_51:4.2
	HdrSrc-2_50:4.2
	HdrSrc-2_49:4.2
	HdrSrc-2_48:4.2
	HdrSrc-2_47:4.2
	HdrSrc-2_46-4_247_2_1:4.2
	XCompile:4.2.0.14
	XCompile_bp:4.2
	HdrSrc-2_46:4.2
	HdrSrc-2_45:4.2
	HdrSrc-2_44:4.2
	HdrSrc-2_43:4.2
	HdrSrc-2_42:4.2
	HdrSrc-2_41:4.2
	HdrSrc-2_40-1:4.2
	HdrSrc-2_40:4.2
	HdrSrc-2_39:4.2
	HdrSrc-2_38:4.2
	HdrSrc-2_37:4.2
	HdrSrc-2_36:4.2
	HdrSrc-2_35:4.2
	HdrSrc-2_34:4.2
	HdrSrc-2_33:4.2
	HdrSrc-2_32:4.2
	HdrSrc-2_31:4.2
	HdrSrc-2_30:4.2
	HdrSrc-2_29:4.2
	HdrSrc-2_28:4.2
	HdrSrc-2_27:4.2
	HdrSrc-2_26:4.2
	HdrSrc-2_25:4.2
	HdrSrc-2_24:4.2
	HdrSrc-2_23:4.2
	HdrSrc-2_22:4.2
	HdrSrc-2_21:4.2
	HdrSrc-2_20:4.2
	HdrSrc-2_19:4.2
	HdrSrc-2_18:4.2
	HdrSrc-2_17:4.2
	HdrSrc-2_16:4.2
	HdrSrc-2_15:4.2
	HdrSrc-2_14:4.2
	HdrSrc-2_13:4.2
	HdrSrc-2_12:4.2
	HdrSrc-2_11:4.2
	HdrSrc-2_10:4.2
	HdrSrc-2_09:4.2
	HdrSrc-2_08:4.2
	HdrSrc-2_07:4.2
	HdrSrc-2_06:4.2
	HdrSrc-2_05:4.2
	HdrSrc-2_04:4.2
	HdrSrc-2_03:4.2
	HdrSrc-2_02:4.2
	HdrSrc-2_01:4.2
	HdrSrc-2_00:4.2
	HdrSrc-1_99:4.2
	HdrSrc-1_98:4.2
	HdrSrc-1_97:4.2
	HdrSrc-1_96:4.2
	HdrSrc-1_95:4.2
	HdrSrc-1_94:4.2
	HdrSrc-1_93:4.2
	HdrSrc-1_92:4.2
	HdrSrc-1_91:4.2
	HdrSrc-1_90:4.2
	HdrSrc-1_89:4.2
	HdrSrc-1_88:4.2
	HdrSrc-1_87:4.2
	HdrSrc-1_86:4.2
	HdrSrc-1_85:4.2
	HdrSrc-1_84:4.2
	HdrSrc-1_83:4.2
	HdrSrc-1_82:4.2
	HdrSrc-1_81:4.2
	HdrSrc-1_80:4.2
	HdrSrc-1_79:4.2
	HdrSrc-1_78:4.2
	HdrSrc-1_77:4.2
	HdrSrc-1_76:4.2
	Cortex_merge:4.2
	HdrSrc-1_62-4_162_2_15:4.2
	HdrSrc-1_75:4.2
	HdrSrc-1_62-4_162_2_14:4.2
	HdrSrc-1_74:4.2
	HdrSrc-1_62-4_162_2_13:4.2
	HdrSrc-1_62-4_162_2_12:4.2
	HdrSrc-1_73:4.2
	HdrSrc-1_72:4.2
	HdrSrc-1_62-4_162_2_11:4.2
	HdrSrc-1_62-4_162_2_10:4.2
	HdrSrc-1_71:4.2
	HdrSrc-1_70:4.2
	HdrSrc-1_69:4.2
	Cortex_bp:4.2
	HdrSrc-1_62-4_162_2_9:4.2
	HdrSrc-1_62-4_162_2_8:4.2
	HdrSrc-1_68:4.2
	HdrSrc-1_62-4_162_2_7:4.2
	HdrSrc-1_62-4_162_2_6:4.2
	HdrSrc-1_62-4_162_2_5:4.2
	HdrSrc-1_62-4_162_2_4:4.2
	HdrSrc-1_67:4.2
	HdrSrc-1_66:4.2
	HdrSrc-1_62-4_162_2_3:4.2
	HdrSrc-1_65:4.2
	HdrSrc-1_64:4.2
	HdrSrc-1_63:4.2
	HdrSrc-1_62-4_162_2_2:4.2
	HdrSrc-1_62-4_162_2_1:4.2
	Cortex:4.2.0.4
	HdrSrc-1_62:4.2
	HdrSrc-1_61:4.2
	HdrSrc-1_60:4.2
	HdrSrc-1_59:4.2
	HdrSrc-1_58:4.2
	HdrSrc-1_57:4.2
	HdrSrc-1_56:4.2
	HdrSrc-1_55:4.2
	HdrSrc-1_54:4.2
	HdrSrc-1_53:4.2
	HdrSrc-1_52:4.2
	HdrSrc-1_51:4.2
	HdrSrc-1_50:4.2
	HdrSrc-1_49:4.2
	HdrSrc-1_48:4.2
	HdrSrc-1_47:4.2
	RO_5_07:4.2
	HdrSrc-1_46:4.2
	HdrSrc-1_45:4.2
	HdrSrc-1_44:4.2
	HdrSrc-1_43:4.2
	HdrSrc-1_42:4.2
	HdrSrc-1_41:4.2
	HdrSrc-1_40:4.2
	HdrSrc-1_39:4.2
	HdrSrc-1_38:4.2
	HdrSrc-1_37:4.2
	HdrSrc-1_36:4.2
	HdrSrc-1_35:4.2
	HdrSrc-1_34:4.2
	HdrSrc-1_33:4.2
	HdrSrc-1_32:4.2
	HdrSrc-1_31:4.2
	HdrSrc-1_30:4.2
	HdrSrc-1_29:4.2
	HdrSrc-1_28:4.2
	HdrSrc-1_27:4.2
	HdrSrc-1_26:4.2
	HdrSrc-1_25:4.2
	HdrSrc-1_24:4.2
	HdrSrc-1_23:4.2
	HdrSrc-1_22:4.2
	HdrSrc-1_21:4.2
	HdrSrc-1_20:4.2
	HdrSrc-1_19:4.2
	HdrSrc-1_18:4.2
	HdrSrc-1_17:4.2
	HdrSrc-1_16:4.2
	HdrSrc-1_15:4.2
	HdrSrc-1_14:4.2
	HdrSrc-1_13:4.2
	HdrSrc-1_12:4.2
	HdrSrc-1_11:4.2
	HdrSrc-0_71-4_72_2_2:4.2
	HdrSrc-1_10:4.2
	HdrSrc-1_09:4.2
	HdrSrc-1_08:4.2
	HdrSrc-1_07:4.2
	HdrSrc-1_06:4.2
	HdrSrc-1_05:4.2
	dellis_autobuild_BaseSW:4.2
	HdrSrc-1_04:4.2
	HdrSrc-1_03:4.2
	HdrSrc-1_02:4.2
	HdrSrc-1_00:4.2
	HdrSrc-0_99:4.2
	HdrSrc-0_71-4_72_2_1:4.2
	Lazarus_Z11:4.2.0.12
	HdrSrc-0_98:4.2
	HdrSrc-0_97:4.2
	HdrSrc-0_95:4.2
	HdrSrc-0_94:4.2
	HdrSrc-0_93:4.2
	HdrSrc-0_92:4.2
	HdrSrc-0_91:4.2
	HdrSrc-0_90:4.2
	HdrSrc-0_89:4.2
	HdrSrc-0_88:4.2
	HdrSrc-0_87:4.2
	HdrSrc-0_86:4.2
	HdrSrc-0_85:4.2
	HdrSrc-0_84:4.2
	HdrSrc-0_83:4.2
	HdrSrc-0_82:4.2
	HdrSrc-0_81:4.2
	HdrSrc-0_80:4.2
	HdrSrc-0_79:4.2
	HdrSrc-0_78:4.2
	HdrSrc-0_77:4.2
	sbrodie_sedwards_16Mar2000:4.2
	HdrSrc-0_76:4.2
	HdrSrc-0_75:4.2
	HdrSrc-0_74:4.2
	HdrSrc-0_73:4.2
	HdrSrc-0_72:4.2
	HdrSrc-0_71:4.2
	HdrSrc-0_70:4.2
	HdrSrc-0_69:4.2
	HdrSrc-0_68:4.2
	HdrSrc-0_67:4.2
	HdrSrc-0_66:4.2
	HdrSrc-0_65:4.2
	HdrSrc-0_64:4.2
	kbracey_32bit_merge:4.2
	HdrSrc-0_63:4.2
	HdrSrc-0_57-4_58_2_9:4.2
	HdrSrc-0_57-4_58_2_8:4.2
	HdrSrc-0_57-4_58_2_7:4.2
	HdrSrc-0_57-4_58_2_6:4.2
	HdrSrc-0_57-4_58_2_5:4.2
	HdrSrc-0_57-4_58_2_4:4.2
	HdrSrc-0_57-4_58_2_3:4.2
	HdrSrc-0_62:4.2
	HdrSrc-0_61:4.2
	HdrSrc-0_60:4.2
	HdrSrc-0_57-4_58_2_2:4.2
	HdrSrc-0_59:4.2
	HdrSrc-0_58:4.2
	HdrSrc-0_57-4_58_2_1:4.2
	kbracey_32bit:4.2.0.10
	HdrSrc-0_57:4.2
	HdrSrc-0_56:4.2
	HdrSrc-0_55:4.2
	HdrSrc-0_54:4.2
	HdrSrc-0_53:4.2
	HdrSrc-0_52:4.2
	HdrSrc-0_51:4.2
	HdrSrc-0_50:4.2
	HdrSrc-0_49:4.2
	HdrSrc-0_48:4.2
	HdrSrc-0_47:4.2
	HdrSrc-0_46:4.2
	HdrSrc-0_45:4.2
	HdrSrc-0_44:4.2
	HdrSrc-0_43:4.2
	HdrSrc-0_42:4.2
	dcotton_autobuild_BaseSW:4.2
	HdrSrc-0_41:4.2
	HdrSrc-0_39:4.2
	HdrSrc-0_38:4.2
	HdrSrc-0_37:4.2
	HdrSrc-0_36:4.2
	HdrSrc-0_35:4.2
	HdrSrc-0_34:4.2
	HdrSrc-0_33:4.2
	HdrSrc-0_32:4.2
	HdrSrc-0_31:4.2
	Ursula_RiscPC_merge:4.2
	HdrSrc-0_30:4.2
	HdrSrc-0_29:4.2
	Ursula_merge:4.2
	HdrSrc-0_28:4.2
	HdrSrc-0_27:4.2
	HdrSrc-0_26:4.2
	HdrSrc-0_25:4.2
	HdrSrc-0_24:4.2
	HdrSrc-0_23:4.2
	HdrSrc-0_22:4.2
	HdrSrc-0_21:4.2
	HdrSrc-0_20:4.2
	HdrSrc-0_19:4.2
	nturton_HdrSrc-0_11:4.2
	HdrSrc-0_18:4.2
	HdrSrc-0_17:4.2
	HdrSrc-0_16:4.2
	HdrSrc-0_15:4.2
	HdrSrc-0_14:4.2
	HdrSrc-0_13:4.2
	HdrSrc-0_12:4.2
	HdrSrc-0_11:4.2
	HdrSrc-0_10:4.2
	HdrSrc-0_09:4.2
	HdrSrc-0_08:4.2
	HdrSrc-0_07:4.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2
	Ursula_RiscPC:4.2.0.8
	HdrSrc-0_06:4.2
	HdrSrc-0_05:4.2
	HdrSrc-0_04:4.2
	HdrSrc-0_03:4.2
	HdrSrc-0_02:4.2
	HdrSrc-0_01:4.2
	nicke_HdrSrc_21_9_98:4.2
	nicke_HdrSrc_21_8_98:4.1.7.2
	rthornb_UrsulaBuild-19Aug1998:4.2
	UrsulaBuild_FinalSoftload:4.2
	rthornb_UrsulaBuild-12Aug1998:4.2
	aglover_UrsulaBuild-05Aug1998:4.2
	rthornb_UrsulaBuild-29Jul1998:4.2
	rthornb_UrsulaBuild-22Jul1998:4.2
	rthornb_UrsulaBuild-15Jul1998:4.2
	rthornb_UrsulaBuild-07Jul1998:4.2
	rthornb_UrsulaBuild-17Jun1998:4.2
	afrost_NC2_Generic:4.2
	rthornb_UrsulaBuild-03Jun1998:4.2
	rthornb_UrsulaBuild-27May1998:4.2
	rthornb_UrsulaBuild-21May1998:4.2
	rthornb_UrsulaBuild_01May1998:4.2
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spinner_B10:4.1.7.2
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Ursula_bp:4.2
	Ursula:4.2.0.2
	Spinner_B7:4.1.7.2
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_merge:4.1.7.2
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.2
date	96.12.17.11.14.27;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.21.28;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.21.28;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.19.37.16;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.11.37.11;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.19.32.58;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.04.08.11.36.51;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.2
log
@New version of HdrSrc introduced
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; > Hdr:IOMD

; ********************
; *** Changes List ***
; ********************

; 10-Dec-92 TMD Created.
; 24-Feb-93 TMD Updated for DRAM-video-capable IOMD.
; 23-Mar-93 TMD Added burst mode bits to ROMCR.
; 23-Apr-93 TMD Added IOMD_MonitorType, IOMD_MonitorIDMask
; 25-May-93 MT  Added extra definitions for DMA registers
; 24-Jun-93 TMD Replaced references to SCSI by Network
; 30-Jun-93 TMD Changed IOMD_Network_IRQ_bit to IOMD_HardDisc_IRQ_bit and
;                       IOMD_ext_IRQ_bit to IOMD_Network_IRQ_bit
; 09-Aug-93 SMC Added base addresses for EASI space.
; 19-Oct-93 TMD Added IOMD_ProtectionLinkBit
; 06-May-94 RCM Added extra registers provided by MORRIS
; 13-Jun-94 RCM Added more MORRIS bits
; 22-Nov-94 RCM Added more MORRIS bits
; 08-Mar-95 RCM Added IOMD_VIDMUX
; 08-Mar-95 RCM Added IOMD_SoundsystemLinkBit
; 06-Feb-96 SMC Added Morris IRQC registers
; 15-May-96 BAR Added 'Half' spped clock prescaler variables.
; 17-Jun-96 BAR Added IOMD ID Version numbers.
; 09-Jul-96 BAR Added New constants for ROM speed selection.
; 11-Jul-96 TMD Added ASTCR and new DRAMWID bits
; ---------
; 03-Dec-96 RWB RiscOS merge project - added the following from RiscOS370 tree
;		IOMD_ATODICR, IOMD_ATODSR, IOMD_ATODCC, IOMD_ATODCNT1,
;		IOMD_ATODCNT2, IOMD_ATODCNT3, IOMD_ATODCNT4, IOMD_VIDINITB,
;		IOMD_VIDCR_Dup


 [ :LNOT: :DEF: IOMD_Base

 [ :LNOT: :DEF: MorrisSupport
                GBLL    MorrisSupport
MorrisSupport   SETL    {FALSE}
 ]

                GBLA    IOMD_Base
IOMD_Base       SETA    &03200000       ; Same address as IOC was

; Offsets within IOMD
IOMD_KBDCR      *       &008            ; Keyboard control

IOMD_CLINES     *       &00C            ; General purpose IO register with Monitor Id in bit 0

 [ MorrisSupport
IOMD_IDLEMODE   *       &01C
IOMD_STOPMODE   *       &02C
IOMD_CLKCTL     *       &03C
 ]

 [ MorrisSupport
IOMD_IRQSTC     *       &060            ; IRQ C interrupts status
IOMD_IRQRQC     *       &064            ; IRQ C interrupts request
IOMD_IRQMSKC    *       &068            ; IRQ C interrupts mask
IOMD_VIDMUX     *       &06C            ; Video LCD and Serial Sound Mux control
IOMD_IRQSTD     *       &070            ; IRQ D interrupts status
IOMD_IRQRQD     *       &074            ; IRQ D interrupts request
IOMD_IRQMSKD    *       &078            ; IRQ D interrupts mask
 ]

IOMD_ROMCR0     *       &080            ; ROM control bank 0
IOMD_ROMCR1     *       &084            ; ROM control bank 1
IOMD_DRAMCR     *       &088            ; DRAM control
IOMD_VREFCR     *       &08C            ; VRAM and refresh control
IOMD_FSIZE      *       &090            ; Flyback line size
IOMD_ID0        *       &094            ; Chip ID no. low byte
IOMD_ID1        *       &098            ; Chip ID no. high byte
IOMD_VERSION    *       &09C            ; Chip version number

IOMD_MOUSEX     *       &0A0            ; Mouse X position
IOMD_MOUSEY     *       &0A4            ; Mouse Y position

 [ MorrisSupport
IOMD_MSEDAT     *       &A8             ; Mouse data                     } 2nd PS2 channel
IOMD_MSECR      *       &AC             ; Mouse control - see IOMD_KBDCR }
 ]

IOMD_DMATCR     *       &0C0            ; DACK timing control
IOMD_IOTCR      *       &0C4            ; I/O timing control
IOMD_ECTCR      *       &0C8            ; Expansion card timing control
IOMD_DMAEXT     *       &0CC            ; DMA external control

 [ MorrisSupport
IOMD_ASTCR	*	&0CC		; I/O asynchronous timing control - same address as old DMAEXT on IOMD
IOMD_DRAMWID    *       &0D0            ; DRAM width control
IOMD_SELFREF    *       &0D4            ; DRAM Self Refresh control

IOMD_ATODICR    *       &0E0
IOMD_ATODSR     *       &0E4
IOMD_ATODCC     *       &0E8
IOMD_ATODCNT1   *       &0EC
IOMD_ATODCNT2   *       &0F0
IOMD_ATODCNT3   *       &0F4
IOMD_ATODCNT4   *       &0F8
 ]

IOMD_IO0CURA    *       &100            ; I/O DMA 0     CurA
IOMD_IO0ENDA    *       &104            ;               EndA
IOMD_IO0CURB    *       &108            ;               CurB
IOMD_IO0ENDB    *       &10C            ;               EndB
IOMD_IO0CR      *       &110            ;               Control
IOMD_IO0ST      *       &114            ;               Status

IOMD_IO1CURA    *       &120            ; I/O DMA 1     CurA
IOMD_IO1ENDA    *       &124            ;               EndA
IOMD_IO1CURB    *       &128            ;               CurB
IOMD_IO1ENDB    *       &12C            ;               EndB
IOMD_IO1CR      *       &130            ;               Control
IOMD_IO1ST      *       &134            ;               Status

IOMD_IO2CURA    *       &140            ; I/O DMA 2     CurA
IOMD_IO2ENDA    *       &144            ;               EndA
IOMD_IO2CURB    *       &148            ;               CurB
IOMD_IO2ENDB    *       &14C            ;               EndB
IOMD_IO2CR      *       &150            ;               Control
IOMD_IO2ST      *       &154            ;               Status

IOMD_IO3CURA    *       &160            ; I/O DMA 3     CurA
IOMD_IO3ENDA    *       &164            ;               EndA
IOMD_IO3CURB    *       &168            ;               CurB
IOMD_IO3ENDB    *       &16C            ;               EndB
IOMD_IO3CR      *       &170            ;               Control
IOMD_IO3ST      *       &174            ;               Status

IOMD_SD0CURA    *       &180            ; Sound DMA 0   CurA
IOMD_SD0ENDA    *       &184            ;               EndA
IOMD_SD0CURB    *       &188            ;               CurB
IOMD_SD0ENDB    *       &18C            ;               EndB
IOMD_SD0CR      *       &190            ;               Control
IOMD_SD0ST      *       &194            ;               Status

IOMD_SD1CURA    *       &1A0            ; Sound DMA 1   CurA
IOMD_SD1ENDA    *       &1A4            ;               EndA
IOMD_SD1CURB    *       &1A8            ;               CurB
IOMD_SD1ENDB    *       &1AC            ;               EndB
IOMD_SD1CR      *       &1B0            ;               Control
IOMD_SD1ST      *       &1B4            ;               Status

IOMD_CURSCUR    *       &1C0            ; Cursor DMA    Current
IOMD_CURSINIT   *       &1C4            ;               Init

IOMD_VIDCUR     *       &1D0            ; Video DMA     Current
IOMD_VIDEND     *       &1D4            ;               End
IOMD_VIDSTART   *       &1D8            ;               Start
IOMD_VIDINIT    *       &1DC            ;               Init
IOMD_VIDCR      *       &1E0            ;               Control
IOMD_VIDINITB   *       &1E8            ;               InitB (for dual-scan LCDs)

IOMD_DMASTA     *       &1F0            ; DMA Interrupt Status
IOMD_DMAREQ     *       &1F4            ;               Request
IOMD_DMAMSK     *       &1F8            ;               Mask

 [ MorrisSupport
; Bits in CLKCTL (Clock Prescaler Control)

IOMD_CLKCTL_CpuclkNormal *      1 :SHL: 2       ; 1=div1
IOMD_CLKCTL_MemclkNormal *      1 :SHL: 1       ; 1=div1
IOMD_CLKCTL_IOclkNormal  *      1 :SHL: 0       ; 1=div1

IOMD_CLKCTL_CpuclkHalf   *      0 :SHL: 2       ; 0=div2
IOMD_CLKCTL_MemclkHalf   *      0 :SHL: 1       ; 0=div2
IOMD_CLKCTL_IOclkHalf    *      0 :SHL: 0       ; 0=div2
 ]

; Bits in IOCR (I/O Control Register)

vsync_state_bit         *       1 :SHL: 7       ; read only
floppy_index_state_bit  *       1 :SHL: 6       ; read only
IOMD_unique_machine_ID_bit *    1 :SHL: 3       ; read/write

; Bits in KBDCR (Keyboard Control Register)

IOMD_KBDCR_TxE          *       1 :SHL: 7       ; Transmit register empty
IOMD_KBDCR_TxB          *       1 :SHL: 6       ; Transmit busy
IOMD_KBDCR_RxF          *       1 :SHL: 5       ; Receive register full
IOMD_KBDCR_RxB          *       1 :SHL: 4       ; Receive busy
IOMD_KBDCR_Enable       *       1 :SHL: 3       ; Enable state machine
IOMD_KBDCR_RxPar        *       1 :SHL: 2       ; Receive parity
IOMD_KBDCR_Ndata        *       1 :SHL: 1       ; NOT data
IOMD_KBDCR_Nclock       *       1 :SHL: 0       ; NOT clock

; Bits in MSECR (Mouse Control Resister (exactly the same as Keyboard Control Register))

IOMD_MSECR_TxE          *       1 :SHL: 7       ; Transmit register empty
IOMD_MSECR_TxB          *       1 :SHL: 6       ; Transmit busy
IOMD_MSECR_RxF          *       1 :SHL: 5       ; Receive register full
IOMD_MSECR_RxB          *       1 :SHL: 4       ; Receive busy
IOMD_MSECR_Enable       *       1 :SHL: 3       ; Enable state machine
IOMD_MSECR_RxPar        *       1 :SHL: 2       ; Receive parity
IOMD_MSECR_Ndata        *       1 :SHL: 1       ; NOT data
IOMD_MSECR_Nclock       *       1 :SHL: 0       ; NOT clock

; Bits in IRQ register A

IOMD_floppy_index_bit   *       1 :SHL: 2       ; Floppy index pulse    (event)

; Bits in IRQ register B

IOMD_floppy_IRQ_bit      *       1 :SHL: 4       ; Floppy IRQ request
IOMD_Network_IRQ_bit     *       1 :SHL: 3       ; Network (Extended) IRQ request
IOMD_HardDisc_IRQ_bit    *       1 :SHL: 1       ; Hard disc (IDE) IRQ

 [ MorrisSupport
; Bits in IRQ register D

IOMD_Nevent2_bit          *     1 :SHL: 4       ;
IOMD_Nevent1_bit          *     1 :SHL: 3       ;
IOMD_AtoD_IRQ_bit         *     1 :SHL: 2       ; A to D (Joystick) IRQ request
IOMD_MouseTxEmpty_IRQ_bit *     1 :SHL: 1       ; PS2 Mouse port Tx empty IRQ request
IOMD_MouseRxFull_IRQ_bit  *     1 :SHL: 0       ; PS2 Mouse port Rx full IRQ request
 ]

; Bits in FIQ register

IOMD_serial_FIQ_bit     *       1 :SHL: 4       ; Serial FIQ request
IOMD_ext_FIQ_bit        *       1 :SHL: 1       ; Extended FIQ request

; Values to store in ROM control registers (0 and 1)

IOMD_ROMCR_NSTicks_7    *       0 :SHL: 0
IOMD_ROMCR_NSTicks_6    *       1 :SHL: 0
IOMD_ROMCR_NSTicks_5    *       2 :SHL: 0
IOMD_ROMCR_NSTicks_4    *       3 :SHL: 0
IOMD_ROMCR_NSTicks_3    *       4 :SHL: 0
IOMD_ROMCR_NSTicks_2    *       5 :SHL: 0

IOMD_ROMCR_218          *       IOMD_ROMCR_NSTicks_7
IOMD_ROMCR_187          *       IOMD_ROMCR_NSTicks_6
IOMD_ROMCR_156          *       IOMD_ROMCR_NSTicks_5
IOMD_ROMCR_125          *       IOMD_ROMCR_NSTicks_4
IOMD_ROMCR_93           *       IOMD_ROMCR_NSTicks_3
IOMD_ROMCR_62           *       IOMD_ROMCR_NSTicks_2

IOMD_ROMCR_BTicks_0     *       0 :SHL: 3
IOMD_ROMCR_BTicks_4     *       1 :SHL: 3
IOMD_ROMCR_BTicks_3     *       2 :SHL: 3
IOMD_ROMCR_BTicks_2     *       3 :SHL: 3

IOMD_ROMCR_BurstOff     *       IOMD_ROMCR_BTicks_0       ; burst mode off
IOMD_ROMCR_Burst125     *       IOMD_ROMCR_BTicks_4       ; 125 ns burst
IOMD_ROMCR_Burst93      *       IOMD_ROMCR_BTicks_3       ; 93.75 ns burst
IOMD_ROMCR_Burst62      *       IOMD_ROMCR_BTicks_2       ; 62.5 ns burst

 [ MorrisSupport
IOMD_ROMCR_HalfSpeed    *       0 :SHL: 5
IOMD_ROMCR_Normal       *       1 :SHL: 5
IOMD_ROMCR_32bit        *       0 :SHL: 6
IOMD_ROMCR_16bit        *       1 :SHL: 6
 ]

; Bits in VREFCR

IOMD_VREFCR_VRAM_1Mx32          *       0 :SHL: 5
IOMD_VREFCR_VRAM_256Kx32        *       1 :SHL: 5
IOMD_VREFCR_VRAM_256Kx64        *       2 :SHL: 5
IOMD_VREFCR_VRAM_1Mx64          *       6 :SHL: 5

IOMD_VREFCR_REF_Off     *       0 :SHL: 0       ; off
IOMD_VREFCR_REF_16      *       1 :SHL: 0       ; 16µs refresh
IOMD_VREFCR_REF_128     *       8 :SHL: 0       ; 128µs refresh


 [ MorrisSupport
IOMD_DRAMWID_DRAM_32bit * 0 :SHL: 0             ; 32bit
IOMD_DRAMWID_DRAM_16bit * 1 :SHL: 0             ; 16bit

; The following bits are new to ARM7500FE
; Note that the ARM7500FE data sheet now refers to this register as DRAMCR
; but that name clashes with the earlier DRAMCR on IOMD

IOMD_DRAMWID_EDO_Enable * 1 :SHL: 4		; enable use of EDO DRAM

IOMD_DRAMWID_RASCAS_2   * 0 :SHL: 5		; 2 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASCAS_3   * 1 :SHL: 5		; 3 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASPre_3	* 0 :SHL: 6		; 3 memory clock cycles guaranteed RAS precharge
IOMD_DRAMWID_RASPre_4	* 1 :SHL: 6		; 4 memory clock cycles guaranteed RAS precharge

; Values to put in ASTCR

IOMD_ASTCR_Minimal	* 0 :SHL: 7		; minimal delay to I/O cycles
IOMD_ASTCR_WaitStates	* 1 :SHL: 7		; add wait states to cope with fast MEMCLK

 ]

; Bits in IOTCR

IOMD_IOTCR_Network_TypeA   *    0 :SHL: 0
IOMD_IOTCR_Network_TypeB   *    1 :SHL: 0
IOMD_IOTCR_Network_TypeC   *    2 :SHL: 0
IOMD_IOTCR_Network_TypeD   *    3 :SHL: 0

IOMD_IOTCR_Combo_TypeA  *       0 :SHL: 2
IOMD_IOTCR_Combo_TypeB  *       1 :SHL: 2
IOMD_IOTCR_Combo_TypeC  *       2 :SHL: 2
IOMD_IOTCR_Combo_TypeD  *       3 :SHL: 2

IOMD_IOTCR_Sound_TypeA  *       0 :SHL: 4
IOMD_IOTCR_Sound_TypeB  *       1 :SHL: 4
IOMD_IOTCR_Sound_TypeC  *       2 :SHL: 4
IOMD_IOTCR_Sound_TypeD  *       3 :SHL: 4

IOMD_IOTCR_Sound_Word   *       0 :SHL: 6
IOMD_IOTCR_Sound_Byte   *       1 :SHL: 6
IOMD_IOTCR_Sound_2Bytes *       2 :SHL: 6

; Bits in DMA end addresses

IOMD_DMA_S_Bit          *       1 :SHL: 31      ; Stop DMA (raise TC) at end of buffer
IOMD_DMA_L_Bit          *       1 :SHL: 30      ; Last (single-unit) transfer on buffer
                                                ; - also in VIDINIT, in same position

; Bits in DMA control registers
IOMD_DMA_C_Bit          *       1 :SHL: 7       ; Clear DMA channel to idle, when written as 1
IOMD_DMA_D_Bit          *       1 :SHL: 6       ; Direction: 0=mem->dev,1=dev->mem
IOMD_DMA_E_Bit          *       1 :SHL: 5       ; Enable DMA channel's state machine when set
IOMD_DMA_IncMask        *       2_00011111      ; Mask for DMA channel increment

; Bits in DMA status registers
IOMD_DMA_O_Bit          *       1 :SHL: 2       ; Overrun has occured if set
IOMD_DMA_I_Bit          *       1 :SHL: 1       ; channel is Interrupting if set
IOMD_DMA_B_Bit          *       1 :SHL: 0       ; active cur/end pair: 0=A, 1=B

; Channel bit assignments in DMA Interrupt registers IOMD_DMA{STA,MSK,REQ}
IOMD_DMA_IO0            *       1 :SHL: 0
IOMD_DMA_IO1            *       1 :SHL: 1
IOMD_DMA_IO2            *       1 :SHL: 2
IOMD_DMA_IO3            *       1 :SHL: 3
IOMD_DMA_SD0            *       1 :SHL: 4
IOMD_DMA_SD1            *       1 :SHL: 5

; Bits in VIDCR

IOMD_VIDCR_DRAMMode     *       1 :SHL: 6       ; set for DRAM, clear for VRAM
IOMD_VIDCR_Enable       *       1 :SHL: 5
IOMD_VIDCR_Dup          *       1 :SHL: 7

; Bits in DRAMCR

IOMD_DRAMCR_DRAM_Large  *       4_00    ; 1M, 4M, 16M DRAM
IOMD_DRAMCR_DRAM_Small  *       4_01    ; 256K DRAM

 [ MorrisSupport
IOMD_Original           *       &D4E7
IOMD_7500               *       &5B98
IOMD_7500FE             *       &AA7C
 ]

; Registers not strictly in IOMD, but in IOMD-based systems

IOMD_MonitorType        *       &03310000
IOMD_MonitorIDMask      *       &01     ; only bottom bit valid
; Mouse buttons are in bits 4..6
IOMD_ProtectionLinkBit  *       &80     ; zero => protected against delete power-on etc
IOMD_SoundsystemLinkBit  *      &100    ; zero => Rimmer, so assume 16bit sound DAC's

; Bases for new 'extended address space' expansion cards

IOMD_EASI_Base0         *       &08000000
IOMD_EASI_Base1         *       &09000000
IOMD_EASI_Base2         *       &0A000000
IOMD_EASI_Base3         *       &0B000000
IOMD_EASI_Base4         *       &0C000000
IOMD_EASI_Base5         *       &0D000000
IOMD_EASI_Base6         *       &0E000000
IOMD_EASI_Base7         *       &0F000000

 ]

        END
@


4.1
log
@Initial revision
@
text
@d36 11
d52 1
a52 1
MorrisSupport   SETL    {FALSE} 
d70 3
d102 1
d105 8
d165 1
d174 7
a180 3
IOMD_CLKCTL_CpuclkNormal *      1 :SHL: 2       ; 0=div2, 1=div1
IOMD_CLKCTL_MemclkNormal *      1 :SHL: 1       ; 0=div2, 1=div1
IOMD_CLKCTL_IOclkNormal  *      1 :SHL: 0       ; 0=div2, 1=div1
d225 1
a225 1
IOMD_Nevent1_bit          *     1 :SHL: 3       ; 
d238 23
a260 11
IOMD_ROMCR_218          *       0 :SHL: 0
IOMD_ROMCR_187          *       1 :SHL: 0
IOMD_ROMCR_156          *       2 :SHL: 0
IOMD_ROMCR_125          *       3 :SHL: 0
IOMD_ROMCR_93           *       4 :SHL: 0
IOMD_ROMCR_62           *       5 :SHL: 0

IOMD_ROMCR_BurstOff     *       0 :SHL: 3       ; burst mode off
IOMD_ROMCR_Burst125     *       1 :SHL: 3       ; 125 ns burst
IOMD_ROMCR_Burst93      *       2 :SHL: 3       ; 93.75 ns burst
IOMD_ROMCR_Burst62      *       3 :SHL: 3       ; 62.5 ns burst
d284 19
d330 1
a330 1
                                                ; - also in VIDINIT, in same position   
d355 1
d361 6
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a35 5
; 06-Feb-96 SMC Added Morris IRQC registers
; 15-May-96 BAR Added 'Half' spped clock prescaler variables.
; 17-Jun-96 BAR Added IOMD ID Version numbers.
; 09-Jul-96 BAR Added New constants for ROM speed selection.
; 11-Jul-96 TMD Added ASTCR and new DRAMWID bits
d41 1
a41 1
MorrisSupport   SETL    {FALSE}
a58 3
IOMD_IRQSTC     *       &060            ; IRQ C interrupts status
IOMD_IRQRQC     *       &064            ; IRQ C interrupts request
IOMD_IRQMSKC    *       &068            ; IRQ C interrupts mask
a87 1
IOMD_ASTCR	*	&0CC		; I/O asynchronous timing control - same address as old DMAEXT on IOMD
d150 3
a152 7
IOMD_CLKCTL_CpuclkNormal *      1 :SHL: 2       ; 1=div1
IOMD_CLKCTL_MemclkNormal *      1 :SHL: 1       ; 1=div1
IOMD_CLKCTL_IOclkNormal  *      1 :SHL: 0       ; 1=div1

IOMD_CLKCTL_CpuclkHalf   *      0 :SHL: 2       ; 0=div2
IOMD_CLKCTL_MemclkHalf   *      0 :SHL: 1       ; 0=div2
IOMD_CLKCTL_IOclkHalf    *      0 :SHL: 0       ; 0=div2
d197 1
a197 1
IOMD_Nevent1_bit          *     1 :SHL: 3       ;
d210 11
a220 23
IOMD_ROMCR_NSTicks_7    *       0 :SHL: 0
IOMD_ROMCR_NSTicks_6    *       1 :SHL: 0
IOMD_ROMCR_NSTicks_5    *       2 :SHL: 0
IOMD_ROMCR_NSTicks_4    *       3 :SHL: 0
IOMD_ROMCR_NSTicks_3    *       4 :SHL: 0
IOMD_ROMCR_NSTicks_2    *       5 :SHL: 0

IOMD_ROMCR_218          *       IOMD_ROMCR_NSTicks_7
IOMD_ROMCR_187          *       IOMD_ROMCR_NSTicks_6
IOMD_ROMCR_156          *       IOMD_ROMCR_NSTicks_5
IOMD_ROMCR_125          *       IOMD_ROMCR_NSTicks_4
IOMD_ROMCR_93           *       IOMD_ROMCR_NSTicks_3
IOMD_ROMCR_62           *       IOMD_ROMCR_NSTicks_2

IOMD_ROMCR_BTicks_0     *       0 :SHL: 3
IOMD_ROMCR_BTicks_4     *       1 :SHL: 3
IOMD_ROMCR_BTicks_3     *       2 :SHL: 3
IOMD_ROMCR_BTicks_2     *       3 :SHL: 3

IOMD_ROMCR_BurstOff     *       IOMD_ROMCR_BTicks_0       ; burst mode off
IOMD_ROMCR_Burst125     *       IOMD_ROMCR_BTicks_4       ; 125 ns burst
IOMD_ROMCR_Burst93      *       IOMD_ROMCR_BTicks_3       ; 93.75 ns burst
IOMD_ROMCR_Burst62      *       IOMD_ROMCR_BTicks_2       ; 62.5 ns burst
a243 19

; The following bits are new to ARM7500FE
; Note that the ARM7500FE data sheet now refers to this register as DRAMCR
; but that name clashes with the earlier DRAMCR on IOMD

IOMD_DRAMWID_EDO_Enable * 1 :SHL: 4		; enable use of EDO DRAM

IOMD_DRAMWID_RASCAS_2   * 0 :SHL: 5		; 2 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASCAS_3   * 1 :SHL: 5		; 3 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASPre_3	* 0 :SHL: 6		; 3 memory clock cycles guaranteed RAS precharge
IOMD_DRAMWID_RASPre_4	* 1 :SHL: 6		; 4 memory clock cycles guaranteed RAS precharge

; Values to put in ASTCR

IOMD_ASTCR_Minimal	* 0 :SHL: 7		; minimal delay to I/O cycles
IOMD_ASTCR_WaitStates	* 1 :SHL: 7		; add wait states to cope with fast MEMCLK

d271 1
a271 1
                                                ; - also in VIDINIT, in same position
a300 6

 [ MorrisSupport
IOMD_Original           *       &D4E7
IOMD_7500               *       &5B98
IOMD_7500FE             *       &AA7C
 ]
@


4.1.7.2
log
@New version imported from TRUNK
@
text
@a40 6
; ---------
; 03-Dec-96 RWB RiscOS merge project - added the following from RiscOS370 tree
;		IOMD_ATODICR, IOMD_ATODSR, IOMD_ATODCC, IOMD_ATODCNT1,
;		IOMD_ATODCNT2, IOMD_ATODCNT3, IOMD_ATODCNT4, IOMD_VIDINITB,
;		IOMD_VIDCR_Dup

a98 8

IOMD_ATODICR    *       &0E0
IOMD_ATODSR     *       &0E4
IOMD_ATODCC     *       &0E8
IOMD_ATODCNT1   *       &0EC
IOMD_ATODCNT2   *       &0F0
IOMD_ATODCNT3   *       &0F4
IOMD_ATODCNT4   *       &0F8
a150 1
IOMD_VIDINITB   *       &1E8            ;               InitB (for dual-scan LCDs)
a339 1
IOMD_VIDCR_Dup          *       1 :SHL: 7
@


4.1.5.1
log
@Import from SrcFiler
@
text
@a35 5
; 06-Feb-96 SMC Added Morris IRQC registers
; 15-May-96 BAR Added 'Half' spped clock prescaler variables.
; 17-Jun-96 BAR Added IOMD ID Version numbers.
; 09-Jul-96 BAR Added New constants for ROM speed selection.
; 11-Jul-96 TMD Added ASTCR and new DRAMWID bits
d41 1
a41 1
MorrisSupport   SETL    {FALSE}
a58 3
IOMD_IRQSTC     *       &060            ; IRQ C interrupts status
IOMD_IRQRQC     *       &064            ; IRQ C interrupts request
IOMD_IRQMSKC    *       &068            ; IRQ C interrupts mask
a87 1
IOMD_ASTCR	*	&0CC		; I/O asynchronous timing control - same address as old DMAEXT on IOMD
d150 3
a152 7
IOMD_CLKCTL_CpuclkNormal *      1 :SHL: 2       ; 1=div1
IOMD_CLKCTL_MemclkNormal *      1 :SHL: 1       ; 1=div1
IOMD_CLKCTL_IOclkNormal  *      1 :SHL: 0       ; 1=div1

IOMD_CLKCTL_CpuclkHalf   *      0 :SHL: 2       ; 0=div2
IOMD_CLKCTL_MemclkHalf   *      0 :SHL: 1       ; 0=div2
IOMD_CLKCTL_IOclkHalf    *      0 :SHL: 0       ; 0=div2
d197 1
a197 1
IOMD_Nevent1_bit          *     1 :SHL: 3       ;
d210 11
a220 23
IOMD_ROMCR_NSTicks_7    *       0 :SHL: 0
IOMD_ROMCR_NSTicks_6    *       1 :SHL: 0
IOMD_ROMCR_NSTicks_5    *       2 :SHL: 0
IOMD_ROMCR_NSTicks_4    *       3 :SHL: 0
IOMD_ROMCR_NSTicks_3    *       4 :SHL: 0
IOMD_ROMCR_NSTicks_2    *       5 :SHL: 0

IOMD_ROMCR_218          *       IOMD_ROMCR_NSTicks_7
IOMD_ROMCR_187          *       IOMD_ROMCR_NSTicks_6
IOMD_ROMCR_156          *       IOMD_ROMCR_NSTicks_5
IOMD_ROMCR_125          *       IOMD_ROMCR_NSTicks_4
IOMD_ROMCR_93           *       IOMD_ROMCR_NSTicks_3
IOMD_ROMCR_62           *       IOMD_ROMCR_NSTicks_2

IOMD_ROMCR_BTicks_0     *       0 :SHL: 3
IOMD_ROMCR_BTicks_4     *       1 :SHL: 3
IOMD_ROMCR_BTicks_3     *       2 :SHL: 3
IOMD_ROMCR_BTicks_2     *       3 :SHL: 3

IOMD_ROMCR_BurstOff     *       IOMD_ROMCR_BTicks_0       ; burst mode off
IOMD_ROMCR_Burst125     *       IOMD_ROMCR_BTicks_4       ; 125 ns burst
IOMD_ROMCR_Burst93      *       IOMD_ROMCR_BTicks_3       ; 93.75 ns burst
IOMD_ROMCR_Burst62      *       IOMD_ROMCR_BTicks_2       ; 62.5 ns burst
a243 19

; The following bits are new to ARM7500FE
; Note that the ARM7500FE data sheet now refers to this register as DRAMCR
; but that name clashes with the earlier DRAMCR on IOMD

IOMD_DRAMWID_EDO_Enable * 1 :SHL: 4		; enable use of EDO DRAM

IOMD_DRAMWID_RASCAS_2   * 0 :SHL: 5		; 2 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASCAS_3   * 1 :SHL: 5		; 3 memory clock cycles from falling nRAS
						; to falling nCAS
IOMD_DRAMWID_RASPre_3	* 0 :SHL: 6		; 3 memory clock cycles guaranteed RAS precharge
IOMD_DRAMWID_RASPre_4	* 1 :SHL: 6		; 4 memory clock cycles guaranteed RAS precharge

; Values to put in ASTCR

IOMD_ASTCR_Minimal	* 0 :SHL: 7		; minimal delay to I/O cycles
IOMD_ASTCR_WaitStates	* 1 :SHL: 7		; add wait states to cope with fast MEMCLK

d271 1
a271 1
                                                ; - also in VIDINIT, in same position
a300 6

 [ MorrisSupport
IOMD_Original           *       &D4E7
IOMD_7500               *       &5B98
IOMD_7500FE             *       &AA7C
 ]
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a35 1
; 05-Jul-95 RCM Added IOMD_ATODCNT1 .. IOMD_ATODCNT4
a89 8

IOMD_ATODICR    *       &0E0
IOMD_ATODSR     *       &0E4
IOMD_ATODCC     *       &0E8
IOMD_ATODCNT1   *       &0EC
IOMD_ATODCNT2   *       &0F0
IOMD_ATODCNT3   *       &0F4
IOMD_ATODCNT4   *       &0F8
a141 1
IOMD_VIDINITB   *       &1E8            ;               InitB (for dual-scan LCDs)
a295 1
IOMD_VIDCR_Dup          *       1 :SHL: 7
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
