head	4.4;
access;
symbols
	HdrSrc-2_77:4.4
	HdrSrc-2_76:4.4
	HdrSrc-2_75:4.4
	HdrSrc-2_74:4.4
	HdrSrc-2_73:4.4
	HdrSrc-2_72:4.4
	HdrSrc-2_71:4.4
	HdrSrc-2_70:4.4
	HdrSrc-2_69:4.4
	HdrSrc-2_68:4.4
	HdrSrc-2_67:4.4
	HdrSrc-2_66:4.4
	HdrSrc-2_65:4.4
	HdrSrc-2_64:4.4
	HdrSrc-2_63:4.4
	HdrSrc-2_62:4.4
	HdrSrc-2_61:4.4
	HdrSrc-2_60:4.4
	HdrSrc-2_59:4.4
	HdrSrc-2_58:4.4
	HdrSrc-2_57:4.4
	HdrSrc-2_56:4.4
	HdrSrc-2_55:4.4
	HdrSrc-2_54:4.4
	HdrSrc-2_53:4.4
	HdrSrc-2_52:4.4
	HdrSrc-2_51:4.4
	HdrSrc-2_50:4.4
	HdrSrc-2_49:4.4
	HdrSrc-2_48:4.4
	HdrSrc-2_47:4.4
	HdrSrc-2_46-4_247_2_1:4.4.8.1
	XCompile:4.4.0.8
	XCompile_bp:4.4
	HdrSrc-2_46:4.4
	HdrSrc-2_45:4.4
	HdrSrc-2_44:4.4
	HdrSrc-2_43:4.4
	HdrSrc-2_42:4.4
	HdrSrc-2_41:4.4
	HdrSrc-2_40-1:4.4
	HdrSrc-2_40:4.4
	HdrSrc-2_39:4.4
	HdrSrc-2_38:4.4
	HdrSrc-2_37:4.4
	HdrSrc-2_36:4.4
	HdrSrc-2_35:4.4
	HdrSrc-2_34:4.4
	HdrSrc-2_33:4.4
	HdrSrc-2_32:4.4
	HdrSrc-2_31:4.4
	HdrSrc-2_30:4.4
	HdrSrc-2_29:4.4
	HdrSrc-2_28:4.4
	HdrSrc-2_27:4.4
	HdrSrc-2_26:4.4
	HdrSrc-2_25:4.4
	HdrSrc-2_24:4.4
	HdrSrc-2_23:4.4
	HdrSrc-2_22:4.4
	HdrSrc-2_21:4.4
	HdrSrc-2_20:4.4
	HdrSrc-2_19:4.4
	HdrSrc-2_18:4.4
	HdrSrc-2_17:4.4
	HdrSrc-2_16:4.4
	HdrSrc-2_15:4.4
	HdrSrc-2_14:4.4
	HdrSrc-2_13:4.4
	HdrSrc-2_12:4.4
	HdrSrc-2_11:4.4
	HdrSrc-2_10:4.4
	HdrSrc-2_09:4.4
	HdrSrc-2_08:4.4
	HdrSrc-2_07:4.4
	HdrSrc-2_06:4.4
	HdrSrc-2_05:4.4
	HdrSrc-2_04:4.4
	HdrSrc-2_03:4.4
	HdrSrc-2_02:4.4
	HdrSrc-2_01:4.4
	HdrSrc-2_00:4.4
	HdrSrc-1_99:4.4
	HdrSrc-1_98:4.4
	HdrSrc-1_97:4.4
	HdrSrc-1_96:4.4
	HdrSrc-1_95:4.4
	HdrSrc-1_94:4.4
	HdrSrc-1_93:4.4
	HdrSrc-1_92:4.4
	HdrSrc-1_91:4.4
	HdrSrc-1_90:4.4
	HdrSrc-1_89:4.4
	HdrSrc-1_88:4.4
	HdrSrc-1_87:4.4
	HdrSrc-1_86:4.4
	HdrSrc-1_85:4.4
	HdrSrc-1_84:4.4
	HdrSrc-1_83:4.4
	HdrSrc-1_82:4.4
	HdrSrc-1_81:4.4
	HdrSrc-1_80:4.4
	HdrSrc-1_79:4.4
	HdrSrc-1_78:4.4
	HdrSrc-1_77:4.4
	HdrSrc-1_76:4.4
	Cortex_merge:4.4
	HdrSrc-1_62-4_162_2_15:4.4
	HdrSrc-1_75:4.4
	HdrSrc-1_62-4_162_2_14:4.4
	HdrSrc-1_74:4.4
	HdrSrc-1_62-4_162_2_13:4.4
	HdrSrc-1_62-4_162_2_12:4.4
	HdrSrc-1_73:4.4
	HdrSrc-1_72:4.4
	HdrSrc-1_62-4_162_2_11:4.4
	HdrSrc-1_62-4_162_2_10:4.4
	HdrSrc-1_71:4.4
	HdrSrc-1_70:4.4
	HdrSrc-1_69:4.4
	Cortex_bp:4.4
	HdrSrc-1_62-4_162_2_9:4.4
	HdrSrc-1_62-4_162_2_8:4.4
	HdrSrc-1_68:4.4
	HdrSrc-1_62-4_162_2_7:4.4
	HdrSrc-1_62-4_162_2_6:4.4
	HdrSrc-1_62-4_162_2_5:4.4
	HdrSrc-1_62-4_162_2_4:4.4
	HdrSrc-1_67:4.4
	HdrSrc-1_66:4.4
	HdrSrc-1_62-4_162_2_3:4.4
	HdrSrc-1_65:4.4
	HdrSrc-1_64:4.4
	HdrSrc-1_63:4.4
	HdrSrc-1_62-4_162_2_2:4.4
	HdrSrc-1_62-4_162_2_1:4.4
	Cortex:4.4.0.6
	HdrSrc-1_62:4.4
	HdrSrc-1_61:4.4
	HdrSrc-1_60:4.4
	HdrSrc-1_59:4.4
	HdrSrc-1_58:4.4
	HdrSrc-1_57:4.4
	HdrSrc-1_56:4.4
	HdrSrc-1_55:4.4
	HdrSrc-1_54:4.4
	HdrSrc-1_53:4.4
	HdrSrc-1_52:4.4
	HdrSrc-1_51:4.4
	HdrSrc-1_50:4.4
	HdrSrc-1_49:4.4
	HdrSrc-1_48:4.4
	HdrSrc-1_47:4.4
	RO_5_07:4.4
	HdrSrc-1_46:4.4
	HdrSrc-1_45:4.4
	HdrSrc-1_44:4.4
	HdrSrc-1_43:4.4
	HdrSrc-1_42:4.4
	HdrSrc-1_41:4.4
	HdrSrc-1_40:4.4
	HdrSrc-1_39:4.4
	HdrSrc-1_38:4.4
	HdrSrc-1_37:4.4
	HdrSrc-1_36:4.4
	HdrSrc-1_35:4.4
	HdrSrc-1_34:4.4
	HdrSrc-1_33:4.4
	HdrSrc-1_32:4.4
	HdrSrc-1_31:4.4
	HdrSrc-1_30:4.4
	HdrSrc-1_29:4.4
	HdrSrc-1_28:4.4
	HdrSrc-1_27:4.4
	HdrSrc-1_26:4.4
	HdrSrc-1_25:4.4
	HdrSrc-1_24:4.4
	HdrSrc-1_23:4.4
	HdrSrc-1_22:4.4
	HdrSrc-1_21:4.4
	HdrSrc-1_20:4.4
	HdrSrc-1_19:4.4
	HdrSrc-1_18:4.4
	HdrSrc-1_17:4.4
	HdrSrc-1_16:4.4
	HdrSrc-1_15:4.4
	HdrSrc-1_14:4.4
	HdrSrc-1_13:4.4
	HdrSrc-1_12:4.4
	HdrSrc-1_11:4.4
	HdrSrc-0_71-4_72_2_2:4.4
	HdrSrc-1_10:4.4
	HdrSrc-1_09:4.4
	HdrSrc-1_08:4.4
	HdrSrc-1_07:4.4
	HdrSrc-1_06:4.4
	HdrSrc-1_05:4.4
	dellis_autobuild_BaseSW:4.4
	HdrSrc-1_04:4.4
	HdrSrc-1_03:4.4
	HdrSrc-1_02:4.4
	HdrSrc-1_00:4.4
	HdrSrc-0_99:4.4
	HdrSrc-0_71-4_72_2_1:4.4
	Lazarus_Z11:4.4.0.4
	HdrSrc-0_98:4.4
	HdrSrc-0_97:4.4
	HdrSrc-0_95:4.4
	HdrSrc-0_94:4.4
	HdrSrc-0_93:4.4
	HdrSrc-0_92:4.4
	HdrSrc-0_91:4.4
	HdrSrc-0_90:4.4
	HdrSrc-0_89:4.4
	HdrSrc-0_88:4.4
	HdrSrc-0_87:4.4
	HdrSrc-0_86:4.4
	HdrSrc-0_85:4.4
	HdrSrc-0_84:4.4
	HdrSrc-0_83:4.4
	HdrSrc-0_82:4.4
	HdrSrc-0_81:4.4
	HdrSrc-0_80:4.4
	HdrSrc-0_79:4.4
	HdrSrc-0_78:4.4
	HdrSrc-0_77:4.4
	sbrodie_sedwards_16Mar2000:4.4
	HdrSrc-0_76:4.4
	HdrSrc-0_75:4.4
	HdrSrc-0_74:4.4
	HdrSrc-0_73:4.4
	HdrSrc-0_72:4.4
	HdrSrc-0_71:4.4
	HdrSrc-0_70:4.4
	HdrSrc-0_69:4.4
	HdrSrc-0_68:4.4
	HdrSrc-0_67:4.4
	HdrSrc-0_66:4.4
	HdrSrc-0_65:4.4
	HdrSrc-0_64:4.4
	kbracey_32bit_merge:4.4
	HdrSrc-0_63:4.4
	HdrSrc-0_57-4_58_2_9:4.4
	HdrSrc-0_57-4_58_2_8:4.4
	HdrSrc-0_57-4_58_2_7:4.4
	HdrSrc-0_57-4_58_2_6:4.4
	HdrSrc-0_57-4_58_2_5:4.4
	HdrSrc-0_57-4_58_2_4:4.4
	HdrSrc-0_57-4_58_2_3:4.4
	HdrSrc-0_62:4.4
	HdrSrc-0_61:4.4
	HdrSrc-0_60:4.4
	HdrSrc-0_57-4_58_2_2:4.4
	HdrSrc-0_59:4.4
	HdrSrc-0_58:4.4
	HdrSrc-0_57-4_58_2_1:4.4
	kbracey_32bit:4.4.0.2
	HdrSrc-0_57:4.4
	HdrSrc-0_56:4.4
	HdrSrc-0_55:4.4
	HdrSrc-0_54:4.4
	HdrSrc-0_53:4.4
	HdrSrc-0_52:4.4
	HdrSrc-0_51:4.4
	HdrSrc-0_50:4.4
	HdrSrc-0_49:4.4
	HdrSrc-0_48:4.4
	HdrSrc-0_47:4.4
	HdrSrc-0_46:4.4
	HdrSrc-0_45:4.4
	HdrSrc-0_44:4.4
	HdrSrc-0_43:4.4
	HdrSrc-0_42:4.4
	dcotton_autobuild_BaseSW:4.4
	HdrSrc-0_41:4.4
	HdrSrc-0_39:4.4
	HdrSrc-0_38:4.4
	HdrSrc-0_37:4.4
	HdrSrc-0_36:4.4
	HdrSrc-0_35:4.4
	HdrSrc-0_34:4.4
	HdrSrc-0_33:4.4
	HdrSrc-0_32:4.4
	HdrSrc-0_31:4.4
	Ursula_RiscPC_merge:4.3
	HdrSrc-0_30:4.4
	HdrSrc-0_29:4.4
	Ursula_merge:4.3
	HdrSrc-0_28:4.4
	HdrSrc-0_27:4.4
	HdrSrc-0_26:4.4
	HdrSrc-0_25:4.4
	HdrSrc-0_24:4.4
	HdrSrc-0_23:4.4
	HdrSrc-0_22:4.4
	HdrSrc-0_21:4.4
	HdrSrc-0_20:4.4
	HdrSrc-0_19:4.4
	nturton_HdrSrc-0_11:4.4
	HdrSrc-0_18:4.4
	HdrSrc-0_17:4.4
	HdrSrc-0_16:4.4
	HdrSrc-0_15:4.4
	HdrSrc-0_14:4.4
	HdrSrc-0_13:4.4
	HdrSrc-0_12:4.4
	HdrSrc-0_11:4.4
	HdrSrc-0_10:4.4
	HdrSrc-0_09:4.4
	HdrSrc-0_08:4.4
	HdrSrc-0_07:4.4
	mstphens_UrsulaRiscPCBuild_20Nov98:4.3
	Ursula_RiscPC:4.3.0.6
	HdrSrc-0_06:4.4
	HdrSrc-0_05:4.4
	HdrSrc-0_04:4.4
	HdrSrc-0_03:4.4
	HdrSrc-0_02:4.4
	HdrSrc-0_01:4.4
	nicke_HdrSrc_21_9_98:4.4
	nicke_HdrSrc_21_8_98:4.1.7.3
	rthornb_UrsulaBuild-19Aug1998:4.3
	UrsulaBuild_FinalSoftload:4.3
	rthornb_UrsulaBuild-12Aug1998:4.3
	aglover_UrsulaBuild-05Aug1998:4.3
	rthornb_UrsulaBuild-29Jul1998:4.3
	rthornb_UrsulaBuild-22Jul1998:4.3
	rthornb_UrsulaBuild-15Jul1998:4.3
	rthornb_UrsulaBuild-07Jul1998:4.3
	rthornb_UrsulaBuild-17Jun1998:4.3
	afrost_NC2_Generic:4.2
	rthornb_UrsulaBuild-03Jun1998:4.3
	rthornb_UrsulaBuild-27May1998:4.3
	rthornb_UrsulaBuild-21May1998:4.3
	rthornb_UrsulaBuild_01May1998:4.3
	Spinner_B20_2:4.1.7.3
	Spinner_19_3:4.1.7.3
	Spinner_B18:4.1.7.3
	Spinner_B17:4.1.7.3
	Spinner_B15:4.1.7.3
	Spinner_B14:4.1.7.3
	Spinner_B13:4.1.7.3
	Spinner_B12:4.1.7.3
	Spinner_B10:4.1.7.3
	Daytona:4.3.0.4
	Daytona_bp:4.3
	Ursula:4.3.0.2
	Ursula_bp:4.3
	Spinner_B7:4.1.7.3
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_merge:4.1.7.3
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	98.09.04.09.39.35;	author kbracey;	state Exp;
branches
	4.4.8.1;
next	4.3;

4.3
date	97.05.13.15.55.55;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	96.12.17.11.14.33;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.21.29;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.4.8.1
date	2014.09.24.20.51.22;	author bavison;	state Exp;
branches;
next	;
commitid	FLu4L8VxkYPcNDRx;

4.1.1.1
date	96.11.05.09.21.29;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.19.37.21;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.11.36.27;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.19.33.05;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.04.08.11.37.01;	author nturton;	state Exp;
branches;
next	4.1.7.3;

4.1.7.3
date	97.04.21.15.37.31;	author scormie;	state Exp;
branches;
next	;


desc
@@


4.4
log
@Spinner branch merged. Updated to make sure it exports all registration
files.
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
        SUBT    Definition of machines that can run RISC OS Black ==> Hdr:Machine.Black

        GBLS    Machine
Machine SETS    "Morris"

        GET     Hdr:Machine.Machine

        END
@


4.4.8.1
log
@  Cross-compile version of HdrSrc
Detail:
  Mostly a question of changing directory separators and removing reliance
  upon path variables and system variable expansion. One day, when all
  components use the shared makefiles (or at least use the necessary -pd and
  -i switches to objasm), we will be able to switch over to using this
  version for all builds. In the meantime, I have created a new branch for
  the HdrSrc component, called XCompile, to store these changes. The downside
  is the fact that we'll now have to maintain unrelated changes on both
  branches until they can be merged.
Admin:
  Tested by cross-assembling the BASIC module.

Version 2.46, 4.247.2.1. Tagged as 'HdrSrc-2_46-4_247_2_1'
@
text
@d20 1
a20 1
        GET     Machine/Machine
@


4.3
log
@Sorted out NetPodSupport for non-STBs
@
text
@d17 2
a18 2
OldOpt  SETA    {OPT}
        OPT     OptNoList+OptNoP1List
d20 1
a20 7
; ***********************************
; ***    C h a n g e   L i s t    ***
; ***********************************
;
; Date       Name          Description
; ----       ----          -----------
; 06-May-94  RManby        Created from Hdr:Machine.Jordan
a21 177
; CPU type (processor model, excluding cache and memory management)
                GBLS    CPU_Type
CPU_Type        SETS    "ARM600"
                GBLS    GetCPU
GetCPU          SETS    ("GET Hdr:CPU." :CC: "$CPU_Type")

; IO type (non generic interrupt masks, some IO locations)
                GBLS    IO_Type
IO_Type         SETS    "IOMD"
                GBLS    GetIO
GetIO           SETS    ("GET Hdr:IO.IOMDL")

; Video controller - does the sound too
                GBLS    VIDC_Type
VIDC_Type       SETS    "VIDC20"
                GBLS    GetVIDC
GetVIDC         SETS    "GET Hdr:VIDC." :CC: VIDC_Type

; Memory controller, excluding memory management stuff. This
; one deals with memory speeds and DMA
                GBLS    MEMC_Type
MEMC_Type       SETS    "IOMD"
                GBLS    GetMEMC
GetMEMC         SETS    "GET Hdr:IO." :CC: MEMC_Type

                GBLS    MEMM_Type
MEMM_Type       SETS    "ARM600"
                GBLS    GetMEMM
GetMEMM         SETS    "GET Hdr:MEMM.ARM600"

; floppy controller
                GBLS    FDC_Type
FDC_Type        SETS    "FDC711"
                GBLS    GetFDC
GetFDC          SETS    "GET Hdr:FDC." :CC: FDC_Type

                GBLL    NewClockChip
NewClockChip    SETL    {TRUE}

                GBLS    Keyboard_Type
Keyboard_Type   SETS    "PC"

                GBLL    MorrisSupport
MorrisSupport   SETL    {TRUE}

                GBLL    StorkPowerSave
StorkPowerSave  SETL    {TRUE}

SystemROMspeed  * 156                           ;ROM speed in nS
BurstROMspeed   * 93                            ;ROM burst speed in nS. 0 = no burst mode

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		Options for STB/NCD builds
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; General flag for STB/NCD-type products
		GBLL	STB
STB		SETL	{FALSE}

; Various STB options. Don't turn any on without first checking the sources!
; Support for battery manager hardware
		GBLL	BatManSupport
BatManSupport	SETL	{FALSE} :LAND: StorkPowerSave :LAND: STB

; Podule type of hardware in podule 0 address space
; number taken from Hdr:PoduleReg, or 0 if podule0 slot is a real slot.
		GBLA	FakePodule0
FakePodule0	SETA	0

; Support for network 'podule' cards
		GBLL	NetPodSupport
NetPodSupport	SETL	{TRUE} :LAND::LNOT: STB

; Support for extension ROMs in 2nd bank
		GBLL	ExtROMSupport
ExtROMSupport	SETL	{TRUE} :LAND: STB

; Support for OS images in 2nd ROM bank
		GBLL	ROMCardSupport
ROMCardSupport	SETL	{TRUE} :LAND: STB

; Support for being an OS image in 2nd ROM bank
		GBLL	CanLiveOnROMCard
CanLiveOnROMCard	SETL	ROMCardSupport :LAND: {TRUE} :LAND: STB

; 2nd ROM bank is 16bit wide
		GBLL	ExtROMis16bit
ExtROMis16bit	SETL	{FALSE} :LAND: STB

; E2ROM is supported at i2c addresses >= A8 in addition to normal CMOS RAM
		GBLL	E2ROMSupport
E2ROMSupport	SETL	{TRUE} :LAND: STB

; Support for 82C710 and 82C711 combo chips in addition to 665
		GBLL	OldComboSupport
OldComboSupport	SETL	{FALSE} :LAND: STB

; Whether combo chip should be configured for active high interrupts
		GBLL	ComboIRQsActiveHigh
ComboIRQsActiveHigh SETL {TRUE} :LAND: STB		; active high on NC

; Address of NTSC/not PAL flag, if on MPEG podule rather than CLINES, else 0

		GBLA	MPEGPoduleNTSCNotPALAddress
MPEGPoduleNTSCNotPALAddress SETA	0	; it's in CLINES

; Bit mask for above (0 if not applicable)

		GBLA	MPEGPoduleNTSCNotPALMask
MPEGPoduleNTSCNotPALMask	SETA	0	; it's in CLINES

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		Allocation of bits in 8bit I/O port at IOMD_CLINES
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; Onboard podule 0 MPEG bit, 0 if bit not present
		GBLA	IOMD_C_MPEGfitted
IOMD_C_MPEGfitted	SETA	(1<<0)

; Front panel Red LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelRedLED
IOMD_C_FrontPanelRedLED	SETA	(1<<1)

; Front panel Green LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelGrnLED
IOMD_C_FrontPanelGrnLED	SETA	(1<<2)

; CD fitted bit. 0=fitted
		GBLA	IOMD_C_CDfitted
IOMD_C_CDfitted		SETA	(1<<4)

; Joystick type bits in IOMD, or 0 if bits not present
		GBLA	IOMD_C_JoystickDetectBits
IOMD_C_JoystickDetectBits	SETA	(2_11<<5)

; Watchdog Write bit.
		GBLA	IOMD_C_Watchdog
IOMD_C_Watchdog		SETA	(1<<7)


; MonitorTypeLatch, or 0 if latch not present
		GBLA	IOMD_C_MonitorType
IOMD_C_MonitorType	SETA	0

; ROM Card Vpp control, or 0 if bit not present
		GBLA	IOMD_C_ROMCardVpp
IOMD_C_ROMCardVpp	SETA	0

; TVMode Write bit, or 0 if bit not present
		GBLA	IOMD_C_TVMode
IOMD_C_TVMode		SETA	0

; General IO bit
		GBLA	IOMD_C_GenIO
IOMD_C_GenIO		SETA	0

; PAL/NTSC bit, or 0 if bit not present
		GBLA	IOMD_C_PALNTSCType
IOMD_C_PALNTSCType	SETA	0

; Interlace phase bit in IOMD, or 0 if bit not present
		GBLA	IOMD_C_PhaseDetectBit
IOMD_C_PhaseDetectBit	SETA	0

; Front panel button. 0=pressed
		GBLA	IOMD_C_FrontPanelButton
IOMD_C_FrontPanelButton	SETA	0

; Front panel LED Write bit. 1=red, 0=green
		GBLA	IOMD_C_FrontPanelLED
IOMD_C_FrontPanelLED	SETA	0

; Mask of all the readable bits
		GBLA	IOMD_C_ReadMask
IOMD_C_ReadMask	SETA	(IOMD_C_MPEGfitted :OR: IOMD_C_MonitorType :OR: IOMD_C_GenIO :OR: IOMD_C_CDfitted :OR: IOMD_C_PALNTSCType :OR: IOMD_C_PhaseDetectBit :OR: IOMD_C_JoystickDetectBits :OR: IOMD_C_FrontPanelButton)

        OPT     OldOpt
@


4.2
log
@New version of HdrSrc introduced
@
text
@d99 1
a99 1
NetPodSupport	SETL	{FALSE} :LAND: STB
@


4.1
log
@Initial revision
@
text
@d76 128
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a26 7
;  6-Jan-95  JHarris       Updated with STB/NCD-type options
; 30-May-96  SMC           Added SystemName
; 15-Jul-96  JRH           Added ROMCardSupport, CanLiveOnROMCard
;                          and IOMD_C_ROMCardVpp,

                GBLS    SystemName
SystemName      SETS    "RISC OS"
a74 113

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		System build options added for STB/NCD 
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; General flag for STB/NCD-type products
		GBLL	STB
STB		SETL	{FALSE}

; Support for battery manager hardware
		GBLL	BatManSupport
BatManSupport	SETL	{TRUE} :LAND: StorkPowerSave

; Podule type of hardware in podule 0 address space
; number taken from Hdr:PoduleReg, or 0 if podule0 slot is a real slot.
		GBLA	FakePodule0
FakePodule0	SETA	0

; Support for network 'podule' cards
		GBLL	NetPodSupport
NetPodSupport	SETL	{TRUE}

; Support for extension ROMs in 2nd bank
		GBLL	ExtROMSupport
ExtROMSupport	SETL	{FALSE}

; Support for OS images in 2nd bank
		GBLL	ROMCardSupport
ROMCardSupport	SETL	{FALSE}

; Support for being an OS image in 2nd ROM bank
		GBLL	CanLiveOnROMCard
CanLiveOnROMCard	SETL	ROMCardSupport :LAND: {FALSE}

; 2nd ROM bank is 16bit wide
		GBLL	ExtROMis16bit
ExtROMis16bit	SETL	{TRUE}

; E2ROM is supported at i2c addresses >= A8 in addition to normal CMOS RAM
		GBLL	E2ROMSupport
E2ROMSupport	SETL	{FALSE}

; Support for 82C710 and 82C711 combo chips in addition to 665
		GBLL	OldComboSupport
OldComboSupport	SETL	{FALSE}


; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		Allocation of bits in 8bit I/O port at IOMD_CLINES
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; MonitorTypeLatch, or 0 if latch not present
		GBLA	IOMD_C_MonitorType
IOMD_C_MonitorType	SETA	(1<<0)

; ROM Card Vpp control, or 0 if bit not present
		GBLA	IOMD_C_ROMCardVpp
IOMD_C_ROMCardVpp	SETA	0

; TVMode Write bit, or 0 if bit not present
		GBLA	IOMD_C_TVMode
IOMD_C_TVMode		SETA	0

; General IO bit
		GBLA	IOMD_C_GenIO
IOMD_C_GenIO		SETA	0

; PAL/NTSC bit, or 0 if bit not present
		GBLA	IOMD_C_PALNTSCType
IOMD_C_PALNTSCType	SETA	0

; Interlace phase bit in IOMD, or 0 if bit not present
		GBLA	IOMD_C_PhaseDetectBit
IOMD_C_PhaseDetectBit	SETA	0

; Front panel button. 0=pressed
		GBLA	IOMD_C_FrontPanelButton
IOMD_C_FrontPanelButton	SETA	0

; Front panel Write bit. 1=red, 0=green
		GBLA	IOMD_C_FrontPanelLED
IOMD_C_FrontPanelLED	SETA	0


; Onboard podule 0 MPEG bit, 0 if bit not present
		GBLA	IOMD_C_MPEGfitted
IOMD_C_MPEGfitted	SETA	0

; Front panel Red LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelRedLED
IOMD_C_FrontPanelRedLED	SETA	0

; Front panel Green LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelGrnLED
IOMD_C_FrontPanelGrnLED	SETA	0

; CD fitted bit. 0=fitted
		GBLA	IOMD_C_CDfitted
IOMD_C_CDfitted		SETA	0

; Joystick type bits in IOMD, or 0 if bits not present
		GBLA	IOMD_C_JoystickDetectBits
IOMD_C_JoystickDetectBits	SETA	0

; Watchdog Write bit.
		GBLA	IOMD_C_Watchdog
IOMD_C_Watchdog		SETA	0


; Mask of all the readable bits
		GBLA	IOMD_C_ReadMask
IOMD_C_ReadMask	SETA	(IOMD_C_MPEGfitted :OR: IOMD_C_MonitorType :OR: IOMD_C_GenIO :OR: IOMD_C_CDfitted :OR: IOMD_C_PALNTSCType :OR: IOMD_C_PhaseDetectBit :OR: IOMD_C_JoystickDetectBits :OR: IOMD_C_FrontPanelButton)

@


4.1.7.2
log
@New version imported from TRUNK
@
text
@d27 7
a82 3
SystemROMspeed  * 156                           ;ROM speed in nS
BurstROMspeed   * 93                            ;ROM burst speed in nS. 0 = no burst mode

d84 1
a84 1
;		Options for STB/NCD builds
a90 1
; Various STB options. Don't turn any on without first checking the sources!
d93 1
a93 1
BatManSupport	SETL	{FALSE} :LAND: StorkPowerSave :LAND: STB
d102 1
a102 1
NetPodSupport	SETL	{FALSE} :LAND: STB
d106 1
a106 1
ExtROMSupport	SETL	{TRUE} :LAND: STB
d108 1
a108 1
; Support for OS images in 2nd ROM bank
d110 1
a110 1
ROMCardSupport	SETL	{TRUE} :LAND: STB
d114 1
a114 1
CanLiveOnROMCard	SETL	ROMCardSupport :LAND: {TRUE} :LAND: STB
d118 1
a118 1
ExtROMis16bit	SETL	{FALSE} :LAND: STB
d122 1
a122 1
E2ROMSupport	SETL	{TRUE} :LAND: STB
d126 1
a126 12
OldComboSupport	SETL	{FALSE} :LAND: STB

; Whether combo chip should be configured for active high interrupts
		GBLL	ComboIRQsActiveHigh
ComboIRQsActiveHigh SETL {TRUE} :LAND: STB		; active high on NC

; Address of NTSC/not PAL flag, if on MPEG podule rather than CLINES, else 0

		GBLA	MPEGPoduleNTSCNotPALAddress
MPEGPoduleNTSCNotPALAddress SETA	0	; it's in CLINES

; Bit mask for above (0 if not applicable)
a127 2
		GBLA	MPEGPoduleNTSCNotPALMask
MPEGPoduleNTSCNotPALMask	SETA	0	; it's in CLINES
a132 25
; Onboard podule 0 MPEG bit, 0 if bit not present
		GBLA	IOMD_C_MPEGfitted
IOMD_C_MPEGfitted	SETA	(1<<0)

; Front panel Red LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelRedLED
IOMD_C_FrontPanelRedLED	SETA	(1<<1)

; Front panel Green LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelGrnLED
IOMD_C_FrontPanelGrnLED	SETA	(1<<2)

; CD fitted bit. 0=fitted
		GBLA	IOMD_C_CDfitted
IOMD_C_CDfitted		SETA	(1<<4)

; Joystick type bits in IOMD, or 0 if bits not present
		GBLA	IOMD_C_JoystickDetectBits
IOMD_C_JoystickDetectBits	SETA	(2_11<<5)

; Watchdog Write bit.
		GBLA	IOMD_C_Watchdog
IOMD_C_Watchdog		SETA	(1<<7)


d135 1
a135 1
IOMD_C_MonitorType	SETA	0
d161 1
a161 1
; Front panel LED Write bit. 1=red, 0=green
d165 26
d194 1
@


4.1.7.3
log
@Now uses a single Machine header which is included by individual machine
specific header files (at present these just set the global variable
"Machine").
@
text
@d17 2
a18 2
        GBLS    Machine
Machine SETS    "Morris"
d20 7
a26 1
        GET     Hdr:Machine.Machine
d28 177
@


4.1.5.1
log
@Import from SrcFiler
@
text
@a26 9
;  6-Jan-95  JHarris       Updated with STB/NCD-type options
; 30-May-96  SMC           Added SystemName
; 15-Jul-96  JRH           Added ROMCardSupport, CanLiveOnROMCard
;                          and IOMD_C_ROMCardVpp,
; 31-Oct-96  TMD	   Added ComboIRQsActiveHigh
; 04-Nov-96  TMD	   Added MPEGPoduleNTSCNotPALAddress, MPEGPoduleNTSCNotPALMask

                GBLS    SystemName
SystemName      SETS    "RISC OS"
a74 126

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		System build options added for STB/NCD 
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; General flag for STB/NCD-type products
		GBLL	STB
STB		SETL	{FALSE}

; Support for battery manager hardware
		GBLL	BatManSupport
BatManSupport	SETL	{TRUE} :LAND: StorkPowerSave

; Podule type of hardware in podule 0 address space
; number taken from Hdr:PoduleReg, or 0 if podule0 slot is a real slot.
		GBLA	FakePodule0
FakePodule0	SETA	0

; Support for network 'podule' cards
		GBLL	NetPodSupport
NetPodSupport	SETL	{TRUE}

; Support for extension ROMs in 2nd bank
		GBLL	ExtROMSupport
ExtROMSupport	SETL	{FALSE}

; Support for OS images in 2nd bank
		GBLL	ROMCardSupport
ROMCardSupport	SETL	{FALSE}

; Support for being an OS image in 2nd ROM bank
		GBLL	CanLiveOnROMCard
CanLiveOnROMCard	SETL	ROMCardSupport :LAND: {FALSE}

; 2nd ROM bank is 16bit wide
		GBLL	ExtROMis16bit
ExtROMis16bit	SETL	{TRUE}

; E2ROM is supported at i2c addresses >= A8 in addition to normal CMOS RAM
		GBLL	E2ROMSupport
E2ROMSupport	SETL	{FALSE}

; Support for 82C710 and 82C711 combo chips in addition to 665
		GBLL	OldComboSupport
OldComboSupport	SETL	{FALSE}

; Whether combo chip should be configured for active high interrupts
		GBLL	ComboIRQsActiveHigh
ComboIRQsActiveHigh SETL {FALSE}		; active low on A7000

; Address of NTSC/not PAL flag, if on MPEG podule rather than CLINES, else 0

		GBLA	MPEGPoduleNTSCNotPALAddress
MPEGPoduleNTSCNotPALAddress SETA	0	; no NTSC/PAL detect

; Bit mask for above (0 if not applicable)

		GBLA	MPEGPoduleNTSCNotPALMask
MPEGPoduleNTSCNotPALMask	SETA	0	; no NTSC/PAL detect

; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;		Allocation of bits in 8bit I/O port at IOMD_CLINES
; ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

; MonitorTypeLatch, or 0 if latch not present
		GBLA	IOMD_C_MonitorType
IOMD_C_MonitorType	SETA	(1<<0)

; ROM Card Vpp control, or 0 if bit not present
		GBLA	IOMD_C_ROMCardVpp
IOMD_C_ROMCardVpp	SETA	0

; TVMode Write bit, or 0 if bit not present
		GBLA	IOMD_C_TVMode
IOMD_C_TVMode		SETA	0

; General IO bit
		GBLA	IOMD_C_GenIO
IOMD_C_GenIO		SETA	0

; PAL/NTSC bit, or 0 if bit not present
		GBLA	IOMD_C_PALNTSCType
IOMD_C_PALNTSCType	SETA	0

; Interlace phase bit in IOMD, or 0 if bit not present
		GBLA	IOMD_C_PhaseDetectBit
IOMD_C_PhaseDetectBit	SETA	0

; Front panel button. 0=pressed
		GBLA	IOMD_C_FrontPanelButton
IOMD_C_FrontPanelButton	SETA	0

; Front panel Write bit. 1=red, 0=green
		GBLA	IOMD_C_FrontPanelLED
IOMD_C_FrontPanelLED	SETA	0


; Onboard podule 0 MPEG bit, 0 if bit not present
		GBLA	IOMD_C_MPEGfitted
IOMD_C_MPEGfitted	SETA	0

; Front panel Red LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelRedLED
IOMD_C_FrontPanelRedLED	SETA	0

; Front panel Green LED Write bit, or 0 if bit not present
		GBLA	IOMD_C_FrontPanelGrnLED
IOMD_C_FrontPanelGrnLED	SETA	0

; CD fitted bit. 0=fitted
		GBLA	IOMD_C_CDfitted
IOMD_C_CDfitted		SETA	0

; Joystick type bits in IOMD, or 0 if bits not present
		GBLA	IOMD_C_JoystickDetectBits
IOMD_C_JoystickDetectBits	SETA	0

; Watchdog Write bit.
		GBLA	IOMD_C_Watchdog
IOMD_C_Watchdog		SETA	0


; Mask of all the readable bits
		GBLA	IOMD_C_ReadMask
IOMD_C_ReadMask	SETA	(IOMD_C_MPEGfitted :OR: IOMD_C_MonitorType :OR: IOMD_C_GenIO :OR: IOMD_C_CDfitted :OR: IOMD_C_PALNTSCType :OR: IOMD_C_PhaseDetectBit :OR: IOMD_C_JoystickDetectBits :OR: IOMD_C_FrontPanelButton)

@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a75 3
SystemROMspeed  * 156                           ;ROM speed in nS
BurstROMspeed   * 93                            ;ROM burst speed in nS. 0 = no burst mode

@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
