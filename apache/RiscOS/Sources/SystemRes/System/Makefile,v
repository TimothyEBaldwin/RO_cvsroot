head	4.26;
access;
symbols
	System-1_00:4.26
	System-0_99:4.25
	System-0_98:4.25
	System-0_97:4.24
	System-0_96:4.23
	System-0_95:4.22
	System-0_94:4.22
	System-0_93:4.21
	System-0_92:4.20
	System-0_91:4.19
	System-0_90:4.18
	System-0_89:4.16
	System-0_88:4.14
	System-0_87:4.13
	System-0_86:4.12
	System-0_85:4.11
	System-0_07:4.10
	System-0_06:4.9
	System-0_05:4.8
	System-0_04:4.7
	System-0_03:4.7
	System-0_02:4.6
	mstphens_UrsulaRiscPCBuild_20Nov98:4.4
	Ursula_RiscPC:4.4.0.4
	rthornb_UrsulaBuild-19Aug1998:4.4
	UrsulaBuild_FinalSoftload:4.4
	rthornb_UrsulaBuild-12Aug1998:4.4
	Ursula:4.4.0.2
	Ursula_bp:4.4
	Ursula_12Aug1998_bp:4.3
	Ursula_12Aug1998:4.3.0.4
	aglover_UrsulaBuild-05Aug1998:4.3
	rthornb_UrsulaBuild-29Jul1998:4.3
	rthornb_UrsulaBuild-22Jul1998:4.3
	rthornb_UrsulaBuild-15Jul1998:4.3
	rthornb_UrsulaBuild-07Jul1998:4.3
	rthornb_UrsulaBuild-17Jun1998:4.3
	rthornb_UrsulaBuild-03Jun1998:4.3
	rthornb_UrsulaBuild-27May1998:4.3
	rthornb_UrsulaBuild-21May1998:4.3
	rthornb_UrsulaBuild_01May1998:4.3
	Daytona:4.3.0.6
	Daytona_bp:4.3
	RO_3_71:4.1.3.2
	ART_bp:4.3
	ART:4.3.0.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.26
date	2017.05.07.12.15.35;	author rsprowson;	state Exp;
branches;
next	4.25;
commitid	RmdW8MoL13y8dsQz;

4.25
date	2015.01.04.11.05.29;	author rsprowson;	state Exp;
branches;
next	4.24;
commitid	4cM8cp0BU4A1hH4y;

4.24
date	2013.09.28.08.53.38;	author rsprowson;	state Exp;
branches;
next	4.23;
commitid	q1EqDJKuwyNuqb7x;

4.23
date	2013.05.09.20.38.50;	author rsprowson;	state Exp;
branches;
next	4.22;
commitid	0CjKhOF6DzLpTZOw;

4.22
date	2013.05.04.07.12.05;	author rsprowson;	state Exp;
branches;
next	4.21;
commitid	OquVy46s0QlCAhOw;

4.21
date	2013.04.15.21.08.03;	author rsprowson;	state Exp;
branches;
next	4.20;
commitid	n9rU91efWvUgPULw;

4.20
date	2012.09.19.10.58.21;	author rsprowson;	state Exp;
branches;
next	4.19;
commitid	7jHVH3QEe5jD88lw;

4.19
date	2012.09.16.10.36.27;	author rsprowson;	state Exp;
branches;
next	4.18;
commitid	SO65rgeYQ8267Kkw;

4.18
date	2012.09.02.11.57.35;	author rsprowson;	state Exp;
branches;
next	4.17;
commitid	WGdc9MGpL8Bn0Xiw;

4.17
date	2012.09.01.13.34.12;	author rsprowson;	state Exp;
branches;
next	4.16;
commitid	bQx3rrtaCI0YzPiw;

4.16
date	2012.08.31.22.11.42;	author bavison;	state Exp;
branches;
next	4.15;
commitid	ftI1w5i0cc1vtKiw;

4.15
date	2012.08.28.20.18.52;	author rsprowson;	state Exp;
branches;
next	4.14;
commitid	EbeKy1Z30AQLWliw;

4.14
date	2012.07.22.19.16.52;	author rsprowson;	state Exp;
branches;
next	4.13;
commitid	yOCT0xPDJFweNAdw;

4.13
date	2012.07.21.19.28.19;	author rsprowson;	state Exp;
branches;
next	4.12;
commitid	Ef02owkZemq8Tsdw;

4.12
date	2012.07.19.18.34.41;	author rsprowson;	state Exp;
branches;
next	4.11;
commitid	C7YMdR0xo1QAEcdw;

4.11
date	2012.07.15.17.38.02;	author rsprowson;	state Exp;
branches;
next	4.10;
commitid	cuupWRTeYakhtGcw;

4.10
date	2012.01.07.10.47.48;	author rsprowson;	state Exp;
branches;
next	4.9;
commitid	jaUH1Mknf6XbjeOv;

4.9
date	2012.01.06.22.36.29;	author rsprowson;	state Exp;
branches;
next	4.8;
commitid	XThX5jkpjaCigaOv;

4.8
date	2009.06.26.01.28.50;	author bavison;	state Exp;
branches;
next	4.7;

4.7
date	2003.03.22.20.20.02;	author srevill;	state Exp;
branches;
next	4.6;

4.6
date	99.11.22.12.08.14;	author sbrodie;	state Exp;
branches;
next	4.5;

4.5
date	99.10.04.14.42.28;	author sbrodie;	state Exp;
branches;
next	4.4;

4.4
date	98.08.10.13.11.50;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	97.05.08.13.42.16;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.05.06.18.04.17;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.54.16;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1;
next	;

4.1.1.1
date	96.11.05.09.54.16;	author nturton;	state Exp;
branches
	4.1.1.1.2.1;
next	;

4.1.1.1.2.1
date	97.04.24.14.45.36;	author kbracey;	state Exp;
branches;
next	4.1.1.1.2.2;

4.1.1.1.2.2
date	97.04.24.15.14.31;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.04.01.13;	author nturton;	state Exp;
branches
	4.1.3.1.2.1;
next	4.1.3.2;

4.1.3.2
date	97.05.06.17.58.25;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1.2.1
date	97.04.30.18.48.51;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.26
log
@Remove BorderUtils binary
Now installed from BorderUtils component.

Version 1.00. Tagged as 'System-1_00'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for System
#

COMPONENT  = System
APP        = !${COMPONENT}
RDIR       = Resources
INSTAPP    = ${INSTDIR}.${APP}

include StdTools

#
# Static dependencies
#
MODULES =                             \
      310.Modules.310Support.icons    \
      310.Modules.310Support.icons22  \
      310.Modules.310Support.ThreeTen \
      310.Modules.Network.MManager    \
      310.Modules.ABCLib              \
      310.Modules.SerialUtil          \
      350.Modules.Fonts               \

FILES =                       \
      LocalRes:!Help          \
      ${RDIR}.!Boot           \
      ${RDIR}.!Run            \
      ${RDIR}.SysPaths        \

#
# Main rules:
#
install: ${FILES} ${MODULES} install_sprites
        ${MKDIR} ${INSTAPP}
        ${CP} LocalRes:!Help            ${INSTAPP}.!Help      ${CPFLAGS}
        ${RM} ${INSTAPP}.!Run
        ${AWK} -f Build:AwkVers obeymode=1 < ${RDIR}.!Run > ${INSTAPP}.!Run
        ${SETTYPE} ${INSTAPP}.!Run Obey
        ${CP} ${RDIR}.SysPaths          ${INSTAPP}.SysPaths   ${CPFLAGS}
        ${CP} ${RDIR}.!Boot             ${INSTAPP}.!Boot      ${CPFLAGS}
        |
        ${MKDIR} ${INSTAPP}.310.Modules.310Support
        ${CP} 310.Modules.310Support.icons    ${INSTAPP}.310.Modules.310Support.* ${CPFLAGS}
        ${CP} 310.Modules.310Support.icons22  ${INSTAPP}.310.Modules.310Support.* ${CPFLAGS}
        ${CP} 310.Modules.310Support.ThreeTen ${INSTAPP}.310.Modules.310Support.* ${CPFLAGS}
        |
        ${CP} 310.Modules.ABCLib              ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SerialUtil          ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${MKDIR} ${INSTAPP}.310.Modules.Network
        ${CP} 310.Modules.Network.MManager    ${INSTAPP}.310.Modules.Network.* ${CPFLAGS}
        |
        ${MKDIR} ${INSTAPP}.350.Modules
        ${CP} 350.Modules.Fonts               ${INSTAPP}.350.Modules.* ${CPFLAGS}
        |
        ${CHMOD} -R 755 ${INSTAPP}
        |
        @@${ECHO} ${COMPONENT}: All installed (Disc)

ifeq (${USERIF},None)
install_sprites:
        ${NOP}
else
install_sprites:
        ${MKDIR} ${INSTAPP}.Themes
        ${CP} LocalUserIFRes:!Sprites   ${INSTAPP}.Themes.!Sprites   ${CPFLAGS}
        ${CP} LocalUserIFRes:!Sprites11 ${INSTAPP}.Themes.!Sprites11 ${CPFLAGS}
        ${CP} LocalUserIFRes:!Sprites22 ${INSTAPP}.Themes.!Sprites22 ${CPFLAGS}
        ${CP} ${RDIR}.Ursula.${LOCALE}  ${INSTAPP}.Themes.Ursula     ${CPFLAGS}
        ${CP} ${RDIR}.Morris4.${LOCALE} ${INSTAPP}.Themes.Morris4    ${CPFLAGS}
endif

clean:
        @@${ECHO} ${COMPONENT}: cleaned

#---------------------------------------------------------------------------
# Dynamic dependencies:
@


4.25
log
@Remove AUNMsgs binary, now generated from source

Version 0.98. Tagged as 'System-0_98'
@
text
@a33 1
      310.Modules.BorderUtil          \
a58 1
        ${CP} 310.Modules.BorderUtil          ${INSTAPP}.310.Modules.* ${CPFLAGS}
d70 1
a70 1
        @@echo ${COMPONENT}: All installed (Disc)
d74 1
a74 1
        @@|
d86 1
a86 1
        @@echo ${COMPONENT}: cleaned
@


4.24
log
@Add 26 bit MbufManager to !System
Referred to from !Internet.!Run, but as the sources to MbufManager aren't yet published we can't build a 26 bit version from the latest sources. Instead, import version 0.17 scraped off a disc from 1996.

Version 0.97. Tagged as 'System-0_97'
@
text
@a31 1
      310.Modules.Network.AUNMsgs     \
a64 1
        ${CP} 310.Modules.Network.AUNMsgs     ${INSTAPP}.310.Modules.Network.* ${CPFLAGS}
@


4.23
log
@Import of contemporary AUNMsgs module
Looked for by !InetSetup on running, not always in ROM on early machines.

Version 0.96. Tagged as 'System-0_96'
@
text
@d33 1
d67 1
@


4.22
log
@Remove Wimp binaries
Built from source in BuildSys-6_14.

Version 0.94. Tagged as 'System-0_94'
@
text
@d32 1
d64 2
@


4.21
log
@Makefile ammended to not give up when USERIF=None
For generating !System we are careful to not include any sprites (because these would override the ones on the user's system which may not match the default USERIF for the build), this is achieved by locally passing in USERIF=None.
However, this then stops the install rule because it expands and fails to find a directory called 'None'.
* New dummy target created for install_sprites (as opposed to lots of IfThere commands)
* !Boot no longer iconsprites since it only calls !Run which does the same
* Removed !Mk as the all target did nothing useful

Version 0.93. Tagged as 'System-0_93'
@
text
@a34 2
      310.Modules.Wimp                \
      350.Modules.Wimp                \
a35 2
      360.Modules.Wimp                \
      370.Modules.Wimp                \
a63 1
        ${MKDIR} ${INSTAPP}.310.Modules
a64 4
        ${MKDIR} ${INSTAPP}.360.Modules
        ${MKDIR} ${INSTAPP}.370.Modules
        ${CP} 310.Modules.Wimp                ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 350.Modules.Wimp                ${INSTAPP}.350.Modules.* ${CPFLAGS}
a65 2
        ${CP} 360.Modules.Wimp                ${INSTAPP}.360.Modules.* ${CPFLAGS}
        ${CP} 370.Modules.Wimp                ${INSTAPP}.370.Modules.* ${CPFLAGS}
@


4.20
log
@Install alternate !System icons
To save a little disc space the default is the RISC OS 5 cream colour folder, hence only the deltas (Ursula and Morris4) are needed.
Also, !Boot moved out of UK directory.

Version 0.92. Tagged as 'System-0_92'
@
text
@a16 22
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date           Name   Description
# ----           ----   -----------
# 08-Nov-94      AMcC Updated for Black build
# 15th Nov 1994  JRC  Added SysPaths utility, replaced old 'abs' and 'rm'
#                     directories with a 'Modules' drectory. New 'abs'
#                     directory used to build SysPaths in
# 30-Jan-95      AMcC No longer installs 'recent' modules in 'Modules'
#                     Installs 360.Modules
# 31-Jan-95      AMcC No longer installs !Sprites23. Modules writable by owner
#
# 03-Jul-96      KJB  Added 370 directory
#
# 24-Apr-97      KJB  Made all copies file-by-file to prevent copying CVS
#                     directories. Removed 200 and 300 directories.
#                     Made SysPaths set Boot$OSVersion if not already set,
#                     and correct "3.50" to "350".
# 10-Aug-98      SNB  Added DDEUtils source and removed binary imports.
# 04-Oct-99      SNB  Removed dependency on Support lib.
# 22-Nov-99      SNB  Removed DDEUtils: now in RiscOS/Sources/Programmer/DDEUtils
a17 3
#
# Program specific options:
#
d26 1
a26 1
# Include files
d50 1
a50 4
all: ${FILES}
        @@echo ${COMPONENT}: All built (Disc)

install: ${FILES} ${MODULES}
a58 7
        ${MKDIR} ${INSTAPP}.Themes
        ${CP} LocalUserIFRes:!Sprites   ${INSTAPP}.Themes.!Sprites   ${CPFLAGS}
        ${CP} LocalUserIFRes:!Sprites11 ${INSTAPP}.Themes.!Sprites11 ${CPFLAGS}
        ${CP} LocalUserIFRes:!Sprites22 ${INSTAPP}.Themes.!Sprites22 ${CPFLAGS}
        ${CP} ${RDIR}.Ursula.${LOCALE}  ${INSTAPP}.Themes.Ursula     ${CPFLAGS}
        ${CP} ${RDIR}.Morris4.${LOCALE} ${INSTAPP}.Themes.Morris4    ${CPFLAGS}
        |
d82 13
@


4.19
log
@Blending font manager added
For RISC OS 3.50 and 3.60.

Version 0.91. Tagged as 'System-0_91'
@
text
@a66 1
      LocalRes:!Boot          \
d68 1
a79 1
        ${CP} LocalRes:!Boot            ${INSTAPP}.!Boot      ${CPFLAGS}
a83 3
        IfThere LocalUserIFRes:!Sprites   then ${CP} LocalUserIFRes:!Sprites   ${INSTAPP}.!Sprites   ${CPFLAGS}
        IfThere LocalUserIFRes:!Sprites11 then ${CP} LocalUserIFRes:!Sprites11 ${INSTAPP}.!Sprites11 ${CPFLAGS}
        IfThere LocalUserIFRes:!Sprites22 then ${CP} LocalUserIFRes:!Sprites22 ${INSTAPP}.!Sprites22 ${CPFLAGS}
d85 8
@


4.18
log
@Build fix fix
See changelog for revision 4.16.
This had the problem that this component is just a container and a lot of extra stuff is deposited on top later in the install process.
Result was that anything alphabetically earlier in the components file got deleted!
@
text
@d62 1
d105 1
@


4.17
log
@Shelve ScreenFX binary, now built from sources

Version 0.90. Tagged as 'System-0_90'
@
text
@a77 1
	${WIPE} ${INSTAPP} ${WFLAGS}
d81 1
@


4.16
log
@  Build fix
Detail:
  Install rule could only be run once because the redirection of the output
  of awk failed because the file already existed and was read-only. Fixed by
  wiping the destination directory before we start.
Admin:
  Checked in a disc build.

Retagged as 'System-0_89'

Version 0.89. Not tagged
@
text
@a61 1
      360.Modules.ScreenFX            \
a97 3
        ${MKDIR} ${INSTAPP}.360.Modules.Video
        ${CP} 360.Modules.ScreenFX            ${INSTAPP}.360.Modules.Video.* ${CPFLAGS}
        |
@


4.15
log
@Add ScreenFX to !System
Required by !SwiftJPEG, but generally useful, and included on ROOL USB sticks. Binary import required as ScreenFX is based in part on some unreleased library code.

Version 0.89. Tagged as 'System-0_89'
@
text
@d79 1
@


4.14
log
@Remember to copy Wimp 3.98 into the install dir
Recovered BorderUtil too, ThreeTen refers to it
Retagged.

Version 0.88. Not tagged
@
text
@d59 1
d62 1
a64 1
      310.Modules.SerialUtil          \
d98 3
@


4.13
log
@Add binaries of nested window manager for 350/360/370
Fixes boot problem where *WIMPMODE doesn't accept mode specifiers

Version 0.87. Tagged as 'System-0_87'
@
text
@d58 1
d77 1
a77 1
install: ${FILES}
d92 1
d95 6
d102 3
a104 1
        ${CP} 310.Modules.SerialUtil          ${INSTAPP}.310.Modules.* ${CPFLAGS}
@


4.12
log
@Implement less harsh equivalent of UnplugTBox
The toolbox is considered as an important system component, like the CLibrary and FPEmulator, and it also doesn't support hot swapping once clients are registered.
Previously the BASIC program UnplugTBox would brutally unplug the ROM copy then softload the (newer) disc based ones, leaving you with no toolbox in the event of a failed boot.
Instead, we RMEnsure a vaguely coherent set (from the age of the browser development). Pretty much anything post RISC OS 4.00 will stick with the ROM copy.
Added binary of nested Window Manager.
Removed BorderUtils (the nested Window Manager obsoletes this).

Version 0.86. Tagged as 'System-0_86'
@
text
@d59 3
@


4.11
log
@Auto-insert version number into !Run
Requires Library-1_56.
Version number bumped up to match previous hand inserted value.

Version 0.85. Tagged as 'System-0_85'
@
text
@d58 1
a58 1
      310.Modules.BorderUtil          \
a84 1
        |
d88 1
d90 1
a90 1
        ${CP} 310.Modules.BorderUtil          ${INSTAPP}.310.Modules.* ${CPFLAGS}
@


4.10
log
@Change the copying of LocalUserIFRes:!Sprites to be conditional on whether it exists or not.
Allows building with a bogus UserIF name to get no sprites at all (when !System might be being merged with machines of a different UserIF you don't want to opressively stomp on their sprites).

Version 0.07. Tagged as 'System-0_07'
@
text
@d48 1
a48 7
# Generic options:
#
MKDIR   = do mkdir -p
CHMOD   = chmod
CP      = copy

CPFLAGS = ~cfr~v
d77 2
a78 1
        ${CP} ${RDIR}.!Run              ${INSTAPP}.!Run       ${CPFLAGS}
@


4.9
log
@Put some fossils in the museum.
Move the RMEnsures to the relevant CLib and CallASWI for RISC OS 5.18.

Version 0.06. Tagged as 'System-0_06'
@
text
@a70 1
      LocalUserIFRes:!Sprites \
d84 1
a84 1
        ${CP} LocalUserIFRes:!Sprites   ${INSTAPP}.!Sprites   ${CPFLAGS}
@


4.8
log
@  Major overhaul
Detail:
  Removed the following modules since they can be built from source:
    310.Modules: BASIC64, Colours, FrontEnd, Network.URL.*, SCSIFiler
    370.Modules: DDT (and it should go in 350.Modules)
    abs: DDT, FrontEnd (ancient Absolute versions, unused in build)
  Removed the following third-party modules:
    310.Modules: ABIMod, SSound
  Added the following from the C/C++ tools CD !System:
    310.Modules: 310Support.*, BorderUtil
  Updated !Run and !Help from the C/C++ tools CD !System
  Moved sprites to Iyonix subdirectory, added Morris4, Ursula and RO400
  versions of the sprites (the appropriate set is selected at build time
  depending upon the UserIF build variable)
Admin:
  Tested in Tools CD build.

Version 0.05. Tagged as 'System-0_05'
@
text
@a64 1
      310.Modules.DDT                 \
a96 1
        ${CP} 310.Modules.DDT                 ${INSTAPP}.310.Modules.* ${CPFLAGS}
@


4.7
log
@Delete !Sprites23,add RISC OS 5 sprites - this could do with sorting at
some point so that you get the sprites to match your OS.
Delete abs.syspath,this is now done in BASIC to avoid 32 bit problems.
Moved SSound out of modules into 310 - if someone's still relying on that
being in there then tough.
Newer ABCLib added from Alan Glover.
Now produces 400 and 500 directories.

Version 0.03. Tagged as 'System-0_03'
@
text
@a39 2
EXP_HDR = <export$dir>

a45 1
LDIR       = ${RDIR}.${LOCALE}
d51 1
a51 4
AS      = objasm
ATTR    = -Attr
CC      = cc
CMHG    = cmhg
a52 4
LD      = link
RM      = remove
SQUEEZE = squeeze
WIPE    = -wipe
a53 2
AFLAGS  = ${THROWBACK} -depend !Depend -nocache -stamp -quit
CFLAGS  = ${THROWBACK} -c -depend !Depend -ffah ${INCLUDES} ${DFLAGS} -wp
a54 7
SQFLAGS = -f
WFLAGS  = ~c~v

#
# Libraries
#
CLIB      = CLib:o.Stubs
d59 15
a73 36
INCLUDES  = -IC:,C:RMVersion

MODULES = \
      310.Modules.ABCLib \
      310.Modules.ABIMod \
      310.Modules.BASIC64 \
      310.Modules.Colours \
      310.Modules.DDT \
      310.Modules.FrontEnd \
      310.Modules.Network.URL.File \
      310.Modules.Network.URL.URL \
      310.Modules.SCSIFiler \
      310.Modules.SerialUtil \
      370.Modules.DDT

FILES =\
 ${LDIR}.!Boot\
 ${LDIR}.!Help\
 ${RDIR}.!Run\
 ${RDIR}.!Sprites\
 ${RDIR}.!Sprites22\
 ${RDIR}.SysPaths

LIBS = C:RMVersion.o.RMVersion

#
# Rule patterns
#
.SUFFIXES: .oz .od .asm .s
.c.o:;    ${CC} ${CFLAGS} -ff -o $@@ $<
.s.o:;    ${AS} ${AFLAGS} $< $@@
.s.od:;   ${AS} ${AFLAGS} -g $< $@@
.c.oz:;   ${CC} ${CFLAGS} -ff -zM -zps1 -o $@@ $<
.c.od:;   ${CC} ${CFLAGS} -DTRACE=1 -g -o $@@ $<
.asm.o:;  ${AS} ${AFLAGS} $< $@@
.asm.od:; ${AS} ${AFLAGS} -g $< $@@
d83 7
a89 6
        ${CP} ${LDIR}.!Boot      ${INSTAPP}.!Boot      ${CPFLAGS}
        ${CP} ${LDIR}.!Help      ${INSTAPP}.!Help      ${CPFLAGS}
        ${CP} ${RDIR}.!Run       ${INSTAPP}.!Run       ${CPFLAGS}
        ${CP} ${RDIR}.!Sprites   ${INSTAPP}.!Sprites   ${CPFLAGS}
        ${CP} ${RDIR}.!Sprites22 ${INSTAPP}.!Sprites22 ${CPFLAGS}
        ${CP} ${RDIR}.SysPaths   ${INSTAPP}.SysPaths   ${CPFLAGS}
d91 1
a91 8
        ${MKDIR} ${INSTAPP}.Modules
        ${MKDIR} ${INSTAPP}.310.Modules
        ${MKDIR} ${INSTAPP}.310.Modules.Network.URL
        ${MKDIR} ${INSTAPP}.350.Modules
        ${MKDIR} ${INSTAPP}.360.Modules
        ${MKDIR} ${INSTAPP}.370.Modules
        ${MKDIR} ${INSTAPP}.400.Modules
        ${MKDIR} ${INSTAPP}.500.Modules
d93 7
a99 12
        ${CP} 310.Modules.ABCLib           ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.ABIMod           ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.BASIC64          ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.Colours          ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.DDT              ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.FrontEnd         ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SCSIFiler        ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SerialUtil       ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.Network.URL.File ${INSTAPP}.310.Modules.Network.URL.* ${CPFLAGS}
        ${CP} 310.Modules.Network.URL.URL  ${INSTAPP}.310.Modules.Network.URL.* ${CPFLAGS}
        ${CP} 310.Modules.SSound           ${INSTAPP}.310.Modules.* ${CPFLAGS}
        ${CP} 370.Modules.DDT              ${INSTAPP}.370.Modules.* ${CPFLAGS}
d101 1
a101 9
        ${ATTR} -directories +wr ${INSTAPP}
        ${ATTR} -files +ol +or -ow +wr -ww ${INSTAPP}
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.Modules
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.310
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.350
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.360
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.370
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.400
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTAPP}.500
a105 3
        ${WIPE} o.* ${WFLAGS}
        ${WIPE} oz.* ${WFLAGS}
        ${WIPE} od.* ${WFLAGS}
a107 39
clean_all: clean
        IfThere ${INSTAPP}               Then Access ${INSTAPP}               rw/
        IfThere ${INSTAPP}.*             Then Access ${INSTAPP}.*             rw/
        IfThere ${INSTAPP}.200.Modules   Then Access ${INSTAPP}.200.Modules   rw/
        IfThere ${INSTAPP}.200.Modules.* Then Access ${INSTAPP}.200.Modules.* rw/
        IfThere ${INSTAPP}.300.Modules   Then Access ${INSTAPP}.300.Modules   rw/
        IfThere ${INSTAPP}.300.Modules.* Then Access ${INSTAPP}.300.Modules.* rw/
        IfThere ${INSTAPP}.310.Modules   Then Access ${INSTAPP}.310.Modules   rw/
        IfThere ${INSTAPP}.310.Modules.* Then Access ${INSTAPP}.310.Modules.* rw/
        IfThere ${INSTAPP}.350.Modules   Then Access ${INSTAPP}.350.Modules   rw/
        IfThere ${INSTAPP}.350.Modules.* Then Access ${INSTAPP}.350.Modules.* rw/
        IfThere ${INSTAPP}.360.Modules   Then Access ${INSTAPP}.360.Modules   rw/
        IfThere ${INSTAPP}.360.Modules.* Then Access ${INSTAPP}.360.Modules.* rw/
        IfThere ${INSTAPP}.370.Modules   Then Access ${INSTAPP}.370.Modules   rw/
        IfThere ${INSTAPP}.370.Modules.* Then Access ${INSTAPP}.370.Modules.* rw/
        IfThere ${INSTAPP}.400.Modules   Then Access ${INSTAPP}.400.Modules   rw/
        IfThere ${INSTAPP}.400.Modules.* Then Access ${INSTAPP}.400.Modules.* rw/
        IfThere ${INSTAPP}.500.Modules   Then Access ${INSTAPP}.500.Modules   rw/
        IfThere ${INSTAPP}.500.Modules.* Then Access ${INSTAPP}.500.Modules.* rw/
        -Destroy ${OBJS} ${OBJSD} abs.SysPaths ${INSTAPP}.!Boot \
              ${INSTAPP}.!Help ${INSTAPP}.!Run ${INSTAPP}.!Sprites \
              ${INSTAPP}.!Sprites22 ${INSTAPP}.SysPaths 
        ${WIPE} ${INSTAPP}.200 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.300 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.310 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.350 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.360 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.370 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.400 ${WFLAGS}R
        ${WIPE} ${INSTAPP}.500 ${WFLAGS}R
        @@echo ${COMPONENT}: cleaned (all)

export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete

#
# Static dependencies:
#

@


4.6
log
@  Removed DDEUtils
Detail:
  DDEUtils now exists as a separate entity in the build.
Admin:
  RiscOS/Sources/Programmer/DDEUtils contains the DDEUtils module.

Version 0.02. Tagged as 'System-0_02'
@
text
@d49 1
a49 1
INSTDIR    = ${INSTDIR}.${APP}
d53 1
a53 1
MKDIR   = cdir
d99 1
a99 2
 ${MODULES}\
 abs.SysPaths
a100 1
OBJS = o.main
d122 7
a128 7
        ${MKDIR} ${INSTDIR}
        ${CP} ${LDIR}.!Boot      ${INSTDIR}.!Boot      ${CPFLAGS}
        ${CP} ${LDIR}.!Help      ${INSTDIR}.!Help      ${CPFLAGS}
        ${CP} ${RDIR}.!Run       ${INSTDIR}.!Run       ${CPFLAGS}
        ${CP} ${RDIR}.!Sprites   ${INSTDIR}.!Sprites   ${CPFLAGS}
        ${CP} ${RDIR}.!Sprites22 ${INSTDIR}.!Sprites22 ${CPFLAGS}
        ${CP} abs.SysPaths       ${INSTDIR}.SysPaths   ${CPFLAGS}
d130 8
a137 21
        ${MKDIR} ${INSTDIR}.Modules
        ${MKDIR} ${INSTDIR}.310
        ${MKDIR} ${INSTDIR}.310.Modules
        ${MKDIR} ${INSTDIR}.350
        ${MKDIR} ${INSTDIR}.350.Modules
        ${MKDIR} ${INSTDIR}.360
        ${MKDIR} ${INSTDIR}.360.Modules
        ${MKDIR} ${INSTDIR}.370
        ${MKDIR} ${INSTDIR}.370.Modules
        ${CP} 310.Modules.ABCLib           ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.ABIMod           ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.BASIC64          ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.Colours          ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.DDT              ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.FrontEnd         ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SCSIFiler        ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SerialUtil       ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.Network.URL.File ${INSTDIR}.310.Modules.Network.URL.* ${CPFLAGS}
        ${CP} 310.Modules.Network.URL.URL  ${INSTDIR}.310.Modules.Network.URL.* ${CPFLAGS}
        ${CP} 370.Modules.DDT              ${INSTDIR}.370.Modules.* ${CPFLAGS}
        ${CP} Modules.SSound               ${INSTDIR}.Modules.*     ${CPFLAGS} # shouldn't be in here
d139 22
a160 7
        ${ATTR} -directories +wr ${INSTDIR}
        ${ATTR} -files +ol +or -ow +wr -ww ${INSTDIR}
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.Modules
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.310
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.350
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.360
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.370
a167 1
        ${RM} abs.SysPaths
d170 31
a200 19
clean_all:
        Access ${INSTDIR}               rw/
        Access ${INSTDIR}.*             rw/
        Access ${INSTDIR}.200.Modules   rw/
        Access ${INSTDIR}.200.Modules.* rw/
        Access ${INSTDIR}.300.Modules   rw/
        Access ${INSTDIR}.300.Modules.* rw/
        Access ${INSTDIR}.310.Modules   rw/
        Access ${INSTDIR}.310.Modules.* rw/
        Access ${INSTDIR}.350.Modules   rw/
        Access ${INSTDIR}.350.Modules.* rw/
        -Destroy ${OBJS} ${OBJSD} abs.SysPaths ${INSTDIR}.!Boot \
              ${INSTDIR}.!Help ${INSTDIR}.!Run ${INSTDIR}.!Sprites \
              ${INSTDIR}.!Sprites22 ${INSTDIR}.SysPaths 
        Wipe ${INSTDIR}.200 ${WFLAGS}R
        Wipe ${INSTDIR}.300 ${WFLAGS}R
        Wipe ${INSTDIR}.310 ${WFLAGS}R
        Wipe ${INSTDIR}.350 ${WFLAGS}R
        @@echo ${COMPONENT}: cleaned
a207 6
abs.SysPaths: ${OBJS} ${LIBS} ${CLIB}
        ${LD} -o $@@ ${OBJS} ${LIBS} ${CLIB}
        ${SQUEEZE} ${SQFLAGS} $@@

abs.SysPathsD: ${OBJSD} ${LIBS} ${CLIB}
        ${LD} -o $@@ -debug ${OBJSD} ${LIBS} ${CLIB}
@


4.5
log
@  Rewrote SysPaths without dependency on JCoxhead's personal libraries.
Detail:
  SysPaths now doesn't contain the OS_GBPB misuse bug (the "check if R4
    is -1 before checking the count of returned objects" bug).
  Doesn't rely on pulling in source files from elsewhere (ie. Support
    library which isn't in CVS - and it won't be because it's rubbish)
  Doesn't rely on OSLib, but uses the built-in C library routines instead.
Admin:
  Tested on desktop machine.
  Requires RMVersion 0.02 or later.
    (CVS: RiscOS/Sources/Programmer/RMVersion)
@
text
@d38 3
a90 1
      ${DDEUTILS} \
a92 3
DDEUTILS =\
 rm.DDEUtils

a144 1
        ${CP} ${DDEUTILS}                  ${INSTDIR}.310.Modules.* ${CPFLAGS}
a150 1
        ${CP} ${DDEUTILS}                  ${INSTDIR}.370.Modules.* ${CPFLAGS}
a167 1
        ${RM} ${DDEUTILS}
d184 1
a184 1
              ${INSTDIR}.!Sprites22 ${INSTDIR}.SysPaths ${DDEUTILS} o.DDEUtils 
d191 3
a202 3

${DDEUTILS}: o.DDEUtils
	${LD} -m -o $@@ o.DDEUtils
@


4.4
log
@Binaries of DDEUtils removed.  Sources of DDEUtils added and Makefile
adapted to build the module as part of the build process.
@
text
@d37 1
a37 2

VPATH = @@ <Support$Dir>
d62 1
a62 1
CFLAGS  = ${THROWBACK} -c -depend !Depend -fah ${INCLUDES} ${DFLAGS} -wp
a70 1
OSLIB     = OSLib:o.OSLib
d75 1
a75 1
INCLUDES  = -ISupport:,OS:
d103 2
a104 1
OBJS = o.main o.x
d198 2
a199 2
abs.SysPaths: ${OBJS} ${OSLIB} ${CLIB}
        ${LD} -o $@@ ${OBJS} ${OSLIB} ${CLIB}
d202 2
a203 2
abs.SysPathsD: ${OBJSD} ${OSLIB} ${CLIB}
        ${LD} -o $@@ -debug ${OBJSD} ${OSLIB} ${CLIB}
@


4.3
log
@ART branch (version 0.76) folded in
@
text
@d36 1
a83 1
      310.Modules.DDEUtils \
d90 1
a90 1
      370.Modules.DDEUtils \
d93 3
d110 1
a110 1
.SUFFIXES: .oz .od .asm
d112 2
d147 1
a147 1
        ${CP} 310.Modules.DDEUtils         ${INSTDIR}.310.Modules.* ${CPFLAGS}
d154 1
a154 1
        ${CP} 370.Modules.DDEUtils         ${INSTDIR}.370.Modules.* ${CPFLAGS}
d172 1
d189 1
a189 1
              ${INSTDIR}.!Sprites22 ${INSTDIR}.SysPaths
d206 3
a210 15
o.main:	c.main
o.main:	OS:h.macros
o.main:	OS:h.os
o.main:	OS:h.types
o.main:	OS:h.osgbpb
o.main:	OS:h.fileswitch
o.main:	OS:h.osmodule
o.main:	Support:h.x
o.x:	<Support$Dir>.c.x
o.x:	C:h.kernel
o.x:	C:h.swis
o.x:	OS:h.macros
o.x:	OS:h.os
o.x:	OS:h.types
o.x:	<Support$Dir>.h.x
@


4.2
log
@Version RO_3_71 merged
@
text
@d31 5
a78 7
      200.Modules.CLib \
      200.Modules.Colours \
      200.Modules.FPEmulator \
      300.Modules.BASIC64 \
      300.Modules.SCSIFiler \
      300.Modules.SerialUtil \
      310.Modules.Colours \
d81 2
d87 5
a91 1
      310.Modules.Network.URL.URL
a129 2
        ${MKDIR} ${INSTDIR}.200
        ${MKDIR} ${INSTDIR}.300
d131 1
d133 1
d135 1
d137 15
a151 7
        ${CP} 200 ${INSTDIR}.200 ${CPFLAGS}
        ${CP} 300 ${INSTDIR}.300 ${CPFLAGS}
        ${CP} 310 ${INSTDIR}.310 ${CPFLAGS}
        ${CP} 350 ${INSTDIR}.350 ${CPFLAGS}
        ${CP} 360 ${INSTDIR}.360 ${CPFLAGS}
        ${CP} 370 ${INSTDIR}.370 ${CPFLAGS}
        ${CP} Modules ${INSTDIR}.Modules ${CPFLAGS} #shouldn't really be anything in Modules, but SSound currently is
a155 2
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.200
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.300
d208 1
@


4.1
log
@Initial revision
@
text
@d30 1
d85 3
a87 1
      310.Modules.FrontEnd
d131 1
d137 2
d148 1
d196 1
d200 1
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a29 1
# 03-Jul-96      KJB  Added 370 directory
a127 1
        ${MKDIR} ${INSTDIR}.370
a132 1
        ${CP} 370 ${INSTDIR}.370 ${CPFLAGS}
a141 1
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.370
a188 1
o.main:	OS:h.fileswitch
a191 1
o.x:	C:h.swis
@


4.1.3.2
log
@Version RO_3_71 taken
@
text
@d85 1
a85 3
      310.Modules.FrontEnd \
      310.Modules.Network.URL.File \
      310.Modules.Network.URL.URL
a135 1
        ${CP} Modules ${INSTDIR}.Modules ${CPFLAGS} #shouldn't really be anything in Modules, but SSound currently is
@


4.1.3.1.2.1
log
@Merged from 3.71 CD
@
text
@d85 1
a85 3
      310.Modules.FrontEnd \
      310.Modules.Network.URL.File \
      310.Modules.Network.URL.URL
a135 1
        ${CP} Modules ${INSTDIR}.Modules ${CPFLAGS} #shouldn't really be anything in Modules, but SSound currently is
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@


4.1.1.1.2.1
log
@Merged in RO_3_70.
Made SysPaths set Boot$OSVersion if not already set, and convert "3.50"
and similar to "350".
@
text
@a29 6
# 03-Jul-96      KJB  Added 370 directory
#
# 24-Apr-97      KJB  Made all copies file-by-file to prevent copying CVS
#                     directories. Removed 200 and 300 directories.
#                     Made SysPaths set Boot$OSVersion if not already set,
#                     and correct "3.50" to "350".
d73 7
a81 2
      310.Modules.BASIC64 \
      310.Modules.Colours \
d84 1
a84 5
      310.Modules.FrontEnd \
      310.Modules.SCSIFiler \
      310.Modules.SerialUtil \
      370.Modules.DDEUtils \
      370.Modules.DDT
d123 2
a125 1
        ${MKDIR} ${INSTDIR}.310.Modules
a126 1
        ${MKDIR} ${INSTDIR}.350.Modules
d128 5
a132 14
        ${MKDIR} ${INSTDIR}.360.Modules
        ${MKDIR} ${INSTDIR}.370
        ${MKDIR} ${INSTDIR}.370.Modules
        ${CP} 310.Modules.ABCLib     ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.ABIMod     ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.BASIC64    ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.Colours    ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.DDEUtils   ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.DDT        ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.FrontEnd   ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SCSIFiler  ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 310.Modules.SerialUtil ${INSTDIR}.310.Modules.* ${CPFLAGS}
        ${CP} 370.Modules.DDEUtils   ${INSTDIR}.370.Modules.* ${CPFLAGS}
        ${CP} 370.Modules.DDT        ${INSTDIR}.370.Modules.* ${CPFLAGS}
d137 2
a141 1
        ${ATTR} -files -ol +or +ow +wr -ww ${INSTDIR}.370
d184 6
a191 1
o.x:	C:h.swis
a195 16
o.main:	c.main
o.main:	OS:h.macros
o.main:	OS:h.os
o.main:	OS:h.types
o.main:	OS:h.osgbpb
o.main:	OS:h.fileswitch
o.main:	OS:h.osmodule
o.main:	Support:h.x
o.main:	c.main
o.main:	OS:h.macros
o.main:	OS:h.os
o.main:	OS:h.types
o.main:	OS:h.osgbpb
o.main:	OS:h.fileswitch
o.main:	OS:h.osmodule
o.main:	Support:h.x
@


4.1.1.1.2.2
log
@Stopped !Boot using Do.
@
text
@d197 15
a219 7
o.x:	<Support$Dir>.c.x
o.x:	C:h.kernel
o.x:	C:h.swis
o.x:	OS:h.macros
o.x:	OS:h.os
o.x:	OS:h.types
o.x:	<Support$Dir>.h.x
@
