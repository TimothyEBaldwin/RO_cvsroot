head	4.3;
access;
symbols
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2
	Ursula_RiscPC:4.2.0.6
	rthornb_UrsulaBuild-19Aug1998:4.2
	UrsulaBuild_FinalSoftload:4.2
	rthornb_UrsulaBuild-12Aug1998:4.2
	aglover_UrsulaBuild-05Aug1998:4.2
	rthornb_UrsulaBuild-29Jul1998:4.2
	rthornb_UrsulaBuild-22Jul1998:4.2
	rthornb_UrsulaBuild-15Jul1998:4.2
	rthornb_UrsulaBuild-07Jul1998:4.2
	rthornb_UrsulaBuild-17Jun1998:4.2
	rthornb_UrsulaBuild-03Jun1998:4.2
	rthornb_UrsulaBuild-27May1998:4.2
	rthornb_UrsulaBuild-21May1998:4.2
	rthornb_UrsulaBuild_01May1998:4.2
	Daytona:4.2.0.4
	Daytona_bp:4.2
	Ursula:4.2.0.2
	Ursula_bp:4.2
	RO_3_71:4.1.3.2
	ART_bp:4.1.1.1
	ART:4.1.1.1.0.2
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.3
date	99.10.05.16.23.52;	author sbrodie;	state dead;
branches;
next	4.2;

4.2
date	97.05.06.11.26.08;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.51.16;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1;
next	;

4.1.1.1
date	96.11.05.09.51.16;	author nturton;	state Exp;
branches
	4.1.1.1.2.1;
next	;

4.1.1.1.2.1
date	97.04.24.15.09.11;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.03.32.14;	author nturton;	state Exp;
branches
	4.1.3.1.2.1;
next	4.1.3.2;

4.1.3.2
date	97.05.06.09.48.34;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1.2.1
date	97.04.30.18.18.24;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.3
log
@  Rewrote BootVars and LoadCMOS to remove dependency on CoxheadLibs.
Detail:
  Rewrote BootVars/main.c and LoadCMOS/main.c in real C.
Admin:
  It builds - this is an intermediate checkin.
  Requires Econet 5.72 or later header export.
  Requires HdrSrc 0.30 or later header export.
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Boot
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date           Name   Description
# ----           ----   -----------
# 15th Nov 1994  JRC    Black Boot edifice created
# 21st Nov 1994  AMcC   Added ResetBoot
# 29th Nov 1994  AMcC   Made separate rule for installing Configure dir (Monitors etc)
#                       Now installs required Monitors by name
#  5th Jan 1995  AMcC   VProtect modsqz'd
#  9th Jan 1995  JRC    Squeeze LoadCMOS, SafeLogon, ClrMonitor
# 30th Jan 1995  AMcC   Corrected access permissions (files in Choices mustn't be locked)
#                       Extracted common bits into separate rules
# 30th Jan 1995  AMcC   ResetBoot - install phase depends on install_Configure
#                                 - install its own !Run file (not the common one)
# 13th Feb 1995  AMcC   ResetBoot - don't install_Configure
# 27th Mar 1995  AMcC   Removed AKF70 from install_configure rule
# 16th May 1995  JRC    No longer deletes ShareBoot SetupNet files: instead, there are separate
#                       ones for ShareBoot, ArmBoot and Boot. DOesn't remove ww access
#                       from everything.
# 14th Jun 1995  AMcC   Added lines to remove ~CDReinit from !ArmBoot and ShareBoot
#  4th Jul 1995  JRC    socket.h now in OSLib
#  7th Jul 1995  JRC    Changed INSTDIR to INSTAPP, except in 1 vital place
#  1st Aug 1995  JRC    Added BootVars target, for installation of BootVars in Scrap

#
# Program specific options:
#
#COMPONENT = ...
#   This must be set on the command line to one of Boot, BootLib, ShareBoot,
#   ArmBoot, ResetBoot. Case is important. INSTDIR must also set, as usual.
APP        = !${COMPONENT}
RDIR       = ${COMPONENT}
LDIR       = ${RDIR}.${LOCALE}
INSTAPP    = ${INSTDIR}.${APP}
RESOURCES  = ${INSTAPP}.Resources

VPATH = @@ <Support$Dir>

#
# Generic options:
#
MKDIR   = cdir
AS      = objasm
ATTR    = -attr
CC      = cc
CMHG    = cmhg
CP      = copy
LD      = link
RM      = remove
SQUEEZE = squeeze
WIPE    = -wipe

AFLAGS  = ${THROWBACK} -depend !Depend -nocache -stamp -quit
CFLAGS  = ${THROWBACK} -c -depend !Depend -fafh ${INCLUDES} ${DFLAGS} -wp
CPFLAGS = ~cfr~v
SQFLAGS = -f
WFLAGS  = ~c~vr

#
# Libraries
#
CLIB      = CLib:o.Stubs
OSLIB     = OSLib:o.OSLib
ROMSTUBS  = RISC_OSLib:o.ROMStubs
ABSSYM    = RISC_OSLib:o.AbsSym
WRAPPER   = RISC_OSLib:s.ModuleWrap

LIBSD     = ${RLIB} ${CLIB}

#
# Include files
#
INCLUDES  = -IOS:,Support:

FILES = \
   Library.AddApp \
   Library.AppSize \
   Utils.BootVars \
   Library.Do \
   Library.IfThere \
   Library.LoadCMOS \
   Library.SafeLogon \
   RO350Hook.Boot.PreDesk.MemFix \
   Utils.FreePool \
   Utils.VProtect \
   ClrMonitor

#
# Rule patterns
#
.SUFFIXES: .oz .od .asm .o .Source .c
.c.o:;    ${CC} ${CFLAGS} -ff -o $@@ $<
.c.oz:;   ${CC} ${CFLAGS} -ff -zM -zps1 -o $@@ $<
.c.od:;   ${CC} ${CFLAGS} -DTRACE=1 -g -o $@@ $<
.asm.o:;  ${AS} ${AFLAGS} $< $@@
.asm.od:; ${AS} ${AFLAGS} -g $< $@@

#
# Main rules:
#
all: ${FILES}
        @@echo ${COMPONENT}: Application built (Disc)

install: set_access install_${COMPONENT}
   @@echo ${COMPONENT}: installed (Disc)

install_Boot: install_Configure install_appfiles ${FILES}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Library
   @@Echo Deleting superfluous files ...
   ${WIPE} ${INSTAPP}.Utils.NetBye ${WFLAGS}

install_ArmBoot: install_Configure install_appfiles ${FILES}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.DesktopBye                   ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ArmNet                       ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   | RO2 machines need unmodsqz'd VProtect
   ${CP} rm.VProtect                            ${INSTAPP}.Utils.VProtect ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO200Hook
   ${CP} RO200Hook.Boot                         ${INSTAPP}.Utils.RO200Hook.Boot ${CPFLAGS}
   ${CP} RO200Hook.DesktopBye                   ${INSTAPP}.Utils.RO200Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO200Hook.PreDesktop                   ${INSTAPP}.Utils.RO200Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.DesktopBye                   ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.DesktopBye                   ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
   @@Echo Deleting superfluous files ...
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}

install_ShareBoot: install_Configure install_appfiles ${FILES}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ShareNet                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.Desktop                      ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.Desktop                      ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
   @@Echo Deleting superfluous files ...
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}
   ${WIPE}                                      ${INSTAPP}.Utils.NetBye ${WFLAGS}

install_ResetBoot:
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${RDIR}.!Help                          ${INSTAPP}.!Help ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!HelpText #Just in case it's already there
   Kitten Version ${LDIR}.!HelpText           > ${INSTAPP}.!HelpText
   ${CP} ${LDIR}.!Run                           ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!RunImage                      ${INSTAPP}.!RunImage ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}
   ${CP} ${LDIR}.Messages                       ${INSTAPP}.Messages ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}

install_BootLib: ${FILES}
   ${CP} Library                                ${INSTDIR}.!Boot.Library ${CPFLAGS}

install_appfiles:
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${LDIR}.!Boot                          ${INSTAPP}.!Boot ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!Help #Just in case it's already there
   Kitten Version ${LDIR}.!Help               > ${INSTAPP}.!Help
   ${CP} Source.!Run                            ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}

install_Configure:
   ${MKDIR}                               ${INSTAPP}
   ${MKDIR}                               ${INSTAPP}.Choices
   ${MKDIR}                               ${INSTAPP}.Choices.Boot
   ${MKDIR}                               ${RESOURCES}
   ${MKDIR}                               ${RESOURCES}.Configure
   ${MKDIR}                               ${RESOURCES}.Configure.Monitors
   ${MKDIR}                               ${RESOURCES}.Configure.Monitors.Acorn
   ${CP} ClrMonitor                       ${RESOURCES}.Configure.ClrMonitor ${CPFLAGS}
   ${CP} Configure.2DTools                ${RESOURCES}.Configure.2DTools    ${CPFLAGS}
   ${CP} Configure.FontChange             ${RESOURCES}.Configure.FontChange ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF50   ${RESOURCES}.Configure.Monitors.Acorn.AKF50 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF52   ${RESOURCES}.Configure.Monitors.Acorn.AKF52 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF53   ${RESOURCES}.Configure.Monitors.Acorn.AKF53 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF60   ${RESOURCES}.Configure.Monitors.Acorn.AKF60 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF65   ${RESOURCES}.Configure.Monitors.Acorn.AKF65 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF85   ${RESOURCES}.Configure.Monitors.Acorn.AKF85 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF91   ${RESOURCES}.Configure.Monitors.Acorn.AKF91 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF92   ${RESOURCES}.Configure.Monitors.Acorn.AKF92 ${CPFLAGS}
   ${CP} Configure.Textures               ${RESOURCES}.Configure.Textures  ${CPFLAGS}

install_BootVars: Utils.BootVars
   ${CP} Utils.BootVars ${INSTDIR}.BootVars ${CPFLAGS}

set_access:
   ${ATTR} -directories +wr ${INSTAPP}
   ${ATTR} -files +ol +or -ow +wr ${INSTAPP}
   ${ATTR} -files -ol +ow ${INSTAPP}.Choices
# NB leave ww access as it was!!

clean:
   ${WIPE} Library.AddApp ${WFLAGS}
   ${WIPE} Library.AppSize ${WFLAGS}
   ${WIPE} Utils.BootVars ${WFLAGS}
   ${WIPE} Source.BootVars.o.main ${WFLAGS}
   ${WIPE} Source.BootVars.o.x ${WFLAGS}
   ${WIPE} Library.Do ${WFLAGS}
   ${WIPE} Library.IfThere ${WFLAGS}
   ${WIPE} Library.LoadCMOS ${WFLAGS}
   ${WIPE} Source.LoadCMOS.o.main ${WFLAGS}
   ${WIPE} Source.LoadCMOS.o.x ${WFLAGS}
   ${WIPE} Library.SafeLogon ${WFLAGS}
   ${WIPE} Source.SafeLogon.o.main ${WFLAGS}
   ${WIPE} ClrMonitor ${WFLAGS}
   ${WIPE} Source.ClrMonitor.o.main ${WFLAGS}
   ${WIPE} Utils.FreePool ${WFLAGS}
   ${WIPE} Utils.VProtect ${WFLAGS}
   ${WIPE} RO350Hook.Boot.PreDesk.MemFix ${WFLAGS}
   @@echo ${COMPONENT}: cleaned

clean_all:
   -Destroy Library.AddApp Library.AppSize Utils.BootVars \
         Source.BootVars.o.main Source.BootVars.o.x Library.Do \
         Library.IfThere Library.LoadCMOS Source.LoadCMOS.o.main \
         Source.LoadCMOS.o.x Library.SafeLogon Source.SafeLogon.o.main \
         ClrMonitor Source.ClrMonitor.o.main Utils.FreePool Utils.VProtect \
         RO350Hook.Boot.PreDesk.MemFix
   ${ATTR} -ol ${INSTAPP}
   ${WIPE} ${INSTAPP} ${WFLAGS}
#
# Static dependencies:
#
Source.BootVars.o.main: Source.BootVars.c.main
   cc410 ${CFLAGS} -D__swi -ff -o Source.BootVars.o.main Source.BootVars.c.main

Library.AddApp: Source.AddApp.Source.AddApp
   AAsm ${AFLAGS} Source.AddApp.Source.AddApp Library.AddApp -stamp -quit
   SetType Library.AddApp Utility

Library.AppSize: Source.AppSize.Source.AppSize
   AAsm ${AFLAGS} Source.AppSize.Source.AppSize Library.AppSize -stamp -quit
   SetType Library.AppSize Utility

Utils.BootVars: Source.BootVars.o.main Source.BootVars.o.x
   ${LD} ${LDFLAGS} -o Utils.BootVars Source.BootVars.o.main Source.BootVars.o.x \
         ${OSLIB} CLib:o.ANSILib
   ${SQUEEZE} $@@

Library.Do: Source.Do.Source.Do
   AAsm ${AFLAGS} Source.Do.Source.Do Library.Do -stamp -quit
   SetType Library.Do Utility

Library.IfThere: Source.IfThere.Source.IfThere
   AAsm ${AFLAGS} Source.IfThere.Source.IfThere Library.IfThere -stamp -quit
   SetType Library.IfThere Utility

Library.LoadCMOS: Source.LoadCMOS.o.main Source.LoadCMOS.o.x
   ${LD} ${LDFLAGS} -o $@@ Source.LoadCMOS.o.main Source.LoadCMOS.o.x ${OSLIB} ${CLIB}
   ${SQUEEZE} $@@

Library.SafeLogon: Source.SafeLogon.o.main
   ${LD} ${LDFLAGS} -o $@@ Source.SafeLogon.o.main ${OSLIB} ${CLIB}
   ${SQUEEZE} $@@

ClrMonitor: Source.ClrMonitor.o.main
   ${LD} ${LDFLAGS} -o $@@ Source.ClrMonitor.o.main ${OSLIB} ${CLIB}
   ${SQUEEZE} $@@

Utils.FreePool: Source.FreePool.Source.FreePool
   AAsm ${AFLAGS} Source.FreePool.Source.FreePool Utils.FreePool -stamp -quit
   SetType Utils.FreePool Utility

Utils.VProtect: rm.VProtect
   ModSqz rm.VProtect $@@

RO350Hook.Boot.PreDesk.MemFix: Source.MemFix.Source.MemFix
   AAsm ${AFLAGS} Source.MemFix.Source.MemFix RO350Hook.Boot.PreDesk.MemFix -stamp -quit
   SetType RO350Hook.Boot.PreDesk.MemFix Utility

Source.LoadCMOS.o.x: <Support$Dir>.c.x
   ${CC} ${CFLAGS} -ff -o Source.LoadCMOS.o.x <Support$Dir>.c.x

Source.BootVars.o.x: <Support$Dir>.c.x
   ${CC} ${CFLAGS} -ff -o Source.BootVars.o.x <Support$Dir>.c.x

#---------------------------------------------------------------------------
# Library.AddApp: Hdr:ListOpts
# Dynamic dependencies:
Library.AddApp: Hdr:ListOpts
Library.AddApp: Hdr:Macros
Library.AddApp: Hdr:System
Library.AddApp: Hdr:SWIs
Library.AddApp: Hdr:CPU.Generic26
Library.AddApp: Hdr:IO.GenericIO
Library.AddApp: Hdr:RISCOS
Library.AddApp: Hdr:Proc
Library.AddApp: Hdr:ModHand
Library.AddApp: Hdr:ResourceFS
Library.AppSize: Hdr:ListOpts
Library.AppSize: Hdr:Macros
Library.AppSize: Hdr:System
Library.AppSize: Hdr:SWIs
Library.AppSize: Hdr:CPU.Generic26
Library.AppSize: Hdr:IO.GenericIO
Library.AppSize: Hdr:RISCOS
Library.AppSize: Hdr:Proc
Library.AppSize: Hdr:ModHand
Library.AppSize: Hdr:NDRDebug
Source.BootVars.o.main:	Source.BootVars.c.main
Source.BootVars.o.main:	C:h.swis
Source.BootVars.o.main:	C:h.kernel
Source.BootVars.o.main:	Support:h.trace
Source.BootVars.o.main:	OS:h.os
Source.BootVars.o.main:	OS:h.types
Source.BootVars.o.main:	Support:h.x
Source.BootVars.o.main:	OS:h.econet
Source.BootVars.o.main:	OS:h.netfs
Source.BootVars.o.main:	OS:h.fileswitch
Source.BootVars.o.main:	OS:h.macros
Source.BootVars.o.main:	OS:h.os
Source.BootVars.o.main:	OS:h.osbyte
Source.BootVars.o.main:	OS:h.osfscontrol
Source.BootVars.o.main:	OS:h.osmodule
Source.BootVars.o.main:	OS:h.socket
Source.BootVars.o.main:	OS:h.wimpreadsysinfo
Source.BootVars.o.main:	OS:h.wimp
Source.BootVars.o.main:	OS:h.osspriteop
Source.BootVars.o.main:	OS:h.font
Source.BootVars.o.x:	<Support$Dir>.c.x
Source.BootVars.o.x:	C:h.kernel
Source.BootVars.o.x:	C:h.swis
Source.BootVars.o.x:	OS:h.macros
Source.BootVars.o.x:	OS:h.os
Source.BootVars.o.x:	OS:h.types
Source.BootVars.o.x:	<Support$Dir>.h.x
Library.Do: Hdr:ListOpts
Library.Do: Hdr:Macros
Library.Do: Hdr:System
Library.Do: Hdr:SWIs
Library.Do: Hdr:CPU.Generic26
Library.Do: Hdr:IO.GenericIO
Library.Do: Hdr:RISCOS
Library.IfThere: Hdr:ListOpts
Library.IfThere: Hdr:Macros
Library.IfThere: Hdr:System
Library.IfThere: Hdr:SWIs
Library.IfThere: Hdr:CPU.Generic26
Library.IfThere: Hdr:IO.GenericIO
Library.IfThere: Hdr:RISCOS
Library.IfThere: Hdr:Proc
Library.IfThere: Hdr:ModHand
Library.IfThere: Hdr:ResourceFS
Source.LoadCMOS.o.main:	Source.LoadCMOS.c.main
Source.LoadCMOS.o.main:	OS:h.os
Source.LoadCMOS.o.main:	OS:h.types
Source.LoadCMOS.o.main:	OS:h.osbyte
Source.LoadCMOS.o.main:	OS:h.osfile
Source.LoadCMOS.o.main:	OS:h.fileswitch
Source.LoadCMOS.o.main:	OS:h.osfind
Source.LoadCMOS.o.main:	OS:h.osgbpb
Source.LoadCMOS.o.main:	Support:h.x
Source.LoadCMOS.o.x:	<Support$Dir>.c.x
Source.LoadCMOS.o.x:	C:h.kernel
Source.LoadCMOS.o.x:	C:h.swis
Source.LoadCMOS.o.x:	OS:h.macros
Source.LoadCMOS.o.x:	OS:h.os
Source.LoadCMOS.o.x:	OS:h.types
Source.LoadCMOS.o.x:	<Support$Dir>.h.x
Source.SafeLogon.o.main:	Source.SafeLogon.c.main
Source.SafeLogon.o.main:	OS:h.econet
Source.SafeLogon.o.main:	OS:h.types
Source.SafeLogon.o.main:	OS:h.os
Source.SafeLogon.o.main:	OS:h.netfs
Source.SafeLogon.o.main:	OS:h.fileswitch
Source.SafeLogon.o.main:	OS:h.os
Source.SafeLogon.o.main:	OS:h.territory
Source.SafeLogon.o.main:	Support:h.trace
RO350Hook.Boot.PreDesk.MemFix: Hdr:ListOpts
RO350Hook.Boot.PreDesk.MemFix: Hdr:Macros
RO350Hook.Boot.PreDesk.MemFix: Hdr:System
RO350Hook.Boot.PreDesk.MemFix: Hdr:SWIs
RO350Hook.Boot.PreDesk.MemFix: Hdr:CPU.Generic26
RO350Hook.Boot.PreDesk.MemFix: Hdr:IO.GenericIO
RO350Hook.Boot.PreDesk.MemFix: Hdr:RISCOS
Utils.FreePool: OS:Hdr.Macros
Utils.FreePool: OS:Hdr.OS
Utils.FreePool: OS:Hdr.Types
Utils.FreePool: OS:Hdr.Wimp
Utils.FreePool: OS:Hdr.OSSpriteOp
Utils.FreePool: OS:Hdr.Font
Source.ClrMonitor.o.main:	Source.ClrMonitor.c.main
Source.ClrMonitor.o.main:	C:h.swis
Source.ClrMonitor.o.main:	C:h.kernel
@


4.2
log
@Version RO_3_71 merged
@
text
@@


4.1
log
@Initial revision
@
text
@d34 7
a40 1
#
d46 1
a46 1
#   This must be set on the command line to one of Boot, ShareBoot,
d51 2
a52 2
INSTDIR    = ${INSTDIR}.${APP}
RESOURCES  = ${INSTDIR}.Resources
d125 7
a131 6
   ${MKDIR}                                     ${INSTDIR}.Choices
   ${CP} RO360Hook.Boot                         ${INSTDIR}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTDIR}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTDIR}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} Utils                                  ${INSTDIR}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Library
d133 1
a133 1
   ${WIPE} ${INSTDIR}.Utils.NetBye ${WFLAGS}
d136 8
a143 6
   ${MKDIR}                                     ${INSTDIR}.Choices
   ${CP} RO360Hook.Boot                         ${INSTDIR}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.DesktopBye                   ${INSTDIR}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTDIR}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} Library                                ${INSTDIR}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTDIR}.Utils ${CPFLAGS}
d145 13
a157 13
   ${CP} rm.VProtect                            ${INSTDIR}.Utils.VProtect ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Utils.RO200Hook
   ${CP} RO200Hook.Boot                         ${INSTDIR}.Utils.RO200Hook.Boot ${CPFLAGS}
   ${CP} RO200Hook.DesktopBye                   ${INSTDIR}.Utils.RO200Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO200Hook.PreDesktop                   ${INSTDIR}.Utils.RO200Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTDIR}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.DesktopBye                   ${INSTDIR}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTDIR}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTDIR}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.DesktopBye                   ${INSTDIR}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTDIR}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d159 1
a159 1
   ${WIPE}                                      ${INSTDIR}.Choices.Boot.PreDesk.SetUpNet ${WFLAGS}
d162 16
a177 14
   ${MKDIR}                                     ${INSTDIR}.Choices
   ${CP} RO360Hook.Boot                         ${INSTDIR}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTDIR}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTDIR}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} Library                                ${INSTDIR}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTDIR}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTDIR}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.Desktop                      ${INSTDIR}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTDIR}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTDIR}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.Desktop                      ${INSTDIR}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTDIR}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d179 2
a180 2
   ${WIPE}                                      ${INSTDIR}.Choices.Boot.PreDesk.SetUpNet ${WFLAGS}
   ${WIPE}                                      ${INSTDIR}.Utils.NetBye ${WFLAGS}
d183 17
a199 13
   ${MKDIR}                                     ${INSTDIR}
   ${CP} ${RDIR}.!Help                          ${INSTDIR}.!Help ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTDIR}.!HelpText
   Kitten Version ${LDIR}.!HelpText           > ${INSTDIR}.!HelpText
   ${CP} ${LDIR}.!Run                           ${INSTDIR}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!RunImage                      ${INSTDIR}.!RunImage ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites                       ${INSTDIR}.!Sprites ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites22                     ${INSTDIR}.!Sprites22 ${CPFLAGS}
   ${CP} ${LDIR}.Messages                       ${INSTDIR}.Messages ${CPFLAGS}
   ${MKDIR}                                     ${INSTDIR}.Choices
   ${CP} RO360Hook.Boot                         ${INSTDIR}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTDIR}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTDIR}.Choices.Boot.PreDesktop ${CPFLAGS}
d202 7
a208 7
   ${MKDIR}                                     ${INSTDIR}
   ${CP} ${LDIR}.!Boot                          ${INSTDIR}.!Boot ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTDIR}.!Help
   Kitten Version ${LDIR}.!Help               > ${INSTDIR}.!Help
   ${CP} Source.!Run                            ${INSTDIR}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites                       ${INSTDIR}.!Sprites ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites22                     ${INSTDIR}.!Sprites22 ${CPFLAGS}
d211 3
a213 3
   ${MKDIR}                               ${INSTDIR}
   ${MKDIR}                               ${INSTDIR}.Choices
   ${MKDIR}                               ${INSTDIR}.Choices.Boot
d225 1
d227 2
d231 3
d235 4
a238 3
   ${ATTR} -directories +wr ${INSTDIR}
   ${ATTR} -files +ol +or -ow +wr -ww ${INSTDIR}
   ${ATTR} -files -ol +ow ${INSTDIR}.Choices
a245 1
   ${WIPE} Source.BootVars.o.socket ${WFLAGS}
d262 1
a262 1
         Source.BootVars.o.main Source.BootVars.o.x Source.BootVars.o.socket Library.Do \
d267 2
a268 2
   ${ATTR} -ol ${INSTDIR}
   ${WIPE} ${INSTDIR} ${WFLAGS}
d283 1
a283 1
Utils.BootVars: Source.BootVars.o.main Source.BootVars.o.x Source.BootVars.o.socket
d285 1
a285 1
         Source.BootVars.o.socket ${OSLIB} CLib:o.ANSILib
d305 1
a305 1
   ${LD} ${LDFLAGS} -o $@@ Source.ClrMonitor.o.main ${CLIB}
a324 8
Source.BootVars.o.socket: <Support$Dir>.def.socket
   DefMod -l -o l.socket < <Support$Dir>.def.socket
   LibFile -c -o Source.BootVars.o.socket -via ViaFile
   Wipe l.socket ~C~FR~V

Source.BootVars.h.socket: <Support$Dir>.def.socket
   DefMod -h < <Support$Dir>.def.socket > $@@

d351 2
a352 1
Source.BootVars.o.main:	Source.BootVars.h.socket
a353 2
Source.BootVars.o.main:	OS:h.os
Source.BootVars.o.main:	Support:h.trace
d357 1
d363 1
d370 1
d397 1
d403 1
d413 1
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@d34 1
a34 7
# 16th May 1995  JRC    No longer deletes ShareBoot SetupNet files: instead, there are separate
#                       ones for ShareBoot, ArmBoot and Boot. DOesn't remove ww access
#                       from everything.
# 14th Jun 1995  AMcC   Added lines to remove ~CDReinit from !ArmBoot and ShareBoot
#  4th Jul 1995  JRC    socket.h now in OSLib
#  7th Jul 1995  JRC    Changed INSTDIR to INSTAPP, except in 1 vital place
#  1st Aug 1995  JRC    Added BootVars target, for installation of BootVars in Scrap
d40 1
a40 1
#   This must be set on the command line to one of Boot, BootLib, ShareBoot,
d45 2
a46 2
INSTAPP    = ${INSTDIR}.${APP}
RESOURCES  = ${INSTAPP}.Resources
d119 6
a124 7
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Library
d126 1
a126 1
   ${WIPE} ${INSTAPP}.Utils.NetBye ${WFLAGS}
d129 6
a134 8
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.DesktopBye                   ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ArmNet                       ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
d136 13
a148 13
   ${CP} rm.VProtect                            ${INSTAPP}.Utils.VProtect ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO200Hook
   ${CP} RO200Hook.Boot                         ${INSTAPP}.Utils.RO200Hook.Boot ${CPFLAGS}
   ${CP} RO200Hook.DesktopBye                   ${INSTAPP}.Utils.RO200Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO200Hook.PreDesktop                   ${INSTAPP}.Utils.RO200Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.DesktopBye                   ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.DesktopBye                   ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d150 1
a150 1
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}
d153 14
a166 16
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ShareNet                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.Desktop                      ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.Desktop                      ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d168 2
a169 2
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}
   ${WIPE}                                      ${INSTAPP}.Utils.NetBye ${WFLAGS}
d172 13
a184 17
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${RDIR}.!Help                          ${INSTAPP}.!Help ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!HelpText #Just in case it's already there
   Kitten Version ${LDIR}.!HelpText           > ${INSTAPP}.!HelpText
   ${CP} ${LDIR}.!Run                           ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!RunImage                      ${INSTAPP}.!RunImage ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}
   ${CP} ${LDIR}.Messages                       ${INSTAPP}.Messages ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}

install_BootLib: ${FILES}
   ${CP} Library                                ${INSTDIR}.!Boot.Library ${CPFLAGS}
d187 7
a193 7
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${LDIR}.!Boot                          ${INSTAPP}.!Boot ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!Help #Just in case it's already there
   Kitten Version ${LDIR}.!Help               > ${INSTAPP}.!Help
   ${CP} Source.!Run                            ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}
d196 3
a198 3
   ${MKDIR}                               ${INSTAPP}
   ${MKDIR}                               ${INSTAPP}.Choices
   ${MKDIR}                               ${INSTAPP}.Choices.Boot
a212 3
install_BootVars: Utils.BootVars
   ${CP} Utils.BootVars ${INSTDIR}.BootVars ${CPFLAGS}

d214 3
a216 4
   ${ATTR} -directories +wr ${INSTAPP}
   ${ATTR} -files +ol +or -ow +wr ${INSTAPP}
   ${ATTR} -files -ol +ow ${INSTAPP}.Choices
# NB leave ww access as it was!!
d224 1
d241 1
a241 1
         Source.BootVars.o.main Source.BootVars.o.x Library.Do \
d246 2
a247 2
   ${ATTR} -ol ${INSTAPP}
   ${WIPE} ${INSTAPP} ${WFLAGS}
d262 1
a262 1
Utils.BootVars: Source.BootVars.o.main Source.BootVars.o.x
d264 1
a264 1
         ${OSLIB} CLib:o.ANSILib
d284 1
a284 1
   ${LD} ${LDFLAGS} -o $@@ Source.ClrMonitor.o.main ${OSLIB} ${CLIB}
d304 8
d338 3
a341 2
Source.BootVars.o.main:	OS:h.os
Source.BootVars.o.main:	OS:h.types
a344 1
Source.BootVars.o.main:	OS:h.fileswitch
a349 1
Source.BootVars.o.main:	OS:h.socket
a355 1
Source.BootVars.o.x:	C:h.swis
a381 1
Source.LoadCMOS.o.main:	OS:h.fileswitch
a386 1
Source.LoadCMOS.o.x:	C:h.swis
a395 1
Source.SafeLogon.o.main:	OS:h.fileswitch
@


4.1.3.2
log
@Version RO_3_71 taken
@
text
@a224 1
   ${CP} Configure.Monitors.Acorn.AKF65   ${RESOURCES}.Configure.Monitors.Acorn.AKF65 ${CPFLAGS}
a225 2
   ${CP} Configure.Monitors.Acorn.AKF91   ${RESOURCES}.Configure.Monitors.Acorn.AKF91 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF92   ${RESOURCES}.Configure.Monitors.Acorn.AKF92 ${CPFLAGS}
@


4.1.3.1.2.1
log
@Merged from 3.71 CD
@
text
@a224 1
   ${CP} Configure.Monitors.Acorn.AKF65   ${RESOURCES}.Configure.Monitors.Acorn.AKF65 ${CPFLAGS}
a225 2
   ${CP} Configure.Monitors.Acorn.AKF91   ${RESOURCES}.Configure.Monitors.Acorn.AKF91 ${CPFLAGS}
   ${CP} Configure.Monitors.Acorn.AKF92   ${RESOURCES}.Configure.Monitors.Acorn.AKF92 ${CPFLAGS}
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@


4.1.1.1.2.1
log
@Merged in RO_3_70.
@
text
@d34 1
a34 7
# 16th May 1995  JRC    No longer deletes ShareBoot SetupNet files: instead, there are separate
#                       ones for ShareBoot, ArmBoot and Boot. DOesn't remove ww access
#                       from everything.
# 14th Jun 1995  AMcC   Added lines to remove ~CDReinit from !ArmBoot and ShareBoot
#  4th Jul 1995  JRC    socket.h now in OSLib
#  7th Jul 1995  JRC    Changed INSTDIR to INSTAPP, except in 1 vital place
#  1st Aug 1995  JRC    Added BootVars target, for installation of BootVars in Scrap
d40 1
a40 1
#   This must be set on the command line to one of Boot, BootLib, ShareBoot,
d45 2
a46 2
INSTAPP    = ${INSTDIR}.${APP}
RESOURCES  = ${INSTAPP}.Resources
d119 6
a124 7
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Library
d126 1
a126 1
   ${WIPE} ${INSTAPP}.Utils.NetBye ${WFLAGS}
d129 6
a134 8
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.DesktopBye                   ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ArmNet                       ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
d136 13
a148 13
   ${CP} rm.VProtect                            ${INSTAPP}.Utils.VProtect ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO200Hook
   ${CP} RO200Hook.Boot                         ${INSTAPP}.Utils.RO200Hook.Boot ${CPFLAGS}
   ${CP} RO200Hook.DesktopBye                   ${INSTAPP}.Utils.RO200Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO200Hook.PreDesktop                   ${INSTAPP}.Utils.RO200Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.DesktopBye                   ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.DesktopBye                   ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d150 1
a150 1
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}
d153 14
a166 16
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet
   ${CP} RO360Hook.ShareNet                     ${INSTAPP}.Choices.Boot.PreDesk.SetupNet.!Run ${CPFLAGS}
   ${CP} Library                                ${INSTAPP}.Library ${CPFLAGS}
   ${CP} Utils                                  ${INSTAPP}.Utils ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO310Hook
   ${CP} RO310Hook.Boot                         ${INSTAPP}.Utils.RO310Hook.Boot ${CPFLAGS}
   ${CP} RO310Hook.Desktop                      ${INSTAPP}.Utils.RO310Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO310Hook.PreDesktop                   ${INSTAPP}.Utils.RO310Hook.Boot.PreDesktop ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Utils.RO350Hook
   ${CP} RO350Hook.Boot                         ${INSTAPP}.Utils.RO350Hook.Boot ${CPFLAGS}
   ${CP} RO350Hook.Desktop                      ${INSTAPP}.Utils.RO350Hook.Boot.Desktop ${CPFLAGS}
   ${CP} RO350Hook.PreDesktop                   ${INSTAPP}.Utils.RO350Hook.Boot.PreDesktop ${CPFLAGS}
d168 2
a169 2
   ${WIPE}                                      ${INSTAPP}.Choices.Boot.Tasks.~CDReinit  ${WFLAGS}
   ${WIPE}                                      ${INSTAPP}.Utils.NetBye ${WFLAGS}
d172 13
a184 17
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${RDIR}.!Help                          ${INSTAPP}.!Help ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!HelpText #Just in case it's already there
   Kitten Version ${LDIR}.!HelpText           > ${INSTAPP}.!HelpText
   ${CP} ${LDIR}.!Run                           ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!RunImage                      ${INSTAPP}.!RunImage ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${LDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}
   ${CP} ${LDIR}.Messages                       ${INSTAPP}.Messages ${CPFLAGS}
   ${MKDIR}                                     ${INSTAPP}.Choices
   ${CP} RO360Hook.Boot                         ${INSTAPP}.Choices.Boot ${CPFLAGS}
   ${CP} RO360Hook.Desktop                      ${INSTAPP}.Choices.Boot.Desktop ${CPFLAGS}
   ${CP} RO360Hook.PreDesktop                   ${INSTAPP}.Choices.Boot.PreDesktop ${CPFLAGS}
   ${CP} ^.InetSetup.Resources.<Locale>.Blanks.SetUpNet  ${INSTAPP}.Choices.Boot.PreDesk.SetupNet ${CPFLAGS}

install_BootLib: ${FILES}
   ${CP} Library                                ${INSTDIR}.!Boot.Library ${CPFLAGS}
d187 7
a193 7
   ${MKDIR}                                     ${INSTAPP}
   ${CP} ${LDIR}.!Boot                          ${INSTAPP}.!Boot ${CPFLAGS}
   ${ATTR} -ol +ow                              ${INSTAPP}.!Help #Just in case it's already there
   Kitten Version ${LDIR}.!Help               > ${INSTAPP}.!Help
   ${CP} Source.!Run                            ${INSTAPP}.!Run ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites                       ${INSTAPP}.!Sprites ${CPFLAGS}
   ${CP} ${RDIR}.!Sprites22                     ${INSTAPP}.!Sprites22 ${CPFLAGS}
d196 3
a198 3
   ${MKDIR}                               ${INSTAPP}
   ${MKDIR}                               ${INSTAPP}.Choices
   ${MKDIR}                               ${INSTAPP}.Choices.Boot
a212 3
install_BootVars: Utils.BootVars
   ${CP} Utils.BootVars ${INSTDIR}.BootVars ${CPFLAGS}

d214 3
a216 4
   ${ATTR} -directories +wr ${INSTAPP}
   ${ATTR} -files +ol +or -ow +wr ${INSTAPP}
   ${ATTR} -files -ol +ow ${INSTAPP}.Choices
# NB leave ww access as it was!!
d224 1
d241 1
a241 1
         Source.BootVars.o.main Source.BootVars.o.x Library.Do \
d246 2
a247 2
   ${ATTR} -ol ${INSTAPP}
   ${WIPE} ${INSTAPP} ${WFLAGS}
d262 1
a262 1
Utils.BootVars: Source.BootVars.o.main Source.BootVars.o.x
d264 1
a264 1
         ${OSLIB} CLib:o.ANSILib
d284 1
a284 1
   ${LD} ${LDFLAGS} -o $@@ Source.ClrMonitor.o.main ${OSLIB} ${CLIB}
d304 8
d338 3
a341 2
Source.BootVars.o.main:	OS:h.os
Source.BootVars.o.main:	OS:h.types
a344 1
Source.BootVars.o.main:	OS:h.fileswitch
a349 1
Source.BootVars.o.main:	OS:h.socket
a355 1
Source.BootVars.o.x:	C:h.swis
a381 1
Source.LoadCMOS.o.main:	OS:h.fileswitch
a386 1
Source.LoadCMOS.o.x:	C:h.swis
a395 1
Source.SafeLogon.o.main:	OS:h.fileswitch
@
