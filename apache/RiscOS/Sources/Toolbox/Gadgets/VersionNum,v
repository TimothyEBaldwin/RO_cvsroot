head	1.35;
access;
symbols
	Gadgets-0_44:1.35
	Gadgets-0_43:1.34
	Gadgets-0_42:1.33
	Gadgets-0_41:1.32
	Gadgets-0_40:1.31
	Gadgets-0_39:1.30
	Gadgets-0_38:1.29
	Gadgets-0_37:1.28
	Gadgets-0_36:1.27
	Gadgets-0_35:1.26
	Gadgets-0_34:1.25
	Gadgets-0_33:1.24
	Gadgets-0_32:1.23
	Gadgets-0_31:1.22
	Gadgets-0_30:1.21
	Gadgets-0_29:1.20
	Gadgets-0_28:1.19
	RO_5_07:1.18
	Gadgets-0_27:1.18
	Gadgets-0_26:1.17
	Gadgets-0_25:1.16
	Gadgets-0_24:1.15
	Gadgets-0_23:1.14
	Gadgets-0_22:1.13
	Gadgets-0_21:1.12
	Gadgets-0_20:1.11
	Gadgets-0_19:1.10
	Gadgets-0_18:1.9
	Gadgets-0_17:1.8
	Gadgets-0_16:1.7
	Gadgets-0_15:1.6
	Gadgets-0_14:1.5
	mjrobert_Java_26_08_98:1.1.2.2
	Gadgets-0_11:1.3
	sbrodie_TextGadgets_merged_19Jun98:1.2
	sbrodie_Spin_merge_18Jun98:1.1.2.2
	Gadgets-0_10-1_1_2_2:1.1.2.2
	Spinner:1.1.0.2;
locks; strict;
comment	@# @;
expand	@v@;


1.35
date	2018.02.09.09.00.16;	author rsprowson;	state Exp;
branches;
next	1.34;
commitid	hvuSc2WpQ5n6caqA;

1.34
date	2016.06.18.08.27.30;	author rool;	state Exp;
branches;
next	1.33;
commitid	hvNFWA2WPYxAkVaz;

1.33
date	2016.05.02.19.25.46;	author rsprowson;	state Exp;
branches;
next	1.32;
commitid	8wlp4pdOjHz5uW4z;

1.32
date	2016.03.25.23.35.47;	author rsprowson;	state Exp;
branches;
next	1.31;
commitid	J2IhnS5wMSjA550z;

1.31
date	2015.11.28.19.08.28;	author rsprowson;	state Exp;
branches;
next	1.30;
commitid	Hv9ItC5GsjO1pTKy;

1.30
date	2015.10.12.21.17.35;	author rsprowson;	state Exp;
branches;
next	1.29;
commitid	KKgpfp0vznFZCREy;

1.29
date	2015.08.18.21.31.19;	author rsprowson;	state Exp;
branches;
next	1.28;
commitid	IVVb0XmsGA7ktNxy;

1.28
date	2013.08.30.21.32.31;	author rsprowson;	state Exp;
branches;
next	1.27;
commitid	Ah6FHegdauBDyw3x;

1.27
date	2013.08.30.19.34.35;	author rsprowson;	state Exp;
branches;
next	1.26;
commitid	cFJZhP2Bmu3bUv3x;

1.26
date	2013.03.16.22.46.44;	author rsprowson;	state Exp;
branches;
next	1.25;
commitid	28v2kuHlRYNTk4Iw;

1.25
date	2012.01.14.17.17.56;	author rsprowson;	state Exp;
branches;
next	1.24;
commitid	I6w6cgQsKF85faPv;

1.24
date	2012.01.14.12.56.46;	author rsprowson;	state Exp;
branches;
next	1.23;
commitid	82i1vxnSrlbuN8Pv;

1.23
date	2011.06.25.22.38.45;	author jlee;	state Exp;
branches;
next	1.22;
commitid	SJmoual8pfcHx6pv;

1.22
date	2010.02.28.10.40.25;	author rsprowson;	state Exp;
branches;
next	1.21;

1.21
date	2008.06.14.17.32.58;	author srevill;	state Exp;
branches;
next	1.20;

1.20
date	2005.04.15.15.55.24;	author jballance;	state Exp;
branches;
next	1.19;

1.19
date	2004.11.09.17.56.26;	author bavison;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.16.10.57.54;	author rsprowson;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.18.22.01.04;	author rsprowson;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.16.17.37.55;	author blaughto;	state Exp;
branches;
next	1.15;

1.15
date	99.12.13.10.45.17;	author sbrodie;	state Exp;
branches;
next	1.14;

1.14
date	99.10.18.09.13.09;	author dcotton;	state Exp;
branches;
next	1.13;

1.13
date	99.06.23.12.10.19;	author pgoodlif;	state Exp;
branches;
next	1.12;

1.12
date	99.06.18.14.20.52;	author jberanek;	state Exp;
branches;
next	1.11;

1.11
date	99.06.17.11.47.06;	author jberanek;	state Exp;
branches;
next	1.10;

1.10
date	99.04.20.16.29.11;	author pwombwel;	state Exp;
branches;
next	1.9;

1.9
date	99.04.15.13.29.05;	author pwombwel;	state Exp;
branches;
next	1.8;

1.8
date	99.03.31.07.26.43;	author ahodgkin;	state Exp;
branches;
next	1.7;

1.7
date	99.03.30.15.11.41;	author ahodgkin;	state Exp;
branches;
next	1.6;

1.6
date	99.03.26.12.25.09;	author ahodgkin;	state Exp;
branches;
next	1.5;

1.5
date	98.10.21.14.37.29;	author pgoodlif;	state Exp;
branches;
next	1.4;

1.4
date	98.10.21.14.27.27;	author pgoodlif;	state Exp;
branches;
next	1.3;

1.3
date	98.06.19.13.21.05;	author sbrodie;	state Exp;
branches;
next	1.2;

1.2
date	98.06.18.18.01.20;	author sbrodie;	state Exp;
branches;
next	1.1;

1.1
date	98.06.18.14.51.04;	author sbrodie;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	98.06.18.14.51.04;	author sbrodie;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	98.06.18.15.32.26;	author sbrodie;	state Exp;
branches;
next	;


desc
@@


1.35
log
@SetColour method flag fixes
Fix checking of the DesktopColours flag to the scrolllist and textarea gadget SetColour methods - didn't match docs.
Fix for expression precedence of + and ? operators by sprinkling in some brackets.
Ref https://www.riscosopen.org/forum/forums/4/topics/9503#posts-72595

Also, optimise the forced redraw if the text area colour overall didn't change (reduces flicker).
Docs corrected to list RISC OS palette words in the right order.

Version 0.44. Tagged as 'Gadgets-0_44'
@
text
@/* (0.44)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.44
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                09 Feb 2018

#define Module_MajorVersion             "0.44"
#define Module_Version                  44
#define Module_MinorVersion             ""
#define Module_Date                     "09 Feb 2018"

#define Module_ApplicationDate          "09-Feb-18"

#define Module_ComponentName            "Gadgets"
#define Module_ComponentPath            "castle/RiscOS/Sources/Toolbox/Gadgets"

#define Module_FullVersion              "0.44"
#define Module_HelpVersion              "0.44 (09 Feb 2018)"
#define Module_LibraryVersionInfo       "0:44"
@


1.34
log
@Have object modules use same message style
Admin:
  Converge on "ObjModName has active tasks.". This allows only 1 section describing the errors in the User Guide.

Version 0.43. Tagged as 'Gadgets-0_43'
@
text
@d1 1
a1 1
/* (0.43)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.43
d9 1
a9 1
#define Module_Date_CMHG                18 Jun 2016
d11 2
a12 2
#define Module_MajorVersion             "0.43"
#define Module_Version                  43
d14 1
a14 1
#define Module_Date                     "18 Jun 2016"
d16 1
a16 1
#define Module_ApplicationDate          "18-Jun-16"
d21 3
a23 3
#define Module_FullVersion              "0.43"
#define Module_HelpVersion              "0.43 (18 Jun 2016)"
#define Module_LibraryVersionInfo       "0:43"
@


1.33
log
@Fix for memory leak in error case
Rather than leak 40 bytes by failing to free(), just use an automatic variable and let the compiler worry about function exits.
From a tip off in https://www.riscosopen.org/forum/forums/4/topics/3990

Version 0.42. Tagged as 'Gadgets-0_42'
@
text
@d1 1
a1 1
/* (0.42)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.42
d9 1
a9 1
#define Module_Date_CMHG                02 May 2016
d11 2
a12 2
#define Module_MajorVersion             "0.42"
#define Module_Version                  42
d14 1
a14 1
#define Module_Date                     "02 May 2016"
d16 1
a16 1
#define Module_ApplicationDate          "02-May-16"
d21 3
a23 3
#define Module_FullVersion              "0.42"
#define Module_HelpVersion              "0.42 (02 May 2016)"
#define Module_LibraryVersionInfo       "0:42"
@


1.32
log
@Fix for null pointer dereference
When there are no items in the scroll list, the check of select/adjust clicks were using event_item=0 and looking up in a NULL sdata list.
Move the (existing) early exit a bit higher up, since there are no entries in the list the _select_item() calls aren't needed anyway.
Fixes issue reported by John Rickman https://www.riscosopen.org/forum/forums/4/topics/4011

Version 0.41. Tagged as 'Gadgets-0_41'
@
text
@d1 1
a1 1
/* (0.41)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.41
d9 1
a9 1
#define Module_Date_CMHG                25 Mar 2016
d11 2
a12 2
#define Module_MajorVersion             "0.41"
#define Module_Version                  41
d14 1
a14 1
#define Module_Date                     "25 Mar 2016"
d16 1
a16 1
#define Module_ApplicationDate          "25-Mar-16"
d21 3
a23 3
#define Module_FullVersion              "0.41"
#define Module_HelpVersion              "0.41 (25 Mar 2016)"
#define Module_LibraryVersionInfo       "0:41"
@


1.31
log
@Plot a more credible rendition of TextArea and ScrollList
Both the TextArea gadget and ScrollList were outputting an unhelpful white rectangle and mysterious black rectangle when asked to plot the gadget prototype (eg. in the gadget palette in ResEd). The black rectangle turned out to represent a scroll bar, though it was the wrong width.
Changed to plot a 2D scrollbar (ala RISC OS 2) then overlay a virtual icon with the name of the gadget type.
main.c:
Relocate helper functions into glib.
Return 'Bad SWI' for unknown subreasons.
glib.c/glib3.c:
Remove various unused functions.
Added new function to plot a grey scrollbar from nested rectangles.
TextArea.c:
Add a vertical, or horixontal, or both, scrollbar plus the label "TextArea".
ScrollList.c:
Add a vertical scrollbar plus the label "ScrollList".

Requires Common-0_25 for the colour defines. Tested in !ResEd in various eigenfactor modes.

Version 0.40. Tagged as 'Gadgets-0_40'
@
text
@d1 1
a1 1
/* (0.40)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.40
d9 1
a9 1
#define Module_Date_CMHG                28 Nov 2015
d11 2
a12 2
#define Module_MajorVersion             "0.40"
#define Module_Version                  40
d14 1
a14 1
#define Module_Date                     "28 Nov 2015"
d16 1
a16 1
#define Module_ApplicationDate          "28-Nov-15"
d21 3
a23 3
#define Module_FullVersion              "0.40"
#define Module_HelpVersion              "0.40 (28 Nov 2015)"
#define Module_LibraryVersionInfo       "0:40"
@


1.30
log
@ScrollList gadget redraw fixes
When _set_colour() is called, remember to redraw the gadget if the colours changed.
When _set_font() is called, remember to redraw the gadget and try to preserve the scroll bar positions.
Save a couple of SWIs if we know the scroll bars must jump in 2 other places.
Remove ScrollLisS, its (never called) function did nothing but return.
Removed duplicate redraw_box, same as redraw_all_box and marked as const.

Reported by Fred Graute, reference
  https://www.riscosopen.org/forum/forums/4/topics/3628
the memory leak aspects of the report have been transferred to ticket #414 for later consideration.
Tested with !ExifEdit and some special versions from Fred with the redraw workarounds removed.

Version 0.39. Tagged as 'Gadgets-0_39'
@
text
@d1 1
a1 1
/* (0.39)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.39
d9 1
a9 1
#define Module_Date_CMHG                12 Oct 2015
d11 2
a12 2
#define Module_MajorVersion             "0.39"
#define Module_Version                  39
d14 1
a14 1
#define Module_Date                     "12 Oct 2015"
d16 1
a16 1
#define Module_ApplicationDate          "12-Oct-15"
d21 3
a23 3
#define Module_FullVersion              "0.39"
#define Module_HelpVersion              "0.39 (12 Oct 2015)"
#define Module_LibraryVersionInfo       "0:39"
@


1.29
log
@Makefile recreated from fragments
Don't bother calling TinyStubs SWI since in ROM it does nothing, and the RAM versions haven't used it since ~1997.
Use module header constants generated from CMHG rather than hand made one.

Version 0.38. Tagged as 'Gadgets-0_38'
@
text
@d1 1
a1 1
/* (0.38)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.38
d9 1
a9 1
#define Module_Date_CMHG                18 Aug 2015
d11 2
a12 2
#define Module_MajorVersion             "0.38"
#define Module_Version                  38
d14 1
a14 1
#define Module_Date                     "18 Aug 2015"
d16 1
a16 1
#define Module_ApplicationDate          "18-Aug-15"
d21 3
a23 3
#define Module_FullVersion              "0.38"
#define Module_HelpVersion              "0.38 (18 Aug 2015)"
#define Module_LibraryVersionInfo       "0:38"
@


1.28
log
@Internationalised
Supporting code borrowed from 'Iconbar' toolbox module.
Tested in a ROM build and RAM build, triggering one error message and checking the dynamic area in task manager.

Version 0.37. Tagged as 'Gadgets-0_37'
@
text
@d1 1
a1 1
/* (0.37)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.37
d9 1
a9 1
#define Module_Date_CMHG                30 Aug 2013
d11 2
a12 2
#define Module_MajorVersion             "0.37"
#define Module_Version                  37
d14 1
a14 1
#define Module_Date                     "30 Aug 2013"
d16 1
a16 1
#define Module_ApplicationDate          "30-Aug-13"
d21 3
a23 3
#define Module_FullVersion              "0.37"
#define Module_HelpVersion              "0.37 (30 Aug 2013)"
#define Module_LibraryVersionInfo       "0:37"
@


1.27
log
@Change to link against tboxlibint
For some reason this toolbox module was unique in linking against the public toolboxlib rather than the internal one, this meant having to carefully tippy toe around not mixing header files (as they contain similar but differently named definitions).
A massive search and replace job.
Tested briefly using ResEd/ResTest and a textarea and scrolllist in a ROM build.
Requires Common-0_21.

Version 0.36. Tagged as 'Gadgets-0_36'
@
text
@d1 1
a1 1
/* (0.36)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.36
d11 2
a12 2
#define Module_MajorVersion             "0.36"
#define Module_Version                  36
d21 3
a23 3
#define Module_FullVersion              "0.36"
#define Module_HelpVersion              "0.36 (30 Aug 2013)"
#define Module_LibraryVersionInfo       "0:36"
@


1.26
log
@ScrollList gadget fix
When 'select only one' or 'multiple selections forbidden' is in use any selection changes first deselect all.
However, in the second case, the module overrode the caller's selection reason so adjust clicking on an item would not deselect it - instead reselecting it!
Logic ammended.
From http://www.riscosopen.org/forum/forums/4/topics/1057

Version 0.35. Tagged as 'Gadgets-0_35'
@
text
@d1 1
a1 1
/* (0.35)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.35
d9 1
a9 1
#define Module_Date_CMHG                16 Mar 2013
d11 2
a12 2
#define Module_MajorVersion             "0.35"
#define Module_Version                  35
d14 1
a14 1
#define Module_Date                     "16 Mar 2013"
d16 1
a16 1
#define Module_ApplicationDate          "16-Mar-13"
d21 3
a23 3
#define Module_FullVersion              "0.35"
#define Module_HelpVersion              "0.35 (16 Mar 2013)"
#define Module_LibraryVersionInfo       "0:35"
@


1.25
log
@Remove unnecessary includes of "Modhdr.h".
The last change meant it was no longer being generated, so ammended the code to not need it in line with all the other toolbox modules.

Version 0.34. Tagged as 'Gadgets-0_34'
@
text
@d1 1
a1 1
/* (0.34)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.34
d9 1
a9 1
#define Module_Date_CMHG                14 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.34"
#define Module_Version                  34
d14 1
a14 1
#define Module_Date                     "14 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.34"
#define Module_HelpVersion              "0.34 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:34"
@


1.24
log
@Changed to use shared TboxMake makefile.
Removed local duplication of string32 and rmensure, since the common library has these in.
Rename TextGadget.c to main.c to fall into line with the "o.mainROM" rule.
Compiles, but not tested.

Version 0.33. Tagged as 'Gadgets-0_33'
@
text
@d1 1
a1 1
/* (0.33)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.33
d11 2
a12 2
#define Module_MajorVersion             "0.33"
#define Module_Version                  33
d21 3
a23 3
#define Module_FullVersion              "0.33"
#define Module_HelpVersion              "0.33 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:33"
@


1.23
log
@TextGadgets module fixes & improvements
Detail:
  c/ScrollList, c/TextArea - ScrollList_SetFont and TextArea_SetFont now accept font handles instead of just font names. The handles are handled in the same way as the Window module, i.e. the handle will be managed and freed by the TextGadgets modules. Fixes bug #212.
  c/ScrollList, c/Scrollbar, c/TextArea - Fix handling of Toolbox_ObjectDeleted events. Original code would corrupt the object lists when deleting items, and reallocate much more memory than was actually needed. Fixes bug #214
  c/MemMan - Fix grow_handlers to not leave handle_list as NULL if the realloc fails. Fixes bug #216.
  c/MemMan, c/TextArea, c/TextMan, h/MemMan, h/TextMan - Changed how the 'Handle' type is handled. Instead of MemMan giving out direct pointers to Handle instances, it now gives out identifiers (HandleId). These identifiers are then converted to Handle pointers via get_handle whenever the contents need to be accessed. This allows the handle_list to be safely realloc'd without breaking all the existing Handle pointers. Fixes bug #217
  c/MemMan - Reduced HDNLE_GRW_BY from 1000 to 128 to save a bit of memory
Admin:
  Module compiles and runs, but actual functionality is untested.
  Fixes bugs 212, 214, 216, 217.


Version 0.32. Tagged as 'Gadgets-0_32'
@
text
@d1 1
a1 1
/* (0.32)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.32
d9 1
a9 1
#define Module_Date_CMHG                25 Jun 2011
d11 2
a12 2
#define Module_MajorVersion             "0.32"
#define Module_Version                  32
d14 1
a14 1
#define Module_Date                     "25 Jun 2011"
d16 1
a16 1
#define Module_ApplicationDate          "25-Jun-11"
d21 3
a23 3
#define Module_FullVersion              "0.32"
#define Module_HelpVersion              "0.32 (25 Jun 2011)"
#define Module_LibraryVersionInfo       "0:32"
@


1.22
log
@Function returns no longer use stack structures.
Previously, a number of errors were contructed as automatic variables then returned to the caller - potentially accessing stale stack area. All error blocks are now held in ROM and cast from there.
Error numbers are now not &00000000 or &20202020, using the allocated base - requires 'Common-0_15'.
Trimmed some unused debugging code out, saves about 3k.
Renamed C++ clashing variables to stop the compiler moaning.
Implemented feature request to accept the empty string "" as no font handle in _SetFont calls.
At some point, this module needs internationalising.

Version 0.31. Tagged as 'Gadgets-0_31'
@
text
@d1 1
a1 1
/* (0.31)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.31
d9 1
a9 1
#define Module_Date_CMHG                28 Feb 2010
d11 2
a12 2
#define Module_MajorVersion             "0.31"
#define Module_Version                  31
d14 1
a14 1
#define Module_Date                     "28 Feb 2010"
d16 1
a16 1
#define Module_ApplicationDate          "28-Feb-10"
d21 3
a23 3
#define Module_FullVersion              "0.31"
#define Module_HelpVersion              "0.31 (28 Feb 2010)"
#define Module_LibraryVersionInfo       "0:31"
@


1.21
log
@Just some makefile tweaks. No code changes.

Version 0.30. Tagged as 'Gadgets-0_30'
@
text
@d1 1
a1 1
/* (0.30)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.30
d9 1
a9 1
#define Module_Date_CMHG                14 Jun 2008
d11 2
a12 2
#define Module_MajorVersion             "0.30"
#define Module_Version                  30
d14 1
a14 1
#define Module_Date                     "14 Jun 2008"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jun-08"
d21 3
a23 3
#define Module_FullVersion              "0.30"
#define Module_HelpVersion              "0.30 (14 Jun 2008)"
#define Module_LibraryVersionInfo       "0:30"
@


1.20
log
@         include file h.strings -> h.string to build with cc 5.09
         in c.riscos_uti
Detail:
Admin:   builds


Version 0.29. Tagged as 'Gadgets-0_29'
@
text
@d1 1
a1 1
/* (0.29)
d4 1
a4 1
 * Last processed by srccommit version: 1.2.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.29
d9 1
a9 1
#define Module_Date_CMHG                15 Apr 2005
d11 2
a12 2
#define Module_MajorVersion             "0.29"
#define Module_Version                  29
d14 1
a14 1
#define Module_Date                     "15 Apr 2005"
d16 1
a16 1
#define Module_ApplicationDate          "15-Apr-05"
d19 1
a19 1
#define Module_ComponentPath            "RiscOS/Sources/Apps/Java/Gadgets"
d21 3
a23 3
#define Module_FullVersion              "0.29"
#define Module_HelpVersion              "0.29 (15 Apr 2005)"
#define Module_LibraryVersionInfo       "0:29"
@


1.19
log
@  Linking change.
Detail:
  Was still doing link -bin in rom_link phase. Changed to use link -rmf
  for consistency with all other C components, and with the BBE auto-
  generated makefile. Also has the benefit of saving approx 1K of ROM space.
Admin:
  Not expected to cause any problems.

Version 0.28. Tagged as 'Gadgets-0_28'
@
text
@d1 1
a1 1
/* (0.28)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.28
d9 1
a9 1
#define Module_Date_CMHG                09 Nov 2004
d11 2
a12 2
#define Module_MajorVersion             "0.28"
#define Module_Version                  28
d14 1
a14 1
#define Module_Date                     "09 Nov 2004"
d16 1
a16 1
#define Module_ApplicationDate          "09-Nov-04"
d21 3
a23 3
#define Module_FullVersion              "0.28"
#define Module_HelpVersion              "0.28 (09 Nov 2004)"
#define Module_LibraryVersionInfo       "0:28"
@


1.18
log
@Fix for data abort triggered in the following case:
 create res file with a single TextArea in it
 change flags to be auto create and auto display
 drop into restest
 delete the 8 character "TextArea" default text
 press enter
 press backspace
Also,there was a _swix(&107) left in from some point in the past.

Version 0.27. Tagged as 'Gadgets-0_27'
@
text
@d1 1
a1 1
/* (0.27)
d4 1
a4 1
 * Last processed by srccommit version: 1.68.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.27
d9 1
a9 1
#define Module_Date_CMHG                16 Jun 2003
d11 2
a12 2
#define Module_MajorVersion             "0.27"
#define Module_Version                  27
d14 1
a14 1
#define Module_Date                     "16 Jun 2003"
d16 1
a16 1
#define Module_ApplicationDate          "16-Jun-03"
d21 3
a23 3
#define Module_FullVersion              "0.27"
#define Module_HelpVersion              "0.27 (16 Jun 2003)"
#define Module_LibraryVersionInfo       "0:27"
@


1.17
log
@Change so it does delete and backspace like Windows (controlled by the
NEWDELETE switch like RISCOSLib is now).
Key 8 deletes left
Key 127 deletes right
The Copy key does nothing (home and end aren't implemented it seems).
Fix from Kevin for it claiming a Dynamic area of maximum size - greedy
guts now limited to 16M.

Version 0.26. Tagged as 'Gadgets-0_26'
@
text
@d1 1
a1 1
/* (0.26)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.26
d9 1
a9 1
#define Module_Date_CMHG                18 Feb 2003
d11 2
a12 2
#define Module_MajorVersion             "0.26"
#define Module_Version                  26
d14 1
a14 1
#define Module_Date                     "18 Feb 2003"
d16 1
a16 1
#define Module_ApplicationDate          "18-Feb-03"
d21 3
a23 3
#define Module_FullVersion              "0.26"
#define Module_HelpVersion              "0.26 (18 Feb 2003)"
#define Module_LibraryVersionInfo       "0:26"
@


1.16
log
@  Removed unused files that were preventing build.
Detail:
  debug.s was still in the build and included a header which had been removed
  in a previous version.  The code in debug.s in not used anywhere, so I've
  just removed it (and the corresponding debug.h, which was empty anyway).
Admin:
  Compiled.

Version 0.25. Tagged as 'Gadgets-0_25'
@
text
@d1 1
a1 1
/* (0.25)
d4 1
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.25
d9 1
a9 1
#define Module_Date_CMHG                16 Mar 2000
d11 2
a12 2
#define Module_MajorVersion             "0.25"
#define Module_Version                  25
d14 1
a14 1
#define Module_Date                     "16 Mar 2000"
d16 8
a23 1
#define Module_FullVersion              "0.25"
@


1.15
log
@  32-bit compatibility.
  Improved some of the rather odd Piers-assembler.
Detail:
  Some rather odd assembler has been tidied up.
  Removed some obsolete header files that are no longer required.
  Removed "objs" - nothing uses it - looks like an accidental
    checkin.
Admin:
  Tested on Risc PC with Phoebe & 32 machine builds.

Version 0.24. Tagged as 'Gadgets-0_24'
@
text
@d1 1
a1 1
/* (0.24)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.24
d8 1
a8 1
#define Module_Date_CMHG                13 Dec 1999
d10 2
a11 2
#define Module_MajorVersion             "0.24"
#define Module_Version                  24
d13 1
a13 1
#define Module_Date                     "13 Dec 1999"
d15 1
a15 1
#define Module_FullVersion              "0.24"
@


1.14
log
@========
	Altered to work with HdrSrc 0.46

Detail:
=======
 	HdrSrc 0.46 now includes the macros defined in the hdr.Cvars local
file in it's Hdr:Macros file. Hence have altered this component to use the
global header rather than the local copy. Also altered it so its hdr.SWINames
file no longer attempts to define the AddSWI macro, which is also defined in
hdr:Macros.

Admin:
======
	tedted that it builds.

Version 0.23. Tagged as 'Gadgets-0_23'
@
text
@d1 1
a1 1
/* (0.23)
d6 3
a8 3
#define Module_MajorVersion_CMHG     	0.23
#define Module_MinorVersion_CMHG	
#define Module_Date_CMHG      		18 Oct 1999
d10 4
a13 4
#define Module_MajorVersion     	"0.23"
#define Module_Version                  23
#define Module_MinorVersion		""
#define Module_Date      		"18 Oct 1999"
d15 1
a15 1
#define Module_FullVersion              "0.23"
@


1.13
log
@Scrollbars now handle fading.
Detail:
faded flag added to ScrollbarP.h, Scrollbar.c uses this to calculate extent.
scrollbar_fade function called as a PRIVATE_HANDLER from TextGadget.c
Admin:
Built and tested on Pete Goodliffe's Risc PC. Problem with CVS misusage fixed
(a couple of modifications were accidentally removed).

Version 0.22. Tagged as 'Gadgets-0_22'
@
text
@d1 1
a1 1
/* (0.22)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.22
d8 1
a8 1
#define Module_Date_CMHG      		23 Jun 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.22"
#define Module_Version                  22
d13 1
a13 1
#define Module_Date      		"23 Jun 1999"
d15 1
a15 1
#define Module_FullVersion              "0.22"
@


1.12
log
@ * Fixed the textarea_set/get_cursor_position methods to use the method
   interface as specified in docs.textarea.  I wasn't returning values
   in R4 as it showed in the document, I am now.  The fetching of the
   cursor position (in both the get and set calls) doesn't appear to
   work (always returns 0) with what appears to be the correct code to
   achieve this.  The fixing of this is left as an exercise for the bored
   and very brave person...textarea internals are "interesting".

 * Added some description of the methods into docs.textarea


Version 0.21. Tagged as 'Gadgets-0_21'
@
text
@d1 1
a1 1
/* (0.21)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.21
d8 1
a8 1
#define Module_Date_CMHG      		18 Jun 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.21"
#define Module_Version                  21
d13 1
a13 1
#define Module_Date      		"18 Jun 1999"
d15 1
a15 1
#define Module_FullVersion              "0.21"
@


1.11
log
@ * Added 2 new TextArea calls, as they were defined in docs.TextArea.
   TextArea_SetCursorPosition and TextArea_GetCursorPosition.

 * Removed a lot of unneeded comments that wrapped around changes I made
   a while ago.

 * !MkRam now enables throwback.


Version 0.20. Tagged as 'Gadgets-0_20'
@
text
@d1 1
a1 1
/* (0.20)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.20
d8 1
a8 1
#define Module_Date_CMHG      		17 Jun 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.20"
#define Module_Version                  20
d13 1
a13 1
#define Module_Date      		"17 Jun 1999"
d15 1
a15 1
#define Module_FullVersion              "0.20"
@


1.10
log
@Changed scrollbar gadget to initialise title-bar validation string despite not having a title bar, to get around a crash in the wimp

Version 0.19. Tagged as 'Gadgets-0_19'
@
text
@d1 1
a1 1
/* (0.19)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.19
d8 1
a8 1
#define Module_Date_CMHG      		20 Apr 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.19"
#define Module_Version                  19
d13 1
a13 1
#define Module_Date      		"20 Apr 1999"
d15 1
a15 1
#define Module_FullVersion              "0.19"
@


1.9
log
@Fixed SetValue for Scrollbar gadget so it updates the display.

Version 0.18. Tagged as 'Gadgets-0_18'
@
text
@d1 1
a1 1
/* (0.18)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.18
d8 1
a8 1
#define Module_Date_CMHG      		15 Apr 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.18"
#define Module_Version                  18
d13 1
a13 1
#define Module_Date      		"15 Apr 1999"
d15 1
a15 1
#define Module_FullVersion              "0.18"
@


1.8
log
@An unsigned int was involved in a signed comparison (no compiler warning?)
which led to empty lists contracting to zero height. Fixed.

Version 0.17. Tagged as 'Gadgets-0_17'
@
text
@d1 1
a1 1
/* (0.17)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.17
d8 1
a8 1
#define Module_Date_CMHG      		31 Mar 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.17"
#define Module_Version                  17
d13 1
a13 1
#define Module_Date      		"31 Mar 1999"
d15 1
a15 1
#define Module_FullVersion              "0.17"
@


1.7
log
@ScrollList changes.

Added scrolllist_set_item_text. Tweak to extent setting to account for
window border. _add_item fix ('>' should've read '>=' in index range
check). Can now tell _add_item to make the new item visible (flag
ScrollList_AddItem_MakeVisible), else it will try to maintain the y
scroll position. _delete_items continues to jump to the top as before,
but you can ask it to try and maintain the y scroll position too
(flag ScrollList_DeleteItems_DoNotJumpToTop).

Version 0.16. Tagged as 'Gadgets-0_16'
@
text
@d1 1
a1 1
/* (0.16)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.16
d8 1
a8 1
#define Module_Date_CMHG      		30 Mar 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.16"
#define Module_Version                  16
d13 1
a13 1
#define Module_Date      		"30 Mar 1999"
d15 1
@


1.6
log
@Various fixes and extensions to ScrollList, plus a related fix in TextArea
and ScrollBar.

Title background colour of gadgets was either undefined or set to 0; should
be 2. Corrected. Would be apparent with 2D tools or any transparent tool
sprite set.

SELECT clicks on deselected entries in a ScrollList now deselect any other
selected items before selecting the new one.

Embedded window of TextArea and ScrollList now put in the right place. At
create time, the sizes of the current tool sprite set is also checked; this
used to be hard coded. If the tool sizes and/or Desktop scaling changes at
run-time this won't be noticed yet, as no mechanism to pass Wimp messages
to *external* gadgets exists in the Toolbox currently. Still, at least it
gets it right the next time a new instance of the gadget is created.

Flag bit ScrollList_SelectionChangingMethod_SendEvent to any of
scrolllist_select_item, scrolllist_deselect_item or scrolllist_delete_items
prompts them to send ScrollList_Selection to the client on completion. This
can help simplify client UI code for UIs which depend on what is selected
(e.g. a "Select all" button greys out if all items are selected by a
keyboard shortcut - this can now all work on just the one event handler).

Flag bit ScrollList_SelectionChangingMethod_OnAll to either of
scrolllist_select_item or scrolllist_deselect_item tells the methods to
act like a "Select all" or "Clear selection" call. This is a common client
operation and it's a lot easier for the ScrollList gadget to do it than
have the client iterate over all items.

Supports new method ScrollList_CountItems (scrolllist_count_items veneer
present in tboxlibs 0.04 or later). Returns number of entries in gadget.
Avoids clumsy situation of both the gadget and the clienty keeping track
of how many entries are present.

Note that docs.ScrollList mis-documented some flags settings. Now fixed.

Version 0.15. Not tagged
@
text
@d1 1
a1 1
/* (0.15)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.15
d8 1
a8 1
#define Module_Date_CMHG      		26 Mar 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.15"
#define Module_Version                  15
d13 1
a13 1
#define Module_Date      		"26 Mar 1999"
@


1.5
log
@Just trying to make up for my inability to use srccommit.

Version 0.14. Tagged as 'Gadgets-0_14'
@
text
@d1 1
a1 1
/* (0.14)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.14
d8 1
a8 1
#define Module_Date_CMHG      		21 Oct 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.14"
#define Module_Version                  14
d13 1
a13 1
#define Module_Date      		"21 Oct 1998"
@


1.4
log
@TextArea_SetText now positions the caret at the beginning of the last line.

Version 0.13. Not tagged
@
text
@d1 1
a1 1
/* (0.13)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.13
d10 2
a11 2
#define Module_MajorVersion     	"0.13"
#define Module_Version                  13
@


1.3
log
@Changed out of memory error message to not be prefixed JBERANEK.
Changed TextArea windows to be created with the NoBounds window flag set.

Version 0.11. Tagged as 'Gadgets-0_11'
@
text
@d1 1
a1 1
/* (0.11)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.11
d8 1
a8 1
#define Module_Date_CMHG      		19 Jun 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.11"
#define Module_Version                  11
d13 1
a13 1
#define Module_Date      		"19 Jun 1998"
@


1.2
log
@Merged Spinner branch back to trunk.
@
text
@d1 1
a1 1
/* (0.10)
d6 3
a8 3
#define Module_MajorVersion_CMHG     	0.10
#define Module_MinorVersion_CMHG	1.1.2.2
#define Module_Date_CMHG      		18 Jun 1998
d10 4
a13 4
#define Module_MajorVersion     	"0.10"
#define Module_Version                  10
#define Module_MinorVersion		"1.1.2.2"
#define Module_Date      		"18 Jun 1998"
@


1.1
log
@file VersionNum was initially added on branch Spinner.
@
text
@d1 14
@


1.1.2.1
log
@created by srccommit.
@
text
@a0 14
/* (0.09)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 *
 */
#define Module_MajorVersion_CMHG     	0.09
#define Module_MinorVersion_CMHG	$Revision:$
#define Module_Date_CMHG      		18 Jun 1998

#define Module_MajorVersion     	"0.09"
#define Module_Version                  9
#define Module_MinorVersion		"$Revision:$"
#define Module_Date      		"18 Jun 1998"

@


1.1.2.2
log
@* Event generation for ScrollList fixed - you no longer get spurious events
  for a phantom extra item on the list.
* Flag added to ScrollList_Selection event to indicate adjust click.
* Fixed un-initialised base_line variable causing text of ScrollList
  items to disappear when the desktop font was the System font.

Version 0.10, 1.1.2.2. Tagged as 'Gadgets-0_10-1_1_2_2'
@
text
@d1 1
a1 1
/* (0.10)
d6 2
a7 2
#define Module_MajorVersion_CMHG     	0.10
#define Module_MinorVersion_CMHG	1.1.2.2
d10 3
a12 3
#define Module_MajorVersion     	"0.10"
#define Module_Version                  10
#define Module_MinorVersion		"1.1.2.2"
@
