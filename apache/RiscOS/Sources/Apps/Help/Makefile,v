head	4.11;
access;
symbols
	Help-2_37:4.11
	Help-2_36:4.10
	Help-2_35:4.9
	Help-2_34:4.7
	Help-2_33:4.6
	Help-2_32:4.5
	Help-2_31:4.5
	dcotton_Ursula_merge:4.3.2.1
	dcotton_Spin_merge:4.1.7.2
	Help-2_30:4.4
	HelpRes-2_28:4.1.7.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.3.2.1
	Ursula_RiscPC:4.3.2.1.0.2
	nicke_Help_25-9-98:4.1.7.2
	rthornb_UrsulaBuild-19Aug1998:4.3.2.1
	UrsulaBuild_FinalSoftload:4.3.2.1
	rthornb_UrsulaBuild-12Aug1998:4.3.2.1
	aglover_UrsulaBuild-05Aug1998:4.3.2.1
	rthornb_UrsulaBuild-29Jul1998:4.3.2.1
	rthornb_UrsulaBuild-22Jul1998:4.3.2.1
	rthornb_UrsulaBuild-15Jul1998:4.3.2.1
	rthornb_UrsulaBuild-07Jul1998:4.3.2.1
	rthornb_UrsulaBuild-17Jun1998:4.3.2.1
	rthornb_UrsulaBuild-10Jun1998:4.3.2.1
	afrost_NC2_Generic:4.1.7.1
	rthornb_UrsulaBuild-03Jun1998:4.3.2.1
	rthornb_UrsulaBuild-27May1998:4.3.2.1
	rthornb_UrsulaBuild-21May1998:4.3.2.1
	rthornb_UrsulaBuild_01May1998:4.3.2.1
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.3.0.6
	Daytona_bp:4.3
	Ursula:4.3.0.2
	Ursula_bp:4.3
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.3
	ARTtmp:4.1.7.1.0.2
	RCA:4.3.0.4
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.11
date	2013.07.21.08.38.23;	author rsprowson;	state Exp;
branches;
next	4.10;
commitid	yRqw3D0tifkMyjYw;

4.10
date	2012.08.09.20.03.55;	author rsprowson;	state Exp;
branches;
next	4.9;
commitid	5aYqhfbsEIlvtUfw;

4.9
date	2012.08.08.21.10.46;	author rsprowson;	state Exp;
branches;
next	4.8;
commitid	5usVU0jmauloSMfw;

4.8
date	2003.11.12.18.49.30;	author bavison;	state Exp;
branches;
next	4.7;

4.7
date	2001.01.09.13.49.45;	author dcotton;	state Exp;
branches;
next	4.6;

4.6
date	2000.11.30.11.52.59;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	99.11.13.15.18.52;	author dcotton;	state Exp;
branches;
next	4.4;

4.4
date	99.11.12.14.15.27;	author dcotton;	state Exp;
branches;
next	4.3;

4.3
date	97.01.03.15.10.45;	author nturton;	state Exp;
branches
	4.3.2.1;
next	4.2;

4.2
date	97.01.02.13.55.15;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.19.50;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.3.2.1
date	98.03.26.10.20.37;	author rthornb;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.19.50;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.19.27.07;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.06.18;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.19.23.31;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	98.09.16.14.42.49;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.11
log
@Correction to menu background colour
Was wimp colour 1, should be 0 (white).
Makefile updated to use some definitions from BuildSys-6_20

Version 2.37. Tagged as 'Help-2_37'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Help
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name   Description
# ----       ----   -----------
# 05-Nov-94  AMcC   Updated for Black build
#

#
# Program specific options:
#
COMPONENT  = Help
APP        = !${COMPONENT}
ROM_MODULE = rm.${COMPONENT}
RDIR       = Resources
LDIR       = LocalRes:
MSGS       = Resources.GenMessage

#
# Export Paths for Messages module
#
RESDIR = <resource$dir>.Resources.${COMPONENT}
RESAPP = <resource$dir>.Apps.${APP}

include StdTools

FILES =\
 ${RDIR}.!Boot \
 LocalRes:!Help \
 LocalRes:!Run \
 ${RDIR}.!RunImage \
 LocalRes:Messages \
 LocalRes:Templates 

# Resources to be included in the ROM module (not in Messages module}
RESFILES =\
 ${RDIR}.!RunImage

#
# Main rules:
#
all: ${FILES}
        @@echo ${COMPONENT}: Application built (Disc)

rom: ${ROM_MODULE}
        @@echo ${COMPONENT}: Module built (ROM)

install: ${FILES} ${MSGS}
        ${MKDIR} ${INSTDIR}.${APP}
        |
        ${CP} ${RDIR}.!Boot      ${INSTDIR}.${APP}.!Boot     ${CPFLAGS}
        ${CP} LocalRes:!Help     ${INSTDIR}.${APP}.!Help     ${CPFLAGS}
        ${CP} LocalRes:!Run      ${INSTDIR}.${APP}.!Run      ${CPFLAGS}
        ${CP} ${RDIR}.!RunImage  ${INSTDIR}.${APP}.!RunImage ${CPFLAGS}
        ${CP} ${MSGS}            ${INSTDIR}.${APP}.Messages  ${CPFLAGS}
        ${CP} LocalRes:Templates ${INSTDIR}.${APP}.Templates ${CPFLAGS}
        |
        Access ${INSTDIR}.${APP}.* lr/r
        |
        @@echo ${COMPONENT}: Application installed (Disc)

install_rom: ${ROM_MODULE}
        ${CP} ${ROM_MODULE} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: Module installed {ROM}

resources: ${LDIR}ROM.!RunLink ${MSGS}
        ${MKDIR} ${RESAPP}
        ${MKDIR} ${RESDIR}
        |
        ${CP} LocalRes:!Help         ${RESAPP}.!Help     ${CPFLAGS}
        ${CP} LocalRes:ROM.!Run      ${RESAPP}.!Run      ${CPFLAGS}
        |
        ${CP} ${LDIR}ROM.!RunLink    ${RESDIR}.!RunLink  ${CPFLAGS}
        ${CP} ${MSGS}                ${RESDIR}.Messages  ${CPFLAGS}
        ${CP} LocalRes:Templates     ${RESDIR}.Templates ${CPFLAGS}
        |
        @@echo ${COMPONENT}: resource files copied to Messages module

clean:
        ${RM} ${ROM_MODULE}
        ${RM} ${RDIR}.!RunImage
        ${RM} ${LDIR}ROM.!RunLink
        ${RM} ${MSGS}
        ${RM} GenMessTmp
        ${XWIPE} o ${WFLAGS}
        ${XWIPE} crunched.* ${WFLAGS}
        @@echo ${COMPONENT}: cleaned

#
# Static dependencies:
#
${ROM_MODULE}: s.Main ${RESFILES}
        ${MKDIR} o
        ${AS} ${ASFLAGS} -o o.Main s.Main
        ${LD} -rmf -o $@@ o.Main

${MSGS}: LocalRes:Messages VersionNum
        FAppend GenMessTmp LocalRes:Messages LocalRes:Tokens${ROMTOKENS}
        ${INSERTVERSION} GenMessTmp > $@@

${RDIR}.!RunImage: crunched.!RunImage
        ${SQUISH} ${SQUISHFLAGS} -from crunched.!RunImage -to $@@

crunched.!RunImage: bas.!RunImage
        crunch.!RunImage; BASIC

${LDIR}ROM.!RunLink: bas.!RunLink
        ${MKDIR} ${LDIR}ROM    
        ${SQUISH} ${SQUISHFLAGS} -from bas.!RunLink -to $@@

#---------------------------------------------------------------------------
# Dynamic dependencies:
@


4.10
log
@Append tokens for historical ROMs
Presumably when this was being actively maintained the build process extracted the help text from ROM components (such as the filer) and appended it to the application. It is assumed this has long since been lost/retired.
To produce a disc version for a given historical ROM we need the tokens for the respective ROM.
* Add tokens extracted from ROMs which !Help came with
* Recover tokens for RISC OS 3.50 from dusty CD
* Adapt makefile to allow selection

Version 2.36. Tagged as 'Help-2_36'
@
text
@a32 1
MSGVERSION = ${AWK} -f Build:AwkVers
a42 3
SQUISH    = squish
SQFLAGS   = -nolist

d115 1
a115 1
        ${MSGVERSION} GenMessTmp > $@@
d118 1
a118 1
        ${SQUISH} ${SQFLAGS} -from crunched.!RunImage -to $@@
d125 1
a125 1
        ${SQUISH} ${SQFLAGS} -from bas.!RunLink -to $@@
@


4.9
log
@Tidy up
* Version number inserted to messages with centralised AWK script
* Assembler code ammended to use objasm
* Redundant 2D templates, awk script, !MkRes files removed
Disc build installed and checked, ROM build completed but not tested.

Version 2.35. Tagged as 'Help-2_35'
@
text
@d104 1
d118 2
a119 1
        ${MSGVERSION} LocalRes:Messages > $@@
@


4.8
log
@Changed to use gawk instead of awk.

Version 2.34. Not tagged
@
text
@d32 3
a34 1
LDIR       = ${RDIR}.${LOCALE}
d42 4
a45 15
#
# Generic options:
#
MKDIR   = mkdir -p 
AS      = aasm
CP      = copy
RM      = remove
SQUISH  = squish
WIPE    = -wipe
STRIP   = stripdepnd

AFLAGS  = ${THROWBACK} -depend !Depend -nocache -stamp -quit -module
CPFLAGS = ~cfr~v
SQFLAGS = -nolist
WFLAGS  = ~c~v
d63 1
a63 1
        @@echo ${COMPONENT}: Application built (Disc}
d66 1
a66 1
        @@echo ${COMPONENT}: Module built (ROM}
d68 1
a68 1
install: ${FILES} resources-BAS
d75 1
a75 1
        ${CP} LocalRes:Messages  ${INSTDIR}.${APP}.Messages  ${CPFLAGS}
d80 1
a80 1
        @@echo ${COMPONENT}: Application installed {Disc}
d86 1
a86 1
resources: ${LDIR}.ROM.!RunLink
d93 2
a94 2
        ${CP} ${LDIR}.ROM.!RunLink   ${RESDIR}.!RunLink  ${CPFLAGS}
        ${CP} LocalRes:Messages      ${RESDIR}.Messages  ${CPFLAGS}
d102 4
a105 4
        ${RM} ${LDIR}.ROM.!RunLink
        ${RM} s.Version
        ${WIPE} crunched.* ${WFLAGS}
        ${STRIP}
d111 4
d116 2
a117 5
${ROM_MODULE}: s.Main s.Version ${RESFILES}
        ${AS} ${AFLAGS} -from s.Main -to $@@

s.Version: LocalRes:Messages
        GNU.gawk -f awk.Version LocalRes:Messages > $@@
d125 2
a126 2
${LDIR}.ROM.!RunLink: bas.!RunLink
        ${MKDIR} ${LDIR}.ROM    
@


4.7
log
@    Builds with multiple resource sets now build without errors.
Detail:
    The makefile was not creating internationalised versions of the ROM
directory. It now does so.
Admin:
    Tested in a Lazarus build.

Version 2.34. Tagged as 'Help-2_34'
@
text
@d125 1
a125 1
        awk -f awk.Version LocalRes:Messages > $@@
@


4.6
log
@Fixed to build properly in a desktop build. Can't give any guarantees for an
NC/STB build though :)
Application help string corrected

Version 2.33. Tagged as 'Help-2_33'
@
text
@d43 1
a43 1
MKDIR   = cdir
d134 1
@


4.5
log
@Altered so that hopefully all resource stages work - main resource
stage was broken.

Version 2.31. Tagged as 'Help-2_31'
@
text
@d32 1
d95 2
a96 3
resources-BAS: LocalRes:ROM.!RunLink
        ${MKDIR} <resource$dir>.Apps
	${MKDIR} ${RESAPP}
d102 2
a103 1
        ${CP} LocalRes:ROM.!RunLink  ${RESDIR}.!RunLink  ${CPFLAGS}
d105 1
a105 8

resources-RES: 
        ${MKDIR} ${RESDIR}

resources:
        ${MKDIR} <resource$dir>.Resources
        ${MKDIR} ${RESDIR}
        ${CP} LocalRes:Messages      ${RESDIR}.Messages  ${CPFLAGS}
d111 1
a111 1
        ${RM} LocalRes:ROM.!RunLink
d133 1
a133 1
LocalRes:ROM.!RunLink: bas.!RunLink
@


4.4
log
@	Merged Ursula branch and the latest alterations on the Spinner branch.

Detail:
	Merged the changes on the Spinner branch since the last merge.
	Merged the Ursula branch.
	Changed to use srccommit.
	Now uses strdepend during the clean phase.

Admin:
	Built all phases.

Version 2.30. Tagged as 'Help-2_30'
@
text
@d76 1
a76 1
install: ${FILES}
d95 1
d108 3
a110 1
resources: resources-${TYPE}
@


4.3
log
@Module merged.  Needs new BuildSys.
@
text
@a31 1
LDIR       = ${RDIR}.${LOCALE}
d46 1
a46 1
SQUISH    = squish
d48 1
d57 2
a58 2
 ${LDIR}.!Help \
 ${LDIR}.!Run \
d60 2
a61 2
 ${LDIR}.Messages \
 ${LDIR}.Templates 
d80 2
a81 2
        ${CP} ${LDIR}.!Help      ${INSTDIR}.${APP}.!Help     ${CPFLAGS}
        ${CP} ${LDIR}.!Run       ${INSTDIR}.${APP}.!Run      ${CPFLAGS}
d83 2
a84 2
        ${CP} ${LDIR}.Messages   ${INSTDIR}.${APP}.Messages  ${CPFLAGS}
        ${CP} ${LDIR}.Templates  ${INSTDIR}.${APP}.Templates ${CPFLAGS}
d94 1
a94 1
resources-BAS: ${LDIR}.ROM.!RunLink
d98 2
a99 2
        ${CP} ${LDIR}.!Help         ${RESAPP}.!Help     ${CPFLAGS}
        ${CP} ${LDIR}.ROM.!Run      ${RESAPP}.!Run      ${CPFLAGS}
d101 2
a102 2
        ${CP} ${LDIR}.ROM.!RunLink  ${RESDIR}.!RunLink  ${CPFLAGS}
        ${CP} ${LDIR}.Templates     ${RESDIR}.Templates ${CPFLAGS}
d108 1
a108 2
        ${CP} ${LDIR}.Messages      ${RESDIR}.Messages  ${CPFLAGS}
        |
d114 1
a114 1
        ${RM} ${LDIR}.ROM.!RunLink
d117 1
d127 2
a128 2
s.Version: ${LDIR}.Messages
        awk -f awk.Version ${LDIR}.Messages > $@@
d136 1
a136 1
${LDIR}.ROM.!RunLink: bas.!RunLink
a140 14
rm.Help: s.AppName
rm.Help: Hdr:ListOpts
rm.Help: Hdr:Macros
rm.Help: Hdr:System
rm.Help: Hdr:SWIs
rm.Help: Hdr:CPU.Generic26
rm.Help: Hdr:IO.GenericIO
rm.Help: Hdr:RISCOS
rm.Help: Hdr:ModHand
rm.Help: Hdr:Services
rm.Help: Hdr:Proc
rm.Help: Hdr:ResourceFS
rm.Help: s.Version
rm.Help: s.ResFiles
@


4.3.2.1
log
@Removed dynamic dependancies from Makefiles and removed all reference to Prefix
@
text
@d141 14
@


4.2
log
@Module merged.  Which resource files are exported now depends on what type
the module has in the components file.
@
text
@d94 1
a94 2
ifeq (${TYPE},BAS)
resources: ${LDIR}.ROM.!RunLink
a95 3
else
resources: 
endif
a97 1
ifeq (${TYPE},BAS)
d103 5
a107 1
endif
a148 1
rm.Help: Hdr:Machine.<Machine>
@


4.1
log
@Initial revision
@
text
@d94 1
d96 4
a99 1
        ${MKDIR} ${RESAPP}
d102 1
d107 2
a109 1
        ${CP} ${LDIR}.Templates     ${RESDIR}.Templates ${CPFLAGS}
d150 1
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@d94 2
a95 1
resources: 
d97 5
d103 2
a143 1
rm.Help: Hdr:Machine.<Machine>
@


4.1.7.2
log
@Modified Makefile to use LocalRes$Path.
@
text
@d32 1
d57 2
a58 2
 LocalRes:!Help \
 LocalRes:!Run \
d60 2
a61 2
 LocalRes:Messages \
 LocalRes:Templates 
d80 2
a81 2
        ${CP} LocalRes:!Help     ${INSTDIR}.${APP}.!Help     ${CPFLAGS}
        ${CP} LocalRes:!Run      ${INSTDIR}.${APP}.!Run      ${CPFLAGS}
d83 2
a84 2
        ${CP} LocalRes:Messages  ${INSTDIR}.${APP}.Messages  ${CPFLAGS}
        ${CP} LocalRes:Templates ${INSTDIR}.${APP}.Templates ${CPFLAGS}
d96 1
a96 1
        ${CP} LocalRes:Messages      ${RESDIR}.Messages  ${CPFLAGS}
d102 1
a102 1
        ${RM} LocalRes:ROM.!RunLink
d114 2
a115 2
s.Version: LocalRes:Messages
        awk -f awk.Version LocalRes:Messages > $@@
d123 1
a123 1
LocalRes:ROM.!RunLink: bas.!RunLink
d128 15
@


4.1.5.1
log
@Import from SrcFiler
@
text
@d94 2
a95 1
resources: 
d97 5
d103 2
a143 1
rm.Help: Hdr:Machine.<Machine>
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
