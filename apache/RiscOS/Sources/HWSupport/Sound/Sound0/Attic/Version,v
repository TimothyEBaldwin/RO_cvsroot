head	4.7;
access;
symbols
	Sound0-1_69:4.6
	Sound0-1_68:4.6
	Sound0-1_67:4.6
	Sound0-1_66:4.6
	Sound0-1_65:4.6
	Sound0-1_64:4.6
	Sound0-1_63:4.6
	Sound0-1_62-4_8_4_4:4.6
	Sound0-1_62-4_8_4_3:4.6
	Sound0-1_62-4_8_4_2:4.6
	Sound0-1_62-4_8_4_1:4.6
	L72xx_AC97:4.6.0.4
	Sound0-1_62-4_8_2_1:4.6
	CL92xx:4.6.0.2
	Sound0-1_62:4.6
	Sound0-1_61:4.6
	Sound0-1_60:4.6
	Sound0-1_59:4.6
	dellis_autobuild_BaseSW:4.6
	Sound0-1_58:4.6
	sbrodie_sedwards_16Mar2000:4.6
	SoundDMA-1_57:4.6
	Sound0-1_57:4.6
	dcotton_autobuild_BaseSW:4.6
	Sound0-1_56:4.6
	Ursula_merge:4.5.2.1
	nturton_Sound0-1_54:4.5
	dcotton_sound0_MPTInitialBuild:4.1.7.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.5.2.1
	Ursula_RiscPC:4.5.2.1.0.2
	rthornb_UrsulaBuild-19Aug1998:4.5.2.1
	UrsulaBuild_FinalSoftload:4.5.2.1
	rthornb_UrsulaBuild-12Aug1998:4.5.2.1
	aglover_UrsulaBuild-05Aug1998:4.5.2.1
	rthornb_UrsulaBuild-29Jul1998:4.5.2.1
	rthornb_UrsulaBuild-22Jul1998:4.5.2.1
	rthornb_UrsulaBuild-15Jul1998:4.5.2.1
	rthornb_UrsulaBuild-07Jul1998:4.5.2.1
	rthornb_UrsulaBuild-17Jun1998:4.5.2.1
	rthornb_UrsulaBuild-03Jun1998:4.5.2.1
	rthornb_UrsulaBuild-27May1998:4.5.2.1
	rthornb_UrsulaBuild-21May1998:4.5.2.1
	rthornb_UrsulaBuild_01May1998:4.5.2.1
	afrost_NC2_Generic:4.1.7.3
	afrost_Funai01-33:4.1.7.3
	Spinner_RCA116:4.1.7.3
	Spinner_B20_2:4.1.7.3
	Spinner_19_3:4.1.7.3
	Spinner_B18:4.1.7.3
	Spinner_B17:4.1.7.3
	Spinner_B15:4.1.7.3
	Ursula:4.5.0.2
	Spin_merge_3Jul97:4.1.7.1
	Spinner_B14:4.1.7.3
	Spinner_B13:4.1.7.3
	Spinner_B12:4.1.7.3
	Spinner_B10:4.1.7.3
	Daytona:4.4.0.4
	Daytona_bp:4.4
	Ursula_bp:4.5
	Spinner_B7:4.1.7.3
	RO_3_71:4.1.3.2
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.2
	ARTtmp:4.1.7.1.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.3
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.7
date	2013.04.14.16.55.07;	author rsprowson;	state dead;
branches;
next	4.6;
commitid	13M3o3zWyeEusLLw;

4.6
date	99.08.16.11.02.33;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	97.07.03.11.01.58;	author kbracey;	state Exp;
branches
	4.5.2.1;
next	4.4;

4.4
date	97.05.13.18.44.43;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	97.05.02.12.49.57;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.20.13.52.13;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.37.39;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.5.2.1
date	98.04.15.07.57.06;	author mstphens;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.37.39;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.01.43.43;	author nturton;	state Exp;
branches
	4.1.3.1.2.1;
next	4.1.3.2;

4.1.3.2
date	97.05.01.14.40.02;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1.2.1
date	97.04.30.14.08.17;	author kbracey;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.03.53;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.56.07;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.04.15.16.28.22;	author scormie;	state Exp;
branches;
next	4.1.7.3;

4.1.7.3
date	97.04.22.12.46.24;	author mark;	state Exp;
branches;
next	;


desc
@@


4.7
log
@Fixes for 8 bit sound output on MkI Risc PCs
A handful of problems conspired to make this not work
* Line 3237 (and 3225 for pre-VIDC20), bits 16-23 of the buffer logical address were erroneously being used as the sample rate passed to Level1, which in a 32 bit world is 0xFAFF4000 => 255us, now uses the correct register
* Line 3681 et al, a register fumble meant the stereo position registers were being programmed with junk in the mu-law case leading to an annoying high pitched squeal
* Line 2925, reinstate the DMA channel setup in the overrun case
* Line 1465, the parameters to Divide were reversed so the rate always came out at 0Hz (this value doesn't actually appear to be used in the mu-law case, but might as well get it right)
Unrelated
* Added 'Debug' entries to each of the SWIs
* Substituted some OSHW_CallHAL's missed in earlier clear up
* Deleted non functional/obsolete 'AdvancedPower' switch from Stork laptop
* Refactored single use of OverMonoShift to just compare the shifted constants and skip the shift
* Removed redundant 'Version' header

Tested in IOMD ROM on 0197,000 motherboard

Version 1.70. Tagged as 'Sound0-1_70'
@
text
@                SUBT    > Sound0.Version

                GBLL    Development
Development     SETL    False

                END
@


4.6
log
@Spinner and Ursula branches merged.
Changed to use srccommit.

Version 1.56. Tagged as 'Sound0-1_56'
@
text
@@


4.5
log
@Spinner branch merged
@
text
@a2 6
                GBLS    Version
Version         SETS    "1.54"

                GBLS    CurrentDate
CurrentDate     SETS    "03 Jul 1997"

@


4.5.2.1
log
@update to Ursula service format
@
text
@d4 1
a4 1
Version         SETS    "1.55"
d7 1
a7 1
CurrentDate     SETS    "15 Apr 1998"
@


4.4
log
@Development flag set to False
@
text
@d7 1
a7 1
CurrentDate     SETS    "10 Feb 1997"
@


4.3
log
@Version RO_3_71 merged
@
text
@d10 1
a10 1
Development     SETL    True
@


4.2
log
@Module merged
@
text
@d7 1
a7 1
CurrentDate     SETS    "20 Jan 1997"
@


4.1
log
@Initial revision
@
text
@d1 1
a1 1
                SUBT    > <wini>arm.Sound0.Version
d4 1
a4 1
Version         SETS    "1.48"
d7 4
a10 1
CurrentDate     SETS    "03 Mar 1995"
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@d4 1
a4 1
Version         SETS    "1.52"
d7 1
a7 4
CurrentDate     SETS    "27 Nov 1995"

                GBLL    Development
Development     SETL    False
@


4.1.7.2
log
@New version.
@
text
@d4 1
a4 1
Version         SETS    "1.53"
d7 1
a7 1
CurrentDate     SETS    "14 Apr 1997"
@


4.1.7.3
log
@1.54  Fix to allow mono output to be controlled (Sound_Mode 3) - although the
      implementation was present (and has previously been tested), the code to
      recognise and act on Sound_Mode function code 3 had been omitted by
      accident in the source merge which produced 1.53.
@
text
@d4 1
a4 1
Version         SETS    "1.54"
d7 1
a7 1
CurrentDate     SETS    "22 Apr 1997"
@


4.1.5.1
log
@Import from SrcFiler
@
text
@d4 1
a4 1
Version         SETS    "1.52"
d7 1
a7 4
CurrentDate     SETS    "27 Nov 1995"

                GBLL    Development
Development     SETL    False
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@d1 1
a1 1
                SUBT    > Sound0.Version
d4 1
a4 1
Version         SETS    "1.53"
d7 1
a7 4
CurrentDate     SETS    "30 Aug 1996"

                GBLL    Development
Development     SETL    False
@


4.1.3.2
log
@Version RO_3_71 taken
@
text
@d4 1
a4 1
Version         SETS    "1.54"
d7 1
a7 1
CurrentDate     SETS    "10 Feb 1997"
@


4.1.3.1.2.1
log
@Merged from 3.71 CD
@
text
@d4 1
a4 1
Version         SETS    "1.54"
d7 1
a7 1
CurrentDate     SETS    "10 Feb 1997"
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
