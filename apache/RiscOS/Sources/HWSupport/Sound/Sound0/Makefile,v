head	4.6;
access;
symbols
	Sound0-1_72:4.6
	Sound0-1_71:4.5
	Sound0-1_70:4.5
	Sound0-1_69:4.5
	Sound0-1_68:4.5
	Sound0-1_67:4.5
	Sound0-1_66:4.5
	Sound0-1_65:4.5
	Sound0-1_64:4.5
	Sound0-1_63:4.5
	Sound0-1_62-4_8_4_4:4.5.4.2
	Sound0-1_62-4_8_4_3:4.5.4.2
	Sound0-1_62-4_8_4_2:4.5.4.1
	Sound0-1_62-4_8_4_1:4.5.4.1
	L72xx_AC97:4.5.0.4
	Sound0-1_62-4_8_2_1:4.5
	CL92xx:4.5.0.2
	Sound0-1_62:4.5
	Sound0-1_61:4.4
	Sound0-1_60:4.4
	Sound0-1_59:4.4
	dellis_autobuild_BaseSW:4.4
	Sound0-1_58:4.4
	sbrodie_sedwards_16Mar2000:4.4
	SoundDMA-1_57:4.4
	Sound0-1_57:4.4
	dcotton_autobuild_BaseSW:4.5
	Sound0-1_56:4.4
	Ursula_merge:4.3.2.2
	nturton_Sound0-1_54:4.3
	dcotton_sound0_MPTInitialBuild:4.1.7.4
	mstphens_UrsulaRiscPCBuild_20Nov98:4.3.2.2
	Ursula_RiscPC:4.3.2.2.0.2
	rthornb_UrsulaBuild-19Aug1998:4.3.2.2
	UrsulaBuild_FinalSoftload:4.3.2.2
	rthornb_UrsulaBuild-12Aug1998:4.3.2.2
	aglover_UrsulaBuild-05Aug1998:4.3.2.2
	rthornb_UrsulaBuild-29Jul1998:4.3.2.2
	rthornb_UrsulaBuild-22Jul1998:4.3.2.2
	rthornb_UrsulaBuild-15Jul1998:4.3.2.2
	rthornb_UrsulaBuild-07Jul1998:4.3.2.2
	rthornb_UrsulaBuild-17Jun1998:4.3.2.2
	rthornb_UrsulaBuild-03Jun1998:4.3.2.2
	rthornb_UrsulaBuild-27May1998:4.3.2.2
	rthornb_UrsulaBuild-21May1998:4.3.2.2
	rthornb_UrsulaBuild_01May1998:4.3.2.2
	afrost_NC2_Generic:4.1.7.3
	afrost_Funai01-33:4.1.7.3
	Spinner_RCA116:4.1.7.3
	Spinner_B20_2:4.1.7.3
	Spinner_19_3:4.1.7.3
	Spinner_B18:4.1.7.3
	Spinner_B17:4.1.7.3
	Spinner_B15:4.1.7.3
	Ursula:4.3.0.2
	Spin_merge_3Jul97:4.1.7.1
	Spinner_B14:4.1.7.3
	Spinner_B13:4.1.7.3
	Spinner_B12:4.1.7.3
	Spinner_B10:4.1.7.3
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Ursula_bp:4.3
	Spinner_B7:4.1.7.3
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.2
	Spin_3Apr97:4.1.7.2
	RCA_bp:4.2
	ARTtmp:4.1.7.2.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.4
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.6
date	2015.12.01.20.51.38;	author jlee;	state Exp;
branches;
next	4.5;
commitid	GxZRxKTY9hxsShLy;

4.5
date	2001.03.16.16.14.35;	author sbrodie;	state Exp;
branches
	4.5.4.1;
next	4.4;

4.4
date	99.08.16.11.02.33;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	97.07.03.11.01.57;	author kbracey;	state Exp;
branches
	4.3.2.1;
next	4.2;

4.2
date	97.01.20.13.52.12;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.37.38;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.5.4.1
date	2001.06.19.13.11.36;	author kbracey;	state Exp;
branches;
next	4.5.4.2;

4.5.4.2
date	2001.06.21.12.15.07;	author kbracey;	state Exp;
branches;
next	;

4.3.2.1
date	98.03.26.15.02.19;	author rthornb;	state Exp;
branches;
next	4.3.2.2;

4.3.2.2
date	98.04.15.07.57.05;	author mstphens;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.37.38;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.01.43.33;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.03.45;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.56.03;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.03.11.19.15.47;	author nturton;	state Exp;
branches;
next	4.1.7.3;

4.1.7.3
date	97.04.15.16.28.20;	author scormie;	state Exp;
branches;
next	4.1.7.4;

4.1.7.4
date	98.09.21.13.22.54;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.6
log
@Keep header in sync with Sound0HAL
Detail:
  Makefile - Export a C version of hdr/Sound
  hdr/Sound - Updated with new definitions from Sound0HAL
Admin:
  No functional changes to module
  Untested


Version 1.71. Retagged as 'Sound0-1_71'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Sound DMA Handler (Sound0)
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name         Description
# ----       ----         -----------
# 07-Mar-01  SNB          Recreated
#

COMPONENT = SoundDMA
TARGET    = Sound0
HEADER1   = Sound
ASMCHEADER1 = Sound
EXPORTS   = ${C_EXP_HDR}.${ASMCHEADER1}
HELPSRC   = HelpSrc
TOKHELPSRC= ${TOKENSOURCE}
RESFSDIR  = ${RESDIR}.${COMPONENT}

include StdTools
include AAsmModule

# Dynamic dependencies:
@


4.5
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 1.62. Tagged as 'Sound0-1_62'
@
text
@d28 2
@


4.5.4.1
log
@Yet another version of SoundDMA. This one's for the LinkUp L7205 or similar,
attached to an AC '97 codec that supports Variable Rate PCM Audio.

Tested on the SDB board, with a CS4299 codec. With a bit of luck, should work
on any of the myriad other L7205 systems, as long as the codec reset line is
still on GPIO line PD[0].

With a bit more work, this would form the basis of a generic AC '97 SoundDMA
module. The only nasty wrinkle of the L7205 is that the sound data needs
left-right swapping before playback. Bah.

Version 1.62, 4.8.4.1. Tagged as 'Sound0-1_62-4_8_4_1'
@
text
@a30 1
ASFlags   = -cpu 4T
@


4.5.4.2
log
@Should now work on the pointlessly different MSI and TViLink boards. Maybe.
Set BOARD to the appropriate value, as in the HAL.

Version 1.62, 4.8.4.3. Tagged as 'Sound0-1_62-4_8_4_3'
@
text
@d31 1
a31 1
ASFlags   = -cpu 4T -PD "${BOARD} SETL {TRUE}"
@


4.4
log
@Spinner and Ursula branches merged.
Changed to use srccommit.

Version 1.56. Tagged as 'Sound0-1_56'
@
text
@d22 1
a22 1
# 25-May-94  AMcC         Created.
d25 6
a30 63
#
# Paths
#
EXP_HDR = <export$dir>

#
# Generic options:
#
MKDIR   = cdir
AS      = aasm
CP      = copy
RM      = remove
CCFLAGS = -c -depend !Depend -IC:
ASFLAGS = -depend !Depend -Stamp -quit -module -To $@@ -From
CPFLAGS = ~cfr~v

#
# Program specific options:
#
COMPONENT = Sound0
SOURCE    = s.Sound0
TARGET    = rm.${MACHINE}.Sound0
EXPORTS   = ${EXP_HDR}.Sound

#
# Generic rules:
#
rom: ${TARGET}
        @@echo ${COMPONENT}: rom module built

export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete

install_rom: ${TARGET}
        ${CP} ${TARGET} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: rom module installed

clean:
        ${RM} ${TARGET}
        ${RM} s.TokHelpSrc
        @@echo ${COMPONENT}: cleaned

resources: resources-${CMDHELP}
        @@echo ${COMPONENT}: resource files copied

resources_common:
        ${MKDIR} ${RESDIR}.SoundDMA
	TokenCheck LocalRes:Messages
        ${CP} LocalRes:Messages  ${RESDIR}.SoundDMA.Messages  ${CPFLAGS}

resources-None: resources_common
	@@

resources-: resources_common
	TokenCheck LocalRes:CmdHelp
	print LocalRes:CmdHelp { >> ${RESDIR}.SoundDMA.Messages }

${TARGET}: ${SOURCE} s.TokHelpSrc
        ${MKDIR} rm.${MACHINE}
        ${AS} ${ASFLAGS} ${SOURCE}

s.TokHelpSrc: Hdr:Tokens HelpSrc
        tokenise Hdr:Tokens HelpSrc $@@
d32 2
a33 2
${EXP_HDR}.Sound: hdr.Sound
        ${CP} hdr.Sound $@@ ${CPFLAGS}
@


4.3
log
@Spinner branch merged
@
text
@d72 2
a73 1
        ${CP} Resources.${LOCALE}.Messages  ${RESDIR}.SoundDMA.Messages  ${CPFLAGS}
d79 2
a80 1
	print Resources.${LOCALE}.CmdHelp { >> ${RESDIR}.SoundDMA.Messages }
a92 88
rm.Morris.Sound0: Hdr:ListOpts
rm.Morris.Sound0: Hdr:Macros
rm.Morris.Sound0: Hdr:System
rm.Morris.Sound0: Hdr:SWIs
rm.Morris.Sound0: Hdr:CPU.Generic26
rm.Morris.Sound0: Hdr:IO.GenericIO
rm.Morris.Sound0: Hdr:RISCOS
rm.Morris.Sound0: Hdr:Machine.<Machine>
rm.Morris.Sound0: Hdr:VIDC.VIDC20
rm.Morris.Sound0: Hdr:MEMM.ARM600
rm.Morris.Sound0: Hdr:IO.IOMDL
rm.Morris.Sound0: Hdr:CMOS
rm.Morris.Sound0: Hdr:ModHand
rm.Morris.Sound0: Hdr:Services
rm.Morris.Sound0: Hdr:FSNumbers
rm.Morris.Sound0: Hdr:NewErrors
rm.Morris.Sound0: Hdr:PublicWS
rm.Morris.Sound0: Hdr:Tokens
rm.Morris.Sound0: Hdr:DevNos
rm.Morris.Sound0: Hdr:Proc
rm.Morris.Sound0: Hdr:VduExt
rm.Morris.Sound0: Hdr:MsgTrans
rm.Morris.Sound0: Hdr:HostFS
rm.Morris.Sound0: Hdr:DDVMacros
rm.Morris.Sound0: Hdr:NDRDebug
rm.Morris.Sound0: Hdr:Sound
rm.Morris.Sound0: Hdr:Portable
rm.Morris.Sound0: Version
rm.Morris.Sound0: s.TokHelpSrc
rm.Morris.Sound0: s.Sound0_SA
rm.Omega.Sound0: Hdr:ListOpts
rm.Omega.Sound0: Hdr:Macros
rm.Omega.Sound0: Hdr:System
rm.Omega.Sound0: Hdr:SWIs
rm.Omega.Sound0: Hdr:CPU.Generic26
rm.Omega.Sound0: Hdr:IO.GenericIO
rm.Omega.Sound0: Hdr:RISCOS
rm.Omega.Sound0: Hdr:Machine.<Machine>
rm.Omega.Sound0: Hdr:VIDC.VIDC20
rm.Omega.Sound0: Hdr:MEMM.ARM600
rm.Omega.Sound0: Hdr:IO.IOMDL
rm.Omega.Sound0: Hdr:CMOS
rm.Omega.Sound0: Hdr:ModHand
rm.Omega.Sound0: Hdr:Services
rm.Omega.Sound0: Hdr:FSNumbers
rm.Omega.Sound0: Hdr:NewErrors
rm.Omega.Sound0: Hdr:PublicWS
rm.Omega.Sound0: Hdr:Tokens
rm.Omega.Sound0: Hdr:DevNos
rm.Omega.Sound0: Hdr:Proc
rm.Omega.Sound0: Hdr:VduExt
rm.Omega.Sound0: Hdr:MsgTrans
rm.Omega.Sound0: Hdr:HostFS
rm.Omega.Sound0: Hdr:DDVMacros
rm.Omega.Sound0: Hdr:NDRDebug
rm.Omega.Sound0: Hdr:Sound
rm.Omega.Sound0: Hdr:Portable
rm.Omega.Sound0: Version
rm.Omega.Sound0: s.TokHelpSrc
rm.RCA.Sound0: Hdr:ListOpts
rm.RCA.Sound0: Hdr:Macros
rm.RCA.Sound0: Hdr:System
rm.RCA.Sound0: Hdr:SWIs
rm.RCA.Sound0: Hdr:CPU.Generic26
rm.RCA.Sound0: Hdr:IO.GenericIO
rm.RCA.Sound0: Hdr:RISCOS
rm.RCA.Sound0: Hdr:Machine.<Machine>
rm.RCA.Sound0: Hdr:VIDC.VIDC20
rm.RCA.Sound0: Hdr:MEMM.ARM600
rm.RCA.Sound0: Hdr:IO.IOMDL
rm.RCA.Sound0: Hdr:CMOS
rm.RCA.Sound0: Hdr:ModHand
rm.RCA.Sound0: Hdr:Services
rm.RCA.Sound0: Hdr:FSNumbers
rm.RCA.Sound0: Hdr:NewErrors
rm.RCA.Sound0: Hdr:PublicWS
rm.RCA.Sound0: Hdr:Tokens
rm.RCA.Sound0: Hdr:DevNos
rm.RCA.Sound0: Hdr:Proc
rm.RCA.Sound0: Hdr:VduExt
rm.RCA.Sound0: Hdr:MsgTrans
rm.RCA.Sound0: Hdr:HostFS
rm.RCA.Sound0: Hdr:DDVMacros
rm.RCA.Sound0: Hdr:NDRDebug
rm.RCA.Sound0: Hdr:Sound
rm.RCA.Sound0: Hdr:Portable
rm.RCA.Sound0: Version
rm.RCA.Sound0: s.TokHelpSrc
@


4.3.2.1
log
@Removed dynamic dependancies from Makefiles and removed all reference to Prefix
@
text
@d91 88
@


4.3.2.2
log
@update to Ursula service format
@
text
@a90 1

@


4.2
log
@Module merged
@
text
@d67 4
a70 1
resources:
d73 6
a78 1
        @@echo ${COMPONENT}: resource files copied
d150 29
@


4.1
log
@Initial revision
@
text
@d112 30
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a111 29
rm.Omega.Sound0: Hdr:ListOpts
rm.Omega.Sound0: Hdr:Macros
rm.Omega.Sound0: Hdr:System
rm.Omega.Sound0: Hdr:SWIs
rm.Omega.Sound0: Hdr:CPU.Generic26
rm.Omega.Sound0: Hdr:IO.GenericIO
rm.Omega.Sound0: Hdr:RISCOS
rm.Omega.Sound0: Hdr:Machine.<Machine>
rm.Omega.Sound0: Hdr:VIDC.VIDC20
rm.Omega.Sound0: Hdr:MEMM.ARM600
rm.Omega.Sound0: Hdr:IO.IOMDL
rm.Omega.Sound0: Hdr:CMOS
rm.Omega.Sound0: Hdr:ModHand
rm.Omega.Sound0: Hdr:Services
rm.Omega.Sound0: Hdr:FSNumbers
rm.Omega.Sound0: Hdr:NewErrors
rm.Omega.Sound0: Hdr:PublicWS
rm.Omega.Sound0: Hdr:Tokens
rm.Omega.Sound0: Hdr:DevNos
rm.Omega.Sound0: Hdr:Proc
rm.Omega.Sound0: Hdr:VduExt
rm.Omega.Sound0: Hdr:MsgTrans
rm.Omega.Sound0: Hdr:HostFS
rm.Omega.Sound0: Hdr:DDVMacros
rm.Omega.Sound0: Hdr:NDRDebug
rm.Omega.Sound0: Hdr:Sound
rm.Omega.Sound0: Hdr:Portable
rm.Omega.Sound0: Version
rm.Omega.Sound0: s.TokHelpSrc
@


4.1.7.2
log
@Command line messages removed
@
text
@d67 1
a67 4
resources: resources-${CMDHELP}
        @@echo ${COMPONENT}: resource files copied

resources_common:
d70 1
a70 6

resources-None: resources_common
	@@

resources-: resources_common
	print Resources.${LOCALE}.CmdHelp { >> ${RESDIR}.SoundDMA.Messages }
@


4.1.7.3
log
@New version.
@
text
@a148 29
rm.RCA.Sound0: Hdr:ListOpts
rm.RCA.Sound0: Hdr:Macros
rm.RCA.Sound0: Hdr:System
rm.RCA.Sound0: Hdr:SWIs
rm.RCA.Sound0: Hdr:CPU.Generic26
rm.RCA.Sound0: Hdr:IO.GenericIO
rm.RCA.Sound0: Hdr:RISCOS
rm.RCA.Sound0: Hdr:Machine.<Machine>
rm.RCA.Sound0: Hdr:VIDC.VIDC20
rm.RCA.Sound0: Hdr:MEMM.ARM600
rm.RCA.Sound0: Hdr:IO.IOMDL
rm.RCA.Sound0: Hdr:CMOS
rm.RCA.Sound0: Hdr:ModHand
rm.RCA.Sound0: Hdr:Services
rm.RCA.Sound0: Hdr:FSNumbers
rm.RCA.Sound0: Hdr:NewErrors
rm.RCA.Sound0: Hdr:PublicWS
rm.RCA.Sound0: Hdr:Tokens
rm.RCA.Sound0: Hdr:DevNos
rm.RCA.Sound0: Hdr:Proc
rm.RCA.Sound0: Hdr:VduExt
rm.RCA.Sound0: Hdr:MsgTrans
rm.RCA.Sound0: Hdr:HostFS
rm.RCA.Sound0: Hdr:DDVMacros
rm.RCA.Sound0: Hdr:NDRDebug
rm.RCA.Sound0: Hdr:Sound
rm.RCA.Sound0: Hdr:Portable
rm.RCA.Sound0: Version
rm.RCA.Sound0: s.TokHelpSrc
@


4.1.7.4
log
@Makefile modified to use LocalRes$Path.
German resources added.
@
text
@d72 1
a72 2
	TokenCheck LocalRes:Messages
        ${CP} LocalRes:Messages  ${RESDIR}.SoundDMA.Messages  ${CPFLAGS}
d78 1
a78 2
	TokenCheck LocalRes:CmdHelp
	print LocalRes:CmdHelp { >> ${RESDIR}.SoundDMA.Messages }
d91 87
@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a111 1
rm.Morris.Sound0: s.Sound0_SA
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
