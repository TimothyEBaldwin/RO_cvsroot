head	4.33;
access;
symbols
	Parallel-0_79:4.33
	Parallel-0_78:4.32
	Parallel-0_77:4.31
	Parallel-0_76:4.30
	Parallel-0_75:4.29
	Parallel-0_74:4.28
	Parallel-0_73:4.26
	Parallel-0_72:4.25
	Parallel-0_71:4.24
	Parallel-0_70:4.23
	Parallel-0_69:4.22
	Parallel-0_68:4.21
	Parallel-0_67:4.20
	Parallel-0_66:4.19
	Parallel-0_65:4.18
	kbracey_32bit_merge:4.13.2.5
	Parallel-0_64:4.17
	Parallel-0_60-4_13_2_5:4.13.2.5
	Parallel-0_60-4_13_2_4:4.13.2.4
	Parallel-0_60-4_13_2_3:4.13.2.3
	Parallel-0_63:4.16
	Parallel-0_60-4_13_2_2:4.13.2.2
	Alpnet_approved:4.15
	Parallel-0_62:4.15
	dellis_autobuild_BaseSW:4.14
	Parallel-0_61:4.14
	Parallel-0_60-4_13_2_1:4.13.2.1
	kbracey_32bit:4.13.0.2
	sbrodie_sedwards_16Mar2000:4.13
	Parallel-0_60:4.13
	Parallel-0_59:4.12
	dcotton_autobuild_BaseSW:4.22
	Parallel-0_58:4.11
	Parallel-0_57:4.10
	Parallel-0_56:4.9
	Parallel-0_55:4.8
	Parallel-0_54:4.7
	Parallel-0_53:4.4
	Parallel-0_52:4.3
	Parallel-0_51:4.2;
locks; strict;
comment	@# @;


4.33
date	2015.06.06.08.25.07;	author rsprowson;	state Exp;
branches;
next	4.32;
commitid	5y9PwYodGrF5tloy;

4.32
date	2012.12.21.13.13.01;	author rsprowson;	state Exp;
branches;
next	4.31;
commitid	6AX7FQ9jP8duT5xw;

4.31
date	2012.12.20.08.35.59;	author rsprowson;	state Exp;
branches;
next	4.30;
commitid	9ssBEbFq3jtroWww;

4.30
date	2012.06.23.16.24.12;	author rsprowson;	state Exp;
branches;
next	4.29;
commitid	NqgW20IuiIZMLQ9w;

4.29
date	2011.07.18.22.41.31;	author jlee;	state Exp;
branches;
next	4.28;
commitid	5mbikVDdCwgOO3sv;

4.28
date	2011.06.22.00.52.46;	author jlee;	state Exp;
branches;
next	4.27;
commitid	G7LnLvkSoQ9EpBov;

4.27
date	2009.06.11.21.18.20;	author bavison;	state Exp;
branches;
next	4.26;

4.26
date	2002.08.23.15.25.20;	author mmoir;	state Exp;
branches;
next	4.25;

4.25
date	2002.05.08.14.42.19;	author mmoir;	state Exp;
branches;
next	4.24;

4.24
date	2002.02.14.11.20.15;	author mmoir;	state Exp;
branches;
next	4.23;

4.23
date	2002.02.06.16.36.27;	author mmoir;	state Exp;
branches;
next	4.22;

4.22
date	2001.08.29.13.40.27;	author mboura;	state Exp;
branches;
next	4.21;

4.21
date	2001.08.03.14.53.50;	author mboura;	state Exp;
branches;
next	4.20;

4.20
date	2001.04.12.16.17.31;	author arodger;	state Exp;
branches;
next	4.19;

4.19
date	2001.03.16.15.59.13;	author sbrodie;	state Exp;
branches;
next	4.18;

4.18
date	2001.01.10.15.35.56;	author arodger;	state Exp;
branches;
next	4.17;

4.17
date	2001.01.09.14.10.02;	author sbrodie;	state Exp;
branches;
next	4.16;

4.16
date	2000.11.01.13.59.40;	author arodger;	state Exp;
branches;
next	4.15;

4.15
date	2000.10.18.17.30.56;	author sforrest;	state Exp;
branches;
next	4.14;

4.14
date	2000.08.01.15.37.39;	author sforrest;	state Exp;
branches;
next	4.13;

4.13
date	99.10.26.08.34.10;	author kbracey;	state Exp;
branches
	4.13.2.1;
next	4.12;

4.12
date	99.10.25.17.28.00;	author kbracey;	state Exp;
branches;
next	4.11;

4.11
date	99.08.17.11.36.18;	author kbracey;	state Exp;
branches;
next	4.10;

4.10
date	99.04.28.12.33.25;	author sforrest;	state Exp;
branches;
next	4.9;

4.9
date	99.01.29.17.20.39;	author nturton;	state Exp;
branches;
next	4.8;

4.8
date	99.01.12.15.56.44;	author kbracey;	state Exp;
branches;
next	4.7;

4.7
date	99.01.07.12.03.02;	author kbracey;	state Exp;
branches;
next	4.6;

4.6
date	98.12.04.13.15.05;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	98.11.13.17.01.05;	author kbracey;	state Exp;
branches;
next	4.4;

4.4
date	98.10.29.10.52.27;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	98.10.23.11.23.27;	author sforrest;	state Exp;
branches;
next	4.2;

4.2
date	98.10.19.16.10.10;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	98.10.19.16.06.00;	author kbracey;	state Exp;
branches;
next	;

4.13.2.1
date	2000.07.23.20.43.04;	author sbrodie;	state Exp;
branches;
next	4.13.2.2;

4.13.2.2
date	2000.10.24.13.55.45;	author sbrodie;	state Exp;
branches;
next	4.13.2.3;

4.13.2.3
date	2000.11.22.11.58.32;	author sbrodie;	state Exp;
branches;
next	4.13.2.4;

4.13.2.4
date	2000.11.29.12.41.40;	author sbrodie;	state Exp;
branches;
next	4.13.2.5;

4.13.2.5
date	2001.01.09.11.39.24;	author sbrodie;	state Exp;
branches;
next	;


desc
@@


4.33
log
@Remove workaround for DeviceFS bug
Fixed properly in DeviceFS-0_72.

Version 0.79. Tagged as 'Parallel-0_79'
@
text
@;
; This file is automatically maintained by srccommit, do not edit manually.
; Last processed by srccommit version: 1.1.
;
                        GBLS    Module_MajorVersion
                        GBLA    Module_Version
                        GBLS    Module_MinorVersion
                        GBLS    Module_Date
                        GBLS    Module_FullVersion
                        GBLS    Module_ApplicationDate
                        GBLS    Module_HelpVersion
                        GBLS    Module_ComponentName
                        GBLS    Module_ComponentPath
Module_MajorVersion     SETS    "0.79"
Module_Version          SETA    79
Module_MinorVersion     SETS    ""
Module_Date             SETS    "06 Jun 2015"
Module_ApplicationDate  SETS    "06-Jun-15"
Module_ComponentName    SETS    "Parallel"
Module_ComponentPath    SETS    "castle/RiscOS/Sources/HWSupport/Parallel"
Module_FullVersion      SETS    "0.79"
Module_HelpVersion      SETS    "0.79 (06 Jun 2015)"
                        END
@


4.32
log
@Fix printing in HAL case
ioeb_busy: saved a whole instruction in the NE case
ioeb_irqwrite: we are entered with R3=IO controller, which is not useful, so reload HardwareBase each time
ioeb_strobe: the call to the HAL corrupts the byte we're printing, so stack it either side of the call

Tested printing some geometrical shapes from a PrintOut file from Draw.
Used *COPY MyTest parallel: and
     *COPY MyTest fastparallel:
and also checked with !PICSuite that the Parallel_ SWIs allow low level access to the control register (used for bit bashing).

Version 0.78. Tagged as 'Parallel-0_78'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.78"
Module_Version          SETA    78
d17 2
a18 2
Module_Date             SETS    "21 Dec 2012"
Module_ApplicationDate  SETS    "21-Dec-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.78"
Module_HelpVersion      SETS    "0.78 (21 Dec 2012)"
@


4.31
log
@Fix data abort when trying to print
Common.s: Misplaced comment moved
IOEB.s: Make sure pp_ctrl is relative to HardwareBase
        Preserve C bit over the HAL call
Parallel.s: Misplaced ASSERT moved
This module still stiffs when trying to print, but it at least doesn't data abort too!

Version 0.77. Tagged as 'Parallel-0_77'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.77"
Module_Version          SETA    77
d17 2
a18 2
Module_Date             SETS    "20 Dec 2012"
Module_ApplicationDate  SETS    "20-Dec-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.77"
Module_HelpVersion      SETS    "0.77 (20 Dec 2012)"
@


4.30
log
@Fix stack imbalance in ioeb_busy and have a spring clean
Now uses OS_Memory throughout to determine controller addresses rather than calling the private HAL_ControllerAddress API.
Be devious in all the register pokes by making HardwareBase be roughly half way between the two sets of standard parallel registers and ECP mode ones, so they're always in range for an immediate offset of LDRB/STRB so the code doesn't thrash the literal pool so much.
Where possible, eliminate HAL conditional code by initialising HardwareBase in the non HAL case thus simplifying code paths a bit.
Be a bit less ugly in the 0.5us delays, since the combo chip is using Type B cycles a dummy read of a SuperIO chip will waste 0.5us rather than needing to back calculate the IOEB registers.
Expand tabs, use OSBytes header file.

Version 0.76. Tagged as 'Parallel-0_76'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.76"
Module_Version          SETA    76
d17 2
a18 2
Module_Date             SETS    "23 Jun 2012"
Module_ApplicationDate  SETS    "23-Jun-12"
d21 2
a22 2
Module_FullVersion      SETS    "0.76"
Module_HelpVersion      SETS    "0.76 (23 Jun 2012)"
@


4.29
log
@Update to use OS_Memory 9 instead of HAL_ControllerAddress
Detail:
  s/IOEB - Now uses OS_Memory 9 to look for controller #34 instead of HAL_ControllerAddress to look for controller #6. Makes it a bit more portable/future-proof and fixes the HAL_ControllerAddress allocation clash.
Admin:
  Tested in ROM softload on RiscPC


Version 0.75. Tagged as 'Parallel-0_75'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.75"
Module_Version          SETA    75
d17 2
a18 2
Module_Date             SETS    "18 Jul 2011"
Module_ApplicationDate  SETS    "18-Jul-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.75"
Module_HelpVersion      SETS    "0.75 (18 Jul 2011)"
@


4.28
log
@Add support for HAL builds
Detail:
  s/Parallel - Use HAL_ControllerAddress to get the address of the 82C710. IOMD IRQ numbers are assumed.
  s/Common - Use HAL_ControllerAddress to get the address of IOMD when measuring the CPU speed
  s/FastCent, s/IOEB - Use HardwareBase for hardware access and HAL calls for IRQ handling instead of fixed IOC/IOMD address & direct memory poking
  s/IOEB, s/Parallel - HAL version of UpdateIOEBCtrl gets copied into the module workspace to allow it to be used with the old calling standard (since we need to look up the C710 address)
  s/IOC - Add code that'll warn if this file gets built for a HAL target
Admin:
  Tested on RiscPC via IOMD ROM softload.
  Code is rather rough and could do with cleaning up in places (e.g. direct poking of timer registers in s/Common, and less-than-optimal register save/restore in ClearPINTR macro)


Version 0.74. Tagged as 'Parallel-0_74'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.74"
Module_Version          SETA    74
d17 2
a18 2
Module_Date             SETS    "22 Jun 2011"
Module_ApplicationDate  SETS    "22-Jun-11"
d21 2
a22 2
Module_FullVersion      SETS    "0.74"
Module_HelpVersion      SETS    "0.74 (22 Jun 2011)"
@


4.27
log
@  GET file pathnames changed
Detail:
  Uses suffixed file extensions for compatiblity with both objasm and asasm.
Admin:
  Supplied by Peter Naulls, tested at ROOL

Version 0.73. Not tagged
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.73"
Module_Version          SETA    73
d17 2
a18 2
Module_Date             SETS    "11 Jun 2009"
Module_ApplicationDate  SETS    "11-Jun-09"
d21 2
a22 2
Module_FullVersion      SETS    "0.73"
Module_HelpVersion      SETS    "0.73 (11 Jun 2009)"
@


4.26
log
@  Bug fix for tag in Taiwanese variant
Detail:
  The tag in the Messages file for OnLine was incorrectly saved as Online.
Admin:
  Local STB


Version 0.73. Tagged as 'Parallel-0_73'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.67.
d10 1
a10 2
                        GBLS    Module_ApplicationDate2
                        GBLS    Module_ApplicationDate4
d17 2
a18 3
Module_Date             SETS    "23 Aug 2002"
Module_ApplicationDate2 SETS    "23-Aug-02"
Module_ApplicationDate4 SETS    "23-Aug-2002"
d20 1
a20 1
Module_ComponentPath    SETS    "RiscOS/Sources/HWSupport/Parallel"
d22 1
a22 1
Module_HelpVersion      SETS    "0.73 (23 Aug 2002)"
@


4.25
log
@  Added complete Finnish Messages
Detail:
  Resources.Finland.Messages file translated
Admin:
  Local STB


Version 0.72. Tagged as 'Parallel-0_72'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.63.
d15 2
a16 2
Module_MajorVersion     SETS    "0.72"
Module_Version          SETA    72
d18 3
a20 3
Module_Date             SETS    "08 May 2002"
Module_ApplicationDate2 SETS    "08-May-02"
Module_ApplicationDate4 SETS    "08-May-2002"
d23 2
a24 2
Module_FullVersion      SETS    "0.72"
Module_HelpVersion      SETS    "0.72 (08 May 2002)"
@


4.24
log
@  Added Taiwanese resources
Detail:
  Added Resources.Taiwan and Resources.Taiwan.Messages
Admin:
  Local STB


Version 0.71. Tagged as 'Parallel-0_71'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.62.
d15 2
a16 2
Module_MajorVersion     SETS    "0.71"
Module_Version          SETA    71
d18 3
a20 3
Module_Date             SETS    "14 Feb 2002"
Module_ApplicationDate2 SETS    "14-Feb-02"
Module_ApplicationDate4 SETS    "14-Feb-2002"
d23 2
a24 2
Module_FullVersion      SETS    "0.71"
Module_HelpVersion      SETS    "0.71 (14 Feb 2002)"
@


4.23
log
@  Added Korean resources
Detail:
  Messages file translated into Korean
Admin:
  Local STB


Version 0.70. Tagged as 'Parallel-0_70'
@
text
@d15 2
a16 2
Module_MajorVersion     SETS    "0.70"
Module_Version          SETA    70
d18 3
a20 3
Module_Date             SETS    "06 Feb 2002"
Module_ApplicationDate2 SETS    "06-Feb-02"
Module_ApplicationDate4 SETS    "06-Feb-2002"
d23 2
a24 2
Module_FullVersion      SETS    "0.70"
Module_HelpVersion      SETS    "0.70 (06 Feb 2002)"
@


4.22
log
@Summary
  Fixed a number of bugs in reverse nibble
Detail:
  A CallAfter was occasionally trying to write a byte whilst the reverse nibble transfer was in progress. Pending CallAfters are removed before the reverse nibble and reinstated afterwards.
  A number of errors in the reverse nibble negotiate have been fixed.
Admin:
  10000 trials of alternately reading device ID and sending 250 zero bytes gives no errors with HP930C and HP K80

Version 0.69. Tagged as 'Parallel-0_69'
@
text
@d3 1
d15 2
a16 2
Module_MajorVersion     SETS    "0.69"
Module_Version          SETA    69
d18 3
a20 3
Module_Date             SETS    "29 Aug 2001"
Module_ApplicationDate2 SETS    "29-Aug-01"
Module_ApplicationDate4 SETS    "29-Aug-2001"
d23 2
a24 2
Module_FullVersion      SETS    "0.69"
Module_HelpVersion      SETS    "0.69 (29 Aug 2001)"
@


4.21
log
@  Improved error handling and ioctl support/bug fixes
Detail:
  Explan have added error elucidation from a printer
  They have also fixed a number of bugs in ioctl read device id
  I have done an interim fix of another bug in the reverse nibble code
Admin:
  Tested on RPC. No errors in several thousand reads of device ID and no errors on several thousand reads of device ID interleaved with sending data

Version 0.68. Tagged as 'Parallel-0_68'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.68"
Module_Version          SETA    68
d17 3
a19 3
Module_Date             SETS    "03 Aug 2001"
Module_ApplicationDate2 SETS    "03-Aug-01"
Module_ApplicationDate4 SETS    "03-Aug-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.68"
Module_HelpVersion      SETS    "0.68 (03 Aug 2001)"
@


4.20
log
@  Integrated bug fixes made by RISC OS ltd.
Detail:
  these relate to reading the device id only.
  In ioctl terms;
  when reading size the data word is an integer word.
  when reading data the size is the first two nibbles as in the IEE1286 spec.
  This appears to only work when the file is open for writing only.  The
  reasons for this as yet uninvestigated.
Admin:
  This has been tested but not during a print job etc. only as a stand alone
  thing.

Version 0.67. Tagged as 'Parallel-0_67'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.67"
Module_Version          SETA    67
d17 3
a19 3
Module_Date             SETS    "12 Apr 2001"
Module_ApplicationDate2 SETS    "12-Apr-01"
Module_ApplicationDate4 SETS    "12-Apr-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.67"
Module_HelpVersion      SETS    "0.67 (12 Apr 2001)"
@


4.19
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 0.66. Tagged as 'Parallel-0_66'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.66"
Module_Version          SETA    66
d17 3
a19 3
Module_Date             SETS    "16 Mar 2001"
Module_ApplicationDate2 SETS    "16-Mar-01"
Module_ApplicationDate4 SETS    "16-Mar-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.66"
Module_HelpVersion      SETS    "0.66 (16 Mar 2001)"
@


4.18
log
@  Added IOCTL call to return the status byte.
Detail:
  This allows applications other than the parallel device driver to determine
  what the setting of output lines means.  The Parallel Device driver will
  still raise errors based on its idea of what is the cause of the printer error
  is perhaps this behavior can be configured.
Admin:
   This has been loosly tested and the code reviewed.  In essence it is a simple
   change.

Version 0.65. Tagged as 'Parallel-0_65'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.65"
Module_Version          SETA    65
d17 3
a19 3
Module_Date             SETS    "10 Jan 2001"
Module_ApplicationDate2 SETS    "10-Jan-01"
Module_ApplicationDate4 SETS    "10-Jan-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.65"
Module_HelpVersion      SETS    "0.65 (10 Jan 2001)"
@


4.17
log
@  kbracey_32bit branch taken.
Detail:
  This is the result of the 32-bit branch merge.
Admin:
  This module has received modest testing.  It has not been exhaustively
    tested.  Projects taking this version should be careful with it as it
    may contain bugs.

Version 0.64. Tagged as 'Parallel-0_64'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.64"
Module_Version          SETA    64
d17 3
a19 3
Module_Date             SETS    "09 Jan 2001"
Module_ApplicationDate2 SETS    "09-Jan-01"
Module_ApplicationDate4 SETS    "09-Jan-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.64"
Module_HelpVersion      SETS    "0.64 (09 Jan 2001)"
@


4.16
log
@  added device identification.
Detail:
  this allows the host to query the peripheral as to what it is.  As per
  IEEE1284-1994 spec.
Admin:
  This has not been excessivly tested as it does not interfere with the
  usual workings of the parallel port.  It has been tested with the
  lexmark Z12 and a HP 950

Version 0.63. Tagged as 'Parallel-0_63'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "0.63"
Module_Version          SETA    63
d17 3
a19 3
Module_Date             SETS    "01 Nov 2000"
Module_ApplicationDate2 SETS    "01-Nov-00"
Module_ApplicationDate4 SETS    "01-Nov-2000"
d22 2
a23 2
Module_FullVersion      SETS    "0.63"
Module_HelpVersion      SETS    "0.63 (01 Nov 2000)"
@


4.15
log
@
  * Changes to Turkish messages, following verification by Alpnet
    (the translators)

Detail:

  * Import of (minor) corrections in the Turkish translations.

Admin:

  * Verified by Alpnet.

Version 0.62. Tagged as 'Parallel-0_62'
@
text
@d12 4
a15 2
Module_MajorVersion     SETS    "0.62"
Module_Version          SETA    62
d17 7
a23 5
Module_Date             SETS    "18 Oct 2000"
Module_ApplicationDate2 SETS    "18-Oct-00"
Module_ApplicationDate4 SETS    "18-Oct-2000"
Module_FullVersion      SETS    "0.62"
Module_HelpVersion      SETS    "0.62 (18 Oct 2000)"
@


4.14
log
@
  * Added resources for France, Germany, Italy, Spain and Turkey.

Detail:

  * Translated resources added; note that not all strings are translated,
    only those that are used on NC products.

Admin:

  * Untested.

  * France, Germany, Italy and Spain use the Latin1 alphabet; Turkey uses
    Latin5.

Version 0.61. Tagged as 'Parallel-0_61'
@
text
@d11 3
a13 2
Module_MajorVersion     SETS    "0.61"
Module_Version          SETA    61
d15 5
a19 4
Module_Date             SETS    "01 Aug 2000"
Module_ApplicationDate2 SETS    "01-Aug-00"
Module_ApplicationDate4 SETS    "01-Aug-2000"
Module_FullVersion      SETS    "0.61"
@


4.13
log
@Completed interrupt changes - may actually work now.

Version 0.60. Tagged as 'Parallel-0_60'
@
text
@d4 14
a17 10
			GBLS	Module_MajorVersion
			GBLA    Module_Version
			GBLS	Module_MinorVersion
			GBLS	Module_Date
			GBLS	Module_FullVersion
Module_MajorVersion	SETS    "0.60"
Module_Version          SETA    60
Module_MinorVersion	SETS	""
Module_Date		SETS    "26 Oct 1999"
Module_FullVersion      SETS    "0.60"
@


4.13.2.1
log
@  First cut at 32-bit compatibility.
Detail:
  Lots of changes have been required in this module as it manipulates
    the PSR all over the place in various interesting ways.
Admin:
  Built, but not tested yet.

Version 0.60, 4.13.2.1. Tagged as 'Parallel-0_60-4_13_2_1'
@
text
@d4 6
a9 8
                        GBLS    Module_MajorVersion
                        GBLA    Module_Version
                        GBLS    Module_MinorVersion
                        GBLS    Module_Date
                        GBLS    Module_FullVersion
                        GBLS    Module_ApplicationDate2
                        GBLS    Module_ApplicationDate4
Module_MajorVersion     SETS    "0.60"
d11 3
a13 5
Module_MinorVersion     SETS    "4.13.2.1"
Module_Date             SETS    "23 Jul 2000"
Module_ApplicationDate2 SETS    "23-Jul-00"
Module_ApplicationDate4 SETS    "23-Jul-2000"
Module_FullVersion      SETS    "0.60 (4.13.2.1)"
@


4.13.2.2
log
@Detail:
  Fixed a stack imbalance.
Admin:
  Built.

Version 0.60, 4.13.2.2. Tagged as 'Parallel-0_60-4_13_2_2'
@
text
@a10 1
                        GBLS    Module_HelpVersion
d13 5
a17 6
Module_MinorVersion     SETS    "4.13.2.2"
Module_Date             SETS    "24 Oct 2000"
Module_ApplicationDate2 SETS    "24-Oct-00"
Module_ApplicationDate4 SETS    "24-Oct-2000"
Module_FullVersion      SETS    "0.60 (4.13.2.2)"
Module_HelpVersion      SETS    "0.60 (24 Oct 2000) 4.13.2.2"
@


4.13.2.3
log
@  JumpAddress macro used instead of simply ADR lr, device_call_exit
Detail:
  The former makes sure that the flags are in lr in 26-bit modes so that
    when the routine uses EntryS/EXITS you don't accidentally end up in
    USR mode.
Admin:
  Built.

Version 0.60, 4.13.2.3. Tagged as 'Parallel-0_60-4_13_2_3'
@
text
@a11 2
                        GBLS    Module_ComponentName
                        GBLS    Module_ComponentPath
d14 6
a19 8
Module_MinorVersion     SETS    "4.13.2.3"
Module_Date             SETS    "22 Nov 2000"
Module_ApplicationDate2 SETS    "22-Nov-00"
Module_ApplicationDate4 SETS    "22-Nov-2000"
Module_ComponentName    SETS    "Parallel"
Module_ComponentPath    SETS    "RiscOS/Sources/HWSupport/Parallel"
Module_FullVersion      SETS    "0.60 (4.13.2.3)"
Module_HelpVersion      SETS    "0.60 (22 Nov 2000) 4.13.2.3"
@


4.13.2.4
log
@  Major stack imbalance fixed.
  EXITS macros passed the fields parameter.
Detail:
  EXITS does NOT restore the c part of the CPSR only the flags.  Since
    this module was relying on EXITS to reset IRQ/FIQ/mode bits, this
    module wasn't going to work very well.
  The error generator on the DeviceFS entry point was severely broken in
    that it would remove 10 words from the stack that weren't actually
    there.
Admin:
  Built, but untested.


Version 0.60, 4.13.2.4. Tagged as 'Parallel-0_60-4_13_2_4'
@
text
@d16 4
a19 4
Module_MinorVersion     SETS    "4.13.2.4"
Module_Date             SETS    "29 Nov 2000"
Module_ApplicationDate2 SETS    "29-Nov-00"
Module_ApplicationDate4 SETS    "29-Nov-2000"
d22 2
a23 2
Module_FullVersion      SETS    "0.60 (4.13.2.4)"
Module_HelpVersion      SETS    "0.60 (29 Nov 2000) 4.13.2.4"
@


4.13.2.5
log
@  Merge of latest trunk version to the 32-bit branch.
Detail:
  Merged here for testing before committing this to the trunk
    as the master version.
Admin:
  Untested.

Version 0.60, 4.13.2.5. Tagged as 'Parallel-0_60-4_13_2_5'
@
text
@d16 4
a19 4
Module_MinorVersion     SETS    "4.13.2.5"
Module_Date             SETS    "09 Jan 2001"
Module_ApplicationDate2 SETS    "09-Jan-01"
Module_ApplicationDate4 SETS    "09-Jan-2001"
d22 2
a23 2
Module_FullVersion      SETS    "0.60 (4.13.2.5)"
Module_HelpVersion      SETS    "0.60 (09 Jan 2001) 4.13.2.5"
@


4.12
log
@Added support for "version 2" parallel: if ReadSysInfo 3 says parallel type 2,
then it behaves as before, but claims device 2 rather than 0, as the
interface is on a different interrupt pin.

Version 0.59. Tagged as 'Parallel-0_59'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "0.59"
Module_Version          SETA    59
d12 2
a13 2
Module_Date		SETS    "25 Oct 1999"
Module_FullVersion      SETS    "0.59"
@


4.11
log
@Service call table added.

Version 0.58. Tagged as 'Parallel-0_58'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "0.58"
Module_Version          SETA    58
d12 2
a13 2
Module_Date		SETS    "17 Aug 1999"
Module_FullVersion      SETS    "0.58"
@


4.10
log
@Exchanged Japanese resources for the new generic Japanese resources
(i.e., Element 14 owned).

Version 0.57. Tagged as 'Parallel-0_57'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "0.57"
Module_Version          SETA    57
d12 2
a13 2
Module_Date		SETS    "28 Apr 1999"
Module_FullVersion      SETS    "0.57"
@


4.9
log
@Now GETS IO file dependant on the target machine.  Not always IO.IOC-A1.

Version 0.56. Tagged as 'Parallel-0_56'
@
text
@d8 3
a10 2
Module_MajorVersion	SETS    "0.56"
Module_Version          SETA    56
d12 3
a14 2
Module_Date		SETS    "29 Jan 1999"
		        END
@


4.8
log
@Full stop removed from Japanese "not ready" message.

Version 0.55. Tagged as 'Parallel-0_55'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.55"
Module_Version          SETA    55
d11 1
a11 1
Module_Date		SETS    "12 Jan 1999"
@


4.7
log
@Minor change to Japanese OnLine/Paper message.

Version 0.54. Tagged as 'Parallel-0_54'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.54"
Module_Version          SETA    54
d11 1
a11 1
Module_Date		SETS    "07 Jan 1999"
@


4.6
log
@New Japanese "printer not ready" message.

Version 0.53. Not tagged
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.53"
Module_Version          SETA    53
d11 1
a11 1
Module_Date		SETS    "04 Dec 1998"
@


4.5
log
@Japanese "No paper" message removed, in line with Scandinavian message files.

Version 0.53. Not tagged
@
text
@d11 1
a11 1
Module_Date		SETS    "13 Nov 1998"
@


4.4
log
@New Japanese messages.
FastParallel: device no longer faults monitor RX/TX calls.

Version 0.53. Tagged as 'Parallel-0_53'
@
text
@d11 1
a11 1
Module_Date		SETS    "29 Oct 1998"
@


4.3
log
@Exchanged the "out of paper" message for "printer not ready".  This
is because it is actually impossible to tell when an "out of paper"
error occurs on all supported printers; instead we now use the generic
"printer not ready" message.

This change applied to all resource sets with the exception of Japan.

Version 0.52. Tagged as 'Parallel-0_52'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.52"
Module_Version          SETA    52
d11 1
a11 1
Module_Date		SETS    "23 Oct 1998"
@


4.2
log
@Changed to use srccommit.
Spinner branch merged.
Inclusion of Hdr:CMOS removed.

Version 0.51. Tagged as 'Parallel-0_51'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.51"
Module_Version          SETA    51
d11 1
a11 1
Module_Date		SETS    "19 Oct 1998"
@


4.1
log
@created by srccommit.
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "0.50"
Module_Version          SETA    50
@
