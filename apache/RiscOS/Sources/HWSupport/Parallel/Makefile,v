head	4.4;
access;
symbols
	Parallel-0_79:4.4
	Parallel-0_78:4.4
	Parallel-0_77:4.4
	Parallel-0_76:4.4
	Parallel-0_75:4.4
	Parallel-0_74:4.4
	Parallel-0_73:4.4
	Parallel-0_72:4.4
	Parallel-0_71:4.4
	Parallel-0_70:4.4
	Parallel-0_69:4.4
	Parallel-0_68:4.4
	Parallel-0_67:4.4
	Parallel-0_66:4.4
	Parallel-0_65:4.3
	kbracey_32bit_merge:4.3
	Parallel-0_64:4.3
	Parallel-0_60-4_13_2_5:4.3
	Parallel-0_60-4_13_2_4:4.3
	Parallel-0_60-4_13_2_3:4.3
	Parallel-0_63:4.3
	Parallel-0_60-4_13_2_2:4.3
	Alpnet_approved:4.3
	Parallel-0_62:4.3
	dellis_autobuild_BaseSW:4.3
	Parallel-0_61:4.3
	Parallel-0_60-4_13_2_1:4.3
	kbracey_32bit:4.3.0.2
	sbrodie_sedwards_16Mar2000:4.3
	Parallel-0_60:4.3
	Parallel-0_59:4.3
	dcotton_autobuild_BaseSW:4.4
	Parallel-0_58:4.3
	Parallel-0_57:4.3
	Parallel-0_56:4.3
	Parallel-0_55:4.3
	Parallel-0_54:4.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2.2.1
	Ursula_RiscPC:4.2.2.1.0.2
	Parallel-0_53:4.3
	Parallel-0_52:4.3
	Parallel-0_51:4.3
	FunaiNC2_Parallel-0_50:4.1.7.4
	rthornb_UrsulaBuild-19Aug1998:4.2.2.1
	UrsulaBuild_FinalSoftload:4.2.2.1
	wturner_parallel-0_47:4.2.2.2
	wturner_parallel-0_46:4.2.2.1
	rthornb_UrsulaBuild-12Aug1998:4.2.2.1
	aglover_UrsulaBuild-05Aug1998:4.2.2.1
	rthornb_UrsulaBuild-29Jul1998:4.2.2.1
	rthornb_UrsulaBuild-22Jul1998:4.2.2.1
	rthornb_UrsulaBuild-15Jul1998:4.2.2.1
	rthornb_UrsulaBuild-07Jul1998:4.2.2.1
	rthornb_UrsulaBuild-17Jun1998:4.2.2.1
	rthornb_UrsulaBuild-03Jun1998:4.2.2.1
	rthornb_UrsulaBuild-27May1998:4.2.2.1
	rthornb_UrsulaBuild-21May1998:4.2.2.1
	rthornb_UrsulaBuild_01May1998:4.2.2.1
	afrost_NC2_Generic:4.1.7.3
	afrost_Funai01-33:4.1.7.3
	Spinner_RCA116:4.1.7.3
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spinner_B10:4.1.7.2
	Daytona:4.2.0.4
	Ursula:4.2.0.2
	Spin_merge_16May97:4.1.7.1
	Daytona_bp:4.2
	Ursula_bp:4.2
	Spin_merge_7May97:4.1.7.1
	ARTtmp_bp:4.1.7.1
	Spinner_B7:4.1.7.2
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.1
	ARTtmp:4.1.7.1.0.2
	RCA:4.1.0.2
	Spin_merge:4.1.7.4
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	2001.03.16.15.59.13;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	98.10.19.16.10.04;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.05.16.11.14.39;	author kbracey;	state Exp;
branches
	4.2.2.1;
next	4.1;

4.1
date	96.11.05.09.36.24;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.2.2.1
date	98.03.26.15.00.51;	author rthornb;	state Exp;
branches;
next	4.2.2.2;

4.2.2.2
date	98.08.18.15.11.57;	author wturner;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.36.24;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.01.30.00;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.11.54.29;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.49.20;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.04.30.18.18.39;	author scormie;	state Exp;
branches;
next	4.1.7.3;

4.1.7.3
date	97.07.31.16.27.28;	author scormie;	state Exp;
branches;
next	4.1.7.4;

4.1.7.4
date	98.09.16.11.25.00;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.4
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 0.66. Tagged as 'Parallel-0_66'
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Parallel Port Driver
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name         Description
# ----       ----         -----------
# 07-Mar-01  SNB          Recreated
#

COMPONENT = ParallelDeviceDriver
TARGET    = Parallel
HEADER1   = Parallel

include StdTools
include AAsmModule

# Dynamic dependencies:
@


4.3
log
@Changed to use srccommit.
Spinner branch merged.
Inclusion of Hdr:CMOS removed.

Version 0.51. Tagged as 'Parallel-0_51'
@
text
@d22 1
a22 1
# 25-May-94  AMcC         Created.
d25 3
a27 61
#
# Paths
#
EXP_HDR = <export$dir>

#
# Generic options:
#
MKDIR   = cdir
AS      = aasm
CP      = copy
RM      = remove
CCFLAGS = -c -depend !Depend -IC:
ASFLAGS = -depend !Depend -Stamp -quit -module -To $@@ -From
CPFLAGS = ~cfr~v

#
# Program specific options:
#
COMPONENT = Parallel
SOURCE    = s.Parallel
TARGET    = rm.Parallel
TARGETSA  = rm.ParallelSA
EXPORTS   = ${EXP_HDR}.${COMPONENT}
RESOURCES = LocalRes:Messages

#
# Generic rules:
#
rom: ${TARGET}
        @@echo ${COMPONENT}: rom module built

export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete

install_rom: ${TARGET}
        ${CP} ${TARGET} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: rom module installed

clean:
        ${RM} ${TARGET}
        ${RM} ${TARGETSA}
        @@echo ${COMPONENT}: cleaned

resources:
        ${MKDIR} ${RESDIR}.${COMPONENT}
	TokenCheck LocalRes:Messages
        ${CP} LocalRes:Messages  ${RESDIR}.${COMPONENT}.Messages  ${CPFLAGS}
        @@echo ${COMPONENT}: resource files copied

${TARGET}: ${SOURCE}
        ${AS} ${ASFLAGS} ${SOURCE}

${EXP_HDR}.${COMPONENT}: hdr.${COMPONENT}
        ${CP} hdr.${COMPONENT} $@@ ${CPFLAGS}

#
# Makes a stand-alone version with messages bound in
#
standalone: ${TARGETSA}
        @@echo ${COMPONENT}: standalone module built
d29 2
a30 2
${TARGETSA}: s.StandAlone ${RESOURCES}
        ${AS} ${ASFLAGS} s.StandAlone
@


4.2
log
@Spinner branch merged
@
text
@d49 1
a49 1
RESOURCES = Resources.${LOCALE}.Messages
d71 2
a72 1
        ${CP} Resources.${LOCALE}.Messages  ${RESDIR}.${COMPONENT}.Messages  ${CPFLAGS}
a90 69
rm.Parallel: Hdr:ListOpts
rm.Parallel: Hdr:Macros
rm.Parallel: Hdr:System
rm.Parallel: Hdr:SWIs
rm.Parallel: Hdr:CPU.Generic26
rm.Parallel: Hdr:IO.GenericIO
rm.Parallel: Hdr:RISCOS
rm.Parallel: Hdr:ModHand
rm.Parallel: Hdr:FSNumbers
rm.Parallel: Hdr:NewErrors
rm.Parallel: Hdr:Services
rm.Parallel: Hdr:Symbols
rm.Parallel: Hdr:NdrDebug
rm.Parallel: Hdr:HostFS
rm.Parallel: Hdr:Proc
rm.Parallel: Hdr:DevNos
rm.Parallel: Hdr:PublicWS
rm.Parallel: Hdr:DDVMacros
rm.Parallel: Hdr:Buffer
rm.Parallel: Hdr:DeviceFS
rm.Parallel: Hdr:IO.IOC-A1
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:IO.IOEB
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:CMOS
rm.Parallel: Hdr:MsgTrans
rm.Parallel: Hdr:ResourceFS
rm.Parallel: Hdr:Portable
rm.Parallel: Version
rm.Parallel: s.Errors
rm.Parallel: s.Common
rm.Parallel: s.IOEB
rm.Parallel: s.FastCent
rm.ParallelSA: s.Parallel
rm.ParallelSA: Hdr:ListOpts
rm.ParallelSA: Hdr:Macros
rm.ParallelSA: Hdr:System
rm.ParallelSA: Hdr:SWIs
rm.ParallelSA: Hdr:CPU.Generic26
rm.ParallelSA: Hdr:IO.GenericIO
rm.ParallelSA: Hdr:RISCOS
rm.ParallelSA: Hdr:ModHand
rm.ParallelSA: Hdr:FSNumbers
rm.ParallelSA: Hdr:NewErrors
rm.ParallelSA: Hdr:Services
rm.ParallelSA: Hdr:Symbols
rm.ParallelSA: Hdr:NDRDebug
rm.ParallelSA: Hdr:HostFS
rm.ParallelSA: Hdr:Proc
rm.ParallelSA: Hdr:DevNos
rm.ParallelSA: Hdr:PublicWS
rm.ParallelSA: Hdr:DDVMacros
rm.ParallelSA: Hdr:Buffer
rm.ParallelSA: Hdr:DeviceFS
rm.ParallelSA: Hdr:IO.IOC-A1
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:IO.IOEB
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:CMOS
rm.ParallelSA: Hdr:MsgTrans
rm.ParallelSA: Hdr:ResourceFS
rm.ParallelSA: Hdr:Portable
rm.ParallelSA: Hdr:UpCall
rm.ParallelSA: Version
rm.ParallelSA: s.Errors
rm.ParallelSA: s.ResFiles
rm.ParallelSA: s.Common
rm.ParallelSA: s.IOEB
rm.ParallelSA: s.FastCent
@


4.2.2.1
log
@Removed dynamic dependancies from Makefiles and removed all reference to Prefix
@
text
@d90 69
@


4.2.2.2
log
@Parallel device driver modified for Phoebe hardware
NOT backwards compatible.
@
text
@a89 36
rm.ParallelSA: s.Parallel
rm.ParallelSA: Hdr:ListOpts
rm.ParallelSA: Hdr:Macros
rm.ParallelSA: Hdr:System
rm.ParallelSA: Hdr:SWIs
rm.ParallelSA: Hdr:CPU.Generic26
rm.ParallelSA: Hdr:IO.GenericIO
rm.ParallelSA: Hdr:RISCOS
rm.ParallelSA: Hdr:ModHand
rm.ParallelSA: Hdr:FSNumbers
rm.ParallelSA: Hdr:NewErrors
rm.ParallelSA: Hdr:Services
rm.ParallelSA: Hdr:Symbols
rm.ParallelSA: Hdr:NDRDebug
rm.ParallelSA: Hdr:HostFS
rm.ParallelSA: Hdr:Proc
rm.ParallelSA: Hdr:DevNos
rm.ParallelSA: Hdr:PublicWS
rm.ParallelSA: Hdr:DDVMacros
rm.ParallelSA: Hdr:Buffer
rm.ParallelSA: Hdr:DeviceFS
rm.ParallelSA: Hdr:IO.IOC-A1
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:IO.IOEB
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:CMOS
rm.ParallelSA: Hdr:MsgTrans
rm.ParallelSA: Hdr:ResourceFS
rm.ParallelSA: Hdr:Portable
rm.ParallelSA: Hdr:UpCall
rm.ParallelSA: Version
rm.ParallelSA: s.Errors
rm.ParallelSA: s.ResFiles
rm.ParallelSA: s.Common
rm.ParallelSA: s.IOEB
rm.ParallelSA: s.FastCent
@


4.1
log
@Initial revision
@
text
@d90 33
d136 2
a137 1
rm.ParallelSA: Hdr:NdrDebug
d151 2
a156 1
rm.ParallelSA: s.IOC
a158 32
rm.Parallel: Hdr:ListOpts
rm.Parallel: Hdr:Macros
rm.Parallel: Hdr:System
rm.Parallel: Hdr:SWIs
rm.Parallel: Hdr:CPU.Generic26
rm.Parallel: Hdr:IO.GenericIO
rm.Parallel: Hdr:RISCOS
rm.Parallel: Hdr:ModHand
rm.Parallel: Hdr:FSNumbers
rm.Parallel: Hdr:NewErrors
rm.Parallel: Hdr:Services
rm.Parallel: Hdr:Symbols
rm.Parallel: Hdr:NdrDebug
rm.Parallel: Hdr:Proc
rm.Parallel: Hdr:DevNos
rm.Parallel: Hdr:PublicWS
rm.Parallel: Hdr:DDVMacros
rm.Parallel: Hdr:Buffer
rm.Parallel: Hdr:DeviceFS
rm.Parallel: Hdr:IO.IOC-A1
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:IO.IOEB
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:CMOS
rm.Parallel: Hdr:MsgTrans
rm.Parallel: Hdr:ResourceFS
rm.Parallel: Hdr:Portable
rm.Parallel: Version
rm.Parallel: s.Errors
rm.Parallel: s.Common
rm.Parallel: s.IOEB
rm.Parallel: s.FastCent
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.7.2
log
@   Calculate loop factor in init code; added Paper, OnLine, Printer message tokens;
make appropriate upcalls in ioeb_monitorTX when paper out etc; use
ParallelDeviceDriver$Path for resources; added 'j' debug flag.
@
text
@d90 34
a136 1
rm.Parallel: Hdr:HostFS
a155 36
rm.ParallelSA: s.Parallel
rm.ParallelSA: Hdr:ListOpts
rm.ParallelSA: Hdr:Macros
rm.ParallelSA: Hdr:System
rm.ParallelSA: Hdr:SWIs
rm.ParallelSA: Hdr:CPU.Generic26
rm.ParallelSA: Hdr:IO.GenericIO
rm.ParallelSA: Hdr:RISCOS
rm.ParallelSA: Hdr:ModHand
rm.ParallelSA: Hdr:FSNumbers
rm.ParallelSA: Hdr:NewErrors
rm.ParallelSA: Hdr:Services
rm.ParallelSA: Hdr:Symbols
rm.ParallelSA: Hdr:NDRDebug
rm.ParallelSA: Hdr:HostFS
rm.ParallelSA: Hdr:Proc
rm.ParallelSA: Hdr:DevNos
rm.ParallelSA: Hdr:PublicWS
rm.ParallelSA: Hdr:DDVMacros
rm.ParallelSA: Hdr:Buffer
rm.ParallelSA: Hdr:DeviceFS
rm.ParallelSA: Hdr:IO.IOC-A1
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:IO.IOEB
rm.ParallelSA: Hdr:IO.IOC
rm.ParallelSA: Hdr:CMOS
rm.ParallelSA: Hdr:MsgTrans
rm.ParallelSA: Hdr:ResourceFS
rm.ParallelSA: Hdr:Portable
rm.ParallelSA: Hdr:UpCall
rm.ParallelSA: Version
rm.ParallelSA: s.Errors
rm.ParallelSA: s.ResFiles
rm.ParallelSA: s.Common
rm.ParallelSA: s.IOEB
rm.ParallelSA: s.FastCent
@


4.1.7.3
log
@Changed monitor TX so that it does not use pp_stat_error (nFault) as the
overriding indication of an error condition so that HP printers can report
out of paper errors. This is tempered by the condition that pp_stat_notbusy
must be clear (indicating busy).

Changed strategy for continue on errors such that the continuing to print
message is displayed and control is returned to the higher levels (rather
than rechecking the pp_stat bits). This should be cleaner and provides
better user feedback.
@
text
@d90 33
a158 34
rm.Parallel: Hdr:ListOpts
rm.Parallel: Hdr:Macros
rm.Parallel: Hdr:System
rm.Parallel: Hdr:SWIs
rm.Parallel: Hdr:CPU.Generic26
rm.Parallel: Hdr:IO.GenericIO
rm.Parallel: Hdr:RISCOS
rm.Parallel: Hdr:ModHand
rm.Parallel: Hdr:FSNumbers
rm.Parallel: Hdr:NewErrors
rm.Parallel: Hdr:Services
rm.Parallel: Hdr:Symbols
rm.Parallel: Hdr:NDRDebug
rm.Parallel: Hdr:HostFS
rm.Parallel: Hdr:Proc
rm.Parallel: Hdr:DevNos
rm.Parallel: Hdr:PublicWS
rm.Parallel: Hdr:DDVMacros
rm.Parallel: Hdr:Buffer
rm.Parallel: Hdr:DeviceFS
rm.Parallel: Hdr:IO.IOC-A1
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:IO.IOEB
rm.Parallel: Hdr:IO.IOC
rm.Parallel: Hdr:CMOS
rm.Parallel: Hdr:MsgTrans
rm.Parallel: Hdr:ResourceFS
rm.Parallel: Hdr:Portable
rm.Parallel: Hdr:UpCall
rm.Parallel: Version
rm.Parallel: s.Errors
rm.Parallel: s.Common
rm.Parallel: s.IOEB
rm.Parallel: s.FastCent
@


4.1.7.4
log
@Added Japanese messages.
Changed Makefile to use LocalRes$Path.
@
text
@d49 1
a49 1
RESOURCES = LocalRes:Messages
d71 1
a71 2
	TokenCheck LocalRes:Messages
        ${CP} LocalRes:Messages  ${RESDIR}.${COMPONENT}.Messages  ${CPFLAGS}
d90 70
@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
