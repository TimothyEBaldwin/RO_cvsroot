head	4.3;
access;
symbols
	DualSerial-0_25-4_8_2_16-1:4.3
	DualSerial-0_25-4_8_2_16:4.3
	DualSerial-0_25-4_8_2_15:4.3
	DualSerial-0_25-4_8_2_14:4.3
	DualSerial-0_25-4_8_2_13:4.3
	DualSerial-0_25-4_8_2_12:4.3
	DualSerial-0_25-4_8_2_11:4.3
	DualSerial-0_29:4.3
	DualSerial-0_25-4_8_2_10:4.3
	RO_5_07:4.3
	DualSerial-0_28:4.3
	DualSerial-0_25-4_8_2_9:4.3
	DualSerial-0_25-4_8_2_8:4.3
	DualSerial-0_25-4_8_2_7:4.3
	DualSerial-0_25-4_8_2_6:4.3
	DualSerial-0_27:4.3
	DualSerial-0_25-4_8_2_5:4.3
	DualSerial-0_25-4_8_2_4:4.3
	DualSerial-0_25-4_8_2_3:4.3
	DualSerial-0_25-4_8_2_2:4.3
	DualSerial-0_25-4_8_2_1:4.3
	HAL:4.3.0.4
	DualSerial-0_26:4.3
	DualSerial-0_25:4.3
	kbracey_32bit_merge:4.3
	DualSerial-0_24-4_7_2_4:4.3
	DualSerial-0_24-4_7_2_3:4.3
	DualSerial-0_24-4_7_2_2:4.3
	dellis_autobuild_BaseSW:4.3
	DualSerial-0_24-4_7_2_1:4.3
	kbracey_32bit:4.3.0.2
	DualSerial-0_24:4.3
	sbrodie_sedwards_16Mar2000:4.3
	DualSerial-0_23:4.3
	dcotton_autobuild_BaseSW:4.3
	DualSerial-0_22:4.3
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2.2.2
	Ursula_RiscPC:4.2.2.2.0.2
	DualSerial-0_21:4.3
	DualSerial-0_18:4.3
	Daytona_merge:4.2
	DualSerial-0_17:4.3
	rthornb_UrsulaBuild-19Aug1998:4.2.2.2
	UrsulaBuild_FinalSoftload:4.2.2.2
	rthornb_UrsulaBuild-12Aug1998:4.2.2.2
	aglover_UrsulaBuild-05Aug1998:4.2.2.2
	rthornb_UrsulaBuild-29Jul1998:4.2.2.2
	rthornb_UrsulaBuild-22Jul1998:4.2.2.2
	wturner_DualSerial-0_20:4.2.2.2
	rthornb_UrsulaBuild-15Jul1998:4.2
	rthornb_UrsulaBuild-07Jul1998:4.2
	rthornb_UrsulaBuild-17Jun1998:4.2
	rthornb_UrsulaBuild-03Jun1998:4.2
	rthornb_UrsulaBuild-27May1998:4.2
	rthornb_UrsulaBuild-21May1998:4.2
	rthornb_UrsulaBuild_01May1998:4.2
	afrost_NC2_Generic:4.1.7.2
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spinner_B10:4.1.7.2
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Ursula:4.2.0.2
	Ursula_bp:4.2
	Spinner_B7:4.1.7.2
	ARTtmp_merge:4.1.7.2
	Spin_3Apr97:4.1.7.2
	ARTtmp:4.1.7.2.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.2
	MergeFiles:4.1.7.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1;
locks; strict;
comment	@# @;


4.3
date	98.09.21.14.21.49;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.22.13.38.00;	author nturton;	state Exp;
branches
	4.2.2.1;
next	4.1;

4.1
date	96.11.21.12.06.41;	author nturton;	state Exp;
branches
	4.1.5.1
	4.1.7.1;
next	;

4.2.2.1
date	98.07.21.13.36.27;	author wturner;	state dead;
branches;
next	4.2.2.2;

4.2.2.2
date	98.07.21.14.34.49;	author wturner;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.06.41;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.45.34;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.01.29.15.06.01;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.3
log
@Makefile changed to use LocalRes$Path.
Changed to use srccommit.
Spinner branch merged.

Version 0.17. Tagged as 'DualSerial-0_17'
@
text
@/* Copyright 1996 Acorn Computers Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/************************************************************************/
/* 	        Copyright 1996 Acorn Network Computers		        */
/*									*/
/*  This material is the confidential trade secret and proprietary	*/
/*  information of Acorn Network Computers. It may not be reproduced,   */
/*  used sold, or transferred to any third party without the prior      */
/*  written consent of Acorn Network Computers. All rights reserved.	*/
/* 									*/
/************************************************************************/

#ifndef __serial_h
#define __serial_h

/*
 * filenames for serial streams without modification of baud rate, etc, ...
 */
#define SERIAL_STREAM_1 "devices:$.serial1"
#define SERIAL_STREAM_2 "devices:$.serial2"

/*
 * access rights to be passed to serial_open_stream
 */
#define SERIAL_INPUT  (0x4f)
#define SERIAL_OUTPUT (0xcf)

/*
 * ioctl reason codes supported by serial driver
 */
#define IOCTL_BAUD         (1)
#define IOCTL_FORMAT       (2)
#define IOCTL_HANDSHAKE    (3)
#define IOCTL_BUFFER_SIZE  (4)
#define IOCTL_BUFFER_THRES (5)
#define IOCTL_CTRL_LINES   (6)
#define IOCTL_FIFO_TRIG    (7)
#define IOCTL_READ_BAUDS   (8)
#define IOCTL_READ_BAUD	   (9)

/*
 * struct to contain data forming an ioctl, used when calling serial_ioctl
 */
typedef struct {
	unsigned int reason   : 16; /* ioctl reason code */
	unsigned int group    : 8;  /* ioctl group code */
	unsigned int reserved : 6;  /* should be zero */
	unsigned int read     : 1;  /* read flag */
	unsigned int write    : 1;  /* write flag */
	unsigned int data;          /* actual data */
} ioctl_t;

/*
 * integer giving access to bit field values used in ioctl 6. should be used
 * along the lines of :
 *
 *       serial_ctrl.bits.dtr = 1
 *	 pchIOCtlBlock->write = 1
 * 	 pchIOCtlBlock->data = serial_ctrl.data
 */
typedef union {
  	unsigned int data;
  	struct {
   	   unsigned int dtr   : 1;     /* dtr line wr */
	   unsigned int rts   : 1;	    /* rts line wr */
	   unsigned int resv1 : 14;    /* reserved */
	   unsigned int cts   : 1;	    /* cts line ro */
	   unsigned int dsr   : 1;	    /* dsr line ro */
	   unsigned int ri    : 1;	    /* ri line ro */
	   unsigned int dcd   : 1;	    /* dcd line ro */
	   unsigned int fifo  : 1;	    /* fifos enabled */
	   unsigned int resv2 : 11;    /* reserved  */
	} bits;
} serial_ctrl_t;

#endif
@


4.2
log
@Version Spin_merge taken
@
text
@d50 2
@


4.2.2.1
log
@Rightio, we'll try for a real log this time...

Files deleted due to CVSs incompetency in replacing them with newer
differently named ones. Next, you'll see the new files arrive, with
a more descriptive log of what & why.
@
text
@@


4.2.2.2
log
@A couple of superficial changes to the file structure have resulted in CVS
needing this complete deletion/recreation.

Basically, the IOCtl code is getting too big to be tacked onto the
DeviceCall file. So this has been split into the file 'IOCtls'. Given that
this alone is enough to stuff CVS, the opportunity was taken to rename the
'Init' file to 'GetAll', as it doesn't init anything, and Gets all the files
, GetAll being the traditional name for such a file.

Additionally, a Docs directory has been added, which contains a copy of the
functional spec, which will hopefully be kept up to date. Also this directory
is for miscellaneous files which may aid understanding of the thought processes
which led to various bits of code or design decisions, namely the Ursula file
at the present moment.
@
text
@@


4.1
log
@Initial revision
@
text
@a49 2
#define IOCTL_READ_BAUDS   (8)
#define IOCTL_READ_BAUD	   (9)
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@d50 2
@


4.1.7.2
log
@Imported from SrcFiler
@
text
@a49 2
#define IOCTL_READ_BAUDS   (8)
#define IOCTL_READ_BAUD	   (9)
@


4.1.5.1
log
@Import from SrcFiler
@
text
@@
