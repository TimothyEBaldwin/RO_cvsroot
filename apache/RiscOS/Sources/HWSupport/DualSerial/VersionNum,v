head	4.12;
access;
symbols
	DualSerial-0_25-4_8_2_16-1:4.8.2.16
	DualSerial-0_25-4_8_2_16:4.8.2.16
	DualSerial-0_25-4_8_2_15:4.8.2.15
	DualSerial-0_25-4_8_2_14:4.8.2.14
	DualSerial-0_25-4_8_2_13:4.8.2.13
	DualSerial-0_25-4_8_2_12:4.8.2.12
	DualSerial-0_25-4_8_2_11:4.8.2.11
	DualSerial-0_29:4.12
	DualSerial-0_25-4_8_2_10:4.8.2.10
	RO_5_07:4.8.2.9
	DualSerial-0_28:4.11
	DualSerial-0_25-4_8_2_9:4.8.2.9
	DualSerial-0_25-4_8_2_8:4.8.2.8
	DualSerial-0_25-4_8_2_7:4.8.2.7
	DualSerial-0_25-4_8_2_6:4.8.2.6
	DualSerial-0_27:4.10
	DualSerial-0_25-4_8_2_5:4.8.2.5
	DualSerial-0_25-4_8_2_4:4.8.2.4
	DualSerial-0_25-4_8_2_3:4.8.2.3
	DualSerial-0_25-4_8_2_2:4.8.2.2
	DualSerial-0_25-4_8_2_1:4.8.2.1
	HAL:4.8.0.2
	DualSerial-0_26:4.9
	DualSerial-0_25:4.8
	kbracey_32bit_merge:4.7.2.4
	DualSerial-0_24-4_7_2_4:4.7.2.4
	DualSerial-0_24-4_7_2_3:4.7.2.3
	DualSerial-0_24-4_7_2_2:4.7.2.2
	dellis_autobuild_BaseSW:4.7
	DualSerial-0_24-4_7_2_1:4.7.2.1
	kbracey_32bit:4.7.0.2
	DualSerial-0_24:4.7
	sbrodie_sedwards_16Mar2000:4.6
	DualSerial-0_23:4.6
	dcotton_autobuild_BaseSW:4.9
	DualSerial-0_22:4.5
	DualSerial-0_21:4.4
	DualSerial-0_18:4.3
	DualSerial-0_17:4.2;
locks; strict;
comment	@# @;


4.12
date	2012.01.14.22.53.52;	author srevill;	state Exp;
branches;
next	4.11;
commitid	LWh8XXvNbMYj6cPv;

4.11
date	2004.07.31.19.47.05;	author srevill;	state Exp;
branches;
next	4.10;

4.10
date	2001.10.23.12.42.50;	author dellis;	state Exp;
branches;
next	4.9;

4.9
date	2001.03.16.15.55.52;	author sbrodie;	state Exp;
branches;
next	4.8;

4.8
date	2001.01.09.14.05.10;	author sbrodie;	state Exp;
branches
	4.8.2.1;
next	4.7;

4.7
date	2000.07.05.16.14.37;	author nicke;	state Exp;
branches
	4.7.2.1;
next	4.6;

4.6
date	99.10.26.09.22.14;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	99.08.16.17.04.22;	author kbracey;	state Exp;
branches;
next	4.4;

4.4
date	98.09.29.14.23.48;	author blaughto;	state Exp;
branches;
next	4.3;

4.3
date	98.09.29.13.30.02;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	98.09.21.14.21.47;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	98.09.21.14.17.45;	author kbracey;	state Exp;
branches;
next	;

4.8.2.1
date	2001.03.16.19.42.10;	author kbracey;	state Exp;
branches;
next	4.8.2.2;

4.8.2.2
date	2001.03.20.13.13.46;	author kbracey;	state Exp;
branches;
next	4.8.2.3;

4.8.2.3
date	2001.03.27.11.58.17;	author dellis;	state Exp;
branches;
next	4.8.2.4;

4.8.2.4
date	2001.03.30.13.19.17;	author dellis;	state Exp;
branches;
next	4.8.2.5;

4.8.2.5
date	2001.05.22.10.02.51;	author kbracey;	state Exp;
branches;
next	4.8.2.6;

4.8.2.6
date	2003.03.29.18.20.23;	author kbracey;	state Exp;
branches;
next	4.8.2.7;

4.8.2.7
date	2003.03.31.09.28.06;	author rsprowson;	state Exp;
branches;
next	4.8.2.8;

4.8.2.8
date	2004.07.02.12.44.27;	author bavison;	state Exp;
branches;
next	4.8.2.9;

4.8.2.9
date	2004.07.13.14.26.26;	author srevill;	state Exp;
branches;
next	4.8.2.10;

4.8.2.10
date	2009.06.11.21.16.07;	author bavison;	state Exp;
branches;
next	4.8.2.11;

4.8.2.11
date	2012.06.04.23.36.03;	author jlee;	state Exp;
branches;
next	4.8.2.12;
commitid	lqDFJl0aX8rOLr7w;

4.8.2.12
date	2012.06.11.22.34.09;	author jlee;	state Exp;
branches;
next	4.8.2.13;
commitid	ZeM9napmUb1Dcl8w;

4.8.2.13
date	2015.06.21.22.13.56;	author jballance;	state Exp;
branches;
next	4.8.2.14;
commitid	3p3436K4qAWwzlqy;

4.8.2.14
date	2016.10.09.12.15.35;	author jlee;	state Exp;
branches;
next	4.8.2.15;
commitid	eD4vGhfsX2ODXspz;

4.8.2.15
date	2016.10.25.19.51.40;	author jlee;	state Exp;
branches;
next	4.8.2.16;
commitid	jdTxMDLlSBodYyrz;

4.8.2.16
date	2017.04.24.22.19.38;	author jballance;	state Exp;
branches;
next	;
commitid	ktbWmFIrSjogYPOz;

4.7.2.1
date	2000.07.13.15.23.19;	author sbrodie;	state Exp;
branches;
next	4.7.2.2;

4.7.2.2
date	2000.10.07.13.20.20;	author sbrodie;	state Exp;
branches;
next	4.7.2.3;

4.7.2.3
date	2000.10.10.16.54.23;	author sbrodie;	state Exp;
branches;
next	4.7.2.4;

4.7.2.4
date	2001.01.09.14.03.19;	author sbrodie;	state Exp;
branches;
next	;


desc
@@


4.12
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 0.29. Tagged as 'DualSerial-0_29'
@
text
@/* (0.29)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.29
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                14 Jan 2012

#define Module_MajorVersion             "0.29"
#define Module_Version                  29
#define Module_MinorVersion             ""
#define Module_Date                     "14 Jan 2012"

#define Module_ApplicationDate          "14-Jan-12"

#define Module_ComponentName            "DualSerial"
#define Module_ComponentPath            "castle/RiscOS/Sources/HWSupport/DualSerial"

#define Module_FullVersion              "0.29"
#define Module_HelpVersion              "0.29 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:29"
@


4.11
log
@  Tiny tweak to makefile.
Detail:
  You can specify the target as a build option.
Admin:
  Tested in STB Baseline build.

Version 0.28. Tagged as 'DualSerial-0_28'
@
text
@d1 1
a1 1
/* (0.28)
d4 1
a4 1
 * Last processed by srccommit version: 1.68.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.28
d9 1
a9 1
#define Module_Date_CMHG                31 Jul 2004
d11 2
a12 2
#define Module_MajorVersion             "0.28"
#define Module_Version                  28
d14 1
a14 1
#define Module_Date                     "31 Jul 2004"
d16 1
a16 1
#define Module_ApplicationDate          "31-Jul-04"
d19 1
a19 1
#define Module_ComponentPath            "RiscOS/Sources/HWSupport/DualSerial"
d21 3
a23 3
#define Module_FullVersion              "0.28"
#define Module_HelpVersion              "0.28 (31 Jul 2004)"
#define Module_LibraryVersionInfo       "0:28"
@


4.10
log
@  Fixed reregistration with DeviceFS

Detail:
  Service_DeviceFSDying wasn't being handled correctly.

Admin:
  Tested on STB


Version 0.27. Tagged as 'DualSerial-0_27'
@
text
@d1 1
a1 1
/* (0.27)
d4 1
a4 1
 * Last processed by srccommit version: 1.60.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.27
d9 1
a9 1
#define Module_Date_CMHG                23 Oct 2001
d11 2
a12 2
#define Module_MajorVersion             "0.27"
#define Module_Version                  27
d14 1
a14 1
#define Module_Date                     "23 Oct 2001"
d16 1
a16 2
#define Module_ApplicationDate2         "23-Oct-01"
#define Module_ApplicationDate4         "23-Oct-2001"
d21 3
a23 3
#define Module_FullVersion              "0.27"
#define Module_HelpVersion              "0.27 (23 Oct 2001)"
#define Module_LibraryVersionInfo       "0:27"
@


4.9
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 0.26. Tagged as 'DualSerial-0_26'
@
text
@d1 1
a1 1
/* (0.26)
d4 1
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.26
d9 1
a9 1
#define Module_Date_CMHG                16 Mar 2001
d11 2
a12 2
#define Module_MajorVersion             "0.26"
#define Module_Version                  26
d14 1
a14 1
#define Module_Date                     "16 Mar 2001"
d16 2
a17 2
#define Module_ApplicationDate2         "16-Mar-01"
#define Module_ApplicationDate4         "16-Mar-2001"
d22 3
a24 2
#define Module_FullVersion              "0.26"
#define Module_HelpVersion              "0.26 (16 Mar 2001)"
@


4.8
log
@  Merge of 32-bit branch.
Detail:
  This version represents the merge of the 32-bit conversion of the DualSerial
    module.
Admin:
  This module has received a modest amount of testing, however, it has not
    been exhaustively tested.  Projects taking this version should be careful
    of it as it may contain bugs.

Version 0.25. Tagged as 'DualSerial-0_25'
@
text
@d1 1
a1 1
/* (0.25)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.25
d8 1
a8 1
#define Module_Date_CMHG                09 Jan 2001
d10 2
a11 2
#define Module_MajorVersion             "0.25"
#define Module_Version                  25
d13 1
a13 1
#define Module_Date                     "09 Jan 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "09-Jan-01"
#define Module_ApplicationDate4         "09-Jan-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25"
#define Module_HelpVersion              "0.25 (09 Jan 2001)"
@


4.8.2.1
log
@First pass at HAL-type stuff. Will now do an arbitrary number of serial ports.
Actually authored by DEllis.

Version 0.25, 4.8.2.1. Tagged as 'DualSerial-0_25-4_8_2_1'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.1
#define Module_Date_CMHG                16 Mar 2001
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.1"
#define Module_Date                     "16 Mar 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "16-Mar-01"
#define Module_ApplicationDate4         "16-Mar-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.1)"
#define Module_HelpVersion              "0.25 (16 Mar 2001) (4.8.2.1)"
@


4.8.2.2
log
@Second attempt to check this in.

Version 0.25, 4.8.2.2. Tagged as 'DualSerial-0_25-4_8_2_2'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.2
#define Module_Date_CMHG                20 Mar 2001
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.2"
#define Module_Date                     "20 Mar 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "20-Mar-01"
#define Module_ApplicationDate4         "20-Mar-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.2)"
#define Module_HelpVersion              "0.25 (20 Mar 2001) (4.8.2.2)"
@


4.8.2.3
log
@  Fixed modem ioctls

Detail:
  The function hardware_ctrl_lines which is called from the modem ioctl,
wasn't preserving r3, which points to the ioctl data buffer, hence modem
ioctls weren't functioning correctly.  r3 was being corrupted by a HAL call,
which must be ATPC compliant i.e. r0-r3 are corrupted.

Admin:
  Tested on customer L board by RMFastering the serial module and patching it with
memorya.  The ioctl calls then worked and the dialler worked.



Version 0.25, 4.8.2.3. Tagged as 'DualSerial-0_25-4_8_2_3'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.3
#define Module_Date_CMHG                27 Mar 2001
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.3"
#define Module_Date                     "27 Mar 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "27-Mar-01"
#define Module_ApplicationDate4         "27-Mar-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.3)"
#define Module_HelpVersion              "0.25 (27 Mar 2001) (4.8.2.3)"
@


4.8.2.4
log
@  Baud rate return is even more correct.

Detail:
  IOCtl wasn't dividing the returned value from the HAL by 16.

Admin:
  Assembles, not tested.

Version 0.25, 4.8.2.4. Tagged as 'DualSerial-0_25-4_8_2_4'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.4
#define Module_Date_CMHG                30 Mar 2001
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.4"
#define Module_Date                     "30 Mar 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "30-Mar-01"
#define Module_ApplicationDate4         "30-Mar-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.4)"
#define Module_HelpVersion              "0.25 (30 Mar 2001) (4.8.2.4)"
@


4.8.2.5
log
@Fixed call to HAL_UARTFIFOSize in initialisation code.

Version 0.25, 4.8.2.5. Tagged as 'DualSerial-0_25-4_8_2_5'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.5
#define Module_Date_CMHG                22 May 2001
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.5"
#define Module_Date                     "22 May 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "22-May-01"
#define Module_ApplicationDate4         "22-May-2001"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.5)"
#define Module_HelpVersion              "0.25 (22 May 2001) (4.8.2.5)"
@


4.8.2.6
log
@Change to DTR/RTS handling.

Version 0.25, 4.8.2.6. Tagged as 'DualSerial-0_25-4_8_2_6'
@
text
@a3 1
 * Last processed by srccommit version: 1.68.
d7 2
a8 2
#define Module_MinorVersion_CMHG        4.8.2.6
#define Module_Date_CMHG                29 Mar 2003
d12 2
a13 2
#define Module_MinorVersion             "4.8.2.6"
#define Module_Date                     "29 Mar 2003"
d15 2
a16 1
#define Module_ApplicationDate          "29-Mar-03"
d21 2
a22 3
#define Module_FullVersion              "0.25 (4.8.2.6)"
#define Module_HelpVersion              "0.25 (29 Mar 2003) 4.8.2.6"
#define Module_LibraryVersionInfo       "0:25"
@


4.8.2.7
log
@Change to use objasm (the non HAL one already has): fixes report that
it blew messagetrans away when rmkilled.
Change to have a zero in the command table word: fixes report that
serialinfo and serialtest don't do anything,indeed they don't in this
HAL version!

Version 0.25, 4.8.2.7. Tagged as 'DualSerial-0_25-4_8_2_7'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.7
#define Module_Date_CMHG                31 Mar 2003
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.7"
#define Module_Date                     "31 Mar 2003"
d16 1
a16 1
#define Module_ApplicationDate          "31-Mar-03"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.7)"
#define Module_HelpVersion              "0.25 (31 Mar 2003) 4.8.2.7"
@


4.8.2.8
log
@Changes from Kevin: support for clearing the interrupt when it has been
serviced using HAL_IRQClear.

Version 0.25, 4.8.2.8. Tagged as 'DualSerial-0_25-4_8_2_8'
@
text
@d4 1
a4 1
 * Last processed by srccommit version: 1.2.
d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.8
#define Module_Date_CMHG                02 Jul 2004
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.8"
#define Module_Date                     "02 Jul 2004"
d16 1
a16 1
#define Module_ApplicationDate          "02-Jul-04"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.8)"
#define Module_HelpVersion              "0.25 (02 Jul 2004) 4.8.2.8"
@


4.8.2.9
log
@  Changed makefile so that you can override the default TARGET
Admin:
  Tested in STB Baseline build

Version 0.25, 4.8.2.9. Tagged as 'DualSerial-0_25-4_8_2_9'
@
text
@d4 1
a4 1
 * Last processed by srccommit version: 1.68.
d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.9
#define Module_Date_CMHG                13 Jul 2004
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.9"
#define Module_Date                     "13 Jul 2004"
d16 1
a16 1
#define Module_ApplicationDate          "13-Jul-04"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.9)"
#define Module_HelpVersion              "0.25 (13 Jul 2004) 4.8.2.9"
@


4.8.2.10
log
@  GET file pathnames changed
Detail:
  Uses suffixed file extensions for compatiblity with both objasm and asasm.
Admin:
  Supplied by Peter Naulls, tested at ROOL

Version 0.25, 4.8.2.10. Tagged as 'DualSerial-0_25-4_8_2_10'
@
text
@d4 1
a4 1
 * Last processed by srccommit version: 1.1.
d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.10
#define Module_Date_CMHG                11 Jun 2009
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.10"
#define Module_Date                     "11 Jun 2009"
d16 1
a16 1
#define Module_ApplicationDate          "11-Jun-09"
d19 1
a19 1
#define Module_ComponentPath            "castle/RiscOS/Sources/HWSupport/DualSerial"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.10)"
#define Module_HelpVersion              "0.25 (11 Jun 2009) 4.8.2.10"
@


4.8.2.11
log
@Rewrite module to add support for acting as a client of SerialSupport
Detail:
  In order to act as a client of SerialSupport, DualSerial needs to support the set of device calls that SerialSupport uses to talk to the serial driver.
  This set of device calls operates at a lower level than the IOCtl interface which DualSerial already supports.
  Therefore simply adding the new device call interface ontop of DualSerial (or modifying SerialSupport to add IOCtl support) would have been a risky venture, due to the many complexities hidden in the Serial module sources.
  So to reduce the amount of risk inherent in the change, I've instead taken the Serial module, stripped out 6551 support, rewritten the 710 interface to use HAL calls, and then bolted the IOCtl interface on top.
  This should ensure the SerialSupport/OS_SerialOp interface is identical to that provided by the Serial module, and only the simpler to understand DualSerial/IOCtl interface is the one likely to contain any bugs.
  File changes:
  - Docs/serial.htm - Added a copy of the IOCtl interface docs, from the Ursula branch
  - s/common, s/errors, s/init, s/macros, s/main - New implementation of the module, based around modified Serial sources
  - s/serialhal - The business end of the module, based around s/Serial710 in the Serial sources
  - s/ioctl - New file containing reimplemented IOCtl interface
  - s/devicecall, s/hardware, s/interrupts, s/standalone - Deleted redundant files from old implementation
  - Makefile - Trimmed somewhat redundant comment
  - resources/UK/messages - Added new error messages
Admin:
  Tested in OMAP3 & Tungsten ROMs


Version 0.25, 4.8.2.11. Tagged as 'DualSerial-0_25-4_8_2_11'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.11
#define Module_Date_CMHG                05 Jun 2012
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.11"
#define Module_Date                     "05 Jun 2012"
d16 1
a16 1
#define Module_ApplicationDate          "05-Jun-12"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.11)"
#define Module_HelpVersion              "0.25 (05 Jun 2012) 4.8.2.11"
@


4.8.2.12
log
@Fix HAL_UARTModemControl parameters. Fix UAL warning caused by typo.
Detail:
  s/serialhal - Fixed HAL_UARTModemControl being called with r2 uninitialised, causing modem control lines to be set to unpredictable values
  s/main - Fixed UAL syntax warning caused by typo
Admin:
  Tested on rev A2 BB-xM
  HAL now reports correct modem control line states when control lines are poked via OS_SerialOp


Version 0.25, 4.8.2.12. Tagged as 'DualSerial-0_25-4_8_2_12'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.12
#define Module_Date_CMHG                11 Jun 2012
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.12"
#define Module_Date                     "11 Jun 2012"
d16 1
a16 1
#define Module_ApplicationDate          "11-Jun-12"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.12)"
#define Module_HelpVersion              "0.25 (11 Jun 2012) 4.8.2.12"
@


4.8.2.13
log
@  Added HAL_UARTFeatures bit to report that the chip does hardware RTS/CTS
  handshaking, and use chip RTS/CTS if available in Seria
Detail:

Admin:
  tested on iMx6


Version 0.25, 4.8.2.13. Tagged as 'DualSerial-0_25-4_8_2_13'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.13
#define Module_Date_CMHG                21 Jun 2015
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.13"
#define Module_Date                     "21 Jun 2015"
d16 1
a16 1
#define Module_ApplicationDate          "21-Jun-15"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.13)"
#define Module_HelpVersion              "0.25 (21 Jun 2015) 4.8.2.13"
@


4.8.2.14
log
@Add support for UARTs that have a FIFO threshold for the "transmitter empty" IRQ
Detail:
  s/main, s/serialhal - For threshold-based transmitter empty IRQs, make UpdateDTRRTSTXI710 transmit as many bytes as possible until we either hit the FIFO upper limit or decide to stop. This is required to "prime" the interrupt because it may only update when the FIFO level crosses the threshold (e.g. PL011)
Admin:
  Tested on Raspberry Pi


Version 0.25, 4.8.2.14. Tagged as 'DualSerial-0_25-4_8_2_14'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.14
#define Module_Date_CMHG                09 Oct 2016
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.14"
#define Module_Date                     "09 Oct 2016"
d16 1
a16 1
#define Module_ApplicationDate          "09-Oct-16"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.14)"
#define Module_HelpVersion              "0.25 (09 Oct 2016) 4.8.2.14"
@


4.8.2.15
log
@Fix RX error handling. Fix crash on *RMReinit
Detail:
  s/serialhal - Adjust IRQ handler so that both line status interrupts and RX interrupts are handled via HAL_UARTReceiveByte (with line status return), so that the module can deal with controllers where the IRQ state doesn't correspond to the top byte in the FIFO (e.g. PL011), and so it can avoid the ambiguity around HAL_UARTLineStatus.
  s/main - Fix CloseMessages to take into account the possibility of the workspace pointer being null
Admin:
  Tested on Raspberry Pi 1


Version 0.25, 4.8.2.15. Tagged as 'DualSerial-0_25-4_8_2_15'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.15
#define Module_Date_CMHG                25 Oct 2016
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.15"
#define Module_Date                     "25 Oct 2016"
d16 1
a16 1
#define Module_ApplicationDate          "25-Oct-16"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.15)"
#define Module_HelpVersion              "0.25 (25 Oct 2016) 4.8.2.15"
@


4.8.2.16
log
@Adjust IOCTL handshaking call to ensure report back field is
consistent with call field
Detail:
 (handshake reported back was inconsistent with handshake requested)
Admin:
tested on iMx6


Version 0.25, 4.8.2.16. Tagged as 'DualSerial-0_25-4_8_2_16'
@
text
@d8 2
a9 2
#define Module_MinorVersion_CMHG        4.8.2.16
#define Module_Date_CMHG                24 Apr 2017
d13 2
a14 2
#define Module_MinorVersion             "4.8.2.16"
#define Module_Date                     "24 Apr 2017"
d16 1
a16 1
#define Module_ApplicationDate          "24-Apr-17"
d21 2
a22 2
#define Module_FullVersion              "0.25 (4.8.2.16)"
#define Module_HelpVersion              "0.25 (24 Apr 2017) 4.8.2.16"
@


4.7
log
@ioctl_ctrl_lines was only reading the contol lines when writing to them.
Reading would return a copy of the last known state.
Reading now really reads the contol lines so you can do stuff like polling
them or whatever.

Version 0.24. Tagged as 'DualSerial-0_24'
@
text
@d1 1
a1 1
/* (0.24)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.24
d8 1
a8 1
#define Module_Date_CMHG                05 Jul 2000
d10 2
a11 2
#define Module_MajorVersion             "0.24"
#define Module_Version                  24
d13 1
a13 1
#define Module_Date                     "05 Jul 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "05-Jul-00"
#define Module_ApplicationDate4         "05-Jul-2000"
d18 5
a22 1
#define Module_FullVersion              "0.24"
@


4.7.2.1
log
@  32-bit compatible.
Detail:
  Hopefully, this is fully 32-bit compatible.  If not, the area of concern
    is likely to be interrupts.s.  The DeviceFS entry point dispatcher has
    been modified to preserve all flags except V across the entry point to
    relieve each routine of the burden of doing this.
Admin:
  Not tested, hence imported only onto the branch.

Version 0.24, 4.7.2.1. Tagged as 'DualSerial-0_24-4_7_2_1'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.7.2.1
#define Module_Date_CMHG                13 Jul 2000
d12 2
a13 2
#define Module_MinorVersion             "4.7.2.1"
#define Module_Date                     "13 Jul 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "13-Jul-00"
#define Module_ApplicationDate4         "13-Jul-2000"
d18 1
a18 1
#define Module_FullVersion              "0.24 (4.7.2.1)"
@


4.7.2.2
log
@  Fixed interrupt hole in give_event.
Detail:
  IRQ and FIQ disable bits were being forced clear in give_event.
  Previously they were preserved during the mode change to SVC mode.
  May help solve the lockups on 32-bit builds.
Admin:
  Untested - examined object code and I believe it is now correct.

Version 0.24, 4.7.2.2. Tagged as 'DualSerial-0_24-4_7_2_2'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.7.2.2
#define Module_Date_CMHG                07 Oct 2000
d12 2
a13 2
#define Module_MinorVersion             "4.7.2.2"
#define Module_Date                     "07 Oct 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "07-Oct-00"
#define Module_ApplicationDate4         "07-Oct-2000"
d18 1
a18 2
#define Module_FullVersion              "0.24 (4.7.2.2)"
#define Module_HelpVersion              "0.24 (07 Oct 2000) (4.7.2.2)"
@


4.7.2.3
log
@  Corrected some flag preservation issues in DeviceFS call handler.
Detail:
  More flags are preserved.
Admin:
  Built.

Version 0.24, 4.7.2.3. Tagged as 'DualSerial-0_24-4_7_2_3'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.7.2.3
#define Module_Date_CMHG                10 Oct 2000
d12 2
a13 2
#define Module_MinorVersion             "4.7.2.3"
#define Module_Date                     "10 Oct 2000"
d15 2
a16 2
#define Module_ApplicationDate2         "10-Oct-00"
#define Module_ApplicationDate4         "10-Oct-2000"
d18 2
a19 2
#define Module_FullVersion              "0.24 (4.7.2.3)"
#define Module_HelpVersion              "0.24 (10 Oct 2000) (4.7.2.3)"
@


4.7.2.4
log
@  Changed to use JumpAddress macro when forming return addresses.
Detail:
  26-bit builds of this module would be broken in the absence of this fix.
Admin:
  Believed to have been tested somewhat, but not exhaustively.

Version 0.24, 4.7.2.4. Tagged as 'DualSerial-0_24-4_7_2_4'
@
text
@d7 2
a8 2
#define Module_MinorVersion_CMHG        4.7.2.4
#define Module_Date_CMHG                09 Jan 2001
d12 2
a13 2
#define Module_MinorVersion             "4.7.2.4"
#define Module_Date                     "09 Jan 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "09-Jan-01"
#define Module_ApplicationDate4         "09-Jan-2001"
d18 2
a19 5
#define Module_ComponentName            "DualSerial"
#define Module_ComponentPath            "RiscOS/Sources/HWSupport/DualSerial"

#define Module_FullVersion              "0.24 (4.7.2.4)"
#define Module_HelpVersion              "0.24 (09 Jan 2001) (4.7.2.4)"
@


4.6
log
@Added support for serial ports on device 9, as well as the traditional 10.

Version 0.23. Tagged as 'DualSerial-0_23'
@
text
@d1 1
a1 1
/* (0.23)
d6 3
a8 3
#define Module_MajorVersion_CMHG     	0.23
#define Module_MinorVersion_CMHG	
#define Module_Date_CMHG      		26 Oct 1999
d10 4
a13 4
#define Module_MajorVersion     	"0.23"
#define Module_Version                  23
#define Module_MinorVersion		""
#define Module_Date      		"26 Oct 1999"
d15 4
a18 1
#define Module_FullVersion              "0.23"
@


4.5
log
@Service call table added.

Version 0.22. Tagged as 'DualSerial-0_22'
@
text
@d1 1
a1 1
/* (0.22)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.22
d8 1
a8 1
#define Module_Date_CMHG      		16 Aug 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.22"
#define Module_Version                  22
d13 1
a13 1
#define Module_Date      		"16 Aug 1999"
d15 1
a15 1
#define Module_FullVersion              "0.22"
@


4.4
log
@Updated version number so it doesn't clash with versions on Daytona branch.

Version 0.21. Tagged as 'DualSerial-0_21'
@
text
@d1 1
a1 1
/* (0.21)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.21
d8 1
a8 1
#define Module_Date_CMHG      		29 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.21"
#define Module_Version                  21
d13 1
a13 1
#define Module_Date      		"29 Sep 1998"
d15 1
@


4.3
log
@Daytona branch merged.

Version 0.18. Tagged as 'DualSerial-0_18'
@
text
@d1 1
a1 1
/* (0.18)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.18
d10 2
a11 2
#define Module_MajorVersion     	"0.18"
#define Module_Version                  18
@


4.2
log
@Makefile changed to use LocalRes$Path.
Changed to use srccommit.
Spinner branch merged.

Version 0.17. Tagged as 'DualSerial-0_17'
@
text
@d1 1
a1 1
/* (0.17)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.17
d8 1
a8 1
#define Module_Date_CMHG      		21 Sep 1998
d10 2
a11 2
#define Module_MajorVersion     	"0.17"
#define Module_Version                  17
d13 1
a13 1
#define Module_Date      		"21 Sep 1998"
@


4.1
log
@created by srccommit.
@
text
@d1 1
a1 1
/* (0.16)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.16
d10 2
a11 2
#define Module_MajorVersion     	"0.16"
#define Module_Version                  16
@
