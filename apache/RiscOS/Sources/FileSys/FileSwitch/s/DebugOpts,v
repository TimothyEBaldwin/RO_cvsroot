head	4.4;
access;
symbols
	FileSwitch-2_87:4.4
	FileSwitch-2_86:4.4
	FileSwitch-2_85:4.4
	FileSwitch-2_84:4.4
	FileSwitch-2_83:4.4
	FileSwitch-2_82:4.4
	FileSwitch-2_81:4.4
	FileSwitch-2_80:4.4
	FileSwitch-2_79:4.4
	FileSwitch-2_78:4.4
	FileSwitch-2_77:4.4
	FileSwitch-2_76:4.4
	FileSwitch-2_75:4.4
	FileSwitch-2_74:4.4
	FileSwitch-2_73:4.4
	FileSwitch-2_72:4.4
	FileSwitch-2_71:4.4
	FileSwitch-2_70:4.4
	FileSwitch-2_69:4.4
	FileSwitch-2_68:4.4
	FileSwitch-2_67:4.4
	RO_5_07:4.4
	FileSwitch-2_66:4.4
	FileSwitch-2_65:4.4
	FileSwitch-2_64:4.4
	FileSwitch-2_63:4.4
	FileSwitch-2_62:4.4
	FileSwitch-2_61:4.4
	FileSwitch-2_60:4.4
	FileSwitch-2_59:4.4
	FileSwitch-2_58:4.4
	FileSwitch-2_57:4.4
	FileSwitch-2_56:4.4
	FileSwitch-2_55:4.4
	FileSwitch-2_54:4.4
	FileSwitch-2_53:4.4
	dellis_autobuild_BaseSW:4.4
	FileSwitch-2_52:4.4
	FileSwitch-2_51:4.4
	ROLtd-4_02:4.2.2.2
	FileSwitch-2_45:4.2.2.2
	Ursula_merge:4.2.2.2
	FileSwitch-2_50:4.3
	sbrodie_sedwards_16Mar2000:4.2
	FileSwitch-2_41:4.2
	dcotton_Spin_merge:4.1.7.1
	FileSwitch-2_40:4.2
	dcotton_autobuild_BaseSW:4.4
	FileSwitch-2_39:4.2
	FileSwitch-2_43:4.2.2.1
	Ursula_FileSwitch-2_42:4.2.2.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.2.2.1
	Ursula_RiscPC:4.2.2.1.0.2
	nicke_FileSwitch-2_29:4.1.7.1
	FileSwitch-2_38:4.2
	rthornb_UrsulaBuild-19Aug1998:4.2.2.1
	UrsulaBuild_FinalSoftload:4.2.2.1
	rthornb_UrsulaBuild-12Aug1998:4.2.2.1
	aglover_UrsulaBuild-05Aug1998:4.2.2.1
	rthornb_UrsulaBuild-29Jul1998:4.2.2.1
	rthornb_UrsulaBuild-22Jul1998:4.2.2.1
	rthornb_UrsulaBuild-15Jul1998:4.2.2.1
	rthornb_UrsulaBuild-07Jul1998:4.2.2.1
	rthornb_UrsulaBuild-17Jun1998:4.2.2.1
	rthornb_UrsulaBuild-03Jun1998:4.2.2.1
	rthornb_UrsulaBuild-27May1998:4.2.2.1
	rthornb_UrsulaBuild-21May1998:4.2.2.1
	rthornb_UrsulaBuild_01May1998:4.2.2.1
	afrost_Funai01-33:4.1.7.1
	afrost_NC2_Generic:4.1.7.1
	sproven_241:4.2.2.1
	sproven_2_40:4.2.2.1
	sproven_2_38:4.2.2.1
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.2.0.6
	Daytona_bp:4.2
	Ursula:4.2.0.2
	Ursula_bp:4.2
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.2
	ARTtmp:4.1.7.1.0.2
	RCA:4.2.0.4
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	2000.03.20.15.02.58;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	2000.03.20.14.30.46;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.14.17.11.40;	author nturton;	state Exp;
branches
	4.2.2.1;
next	4.1;

4.1
date	96.11.05.09.32.46;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.2.2.1
date	98.03.27.10.46.13;	author sproven;	state Exp;
branches;
next	4.2.2.2;

4.2.2.2
date	2000.03.20.14.55.37;	author kbracey;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.32.46;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.00.50.15;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.36.33;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.33.09;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.4
log
@  RISC OS Ltd changes merged onto trunk.
Detail:
  (extracted from BuffyLog)
  * Fixed problem with > 67 character filenames in OS_FSControl 26-28.
    buffer now fixed at 256 characters but lengths are now checked.

  * Paths may now be of any length without crashing fileswitch. On some
    occasions errors will be returned for long filenames (usually
    buffer overflow), but it will never crash. This does not stop other
    code (usually upcall handlers) from crashing the machine.
Admin:
  Not tested (TM). Shout at me if it doesn't work.

Version 2.51. Tagged as 'FileSwitch-2_51'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
        SUBT    > Sources.DebugOpts

; Debug flags taken here in version 170

        GBLL    anyfiledebug            ; Debug permitted or not
anyfiledebug SETL False
;anyfiledebug SETL True

 [ AssemblingArthur
                GBLL    anyfiledebug
anyfiledebug    SETL    False	        ; Debug not permitted in the ROM
 ]

; ++++++++++++++++++++++++ Section debug switches +++++++++++++++++++++++++++++

        MACRO
$l      MakeDebug $t
        GBLL    $l
$l      SETL    anyfiledebug :LAND: ($t)
        MEND

debugdontworryresourcefs MakeDebug      False

debugosfile             MakeDebug       False
debugosfileentry        MakeDebug       debugosfile :LOR: False
debugfile5cache         MakeDebug       False
debugosfind             MakeDebug       False
debugosfindentry        MakeDebug       debugosfind :LOR: False
debugstream             MakeDebug       False
debugosargs             MakeDebug       False
debugosargsentry        MakeDebug       debugosargs :LOR: False
debugosargsstamp        MakeDebug       False
debugosbget             MakeDebug       False
debugosbgetentry        MakeDebug       debugosbget :LOR: False
debugosbgetcache        MakeDebug       debugosbget :LAND: False
debugosbput             MakeDebug       False
debugosbputentry        MakeDebug       debugosbput :LOR: False
debugosbputcache        MakeDebug       debugosbput :LAND: False
debugosgbpb             MakeDebug       False
debugosgbpbentry        MakeDebug       debugosgbpb :LOR: False
debugdaftgbpb           MakeDebug       False
debugcontrol            MakeDebug       False
debugmultifs            MakeDebug       False
debugcontrolentry       MakeDebug       debugcontrol :LOR:False
debugrun                MakeDebug       False
debugservices           MakeDebug       False

debugcopy       MakeDebug       False
debugwipe       MakeDebug       False
debugcount      MakeDebug       False
debugutil       MakeDebug       debugcopy :LOR: debugwipe :LOR: debugcount

debugheap       MakeDebug       False
debugheapK      MakeDebug       False
debugpath       MakeDebug       False
debugensure     MakeDebug       False
debugcanonical  MakeDebug       False
debugname       MakeDebug       False
debugsysvars    MakeDebug       False
debugdirstore   MakeDebug       False

debuglowfile    MakeDebug       False
debuglowfunc    MakeDebug       False
debuglowosfind  MakeDebug       False
debuglowxfer    MakeDebug       False
debuglowosargs  MakeDebug       False
debuglowspecial MakeDebug       False
debugdollarstrip MakeDebug      False
debugupcall     MakeDebug       False

paranoid        MakeDebug       False
debuginit       MakeDebug       False
debuginittime   MakeDebug       False
debugservice    MakeDebug       False
debugvector     MakeDebug       False
debugerror      MakeDebug       False
debugreturnparams MakeDebug     False
debugmsgstuff   MakeDebug       False

debugosgbpbirq  MakeDebug       False
debugframe      MakeDebug       False

debugsarm	MakeDebug	False

Proc_Debug      SETL anyfiledebug :LAND: False

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;
; Includes as specified by how we're debugging:
;

        GBLS    GetAroundBleedingAAsmYetAgain
 [ anyfiledebug
GetAroundBleedingAAsmYetAgain SETS " GET Hdr:Debug"
 |
GetAroundBleedingAAsmYetAgain SETS "; No debug required"
 ]
$GetAroundBleedingAAsmYetAgain


; +++++++++++++++++++++++ For Tube work: ++++++++++++++++++++++++++++++++++++++

 [ anyfiledebug
; Set to true for dubugging through the tube
Host_Debug SETL False
 ]

        GBLS    Host_Inclusion
Host_Inclusion SETS "; No Host debug wanted"
 [ anyfiledebug
  [ Host_Debug
Host_Inclusion SETS " GET Hdr:HostFS"
  ]
 ]
$Host_Inclusion

; +++++++++++++++++++++++ For DebugIt module: +++++++++++++++++++++++++++++++++

 [ anyfiledebug

; Set to true to send debug output to the DebugIt module
Debug_Module SETL True

  [ Debug_Module
XDebugIt_WriteC  EQU  &0004ba82 + Auto_Error_SWI_bit
  ]

 ]

        END
@


4.3
log
@  Ursula branch merged.
Detail:
  Full merge of Ursula branch. Path length limited to 256 if a compile-time
  check says SVCSTK is still &01C02000.

  Fix to bug introduced in RISC OS 3.70 - any errors returned by FSEntry_File
  255 were ignored.
  Some changes from RISC OS Ltd still to come.
Admin:
  Untested.

Version 2.50. Tagged as 'FileSwitch-2_50'
@
text
@d56 1
a56 1
debugcontrol            MakeDebug       True
d58 1
a58 1
debugcontrolentry       MakeDebug       debugcontrol :LOR: False
d119 1
a119 1
Host_Debug SETL True
d136 1
a136 1
Debug_Module SETL False
@


4.2
log
@Module merged
@
text
@d56 1
a56 1
debugcontrol            MakeDebug       False
d119 1
a119 1
Host_Debug SETL False
@


4.2.2.1
log
@Modified to add truncation of long file names in *cat, *info, *fileinfo
*ex and *lex.
@
text
@d56 1
a56 1
debugcontrol            MakeDebug       True
d119 1
a119 1
Host_Debug SETL True
@


4.2.2.2
log
@  Merge of RISC OS Ltd version 2.41.
Detail:
  Version from RISC OS 4.02 merged in manually - some sbrodie/sproven fixes
  were not present in ROL version.
Admin:
  Not tested.
  Tagged as FileSwitch-2_45.
@
text
@d56 1
a56 1
debugcontrol            MakeDebug       False
d58 1
a58 1
debugcontrolentry       MakeDebug       debugcontrol :LOR:False
d119 1
a119 1
Host_Debug SETL False
d136 1
a136 1
Debug_Module SETL True
@


4.1
log
@Initial revision
@
text
@d25 1
a25 1
anyfiledebug    SETL    False           ; Debug not permitted in the ROM
d73 1
a73 1
debugsysvars    MakeDebug       True
d90 1
a90 1
debugerror      MakeDebug       True
d97 2
d130 13
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@d25 1
a25 1
anyfiledebug    SETL    False	        ; Debug not permitted in the ROM
d73 1
a73 1
debugsysvars    MakeDebug       False
d90 1
a90 1
debugerror      MakeDebug       False
a96 2
debugsarm	MakeDebug	False

a127 13

; +++++++++++++++++++++++ For DebugIt module: +++++++++++++++++++++++++++++++++

 [ anyfiledebug

; Set to true to send debug output to the DebugIt module
Debug_Module SETL False

  [ Debug_Module
XDebugIt_WriteC  EQU  &0004ba82 + Auto_Error_SWI_bit
  ]

 ]
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
