head	4.7;
access;
symbols
	FileCore-3_75:4.7
	FileCore-3_74:4.7
	FileCore-3_73:4.7
	FileCore-3_72:4.7
	FileCore-3_71:4.7
	FileCore-3_70:4.7
	FileCore-3_69:4.7
	FileCore-3_68:4.7
	FileCore-3_67:4.7
	FileCore-3_66:4.7
	FileCore-3_65:4.7
	FileCore-3_64:4.7
	FileCore-3_63:4.7
	FileCore-3_62:4.7
	FileCore-3_61:4.7
	FileCore-3_60:4.7
	FileCore-3_59:4.7
	FileCore-3_58:4.7
	FileCore-3_57:4.7
	FileCore-3_56:4.7
	FileCore-3_55:4.6
	FileCore-3_54:4.6
	FileCore-3_53:4.6
	FileCore-3_52:4.6
	FileCore-3_51:4.6
	FileCore-3_50:4.6
	FileCore-3_49:4.6
	FileCore-3_48:4.6
	FileCore-3_47:4.6
	FileCore-3_46:4.6
	FileCore-3_45:4.5
	FileCore-3_44:4.5
	FileCore-3_43:4.5
	FileCore-3_42:4.5
	FileCore-3_41:4.5
	FileCore-3_40:4.5
	FileCore-3_39:4.5
	FileCore-3_38:4.5
	FileCore-3_37:4.5
	FileCore-3_36:4.4
	FileCore-3_35:4.4
	FileCore-3_34:4.4
	FileCore-3_33:4.4
	RO_5_07:4.4
	FileCore-3_32:4.4
	FileCore-3_31:4.4
	FileCore-3_30:4.3
	FileCore-3_29:4.3
	FileCore-3_28:4.3
	FileCore-3_25-4_9_2_2:4.3
	FileCore-3_27:4.3
	FileCore-3_26:4.3
	FileCore-3_22-4_6_2_1:4.3
	bavison_FileCore-3_22_dev_bp:4.3
	bavison_FileCore-3_22:4.3.0.4
	FileCore-3_25-4_9_2_1:4.3
	HAL:4.3.0.2
	FileCore-3_25:4.3
	FileCore-3_24:4.3
	FileCore-3_23:4.3
	dellis_autobuild_BaseSW:4.3
	FileCore-3_22:4.3
	Ursula_merge:4.1.4.5
	ROL_merge:4.1.4.4.4.1
	FileCore-3_21:4.3
	ROL_Ursula_merge:4.1.4.4.4.1
	Ursula_RiscPC_merge:4.1.4.4
	sbrodie_sedwards_16Mar2000:4.2
	dcotton_autobuild_BaseSW:4.3
	ROL_FileCore-3_21:4.1.4.4.4.1
	ROL_FileCore-3_20:4.1.4.4.4.1
	ROL:4.1.4.4.0.4
	ROL_bp:4.1.4.4
	Ursula_RiscPC_bp:4.1.4.4
	FileCore-3_18:4.1.4.4
	FileCore-3_01:4.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.4
	Ursula_RiscPC:4.1.4.4.0.2
	FileCore-3_00:4.2
	FileCore-2_99:4.2
	aglover_FileCore-3_17:4.1.4.4
	sproven_FileCore-3_16:4.1.4.4
	rthornb_UrsulaBuild-19Aug1998:4.1.4.4
	UrsulaBuild_FinalSoftload:4.1.4.4
	rthornb_UrsulaBuild-12Aug1998:4.1.4.4
	aglover_UrsulaBuild-05Aug1998:4.1.4.4
	rthornb_UrsulaBuild-29Jul1998:4.1.4.4
	rthornb_UrsulaBuild-22Jul1998:4.1.4.4
	rthornb_UrsulaBuild-15Jul1998:4.1.4.4
	rthornb_UrsulaBuild-07Jul1998:4.1.4.4
	rthornb_UrsulaBuild-17Jun1998:4.1.4.4
	rthornb_UrsulaBuild-03Jun1998:4.1.4.4
	rthornb_UrsulaBuild-27May1998:4.1.4.4
	rthornb_UrsulaBuild-21May1998:4.1.4.4
	sproven_FileCore-3_15:4.1.4.4
	sproven_314:4.1.4.3
	rthornb_UrsulaBuild_01May1998:4.1.4.3
	afrost_Funai01-33:4.1.7.2
	afrost_NC2_Generic:4.1.7.2
	sproven_313:4.1.4.3
	sproven_3_11:4.1.4.2
	sproven_3_10:4.1.4.2
	sproven_Ursula_3_09:4.1.4.2
	sproven_3_07:4.1.4.2
	sproven_3_06:4.1.4.2
	sproven_3_05:4.1.4.1
	sproven_3_04:4.1
	Spinner_RCA116:4.1.7.2
	sproven_3_03:4.1
	sproven_3_02:4.1
	sproven_3_01:4.1
	sproven_2_99:4.1
	sproven_2_98:4.1
	Spinner_B20_2:4.1.7.2
	Spinner_19_3:4.1.7.2
	Spinner_B18:4.1.7.2
	Spinner_B17:4.1.7.2
	Spinner_B15:4.1.7.2
	Spinner_B14:4.1.7.2
	Spinner_B13:4.1.7.2
	Spinner_B12:4.1.7.2
	Spinner_B10:4.1.7.2
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.2
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.2
	Spin_3Apr97:4.1.7.2
	RCA_bp:4.1
	ARTtmp:4.1.7.2.0.2
	RCA:4.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.7
date	2013.02.24.21.08.54;	author rsprowson;	state Exp;
branches;
next	4.6;
commitid	rgJG8ZFRF8o9ruFw;

4.6
date	2011.11.25.08.25.56;	author rsprowson;	state Exp;
branches;
next	4.5;
commitid	IoNdwgrOKH29UGIv;

4.5
date	2011.01.25.23.56.10;	author jlee;	state Exp;
branches;
next	4.4;

4.4
date	2003.04.03.18.33.27;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	2000.05.09.11.36.44;	author sbrodie;	state Exp;
branches;
next	4.2;

4.2
date	98.09.21.12.07.05;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.32.14;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.32.14;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.00.03.14;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	98.01.09.11.44.47;	author sproven;	state Exp;
branches;
next	4.1.4.2;

4.1.4.2
date	98.01.19.12.26.18;	author sproven;	state Exp;
branches;
next	4.1.4.3;

4.1.4.3
date	98.04.02.15.46.43;	author sproven;	state Exp;
branches;
next	4.1.4.4;

4.1.4.4
date	98.05.08.12.32.56;	author sproven;	state Exp;
branches
	4.1.4.4.4.1;
next	4.1.4.5;

4.1.4.5
date	2000.05.09.10.55.14;	author sbrodie;	state Exp;
branches;
next	;

4.1.4.4.4.1
date	99.08.24.12.41.06;	author sbrodie;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.33.46;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.30.39;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.03.11.19.14.01;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.7
log
@Extend upper permissable file size to 4GB-1
Tested for ~200,000 cycles in various configurations with FSBash, with no integrity problems, nor bad maps. However, background transfers (currently only used by ADFS) is still being endurance tested, hence is currently disabled.
Users should note that they can create big files without needing to reformat their drives, however if reverting to an older copy of FileCore the files must not be opened, loaded, or deleted (it's fine to view the directory, just don't expect old FileCore to know how to parse such long fragment runs).
Current versions of DiscKnight (1.49) do not understand long fragment runs.

FSBash
------
* Reviewed and expunged various signed comparisons of file pointers in the existing tests
* Added new tests for big files which attempt to aggrevate all the usual problems passing over and up to important boundaries
* Makefile recreated from fragments
* Some compiler warning squashed

Docs
----
* Some notes added for big file support

Misc
----
Commands: swapped to using Command macro
HelpText: labels renamed to help Command macro
GenSWIs: text table name for SectorDiscOp ammended to match exported header and corresponding secondary module names (ADFS_SectorDiscOp et al). The usefulness of calling the base instantiation of FileCore_SectorDiscOp is minimal, especially from BASIC.
Messages: message for attempting to check an old map disc made less terse
hdr/FileCore: typo

Version 3.56. Tagged as 'FileCore-3_56'
@
text
@FS0:ADFS 640K (L)
FS1:This is a 47 directory entry, old map disc format.|MYou will occasionally need to *Compact a disc formatted like this.
FS2:ADFS 800K (D)
FS3:This is a 77 directory entry, old map disc format.|MYou will occasionally need to *Compact a disc formatted like this.
FS4:ADFS 800K (E)
FS5:This is a 77 directory entry, new map disc format.|MThis format does not need to be *Compacted.
FS6:ADFS 1600K (F)
FS7:This is a 77 directory entry, new map disc format.|MThis format does not need to be *Compacted.
FS8:F+ - 1600K, variable directory entries, RISC OS 4 and above.|M|JF - 1600K, 77 entry directories, new map, RISC OS 3 and above.|M|JE+ - 800K, variable directory entries, RISC OS 4 and above.|M|JE - 800K, 77 entry directories, new map, RISC OS 2 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|J
FS9:ADFS 3200K (G)
FS10:This is a 77 directory entry, new map disc format.|MThis format does not need to be *Compacted.
FS11:ADFS 800K (E+)
FS12:This is a variable directory entry, new map disc format.|MThis format does not need to be *Compacted.
FS13:ADFS 1600K (F+)
FS14:This is a variable directory entry, new map disc format.|MThis format does not need to be *Compacted.
ExtEscape:Escape

#{DictTokens}
BC0:PLEASE WRITE PROTECT SOURCE DISC|M|J
BC1:Insert source disc in drive %0 then press SPACE bar|M|J
BC2:Insert destination disc in drive %0 then press SPACE bar|M|J
CMC0:Can't check old map|M|J
CMC1:Map inconsistent with directory tree|M|J
CMC2:One copy of the map is broken. Overwrite it with the good copy (Y/N) ?
CMC3:Map good|M|J
DC0:| must be moved|M|J
DC1:| has defect at offset %0|M|J
AreYouSure:Are you sure (Y/N) ?
FC0:Bytes free &%0 = %1|M|J
FC1:Bytes used &%0 = %1|M|J
FCK0:Bytes free &%0 = %1 Kbytes|M|J
FCK1:Bytes used &%0 = %1 Kbytes|M|J
MC0:(   start,  length) old map, old directories|M|J
MC1:(   start,  length) old map, new directories|M|J
MC2:(   start,  length) new map, old directories|M|J
MC3:(   start,  length) new map, new directories|M|J
MC4:(   start,  length) new map, big directories|M|J
MC5:(   start,  length) big map, new directories|M|J
MC6:(   start,  length) big map, big directories|M|J
VC0:Verifying ...
VC1:|M|JVerified OK|M|J
VC2:|M|JVerified with retries|M|J
VC3:|M|JVerify failed|M|J
disc:disc
Defect:Defect cannot be mapped out
TooManyDefects:Too many defects
CantDelCsd:Can't delete current directory
CantDelLib:Can't delete library
CompactReq:Compaction required
MapFull:Free space map full
BadDisc:Disc not formatted
TooManyDiscs:Too many discs
BadUp:Illegal use of ^
AmbigDisc:Ambiguous disc name
NotRefDisc:Not same disc
InUse:FileCore in use
BadParms:Parameters not recognised
CantDelUrd:Can't delete user root directory
Buffer:No room for buffer
Workspace:FileCore Workspace broken
MultipleClose:Multiple file closing errors
BrokenDir:Broken directory
BadFsMap:Bad free space map
OneBadFsMap:One copy of map broken (use *CheckMap)
BadDefectList:Bad defect list
BadDrive:Disc drive not known
Size:Sizes don't match
DestDefects:Destination disc has defects
BadRename:Bad RENAME
DirFull:The maximum number of items in a directory has been reached
DirNotEmpty:Directory not empty
Access:The access details set for this item do not allow this
TooManyOpen:Too many open files
Open:This file is already open
Locked:This item is locked to stop changes being made to it
Exists:Already exists
Types:Types don't match
DiscFull:The disc has no more available space
WriteProt:The disc is write protected. Move the write-protect tab and try again.
DataLost:Data lost
BadName:Name not recognised
BadAtt:Bad attribute
DriveEmpty:The disc drive is empty
DiscNotFound:Disc not found
DiscNotPresent:Disc not present
NotFound:Not found
DiscNotFileCore:FileCore does not understand this disc
NotToAnImageYouDont:Operation inapplicable to disc images
Channel:Channel
WildCards:Wild cards
BadCom:Bad command
FileCoreError:FileCore error
Disc:Disc error %0 at :%1/%2
FSLocked:The disc is write protected
FileTooBig:File too big
DirBuffer:%0 Dir Buffer
MapArea:%0 Map (Drive %1)
RetryBoot:|M|JWaiting for boot drive to be ready; press Escape to cancel.|M|J
@


4.6
log
@Teach FileCore_LayoutStructure and Service_IdentifyDisc how to do 1 zone fixed discs.
From the change logs it was last fixed sometime around FileCore 2.50 era, but has been long broken.
The boot block was in the right place, but was overwritten by the root directory, and the wrong size entry was claimed in the map, amongst other errors.
Free'd up R6 in LayoutFreeSpaceMap to avoid having to keep reevaluating the number of zones - makes it a bit more readable. Corrected inaccurate comments. Checked the code paths for new map with and without boot block, with and without long filenames.
Test app 'Make1Zone' generates a small disc image which can be inspected in a hex editor for correctness.
In the identify code, be more strict about looking for a boot block only on fixed discs since they cannot occur on floppies (saves time, wasn't necessarily wrong).
The concept of a boot block at &C00 only works when 2 copies of the map can be fitted underneath that address, for future 2k and 4k sector sizes these do not fit and it is likely that 1 zone fixed discs are forbidden (a drive with 4k sectors would typically be > 512GB and 1 zone would be ~32MB so spilling into a second zone would waste < 0.01%).
Other minor changes:
* Free command now groups the 'K' with 'bytes' to match OS_ConvertFileSize.
* FileCore20 debug didn't assemble.
* FileCore33 beefed up comments.
* GenSWIs debug didn't assemble.
Tested with a special cut of RAMFS manually loading various 1 zone images into its dynamic area and checking they mount, have a sensible *MAP and *FREE result, can be written to, and don't have broken directories.

Version 3.46. Tagged as 'FileCore-3_46'
@
text
@d22 1
a22 1
CMC0:Old Map|M|J
@


4.5
log
@Combat slow USB devices on boot by making OS_FSControl 15 auto-retry when SCSIFS "drive empty" errors are generated
Detail:
  s/FileCore60 - DoOsFunBootup now detects when a SCSIFS "drive empty" error is returned by IdentifyCurrentDisc. Instead of returning with an error, the boot operation will instead be retried, to give slow/unlucky USB devices a chance to finish initialising. Escape can be used to cancel the retry loop, just in case.
  Resources/UK/Messages - Added new 'RetryBoot' message which is shown when the retry loop starts
Admin:
  Tested on rev A2 BB-xM. Machine now boots correctly in situations where the required USB device hasn't initialised by the time OS_FSControl 15 is called.
  New message token (RetryBoot) needs translating.


Version 3.37. Tagged as 'FileCore-3_37'
@
text
@d31 2
a32 2
FCK0:Bytes free &%0 = %1K bytes|M|J
FCK1:Bytes used &%0 = %1K bytes|M|J
@


4.4
log
@* Various 32-bit compatibility fixes.
* Can use HAL for FIQ+timer manipulations.
* FileCore_DiscOp64 added (as user API - currently just converted to the
  standard byte or sector DiscOp call to the underlying module). See
  Doc.32bitAPIs for full details.
* New error-passing scheme to modules added (for full 32-bit addressing).
* FileCore_Features added (indicates new error scheme).
* OS_FSControl 49 (read 32-bit free space) now reports sensible clamped
  values for large discs, rather than values modulo 2^32.
* Accessing the end of files near 2GB in size could cause lock-ups in
  background transfers.
* F(+) and G(+) disc formats adjusted to have a little more skew to
  help the rather poor Iyonix floppy controller.

Version 3.31. Tagged as 'FileCore-3_31'
@
text
@d98 1
@


4.3
log
@  Merge of Ursula branch to the trunk.
Detail:
  This module represents the latest version of FileCore incorporating
    both the Ursula changes and the ROL changes as we have them to date.
  Changes from ROL-FileCore-3_21 are basically the stripping of trailling
    spaces and the change of Version to Module_Version in the conditionals.
    No other changes.
Admin:
  ROL branch tagged ROL_merge
  Ursula branch tagged Ursula_merge.
  Untested, but essentially the same as ROL-FileCore-3_21, so no problems
    expected.

Version 3.21. Tagged as 'FileCore-3_21'
@
text
@d9 2
a10 2
FS8:F - 1600K, 77 entry directories, new map, Archimedes ADFS 2.50 and above.|M|JE - 800K, 77 entry directories, new map, Archimedes ADFS 2.00 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|JE+ - 800K, variable directory entries, RISC OS 4 and above.|M|JF+ - 1600K, variable directory entries, RISC OS 4 and above.|M|J
FS9:ADFS 3.2M
a97 37

#{Token0=Backup}
HFLCBKU:*Backup copies one whole floppy disc, (except free space) to another. 
SFLCBKU:Syntax: *Backup <source drive> <dest. drive> [Q] 
#{Token0=Bye}
HFLCBYE:*Bye closes all files, unsets all directories, and parks hard discs. 
SFLCBYE:Syntax: *Bye 
#{Token0=CheckMap}
HFLCCKM:*CheckMap checks that the map of a new map disc has the correct checksums, and is consistent with the directory tree. If only one copy is good it allows you to rewrite the other. 
SFLCCKM:Syntax: *CheckMap [<disc spec.>] 
#{Token0=Compact}
HFLCCOM:*Compact tries to collect free spaces together by moving files. 
SFLCCOM:Syntax: *Compact [<disc spec.>] 
#{Token0=Defect}
HFLCDEF:*Defect maps out a defect from a new map disc if it lies in an unallocated part of the disc. Otherwise it searches for the object containing the defect. 
SFLCDEF:Syntax: *Defect <disc spec.> <disc add.> 
#{Token0=Dismount}
HFLCDIS:*Dismount closes files, unsets directories and parks the given disc. 
SFLCDIS:Syntax: *Dismount [<disc spec.>] 
#{Token0=Drive}
HFLCDRV:*Drive sets the default drive to use if the directory is unset. 
SFLCDRV:Syntax: *Drive <drive> 
#{Token0=Free}
HFLCFRE:*Free displays the total free space on a disc. 
SFLCFRE:Syntax: *Free [<disc spec.>] 
#{Token0=Map}
HFLCMAP:*Map displays a disc's free space map. 
SFLCMAP:Syntax: *Map [<disc spec.>] 
#{Token0=Mount}
HFLCMNT:*Mount sets the directory to the root directory of the disc, sets the library if unset to $.Library if it exists, and unsets the URD.The default is the default drive. 
SFLCMNT:Syntax: *Mount [<disc spec.>] 
#{Token0=NameDisc}
HFLCNDS:*NameDisc alters a disc's name. 
SFLCNDS:Syntax: *NameDisc <disc spec.> <disc name> 
#{Token0=Verify}
HFLCVER:*Verify checks the whole disc is readable.The default is the current disc. 
SFLCVER:Syntax: *Verify [<disc spec.>] 
@


4.2
log
@Spinner branch merged.
Makefile changed to use LocalRes$Path.
Changed to use srccommit.
StrongARM flag now set to :LNOT:STB

Version 2.99. Tagged as 'FileCore-2_99'
@
text
@d7 1
a7 1
FS6:ADFS 1.6M
d9 1
a9 1
FS8:F - 1600K, 77 entry directories, new map, Archimedes ADFS 2.50 and above.|M|JE - 800K, 77 entry directories, new map, Archimedes ADFS 2.00 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|J
d12 4
d37 3
d96 39
@


4.1
log
@Initial revision
@
text
@a88 37

#{Token0=Backup}
HFLCBKU:*Backup copies one whole floppy disc, (except free space) to another. 
SFLCBKU:Syntax: *Backup <source drive> <dest. drive> [Q] 
#{Token0=Bye}
HFLCBYE:*Bye closes all files, unsets all directories, and parks hard discs. 
SFLCBYE:Syntax: *Bye 
#{Token0=CheckMap}
HFLCCKM:*CheckMap checks that the map of a new map disc has the correct checksums, and is consistent with the directory tree. If only one copy is good it allows you to rewrite the other. 
SFLCCKM:Syntax: *CheckMap [<disc spec.>] 
#{Token0=Compact}
HFLCCOM:*Compact tries to collect free spaces together by moving files. 
SFLCCOM:Syntax: *Compact [<disc spec.>] 
#{Token0=Defect}
HFLCDEF:*Defect maps out a defect from a new map disc if it lies in an unallocated part of the disc. Otherwise it searches for the object containing the defect. 
SFLCDEF:Syntax: *Defect <disc spec.> <disc add.> 
#{Token0=Dismount}
HFLCDIS:*Dismount closes files, unsets directories and parks the given disc. 
SFLCDIS:Syntax: *Dismount [<disc spec.>] 
#{Token0=Drive}
HFLCDRV:*Drive sets the default drive to use if the directory is unset. 
SFLCDRV:Syntax: *Drive <drive> 
#{Token0=Free}
HFLCFRE:*Free displays the total free space on a disc. 
SFLCFRE:Syntax: *Free [<disc spec.>] 
#{Token0=Map}
HFLCMAP:*Map displays a disc's free space map. 
SFLCMAP:Syntax: *Map [<disc spec.>] 
#{Token0=Mount}
HFLCMNT:*Mount sets the directory to the root directory of the disc, sets the library if unset to $.Library if it exists, and unsets the URD.The default is the default drive. 
SFLCMNT:Syntax: *Mount [<disc spec.>] 
#{Token0=NameDisc}
HFLCNDS:*NameDisc alters a disc's name. 
SFLCNDS:Syntax: *NameDisc <disc spec.> <disc name> 
#{Token0=Verify}
HFLCVER:*Verify checks the whole disc is readable.The default is the current disc. 
SFLCVER:Syntax: *Verify [<disc spec.>] 
@


4.1.4.1
log
@Fixed s.BigDirCode (GrowBigDir and ShrinkBigDir) to cope with BitSize<SecSize
and rewrote free space map memory management to place free space maps in
dynamic areas.
@
text
@a88 2
DirBuffer:%0 Dir Buffer
MapArea:%0 Map (Drive %1)
@


4.1.4.2
log
@Now supports formatting of floppies with long file names.
@
text
@d9 1
a9 1
FS8:F - 1600K, 77 entry directories, new map, Archimedes ADFS 2.50 and above.|M|JE - 800K, 77 entry directories, new map, Archimedes ADFS 2.00 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|JE+ - 800K, variable directory entries, Risc PC² and above.|M|JF+ - 1600K, variable directory entries, Risc PC² and above.|M|J
a11 4
FS11:ADFS 800K (E+)
FS12:This is a variable directory entry, new map disc format.|MThis format does not need to be *Compacted.
FS13:ADFS 1600K (F+)
FS14:This is a variable directory entry, new map disc format.|MThis format does not need to be *Compacted.
@


4.1.4.3
log
@Fixed bug in handling of Service_EnumerateFormats which was preventing all
formats being listed by ADFSFiler.
@
text
@d14 1
a14 1
FS13:ADFS 1.6M (F+)
@


4.1.4.4
log
@Altered s.Identify; wasn't correctly returning a string describing the disc
format for F+ discs.

Altered s.Commands; *map now correctly reports big directories and a big
free space map.
@
text
@d7 1
a7 1
FS6:ADFS 1600K (F)
d14 1
a14 1
FS13:ADFS 1600K (F+)
a36 3
MC4:(   start,  length) new map, big directories|M|J
MC5:(   start,  length) big map, new directories|M|J
MC6:(   start,  length) big map, big directories|M|J
@


4.1.4.5
log
@  Merge of ROL branch to the Ursula branch.
Admin:
  Lots of bugfixes - see ROL branch logs for details.
@
text
@d9 1
a9 1
FS8:F - 1600K, 77 entry directories, new map, Archimedes ADFS 2.50 and above.|M|JE - 800K, 77 entry directories, new map, Archimedes ADFS 2.00 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|JE+ - 800K, variable directory entries, RISC OS 4 and above.|M|JF+ - 1600K, variable directory entries, RISC OS 4 and above.|M|J
@


4.1.4.4.4.1
log
@  Import of RISC OS Ltd version of FileCore.
Admin:
  These sources are imported for interest only and must NOT be merged
    without wide prior consultation.

Tagged as ROL_FileCore-3_20
@
text
@d9 1
a9 1
FS8:F - 1600K, 77 entry directories, new map, Archimedes ADFS 2.50 and above.|M|JE - 800K, 77 entry directories, new map, Archimedes ADFS 2.00 and above.|M|JD - 800K, 77 entry directories, old map, Archimedes ADFS.|M|JL - 640K, 47 entry directories, old map, all ADFS.|M|JE+ - 800K, variable directory entries, RISC OS 4 and above.|M|JF+ - 1600K, variable directory entries, RISC OS 4 and above.|M|J
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.7.2
log
@Command line messages removed
@
text
@d89 37
@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
