head	4.5;
access;
symbols
	Manager-3_80:4.5
	Manager-3_79:4.5
	Manager-3_78:4.4
	Manager-3_77:4.4
	Manager-3_76:4.4
	Manager-3_75:4.3
	Manager-3_74:4.3
	Manager-3_73:4.3
	Manager-3_72:4.3
	Manager-3_71:4.3
	Manager-3_70:4.3
	Manager-3_69:4.3
	Manager-3_68:4.3
	Manager-3_67:4.3
	Manager-3_66:4.3
	Manager-3_65:4.2
	Manager-3_64:4.2
	Manager-3_63:4.2
	Manager-3_62:4.2
	Manager-3_61:4.2
	Manager-3_60:4.2
	RO_5_07:4.1
	Manager-3_59:4.1
	Manager-3_58:4.1
	Manager-3_57:4.1
	Manager-3_56:4.1
	Manager-3_55:4.1
	Manager-3_54:4.1
	Manager-3_53:4.1
	Manager-3_52:4.1
	Manager-3_51:4.1
	Manager-3_50:4.1
	Manager-3_49:4.1
	dellis_autobuild_BaseSW:4.1
	Manager-3_48:4.1
	sbrodie_sedwards_16Mar2000:4.1
	dcotton_autobuild_BaseSW:4.1
	Manager-3_47:4.1
	Manager-3_46:4.1
	Manager-3_45:4.1
	Manager-3_44:4.1
	Manager-3_43:4.1
	Manager-3_42:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1
	Manager-3_41-4_2_2_13:4.1
	Ursula_RiscPC:4.1.0.10
	Manager-3_41-4_2_2_12:4.1
	Manager-3_41-4_2_2_11:4.1
	Manager-3_41-4_2_2_10:4.1
	Manager-3_41-4_2_2_9:4.1
	Manager-3_41-4_2_2_8:4.1
	Manager-3_41-4_2_2_7:4.1
	Manager-3_41-4_2_2_6:4.1
	Manager-3_41-4_2_2_5:4.1
	Manager-3_41-4_2_2_4:4.1
	Manager-3_41-4_2_2_3:4.1
	Manager-3_41-4_2_2_2:4.1
	Manager-3_41-4_2_2_1:4.1
	NRaine:4.1.0.8
	Manager-3_41:4.1
	Ursula_merge:4.1
	rthornb_UrsulaBuild-19Aug1998:4.1
	UrsulaBuild_FinalSoftload:4.1
	bavison_FontManager-3_40:4.1
	rthornb_UrsulaBuild-12Aug1998:4.1
	aglover_UrsulaBuild-05Aug1998:4.1
	rthornb_UrsulaBuild-29Jul1998:4.1
	rthornb_UrsulaBuild-22Jul1998:4.1
	rthornb_UrsulaBuild-15Jul1998:4.1
	rthornb_UrsulaBuild-07Jul1998:4.1
	rthornb_UrsulaBuild-17Jun1998:4.1
	rthornb_UrsulaBuild-03Jun1998:4.1
	rthornb_UrsulaBuild-27May1998:4.1
	rthornb_UrsulaBuild-21May1998:4.1
	rthornb_UrsulaBuild_01May1998:4.1
	afrost_NC2_Generic:4.1.7.1
	Manager-3_40-1_1_2_2:4.1.7.1.4.1
	smiddle_2Mar1998_Fonts16:4.1.7.1.0.4
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.5
date	2018.02.04.17.59.10;	author jlee;	state Exp;
branches;
next	4.4;
commitid	j2vB3tzLOoKUkzpA;

4.4
date	2015.01.16.00.52.39;	author jlee;	state Exp;
branches;
next	4.3;
commitid	Vw2b7UpulNJRub6y;

4.3
date	2010.01.02.19.35.14;	author rsprowson;	state Exp;
branches;
next	4.2;

4.2
date	2005.08.03.12.23.34;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.43.11;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.43.11;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.02.15.44;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.51.21;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.14.23;	author nturton;	state Exp;
branches
	4.1.7.1.4.1;
next	;

4.1.7.1.4.1
date	98.03.03.13.22.41;	author smiddle;	state Exp;
branches;
next	;


desc
@@


4.5
log
@Fix bad error pointer returned by Font_LoseFont
Detail:
  s/Fonts01 - Change a TEQ to a CMP to ensure the V flag is cleared; if a font handle like &80000000 was supplied then the opening CMP would set the V flag, accidentally causing the code to return a garbage error pointer.
  s/Errors - Apparently AddError requires '$' to be doubly-escaped to '$$$$' to stop objasm from throwing a warning.
Admin:
  Tested on wandboard
  Fixes AODT on SYS "Font_LoseFont",&80000000


Version 3.79. Tagged as 'Manager-3_79'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; > Sources.Errors

; Errors moved from Hdr.NewErrors to here, with message tokens added

 AddError FontEscape,            "ErrEscape:Escape", ErrorNumber_Escape
 AddError FontCantKill,          "ErrCantKill:Font Manager is in use", ErrorNumber_CantKill
 AddError FontBuffOverflow,      "ErrBuffOverflow:Buffer overflow", ErrorNumber_BuffOverflow
 AddError FontNoSuchSWI,         "ErrNoSuchSWI:SWI not known", ErrorNumber_NoSuchSWI
 AddError FontBadFileName,       "ErrBadFileName:Bad file name", ErrorNumber_BadFileName
 AddError FontBadParameters,     "ErrBadParameters:Bad parameters", ErrorNumber_BadParameters

 ^ &200
 AddError FontNoRoom,            "ErrNoRoom:Not enough memory for Font cache"
 AddError FontCacheFull,         "ErrCacheFull:Font cache full"
 AddError FontNoCache,           "ErrNoCache:No font cache present"
 AddError FontTooLong,           "ErrTooLong:String too long"
 AddError Font64K,               "Err64K:Font definition too large"
 AddError FontPalTooBig,         "ErrPalTooBig:Undefined font colour"
 AddError FontBadTranBits,       "ErrBadTranBits:Invalid data passed to Font_SetTransfer"
 AddError FontNotEnoughBits,     "ErrNotEnoughBits:Invalid font colour"
 AddError FontNoFont,            "ErrNoFont:Undefined font handle"
 AddError FontNoPixels,          "ErrNoPixels:No pixel data for this font"
 AddError FontBadFontNumber,     "ErrBadFontNumber:Font handle out of range"
 AddError FontNotFound,          "ErrNotFound:%0 font not found"
 AddError FontBadFontFile,       "ErrBadFontFile:Illegal font file"
 AddError FontNoHandles,         "ErrNoHandles:No more font handles"
 AddError FontBadCounter,        "ErrBadCounter:Fonts must be read sequentially"
 AddError FontBadCtrlChar,       "ErrBadCtrlChar:Illegal control character in font string"
 AddError FontsInUse,            "ErrsInUse:Font manager in use"
 AddError FontBadSegment,        "ErrBadSegment:Illegal line segment in outline font"
 AddError FontBadPrefix,         "ErrBadPrefix:%1 (while scanning Font$$$$Path)"
 AddError FontReserved,          "ErrReserved:Reserved fields must be zero"
 AddError FontBadCharCode,       "ErrBadCharCode:Character code out of range"
 AddError FontNoBitmaps,         "ErrNoBitmaps:ROM font directory cannot contain bitmaps"
 AddError FontNoBitmaps2,        "ErrNoBitmaps2:Can't convert bitmap characters into outlines"
 AddError FontBadFontCacheFile,  "ErrBadFontCacheFile:Invalid font cache file"
 AddError FontFieldNotFound,     "ErrFieldNotFound:%0 field not present in font string"
 AddError FontBadMatrix,         "ErrBadMatrix:Invalid matrix passed to Font Manager"
 AddError FontOverflow,          "ErrOverflow:Number too big"
 AddError FontDivby0,            "ErrDivby0:Division by zero"
 AddError FontBadReadMetrics,    "ErrBadReadMetrics:Font_ReadFontMetrics not allowed on a transformed font"
 AddError FontBadRGB,            "ErrBadRGB:Undefined RGB font colours"
 AddError FontEncodingNotFound,  "ErrEncodingNotFound:%0 encoding not found"
 AddError FontMustHaveSlash,     "ErrMustHaveSlash:Identifier '%1' should be preceded by '/' in encoding '%0'"
 AddError FontBadEncodingSize,   "ErrBadEncodingSize:Max total size of input and output encoding files is 16k"
 AddError FontTooManyIDs,        "ErrTooManyIDs:Too many identifiers in %0 encoding"
 AddError FontTooFewIDs,         "ErrTooFewIDs:Not enough identifiers in %0 encoding"
 AddError FontNoBaseEncoding,    "ErrNoBaseEncoding:Base encoding %0 not found"
 AddError FontIdentifierNotFound,"ErrIdentifierNotFound:Identifier %1 not found in encoding %0"
 AddError FontTooManyChunks,     "ErrTooManyChunks:Too many characters in %0"
 AddError FontBadFontFile2,      "ErrBadFontFile2:Illegal font file in %0"
 AddError FontBadSupremacyBlend, "ErrSupremacyBlend:Supremacy blending not supported in this mode"
 AddError FontNoPathDot,         "ErrNoPathDot:Font prefix is not a path"

 ASSERT @@ <= &280

 ^ ErrorNumber_FontNotFound
 AddError FontDataNotFound,  "ErrDataNotFound:Font data not found"
 ^ ErrorNumber_FontNotFound
 AddError FontDataNotFound2, "ErrDataNotFound2:No suitable font data for %0"

        END

@


4.4
log
@Escape some dollars
Detail:
  s/Errors, s/Fonts01, s/ListFonts - Escape some dollars contained in strings to avoid warnings from objasm
Admin:
  Resulting binary unchanged


Version 3.76. Retagged as 'Manager-3_76'
@
text
@d45 1
a45 1
 AddError FontBadPrefix,         "ErrBadPrefix:%1 (while scanning Font$$Path)"
@


4.3
log
@Validate paths supplied to *FontInstall/Remove
Detail:
Paths supplied to *FontInstall/*FontRemove didn't actually have to be paths, and the directory scanner would attempt to recurse into the object supplied leading to lots of bogus error messages when using anything font related that attempted to recache the font list (eg. opening a font menu).
Added check that for every element supplied must end in a dot.
Trimmed unnecessary 'Version' file, using VersionASM directly.
Updated messages file with new error message.

Version 3.66. Tagged as 'Manager-3_66'
@
text
@d45 1
a45 1
 AddError FontBadPrefix,         "ErrBadPrefix:%1 (while scanning Font$Path)"
@


4.2
log
@Added support for supremacy blending in 32bpp modes only. If bit 14 is set
in Font_Paint as well as bit 11 (for blending), then the blending takes into
account the supremacy bits of the screen data when compositing. If not in a
32-bpp mode, then an error is returned.

In addition, when bits 11 and 14 are set, the supremacy bits in the chosen
foreground colour (set via ColourTrans_SetFontColours or similar) are used,
so you can plot semi-transparent text. This is a limited facility - it's
not available below 32bpp, and it doesn't work for text above FontMax2.

Also, fixed a bug which meant that successive paints with different blending
flags had to be separated by colour-setting calls to get the new flags to
be obeyed.

Note that, as in previous versions, the blending still doesn't correct for
gamma.

Version 3.60. Tagged as 'Manager-3_60'
@
text
@d67 1
@


4.1
log
@Initial revision
@
text
@d66 1
d69 1
a69 1
 
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.7.1.4.1
log
@Checked in RBrowning sources to own branch for 16bit development. This module has been checked
to build the same as it did in his hard disc.

Version 3.40, 1.1.2.2. Tagged as 'Manager-3_40-1_1_2_2'
@
text
@a65 1
 AddError FontBitstreamNotFound, "ErrBitstreamNotFound:No viable Bitstream path (or empty file) for %0"
d68 1
a68 1

@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
