head	4.4;
access;
symbols
	ScrModes-0_71:4.4
	ScrModes-0_70:4.4
	ScrModes-0_69:4.4
	ScrModes-0_68:4.4
	ScrModes-0_67:4.4
	ScrModes-0_66:4.4
	ScrModes-0_65:4.4
	ScrModes-0_64:4.4
	ScrModes-0_62:4.4
	ScrModes-0_61:4.4
	ScrModes-0_60:4.3
	ScrModes-0_59:4.3
	ScrModes-0_58:4.3
	ScrModes-0_57:4.2
	ScrModes-0_56-smalltables:4.2
	ScrModes-0_56:4.2
	ScrModes-0_55-mallocfree:4.2
	ScrModes-0_55-cvs3fix:4.2
	ScrModes-0_55:4.2
	ScrModes-0_53-split:4.2
	ScrModes-0_54:4.2
	ScrModes-0_53-tables:4.2
	ScrModes-0_53:4.2
	ScrModes-0_52:4.2
	ScrModes-0_51:4.2
	ScrModes-0_50:4.2
	ScrModes-0_49:4.2
	ScrModes-0_48:4.1
	ScrModes-0_47:4.1
	ScrModes-0_46:4.1
	ScrModes-0_45:4.1
	ScrModes-0_44:4.1
	ScrModes-0_43:4.1
	ScrModes-0_42:4.1
	ScrModes-0_41:4.1
	ScrModes-0_40:4.1
	ScrModes-0_39:4.1
	ScrModes-0_38:4.1
	ScrModes-0_37:4.1
	ScrModes-0_36:4.1
	ScrModes-0_35:4.1
	ScrModes-0_34:4.1
	ScrModes-0_33:4.1
	ScrModes-0_32:4.1
	ScrModes-0_31:4.1
	RO_5_07:4.1
	ScrModes-0_30:4.1
	ScrModes-0_29:4.1
	ScrModes-0_28:4.1
	dellis_autobuild_BaseSW:4.1
	ScrModes-0_27:4.1
	ScrModes-0_26:4.1
	sbrodie_sedwards_16Mar2000:4.1
	ScrModes-0_25:4.1
	ScrModes-0_24:4.1
	dcotton_autobuild_BaseSW:4.1
	ScrModes-0_23:4.1
	ScrModes-0_22:4.1
	ScrModes-0_21:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1
	Ursula_RiscPC:4.1.0.8
	ScrModes-0_20:4.1
	rthornb_UrsulaBuild-19Aug1998:4.1
	UrsulaBuild_FinalSoftload:4.1
	rthornb_UrsulaBuild-12Aug1998:4.1
	aglover_UrsulaBuild-05Aug1998:4.1
	rthornb_UrsulaBuild-29Jul1998:4.1
	rthornb_UrsulaBuild-22Jul1998:4.1
	rthornb_UrsulaBuild-15Jul1998:4.1
	rthornb_UrsulaBuild-07Jul1998:4.1
	rthornb_UrsulaBuild-17Jun1998:4.1
	rthornb_UrsulaBuild-03Jun1998:4.1
	rthornb_UrsulaBuild-27May1998:4.1
	rthornb_UrsulaBuild-21May1998:4.1
	rthornb_UrsulaBuild_01May1998:4.1
	afrost_NC2_Generic:4.1.7.1
	afrost_Funai01-33:4.1.7.1
	Spinner_RCA116:4.1.7.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	RCA_bp:4.1
	ARTtmp:4.1.7.1.0.2
	RCA:4.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	2017.03.05.15.21.13;	author rool;	state Exp;
branches;
next	4.3;
commitid	dv9rieZmjERhgnIz;

4.3
date	2016.11.26.13.11.06;	author jlee;	state Exp;
branches;
next	4.2;
commitid	urAfrqa1D6g0JDvz;

4.2
date	2015.11.29.20.35.00;	author jlee;	state Exp;
branches;
next	4.1;
commitid	X917PzTaosbDQ1Ly;

4.1
date	96.11.05.09.46.32;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.46.32;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.06.02.51.12;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.13.02.16;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.21.24.18;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.4
log
@Offer export of raw EDID blob and complementary MDF export
Detail:
  Export the EDID raw data as a file in ResourceFS. This allows the Screen Setup plugin to scan that directory to pick up the currently connected monitor, and similarly select it from !Boot.Choices.PreDesk. The EDID data can also be drag & drop copied or exported for offline analysis.
  Add SaveModeFile command. This differs in that it works on the current set, to be symmetrical with LoadModeFile which loads the current set. Also fixes issues of losing the original mode names given; NULL pointer dereference when the EDID block contains no modes (eg. VIDCDriver); and no long writes out malformed MDFs which can't be loaded into !MakeModes (this seems to be because the CreateModeFile command was based on a stale copy of EDIDDecode which fixed the same bug circa 2012).
  Query the current GraphicsV driver for the deepest colour depth for the preferred mode, rather than assuming 32bpp is always possible (eg. because of bandwidth or graphics controller constraints).
  If the configured MonitorType is EDID but no EDID could be read, or it was corrupt, substitute a safe VESA monitor to allow the kernel to select something close to MODE 28.
  Add ScreenModes_Features SWI so the Screen Setup plugin knows whether it's safe to offer EDID in its dialogues.
  Retire the ReadEDID command (no longer needed since LoadModeFile can load the exported EDID blob, or one from disc) and CreateModeFile commands (see SaveModeFile).
  Internationalise the default monitor title ("Unidentified") used when EDID doesn't contain one.
Admin:
  New file - doc/BootStates documents all possible situations, and their recovery, for both the MDF and (non-hotplug) EDID schemes.
  New file - doc/EDIDGoals states the aims of the EDID support from both a user and support perspective.

  Submission for the EDID bounty.

Version 0.61. Tagged as 'ScrModes-0_61'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
        SUBT    Exported Screen Modes constants

OldOpt  SETA    {OPT}
        OPT     OptNoList+OptNoP1List

; ***********************************
; ***    C h a n g e   L i s t    ***
; ***********************************

; Date       Name  Description
; ----       ----  -----------
; 10-Dec-93  SMC   File created
; 17-May-94  AMcC  Changed to using the preferred SWI base and name symbols

SWIClass        SETS    ScreenModesSWI_Name

        ^       ScreenModesSWI_Base

        AddSWI  ReadInfo
        AddSWI  EnumerateAudioFormats
        AddSWI  Features

; ScreenModes_ReadInfo reason codes
                                 ^ 0
ScreenModes_ReadInfo_MonitorName # 1
ScreenModes_ReadInfo_DPMS        # 1
ScreenModes_ReadInfo_SpeakerMask # 1

; ScreenModes_Features feature flags
ScreenModes_Features_EDID        * 1:SHL:0

        OPT     OldOpt
        END
@


4.3
log
@Resolve allocation clash with RISCOS Ltd
Detail:
  Some cross-checking against the RISC OS Select documentation revealed that ScreenModes_ReadInfo 1 had already been claimed by ROL for the purpose of reading the monitor's supported DMPS state, causing a clash with our recently-introduced usage of reading the monitor speaker mask.
  Implement ScreenModes_ReadInfo 1 as per ROL's spec, and change the "read speaker mask" call to ScreenModes_ReadInfo 2.
  File changes:
  - c/ScrModes, hdr/ScrModes - as above
Admin:
  Tested on Raspberry Pi


Version 0.58. Tagged as 'ScrModes-0_58'
@
text
@d35 1
d43 3
@


4.2
log
@Add support for parsing and reporting the contents of CEA 861-D audio-related EDID blocks
Detail:
  Makefile - Export a C version of hdr/ScrModes
  Resources/Germany/Messages, Resources/UK/Messages, h/errors - Add new error message
  cmhg/ScrModesv, hdr/ScrModes - Declare existence of ScreenModes_EnumerateAudioFormats SWI. Declare ScreenModes_ReadInfo reason codes.
  h/modex - Extend MonitorDefinition struct to allow it to store the speaker mask & audio format information that's extracted from the EDID
  c/ScrModes - Extend support for processing of CEA extension blocks. All block revisions > 0 should now be accepted, and rudimentary parsing of CEA data block collections is implemented (currently, only extracts information from audio related blocks). Add SWI ScreenModes_EnumerateAudioFormats to allow details of the supported formats to be returned in either "raw" or "friendly" forms. Add ScreenModes_ReadInfo reason code 1 to allow reading of the speaker mask (+ validity bits). Also fix *LoadModeFile to allow EDID blocks to be loaded without first having to issue *ReadEDID first (EDIDEnabled flag issue).
Admin:
  Tested on iMX6 with assorted EDID blocks
  German messages file in need of translation


Version 0.49. Tagged as 'ScrModes-0_49'
@
text
@d39 1
@


4.1
log
@Initial revision
@
text
@d34 6
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
