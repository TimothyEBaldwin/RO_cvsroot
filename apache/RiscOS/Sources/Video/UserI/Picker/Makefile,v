head	4.12;
access;
symbols
	Picker-0_56-1:4.12
	Picker-0_56:4.11
	Picker-0_55:4.10
	Picker-0_54:4.10
	Picker-0_53:4.10
	Picker-0_52:4.9
	Picker-0_51:4.8
	Picker-0_50:4.7
	Picker-0_49:4.5
	RO_5_07:4.4
	Picker-0_48:4.4
	dellis_autobuild_BaseSW:4.4
	Picker-0_47:4.4
	Picker-0_46:4.3
	sbrodie_sedwards_16Mar2000:4.2
	Picker-0_45:4.2
	Picker-0_44:4.2
	dcotton_autobuild_BaseSW:4.4
	Picker-0_43:4.1;
locks; strict;
comment	@# @;


4.12
date	2018.04.11.23.35.14;	author bavison;	state Exp;
branches;
next	4.11;
commitid	TEGLFchQCDmH45yA;

4.11
date	2014.06.29.06.45.33;	author rsprowson;	state Exp;
branches;
next	4.10;
commitid	4axvXNXSInppUnGx;

4.10
date	2012.01.14.23.04.32;	author srevill;	state Exp;
branches;
next	4.9;
commitid	iZcu0AKTJivZ9cPv;

4.9
date	2012.01.10.22.58.24;	author rsprowson;	state Exp;
branches;
next	4.8;
commitid	u3GoE0WqyRnRfGOv;

4.8
date	2012.01.09.23.28.32;	author rsprowson;	state Exp;
branches;
next	4.7;
commitid	S7cx3sKEp2CbsyOv;

4.7
date	2009.06.26.02.30.22;	author bavison;	state Exp;
branches;
next	4.6;

4.6
date	2009.06.07.17.16.11;	author bavison;	state Exp;
branches;
next	4.5;

4.5
date	2004.11.09.18.41.12;	author bavison;	state Exp;
branches;
next	4.4;

4.4
date	2000.05.08.08.57.33;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	2000.04.06.15.13.27;	author sbrodie;	state Exp;
branches;
next	4.2;

4.2
date	99.11.26.11.36.44;	author sbrodie;	state Exp;
branches;
next	4.1;

4.1
date	99.11.24.00.03.38;	author sbrodie;	state Exp;
branches;
next	;


desc
@@


4.12
log
@  Updated to build using shared makefiles
Detail:
  * Makefile rewritten
  * Language-dependent resource files moved into Resources.UK
  * Four header files (in "icons" subdirectory) that are autogenerated by
    running WinEd are now committed to CVS, to aid with cross-compilation.
    These icon number definitions haven't changed in over 21 years, and
    if they were to do so, it would be a one-off job to run WinEd on a
    RISC OS machine to regenerate them: the original rules have been retained
    for this purpose. Since the only other component that uses WinEd like
    this is ResEd, it seems unlikely that it will ever be worth the effort to
    create a cross-compiling version of WinEd!


Version 0.56. Not tagged
@
text
@# Copyright 1999 Pace Micro Technology plc
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for ColourPicker
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name         Description
# ----       ----         -----------
# 23-Nov-99  SNB          Created

COMPONENT     ?= ColourPicker
TARGET        ?= Picker
HDRS          =
ASMHDRS       = ColourPick
INSTRES_FILES = Sprites Templates CMYK.Messages:CMYK CMYK.Templates:CMYK HSV.Messages:HSV HSV.Templates:HSV RGB.Messages:RGB RGB.Templates:RGB
VPATH         = Support011
CINCLUDES     = -ISupport011,icons ${INCLUDE_OSLIB}
RES_AREA      = resourcefs_files
RES_OBJ       = msgs
CMHGFILE      = header
OBJS          = cmyk dialogue helpreply hsv main model rgb tables callback icon lookup realloc relocate resource riscos steppable task window veneer
LIBS          = ${OSLIB} ${ASMUTILS}
ROMCDEFINES   = -DROM
SOURCES_TO_SYMLINK = $(wildcard icons/h/*) $(wildcard Support011/c/*) $(wildcard Support011/h/*) 

ifeq (,${MAKE_VERSION})

# RISC OS / amu case

WINEDIT = /Apps:!WinEdit

icons/dialogue_i.h: LocalRes:Templates
	${MKDIR} icons.h
	${WINEDIT} "-h??=define dialogue_%w_%n ((wimp_i) %i)" LocalRes:Templates >$@@
	${PERL} Resources.perlscript $@@

icons/cmyk_i.h: LocalRes:CMYK.Templates
	${MKDIR} icons.h
	${WINEDIT} "-h??=define cmyk_%w_%n ((wimp_i) %i)" LocalRes:CMYK.Templates >$@@
	${PERL} Resources.perlscript $@@

icons/rgb_i.h: LocalRes:RGB.Templates
	${MKDIR} icons.h
	${WINEDIT} "-h??=define rgb_%w_%n ((wimp_i) %i)" LocalRes:RGB.Templates >$@@
	${PERL} Resources.perlscript $@@

icons/hsv_i.h: LocalRes:HSV.Templates
	${MKDIR} icons.h
	${WINEDIT} "-h??=define hsv_%w_%n ((wimp_i) %i)" LocalRes:HSV.Templates >$@@
	${PERL} Resources.perlscript $@@

endif

include CModule

# Static dependencies:
cmyk.o:     icons/dialogue_i.h icons/cmyk_i.h
dialogue.o: icons/dialogue_i.h
hsv.o:      icons/dialogue_i.h icons/hsv_i.h
main.o:     icons/dialogue_i.h icons/cmyk_i.h icons/hsv_i.h icons/rgb_i.h
model.o:    icons/dialogue_i.h
rgb.o:      icons/dialogue_i.h icons/rgb_i.h

# Dynamic dependencies:
@


4.11
log
@Make use of StdTools
Retagged as Picker-0_56.
@
text
@d24 18
a41 11
COMPONENT = Picker
RAM_MODULE = rm.${COMPONENT}
ROM_MODULE = aof.${COMPONENT}
DBG_MODULE = rm.${COMPONENT}D

FULL_COMPONENT = ColourPicker

#
# Paths
#
EXP_HDR = <export$dir>
a42 1
VPATH=@@ Support011
d45 19
a63 156
#
# Export Paths for Messages module
#
RESDIR = <resource$dir>.Resources2.${COMPONENT}
RESFSDIR   = Resources.${COMPONENT}

include StdTools

#
# Include files
#
INCLUDES=       -IC:AsmUtils,Support011,icons,OS:,C:

#
# Libraries
#
CLIB            = Clib:o.Stubs
ROMCSTUBS       = RISCOSLIB:o.romcstubs
ABSSYM          = RISC_OSLib:o.AbsSym
OSLIB           = OSLib:o.OSLib
ASMUTILS        = C:AsmUtils.o.AsmUtilsZM

DEPEND          = -depend !Depend
DBGFLAGS        = -DTRACE
DEFINES         = 
CENV            = ${DEPEND} ${THROWBACK}

ASFLAGS         = ${DEPEND} ${THROWBACK}
CFLAGS          = -W -c -ffh -zM -zps1 -Wcp ${INCLUDES} ${DEFINES} ${CENV}
CMHGFLAGS       = ${OPTIONS} ${DEPEND} ${THROWBACK} -p

OTHER_OBJS      = o.veneer o.header

ROM_OBJS        = or.cmyk  or.dialogue  or.helpreply  or.hsv              \
                  or.main  or.model     or.rgb        or.tables           \
                           or.callback  or.lookup     or.realloc          \
                  or.task  or.riscos    or.window     or.resource         \
                  or.icon  or.steppable or.relocate   ${OTHER_OBJS}
RAM_OBJS        = o.cmyk   o.dialogue   o.helpreply   o.hsv               \
                  o.main   o.model      o.rgb         o.tables    o.msgs  \
                           o.callback   o.lookup      o.realloc           \
                  o.task   o.riscos     o.window      o.resource          \
                  o.icon   o.steppable  o.relocate    ${OTHER_OBJS}
DBG_OBJS        = od.cmyk  od.dialogue  od.helpreply  od.hsv              \
                  od.main  od.model     od.rgb        od.tables   o.msgs  \
                  od.m     od.callback  od.lookup     od.realloc          \
                  od.task  od.riscos    od.window     od.resource         \
                  od.icon  od.steppable od.relocate   ${OTHER_OBJS}

RESOURCEFILES   = \
  Resources.CMYK.Messages\
  Resources.CMYK.Templates\
  Resources.HSV.Messages\
  Resources.HSV.Templates\
  Resources.RGB.Messages\
  Resources.RGB.Templates\
  Resources.MergedMsgs\
  Resources.Sprites\
  Resources.Templates

#
# Rule patterns
#
.SUFFIXES:      .o .od .or .s .c .cmhg .h
.c.o:;          ${CC} ${CFLAGS} -o $@@ $<
.c.or:;         ${CC} ${CFLAGS} -DROM -o $@@ $<
.c.od:;         ${CC} ${CFLAGS} ${DBGFLAGS} -o $@@ $<
.cmhg.o:;       ${CMHG} ${CMHGFLAGS} -o $@@ $< -d h.header
.cmhg.h:;       ${CMHG} ${CMHGFLAGS} -d $@@ $< -o null:
.cmhg.od:;      ${CMHG} ${CMHGFLAGS} -o $@@ $< -d h.header ${DBGFLAGS}
.s.o:;          ${AS} ${ASFLAGS} -o $@@ $<

header.h: header.o
        ${TOUCH} $@@
        
o.header od.header: VersionNum

ICONS=icons.h.dialogue_i icons.h.cmyk_i icons.h.rgb_i icons.h.hsv_i

icons.h.dialogue_i: Resources.Templates
        ${WINEDIT} "-h??=define dialogue_%w_%n ((wimp_i) %i)" Resources.Templates >$@@
        ${PERL} Resources.perlscript $@@

icons.h.cmyk_i: Resources.CMYK.Templates
        ${WINEDIT} "-h??=define cmyk_%w_%n ((wimp_i) %i)" Resources.CMYK.Templates >$@@
        ${PERL} Resources.perlscript $@@

icons.h.rgb_i: Resources.RGB.Templates
        ${WINEDIT} "-h??=define rgb_%w_%n ((wimp_i) %i)" Resources.RGB.Templates >$@@
        ${PERL} Resources.perlscript $@@

icons.h.hsv_i: Resources.HSV.Templates
        ${WINEDIT} "-h??=define hsv_%w_%n ((wimp_i) %i)" Resources.HSV.Templates >$@@
        ${PERL} Resources.perlscript $@@

#
# Main rules:
#
all: ${RAM_MODULE} o.dirs
        @@${ECHO} ${FULL_COMPONENT}: Module built (RAM)

install: ${RAM_MODULE} o.dirs
        ${CP} ${RAM_MODULE} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@${ECHO} ${FULL_COMPONENT}: Module installed (RAM)

ramtrace: ${DBG_MODULE} o.dirs
        @@${ECHO} ${FULL_COMPONENT}: Module built (TRACE)

rom: ${ROM_MODULE} o.dirs
        @@${ECHO} ${FULL_COMPONENT}: Module built (ROM)

install_rom: ${ROM_MODULE}
        ${CP} ${ROM_MODULE} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@${ECHO} ${FULL_COMPONENT}: Module installed (ROM)

resources: ${RESOURCEFILES}
        ${MKDIR} ${RESDIR}
        ${MKDIR} ${RESDIR}.CMYK
        ${MKDIR} ${RESDIR}.HSV
        ${MKDIR} ${RESDIR}.RGB
        ${CP} Resources.CMYK.Messages   ${RESDIR}.CMYK.Messages  ${CPFLAGS}
        ${CP} Resources.CMYK.Templates  ${RESDIR}.CMYK.Templates ${CPFLAGS}
        ${CP} Resources.HSV.Templates   ${RESDIR}.HSV.Templates  ${CPFLAGS}
        ${CP} Resources.HSV.Messages    ${RESDIR}.HSV.Messages   ${CPFLAGS}
        ${CP} Resources.RGB.Templates   ${RESDIR}.RGB.Templates  ${CPFLAGS}
        ${CP} Resources.RGB.Messages    ${RESDIR}.RGB.Messages   ${CPFLAGS}
        ${CP} Resources.MergedMsgs      ${RESDIR}.Messages       ${CPFLAGS}
        ${CP} Resources.Sprites         ${RESDIR}.Sprites        ${CPFLAGS}
        ${CP} Resources.Templates       ${RESDIR}.Templates      ${CPFLAGS}
        @@${ECHO} ${FULL_COMPONENT}: resources copied to Messages module

clean:
        ${WIPE} o ${WFLAGS}
        ${WIPE} od ${WFLAGS}
        ${WIPE} or ${WFLAGS}
        ${WIPE} aof ${WFLAGS}
        ${WIPE} rm ${WFLAGS}
        ${WIPE} h.header ${WFLAGS}
        ${WIPE} linked ${WFLAGS}
        ${WIPE} icons ${WFLAGS}
        ${WIPE} Resources.MergedMsgs ${WFLAGS}
        @@${ECHO} ${FULL_COMPONENT}: cleaned

export:
        ${CP} hdr.ColourPick ${EXP_HDR}.ColourPick ${CPFLAGS}
        @@${ECHO} ${FULL_COMPONENT}: export complete

rom_link:
        ${MKDIR} linked
        ${LD} -o linked.${COMPONENT} -rmf -base ${ADDRESS} ${ROM_MODULE} ${ABSSYM}
        ${CP} linked.${COMPONENT} ${LINKDIR}.${COMPONENT} ${CPFLAGS}
        @@${ECHO} ${COMPONENT}: rom_link complete

BBETYPE = picker
bbe-picker: bbe-generic
        BBE_Export_Dir Resources
a64 9
#
# Static dependencies:
#
ifeq (${OPTIONS},-DNO_INTERNATIONAL_HELP)                  
Resources.MergedMsgs:
        ${CP} Resources.Messages  Resources.MergedMsgs    ${CPFLAGS}
else
Resources.MergedMsgs:
        ${FAPPEND} Resources.MergedMsgs Resources.Messages Resources.CmdHelp
d67 9
a75 35
o.dirs:
        ${MKDIR} o
        ${MKDIR} od
        ${MKDIR} or
        ${MKDIR} icons
        ${MKDIR} icons.h
        ${TOUCH} $@@

o.msgs: ${RESOURCEFILES}
        ${RESGEN} resourcefs_files $@@ \
 Resources.CMYK.Messages   ${RESFSDIR}.CMYK.Messages    \
 Resources.CMYK.Templates  ${RESFSDIR}.CMYK.Templates   \
 Resources.HSV.Templates   ${RESFSDIR}.HSV.Templates    \
 Resources.HSV.Messages    ${RESFSDIR}.HSV.Messages     \
 Resources.RGB.Templates   ${RESFSDIR}.RGB.Templates    \
 Resources.RGB.Messages    ${RESFSDIR}.RGB.Messages     \
 Resources.MergedMsgs      ${RESFSDIR}.Messages         \
 Resources.Sprites         ${RESFSDIR}.Sprites          \
 Resources.Templates       ${RESFSDIR}.Templates

#
# Targets
#
${RAM_MODULE}:  ${RAM_OBJS} ${CLIB} ${OSLIB} ${ICONS} ${ASMUTILS}
        ${MKDIR} rm
        $(LD) -o $@@ -rmf ${RAM_OBJS} ${CLIB} ${OSLIB} ${ASMUTILS}
        ${MODSQZ} $@@

${ROM_MODULE}:  ${ROM_OBJS} ${OSLIB} ${ROMCSTUBS} ${ICONS} ${ASMUTILS}
        ${MKDIR} aof
        $(LD) -o $@@ -aof ${ROM_OBJS} ${OSLIB} ${ROMCSTUBS} ${ASMUTILS}

${DBG_MODULE}:  ${DBG_OBJS} ${CLIB} ${OSLIB} ${ICONS} ${ASMUTILS}
        ${MKDIR} rm
        $(LD) -o $@@ -rmf ${DBG_OBJS} ${OSLIB} ${CLIB} ${ASMUTILS}
@


4.10
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 0.53. Tagged as 'Picker-0_53'
@
text
@d37 1
d45 1
a45 19
#
# Generic options:
#
MKDIR   = do mkdir -p
AS      = objasm
CC      = cc
CMHG    = cmhg
CP      = copy
LD      = link
RM      = remove
MODSQZ  = modsqz
WIPE    = x wipe
CD      = dir
TOUCH   = stamp
WINEDIT = /Apps:!WinEdit
PERL    = do <Perl$Dir>.perl

CPFLAGS = ~cfr~v
WFLAGS  = f~c~vr
d138 1
a138 1
        @@echo ${FULL_COMPONENT}: Module built (RAM)
d142 1
a142 1
        @@echo ${FULL_COMPONENT}: Module installed (RAM)
d145 1
a145 1
        @@echo ${FULL_COMPONENT}: Module built (TRACE)
d148 1
a148 1
        @@echo ${FULL_COMPONENT}: Module built (ROM)
d152 1
a152 1
        @@echo ${FULL_COMPONENT}: Module installed (ROM)
d168 1
a168 1
        @@echo ${FULL_COMPONENT}: resources copied to Messages module
d180 1
a180 1
        @@echo ${FULL_COMPONENT}: cleaned
d184 1
a184 1
        @@echo ${FULL_COMPONENT}: export complete
d190 1
a190 1
        @@echo ${COMPONENT}: rom_link complete
d204 1
a204 1
        FAppend Resources.MergedMsgs Resources.Messages Resources.CmdHelp
d213 1
a213 1
        create $@@
d216 1
a216 1
        resgen resourcefs_files $@@ \
a233 1
        Access $@@ RW/R
a241 1
        Access $@@ RW/R
@


4.9
log
@Do the non internationalised messages more smartly.
Which is which is known at compile time so the makefile can select which is needed and make the merged messages if needed.

Version 0.52. Tagged as 'Picker-0_52'
@
text
@d55 1
a55 1
WIPE    = -wipe
@


4.8
log
@Add ability to pass in OPTION to CMHG to allow version with no international help text to be generated.
Fix spurious null at the end of the messages file entry for "ModelListHelp", although not used when NO_INTERNATIONAL_HELP is in force the whacky lookup function in Support011 was failing because MessageTrans in RISC OS 3.10 sees that as a token delimiter and the lookup gets out of sync.

Version 0.51. Tagged as 'Picker-0_51'
@
text
@d95 1
a95 1
                  o.main   o.model      o.rgb         o.tables    ${RESF} \
d100 1
a100 1
                  od.main  od.model     od.rgb        od.tables   ${RESF} \
a103 2
                  
RESF            = o.msgs
d112 1
a112 1
  Resources.Messages\
a153 1
#
d182 1
a182 1
        ${CP} Resources.Messages        ${RESDIR}.Messages       ${CPFLAGS}
d185 1
a185 1
        @@echo ${FULL_COMPONENT}: resource files copied to Messages module
d196 1
d199 25
d232 11
a242 4
export:
        ${CP} hdr.ColourPick ${EXP_HDR}.ColourPick ${CPFLAGS}
        @@echo ${FULL_COMPONENT}: export complete

a261 26
${RESF}: ${RESOURCEFILES}
        resgen resourcefs_files $@@ \
 Resources.CMYK.Messages   ${RESFSDIR}.CMYK.Messages    \
 Resources.CMYK.Templates  ${RESFSDIR}.CMYK.Templates   \
 Resources.HSV.Templates   ${RESFSDIR}.HSV.Templates    \
 Resources.HSV.Messages    ${RESFSDIR}.HSV.Messages     \
 Resources.RGB.Templates   ${RESFSDIR}.RGB.Templates    \
 Resources.RGB.Messages    ${RESFSDIR}.RGB.Messages     \
 Resources.Messages        ${RESFSDIR}.Messages         \
 Resources.Sprites         ${RESFSDIR}.Sprites          \
 Resources.Templates       ${RESFSDIR}.Templates

#
# Final link for the ROM Image (using given base address)
#
rom_link:
        ${MKDIR} linked
        ${LD} -o linked.${COMPONENT} -rmf -base ${ADDRESS} ${ROM_MODULE} ${ABSSYM}
        ${CP} linked.${COMPONENT} ${LINKDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: rom_link complete

BBETYPE = picker
bbe-picker: bbe-generic
        BBE_Export_Dir Resources


@


4.7
log
@  Added install rule
Detail:
  No code changes
Admin:
  Tested in a Tools CD build.

Retagged as 'Picker-0_50'
@
text
@d85 1
a85 1
CMHGFLAGS       = ${DEPEND} ${THROWBACK} -p
@


4.6
log
@  Build fix
Detail:
  Some users reported problems building the sources if they had other
  installations of perl on their build machine. The build system was using a
  mixture of "perl" and "<Perl$Dir>.perl" to invoke the interpreter, and
  sometimes but not always using "do" to expand system variables on the
  command line. This has now been standardised to use "do <Perl$Dir>.perl in
  all cases, and where possible, to use the makefile macro ${PERL}.
Admin:
  Checked that a Tungsten build still works on a build machine with no other
  perl installation. "perl" was aliased to an error to ensure it wasn't used.

Version 0.50. Not tagged
@
text
@d160 4
@


4.5
log
@Created a BBE export rule, because the entire Resources directory needs to
be exported in this component.

Retagged since this won't affect code generation for existing builds.
@
text
@d59 1
d139 1
a139 1
        perl Resources.perlscript $@@
d143 1
a143 1
        perl Resources.perlscript $@@
d147 1
a147 1
        perl Resources.perlscript $@@
d151 1
a151 1
        perl Resources.perlscript $@@
@


4.4
log
@  Made 32-bit compatible.
  Removed assembler that can be imported from AsmUtils
Admin:
  Built.

Version 0.47. Tagged as 'Picker-0_47'
@
text
@d248 4
@


4.3
log
@  Fixed ROM and debug builds of this module to remember to link
    against OSLib - otherwise the rom_link fails.
Admin:
  Not caught previously since only Ursula actually includes the
    module image in ROM, and I only updated Ursula to use the latest
    version last month.
  Now builds.

Version 0.46. Tagged as 'Picker-0_46'
@
text
@d66 1
a66 1
INCLUDES=       -ISupport011,icons,OS:,C:
d75 1
d83 1
a83 1
CFLAGS          = -c -ffh -zM -zps1 -Wcp ${INCLUDES} ${DEFINES} ${CENV}
d86 1
a86 1
OTHER_OBJS        = o.muldiv o.veneer o.header
d212 1
a212 1
${RAM_MODULE}:  ${RAM_OBJS} ${CLIB} ${OSLIB} ${ICONS}
d214 1
a214 1
        $(LD) -o $@@ -rmf ${RAM_OBJS} ${CLIB} ${OSLIB}
d218 1
a218 1
${ROM_MODULE}:  ${ROM_OBJS} ${OSLIB} ${ROMCSTUBS} ${ICONS}
d220 1
a220 1
        $(LD) -o $@@ -aof ${ROM_OBJS} ${OSLIB} ${ROMCSTUBS}
d222 1
a222 1
${DBG_MODULE}:  ${DBG_OBJS} ${CLIB} ${OSLIB} ${ICONS}
d224 1
a224 1
        $(LD) -o $@@ -rmf ${DBG_OBJS} ${OSLIB} ${CLIB}
@


4.2
log
@  RAM builds are now standalone builds.
  CPFLAGS added to header export.
Detail:
  STANDALONE builds no longer exist - they are equivalent to
    non-ROM builds.
  In non-ROM builds, all the resources to be registered in
    ResourceFS are built into a single structure since ResourceFS
    can handle this more efficiently, and it saves initialisation
    time - MessageTrans has a fit when Picker tries to register
    NINE different things in ResourceFS.
Admin:
  Tested as softload.
  ROM build unaffected.

Version 0.44. Tagged as 'Picker-0_44'
@
text
@d217 1
a217 1
${ROM_MODULE}:  ${ROM_OBJS} ${ROMCSTUBS} ${ICONS}
d219 1
a219 1
        $(LD) -o $@@ -aof ${ROM_OBJS} ${ROMCSTUBS}
d221 1
a221 1
${DBG_MODULE}:  ${DBG_OBJS} ${CLIB} ${ICONS}
d223 1
a223 1
        $(LD) -o $@@ -rmf ${DBG_OBJS} ${CLIB}
@


4.1
log
@  This code has hacked me off for the last time.
Detail:
  As much as possible of the junk has been removed.
  Standard build structure replaces it.
  Unused code removed.
  Support for RISC OS pre-3.60 removed (remove the int'l
    stuff in the CMHG file to reverse this - it must save
    all of 100 bytes!)
  RAM builds now contain the resources for registering in
    ResourceFS (NOTE: this build does not register them yet
    but that's the same as current versions!)  When this is
    fixed, the RAM builds will be the standalone builds.
  RAM build contains a single ResourceFS area which is to be
    registered instead of NINE that it used to register.
  Shame I can't remove all traces of the other directories.
  WinEdit is now invoked from the makefile instead of having
    several silly one-liner Obey scripts to do it.  However, this
    necessitates the perl script to fix the trigraphs (cannot
    use # in makefiles) unless you like 1000s of warnings about
    ANSI trigraphs in the (valid) generated headers.
  Unable to extract it from OSLib or Support011 - it's too
     heavily dependent on them.  Sorry.
Admin:
  RAM builds seem to work.

Version 0.43. Tagged as 'Picker-0_43'
@
text
@d156 1
a156 1
        @@echo ${COMPONENT}: Module built (RAM)
d159 1
a159 1
        @@echo ${COMPONENT}: Module built (TRACE)
d162 1
a162 1
        @@echo ${COMPONENT}: Module built (ROM)
d166 1
a166 1
        @@echo ${COMPONENT}: Module installed (ROM)
d182 1
a182 1
        @@echo ${COMPONENT}: resource files copied to Messages module
d193 1
a193 1
        @@echo ${COMPONENT}: cleaned
d204 2
a205 2
        ${CP} hdr.ColourPick ${EXP_HDR}.ColourPick
        @@echo ${COMPONENT}: export complete
@

