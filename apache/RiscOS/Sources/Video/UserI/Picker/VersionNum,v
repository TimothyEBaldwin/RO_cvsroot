head	4.18;
access;
symbols
	Picker-0_56-1:4.18
	Picker-0_56:4.17
	Picker-0_55:4.16
	Picker-0_54:4.15
	Picker-0_53:4.14
	Picker-0_52:4.13
	Picker-0_51:4.12
	Picker-0_50:4.11
	RO_5_07:4.9
	Picker-0_49:4.9
	Picker-0_48:4.8
	dellis_autobuild_BaseSW:4.7
	Picker-0_47:4.7
	Picker-0_46:4.6
	sbrodie_sedwards_16Mar2000:4.5
	Picker-0_45:4.5
	Picker-0_44:4.4
	Picker-0_43:4.3
	dcotton_autobuild_BaseSW:4.8
	Picker-0_42:4.2;
locks; strict;
comment	@# @;


4.18
date	2018.04.11.23.35.14;	author bavison;	state Exp;
branches;
next	4.17;
commitid	TEGLFchQCDmH45yA;

4.17
date	2014.03.27.23.49.06;	author jlee;	state Exp;
branches;
next	4.16;
commitid	Jceed9EX4VYYAoux;

4.16
date	2014.01.12.13.07.48;	author rsprowson;	state Exp;
branches;
next	4.15;
commitid	eawfaJEn2ZBrqPkx;

4.15
date	2013.08.06.23.59.14;	author jlee;	state Exp;
branches;
next	4.14;
commitid	EqT0dB8QNXJN8s0x;

4.14
date	2012.01.14.23.04.32;	author srevill;	state Exp;
branches;
next	4.13;
commitid	iZcu0AKTJivZ9cPv;

4.13
date	2012.01.10.22.58.25;	author rsprowson;	state Exp;
branches;
next	4.12;
commitid	u3GoE0WqyRnRfGOv;

4.12
date	2012.01.09.23.28.33;	author rsprowson;	state Exp;
branches;
next	4.11;
commitid	S7cx3sKEp2CbsyOv;

4.11
date	2009.06.07.17.16.12;	author bavison;	state Exp;
branches;
next	4.10;

4.10
date	2008.10.17.00.27.47;	author bavison;	state Exp;
branches;
next	4.9;

4.9
date	2002.10.25.14.55.10;	author bavison;	state Exp;
branches;
next	4.8;

4.8
date	2001.07.11.11.15.00;	author sbrodie;	state Exp;
branches;
next	4.7;

4.7
date	2000.05.08.08.57.34;	author sbrodie;	state Exp;
branches;
next	4.6;

4.6
date	2000.04.06.15.13.28;	author sbrodie;	state Exp;
branches;
next	4.5;

4.5
date	99.12.01.15.40.29;	author sbrodie;	state Exp;
branches;
next	4.4;

4.4
date	99.11.26.11.36.44;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	99.11.24.00.04.05;	author sbrodie;	state Exp;
branches;
next	4.2;

4.2
date	99.11.03.14.21.36;	author jberanek;	state Exp;
branches;
next	4.1;

4.1
date	99.11.03.11.11.49;	author jberanek;	state Exp;
branches;
next	;


desc
@@


4.18
log
@  Updated to build using shared makefiles
Detail:
  * Makefile rewritten
  * Language-dependent resource files moved into Resources.UK
  * Four header files (in "icons" subdirectory) that are autogenerated by
    running WinEd are now committed to CVS, to aid with cross-compilation.
    These icon number definitions haven't changed in over 21 years, and
    if they were to do so, it would be a one-off job to run WinEd on a
    RISC OS machine to regenerate them: the original rules have been retained
    for this purpose. Since the only other component that uses WinEd like
    this is ResEd, it seems unlikely that it will ever be worth the effort to
    create a cross-compiling version of WinEd!


Version 0.56. Not tagged
@
text
@/* (0.56)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.56
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                12 Apr 2018

#define Module_MajorVersion             "0.56"
#define Module_Version                  56
#define Module_MinorVersion             ""
#define Module_Date                     "12 Apr 2018"

#define Module_ApplicationDate          "12-Apr-18"

#define Module_ComponentName            "Picker"
#define Module_ComponentPath            "castle/RiscOS/Sources/Video/UserI/Picker"

#define Module_FullVersion              "0.56"
#define Module_HelpVersion              "0.56 (12 Apr 2018)"
#define Module_LibraryVersionInfo       "0:56"
@


4.17
log
@Fix reporting of events to colourpicker_DIALOGUE_TYPE_CLICK clients
Detail:
  Support011/c/steppable - The fix for issue #339/flickery redraw, combined with the way that Colour_Changed() in dialogue.c filters out colour change events being passed to the colour picker client, meant that if a slider was dragged then a client which is only interested in click events (e.g. Paint) wouldn't receive a message once the drag was complete. Fix this by adding an extra flag to Set_Position(), to allow Set_Position()'s lazy update logic to be suppressed when End_Drag() sets the final position at the end of the drag. This ensures a message will get as far as Colour_Changed(), which will then forward it on to the client due to the drag no longer being in progress.
Admin:
  Tested on BB-xM
  Fixes selected colour in Paint not updating correctly when dragging sliders


Version 0.56. Tagged as 'Picker-0_56'
@
text
@d9 1
a9 1
#define Module_Date_CMHG                27 Mar 2014
d14 1
a14 1
#define Module_Date                     "27 Mar 2014"
d16 1
a16 1
#define Module_ApplicationDate          "27-Mar-14"
d22 1
a22 1
#define Module_HelpVersion              "0.56 (27 Mar 2014)"
@


4.16
log
@Less flickery colour picker when the dragged value hasn't changed
Only call value_changed_fn when the value has changed during null poll events, in line with the check for change logic in Increment().
Note that steppable_set_value() still sends one event per call as mentioned in the cautionary note at line 535, so when called programmatically the behaviour is unchanged.

Tested on a Raspberry Pi, no more shimmering colour swatches.

Version 0.55. Tagged as 'Picker-0_55'
@
text
@d1 1
a1 1
/* (0.55)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.55
d9 1
a9 1
#define Module_Date_CMHG                12 Jan 2014
d11 2
a12 2
#define Module_MajorVersion             "0.55"
#define Module_Version                  55
d14 1
a14 1
#define Module_Date                     "12 Jan 2014"
d16 1
a16 1
#define Module_ApplicationDate          "12-Jan-14"
d21 3
a23 3
#define Module_FullVersion              "0.55"
#define Module_HelpVersion              "0.55 (12 Jan 2014)"
#define Module_LibraryVersionInfo       "0:55"
@


4.15
log
@Add support for new screen modes
Detail:
  c/rgb - Dither the RGB colourspace image in 4096 colour modes; to me this looks better than leaving it undithered
  c/tables, h/tables - Cache the NColour value so that RGB code can detect 4K colour modes
Admin:
  Tested on BB-xM
  Part of an implementation of the Extended Framebuffer Format Spec:
  http://www.riscosopen.org/wiki/documentation/show/Extended%20Framebuffer%20Format%20Specification


Version 0.54. Tagged as 'Picker-0_54'
@
text
@d1 1
a1 1
/* (0.54)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.54
d9 1
a9 1
#define Module_Date_CMHG                07 Aug 2013
d11 2
a12 2
#define Module_MajorVersion             "0.54"
#define Module_Version                  54
d14 1
a14 1
#define Module_Date                     "07 Aug 2013"
d16 1
a16 1
#define Module_ApplicationDate          "07-Aug-13"
d21 3
a23 3
#define Module_FullVersion              "0.54"
#define Module_HelpVersion              "0.54 (07 Aug 2013)"
#define Module_LibraryVersionInfo       "0:54"
@


4.14
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 0.53. Tagged as 'Picker-0_53'
@
text
@d1 1
a1 1
/* (0.53)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.53
d9 1
a9 1
#define Module_Date_CMHG                14 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.53"
#define Module_Version                  53
d14 1
a14 1
#define Module_Date                     "14 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "14-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.53"
#define Module_HelpVersion              "0.53 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:53"
@


4.13
log
@Do the non internationalised messages more smartly.
Which is which is known at compile time so the makefile can select which is needed and make the merged messages if needed.

Version 0.52. Tagged as 'Picker-0_52'
@
text
@d1 1
a1 1
/* (0.52)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.52
d9 1
a9 1
#define Module_Date_CMHG                10 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.52"
#define Module_Version                  52
d14 1
a14 1
#define Module_Date                     "10 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "10-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.52"
#define Module_HelpVersion              "0.52 (10 Jan 2012)"
#define Module_LibraryVersionInfo       "0:52"
@


4.12
log
@Add ability to pass in OPTION to CMHG to allow version with no international help text to be generated.
Fix spurious null at the end of the messages file entry for "ModelListHelp", although not used when NO_INTERNATIONAL_HELP is in force the whacky lookup function in Support011 was failing because MessageTrans in RISC OS 3.10 sees that as a token delimiter and the lookup gets out of sync.

Version 0.51. Tagged as 'Picker-0_51'
@
text
@d1 1
a1 1
/* (0.51)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.51
d9 1
a9 1
#define Module_Date_CMHG                09 Jan 2012
d11 2
a12 2
#define Module_MajorVersion             "0.51"
#define Module_Version                  51
d14 1
a14 1
#define Module_Date                     "09 Jan 2012"
d16 1
a16 1
#define Module_ApplicationDate          "09-Jan-12"
d21 3
a23 3
#define Module_FullVersion              "0.51"
#define Module_HelpVersion              "0.51 (09 Jan 2012)"
#define Module_LibraryVersionInfo       "0:51"
@


4.11
log
@  Build fix
Detail:
  Some users reported problems building the sources if they had other
  installations of perl on their build machine. The build system was using a
  mixture of "perl" and "<Perl$Dir>.perl" to invoke the interpreter, and
  sometimes but not always using "do" to expand system variables on the
  command line. This has now been standardised to use "do <Perl$Dir>.perl in
  all cases, and where possible, to use the makefile macro ${PERL}.
Admin:
  Checked that a Tungsten build still works on a build machine with no other
  perl installation. "perl" was aliased to an error to ensure it wasn't used.

Version 0.50. Not tagged
@
text
@d1 1
a1 1
/* (0.50)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.50
d9 1
a9 1
#define Module_Date_CMHG                07 Jun 2009
d11 2
a12 2
#define Module_MajorVersion             "0.50"
#define Module_Version                  50
d14 1
a14 1
#define Module_Date                     "07 Jun 2009"
d16 1
a16 1
#define Module_ApplicationDate          "07-Jun-09"
d21 3
a23 3
#define Module_FullVersion              "0.50"
#define Module_HelpVersion              "0.50 (07 Jun 2009)"
#define Module_LibraryVersionInfo       "0:50"
@


4.10
log
@Renamed symbols so module can build with OSLib 6.90.

Version 0.50. Tagged as 'Picker-0_50'
@
text
@d9 1
a9 1
#define Module_Date_CMHG                17 Oct 2008
d14 1
a14 1
#define Module_Date                     "17 Oct 2008"
d16 1
a16 1
#define Module_ApplicationDate          "17-Oct-08"
d19 1
a19 1
#define Module_ComponentPath            "RiscOS/Sources/Video/UserI/Picker"
d22 1
a22 1
#define Module_HelpVersion              "0.50 (17 Oct 2008)"
@


4.9
log
@Lots of bools changed to osbools to keep the new compiler happy.
No longer assumes the location of the SVC stack.

Version 0.49. Tagged as 'Picker-0_49'
@
text
@d1 1
a1 1
/* (0.49)
d4 1
a4 1
 * Last processed by srccommit version: 1.68.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.49
d9 1
a9 1
#define Module_Date_CMHG                25 Oct 2002
d11 2
a12 2
#define Module_MajorVersion             "0.49"
#define Module_Version                  49
d14 1
a14 1
#define Module_Date                     "25 Oct 2002"
d16 1
a16 1
#define Module_ApplicationDate          "25-Oct-02"
d21 3
a23 3
#define Module_FullVersion              "0.49"
#define Module_HelpVersion              "0.49 (25 Oct 2002)"
#define Module_LibraryVersionInfo       "0:49"
@


4.8
log
@  Builds with OSLib 4 or OSLib 6
Detail:
  message_PREQUIT has become message_PRE_QUIT in OSLib 6.  This module
    now detects the non-definition of message_PREQUIT and defines it
    to be message_PRE_QUIT itself.
Admin:
  Will allow builds with either OSLib 4 or 6.


Version 0.48. Tagged as 'Picker-0_48'
@
text
@d1 1
a1 1
/* (0.48)
d4 1
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.48
d9 1
a9 1
#define Module_Date_CMHG                11 Jul 2001
d11 2
a12 2
#define Module_MajorVersion             "0.48"
#define Module_Version                  48
d14 1
a14 1
#define Module_Date                     "11 Jul 2001"
d16 1
a16 2
#define Module_ApplicationDate2         "11-Jul-01"
#define Module_ApplicationDate4         "11-Jul-2001"
d21 3
a23 2
#define Module_FullVersion              "0.48"
#define Module_HelpVersion              "0.48 (11 Jul 2001)"
@


4.7
log
@  Made 32-bit compatible.
  Removed assembler that can be imported from AsmUtils
Admin:
  Built.

Version 0.47. Tagged as 'Picker-0_47'
@
text
@d1 1
a1 1
/* (0.47)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.47
d8 1
a8 1
#define Module_Date_CMHG                08 May 2000
d10 2
a11 2
#define Module_MajorVersion             "0.47"
#define Module_Version                  47
d13 1
a13 1
#define Module_Date                     "08 May 2000"
d15 8
a22 1
#define Module_FullVersion              "0.47"
@


4.6
log
@  Fixed ROM and debug builds of this module to remember to link
    against OSLib - otherwise the rom_link fails.
Admin:
  Not caught previously since only Ursula actually includes the
    module image in ROM, and I only updated Ursula to use the latest
    version last month.
  Now builds.

Version 0.46. Tagged as 'Picker-0_46'
@
text
@d1 1
a1 1
/* (0.46)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.46
d8 1
a8 1
#define Module_Date_CMHG                06 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.46"
#define Module_Version                  46
d13 1
a13 1
#define Module_Date                     "06 Apr 2000"
d15 1
a15 1
#define Module_FullVersion              "0.46"
@


4.5
log
@  No longer catches ResourceFSStarting service call.
Detail:
  Receipt of that service call causes this module to trample over
    Wimp state that applications may be relying on (eg. template
    file handle).
Admin:
  Tested on desktop Risc PC.

Version 0.45. Tagged as 'Picker-0_45'
@
text
@d1 1
a1 1
/* (0.45)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.45
d8 1
a8 1
#define Module_Date_CMHG                01 Dec 1999
d10 2
a11 2
#define Module_MajorVersion             "0.45"
#define Module_Version                  45
d13 1
a13 1
#define Module_Date                     "01 Dec 1999"
d15 1
a15 1
#define Module_FullVersion              "0.45"
@


4.4
log
@  RAM builds are now standalone builds.
  CPFLAGS added to header export.
Detail:
  STANDALONE builds no longer exist - they are equivalent to
    non-ROM builds.
  In non-ROM builds, all the resources to be registered in
    ResourceFS are built into a single structure since ResourceFS
    can handle this more efficiently, and it saves initialisation
    time - MessageTrans has a fit when Picker tries to register
    NINE different things in ResourceFS.
Admin:
  Tested as softload.
  ROM build unaffected.

Version 0.44. Tagged as 'Picker-0_44'
@
text
@d1 1
a1 1
/* (0.44)
d6 3
a8 3
#define Module_MajorVersion_CMHG     	0.44
#define Module_MinorVersion_CMHG	
#define Module_Date_CMHG      		26 Nov 1999
d10 4
a13 4
#define Module_MajorVersion     	"0.44"
#define Module_Version                  44
#define Module_MinorVersion		""
#define Module_Date      		"26 Nov 1999"
d15 1
a15 1
#define Module_FullVersion              "0.44"
@


4.3
log
@  This code has hacked me off for the last time.
Detail:
  As much as possible of the junk has been removed.
  Standard build structure replaces it.
  Unused code removed.
  Support for RISC OS pre-3.60 removed (remove the int'l
    stuff in the CMHG file to reverse this - it must save
    all of 100 bytes!)
  RAM builds now contain the resources for registering in
    ResourceFS (NOTE: this build does not register them yet
    but that's the same as current versions!)  When this is
    fixed, the RAM builds will be the standalone builds.
  RAM build contains a single ResourceFS area which is to be
    registered instead of NINE that it used to register.
  Shame I can't remove all traces of the other directories.
  WinEdit is now invoked from the makefile instead of having
    several silly one-liner Obey scripts to do it.  However, this
    necessitates the perl script to fix the trigraphs (cannot
    use # in makefiles) unless you like 1000s of warnings about
    ANSI trigraphs in the (valid) generated headers.
  Unable to extract it from OSLib or Support011 - it's too
     heavily dependent on them.  Sorry.
Admin:
  RAM builds seem to work.

Version 0.43. Tagged as 'Picker-0_43'
@
text
@d1 1
a1 1
/* (0.43)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.43
d8 1
a8 1
#define Module_Date_CMHG      		23 Nov 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.43"
#define Module_Version                  43
d13 1
a13 1
#define Module_Date      		"23 Nov 1999"
d15 1
a15 1
#define Module_FullVersion              "0.43"
@


4.2
log
@  Merged Ursula and Spinner branches.
Detail:
  - Merged branches.
  - Added srccommit suppport to cmhg header
  - Added ${THROWBACK} and -p to cmhg flags
  - Added stripdepend call to clean target
  - Stripped dynamic dependencies
Admin:
  Built and tested on RPC.

Version 0.42. Tagged as 'Picker-0_42'
@
text
@d1 1
a1 1
/* (0.42)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.42
d8 1
a8 1
#define Module_Date_CMHG      		03 Nov 1999
d10 2
a11 2
#define Module_MajorVersion     	"0.42"
#define Module_Version                  42
d13 1
a13 1
#define Module_Date      		"03 Nov 1999"
d15 1
a15 1
#define Module_FullVersion              "0.42"
@


4.1
log
@created by srccommit.
@
text
@d1 1
a1 1
/* (0.41)
d6 1
a6 1
#define Module_MajorVersion_CMHG     	0.41
d10 2
a11 2
#define Module_MajorVersion     	"0.41"
#define Module_Version                  41
d15 1
a15 1
#define Module_FullVersion              "0.41"
@

