head	4.50;
access;
symbols
	Switcher-1_51:4.50
	Switcher-1_50:4.49
	Switcher-1_49:4.48
	Switcher-1_48:4.47
	Switcher-1_47:4.46
	Switcher-1_46:4.45
	Switcher-1_45:4.44
	Switcher-1_44:4.43
	Switcher-1_43:4.42
	Switcher-1_42:4.41
	Switcher-1_41:4.40
	Switcher-1_40:4.39
	Switcher-1_39:4.38
	Switcher-1_38:4.37
	Switcher-1_37:4.36
	Switcher-1_36:4.35
	Switcher-1_35:4.34
	Switcher-1_34:4.33
	Switcher-1_33:4.32
	Switcher-1_32:4.30
	Switcher-1_31:4.29
	Switcher-1_30:4.28
	Switcher-1_29:4.27
	Switcher-1_28:4.25
	Switcher-1_27:4.24
	RO_5_07:4.23
	Switcher-1_26:4.23
	Switcher-1_25a:4.22
	Switcher-1_25:4.22
	Switcher-1_24:4.21
	Switcher-1_23:4.20
	Switcher-1_22:4.19
	Switcher-1_21:4.18
	Switcher-1_20:4.17
	Switcher-1_19:4.16
	Switcher-1_18:4.15
	Switcher-1_17:4.14
	Switcher-1_16:4.13
	Switcher-1_15:4.12
	dellis_autobuild_BaseSW:4.11
	Switcher-1_14:4.11
	Switcher-1_13:4.10
	sbrodie_sedwards_16Mar2000:4.9
	Switcher-1_12:4.9
	Switcher-1_11:4.8
	dcotton_autobuild_BaseSW:4.15
	Switcher-1_10:4.7
	Switcher-1_09:4.6
	Switcher-1_08:4.5
	Switcher-1_07:4.4
	Switcher-1_06:4.3
	Switcher-1_05:4.2;
locks; strict;
comment	@# @;


4.50
date	2018.10.26.19.17.36;	author bavison;	state Exp;
branches;
next	4.49;
commitid	8hOcr1oztF3JhvXA;

4.49
date	2017.08.19.16.47.01;	author jlee;	state Exp;
branches;
next	4.48;
commitid	pzN3jNaLPUfZmQ3A;

4.48
date	2016.05.08.16.46.23;	author jlee;	state Exp;
branches;
next	4.47;
commitid	1UYTXSIi0HJrpH5z;

4.47
date	2016.02.12.21.04.05;	author rsprowson;	state Exp;
branches;
next	4.46;
commitid	1aTCtVB1EWMeBFUy;

4.46
date	2015.09.26.13.45.03;	author jlee;	state Exp;
branches;
next	4.45;
commitid	EDMSgjXv20ADDLCy;

4.45
date	2015.08.31.19.45.56;	author jlee;	state Exp;
branches;
next	4.44;
commitid	MEXEHOFDEOtftszy;

4.44
date	2015.07.17.00.33.44;	author jlee;	state Exp;
branches;
next	4.43;
commitid	wOZGLUOZvHBFxzty;

4.43
date	2015.01.27.08.36.55;	author rsprowson;	state Exp;
branches;
next	4.42;
commitid	OcSOnlaXXZedID7y;

4.42
date	2014.12.21.10.36.48;	author rsprowson;	state Exp;
branches;
next	4.41;
commitid	FzSXdiZn7hs4zT2y;

4.41
date	2014.07.22.23.57.19;	author jlee;	state Exp;
branches;
next	4.40;
commitid	IvNHuFswSyMCSqJx;

4.40
date	2012.11.17.19.59.20;	author bavison;	state Exp;
branches;
next	4.39;
commitid	lGoLoBCFPx1EeLsw;

4.39
date	2012.10.31.14.32.07;	author srevill;	state Exp;
branches;
next	4.38;
commitid	abEvpyMxC5bfYxqw;

4.38
date	2012.09.12.00.41.05;	author bavison;	state Exp;
branches;
next	4.37;
commitid	Vr0azvVU40SOWakw;

4.37
date	2012.08.12.16.08.42;	author rsprowson;	state Exp;
branches;
next	4.36;
commitid	TTGPM41EYVgP4hgw;

4.36
date	2012.07.29.11.21.37;	author rsprowson;	state Exp;
branches;
next	4.35;
commitid	p2X3MLyQIY0fWrew;

4.35
date	2012.07.28.21.45.08;	author rsprowson;	state Exp;
branches;
next	4.34;
commitid	VU30pn9JTzh8qnew;

4.34
date	2011.11.27.19.09.24;	author rsprowson;	state Exp;
branches;
next	4.33;
commitid	JbDfqjgqPbvYo0Jv;

4.33
date	2011.10.13.22.10.55;	author rsprowson;	state Exp;
branches;
next	4.32;
commitid	1EnbwayD9JjVQeDv;

4.32
date	2011.09.21.20.50.58;	author rsprowson;	state Exp;
branches;
next	4.31;
commitid	Mpl063Ubm73m7pAv;

4.31
date	2011.08.04.20.24.02;	author jlee;	state Exp;
branches;
next	4.30;
commitid	ebMmVplznxGLveuv;

4.30
date	2011.02.04.15.09.24;	author srevill;	state Exp;
branches;
next	4.29;

4.29
date	2010.11.21.12.07.24;	author jlee;	state Exp;
branches;
next	4.28;

4.28
date	2010.11.14.16.02.06;	author jlee;	state Exp;
branches;
next	4.27;

4.27
date	2010.01.19.08.52.49;	author jballance;	state Exp;
branches;
next	4.26;

4.26
date	2010.01.18.19.15.42;	author jballance;	state Exp;
branches;
next	4.25;

4.25
date	2006.02.16.15.54.32;	author jballance;	state Exp;
branches;
next	4.24;

4.24
date	2005.09.15.13.51.19;	author bavison;	state Exp;
branches;
next	4.23;

4.23
date	2004.06.21.16.52.39;	author mhobbs;	state Exp;
branches;
next	4.22;

4.22
date	2003.02.21.20.47.35;	author bavison;	state Exp;
branches;
next	4.21;

4.21
date	2003.01.11.17.00.47;	author rsprowson;	state Exp;
branches;
next	4.20;

4.20
date	2002.11.28.17.02.51;	author bavison;	state Exp;
branches;
next	4.19;

4.19
date	2002.11.22.21.09.37;	author rsprowson;	state Exp;
branches;
next	4.18;

4.18
date	2002.11.07.16.48.34;	author kbracey;	state Exp;
branches;
next	4.17;

4.17
date	2002.11.01.13.26.55;	author bavison;	state Exp;
branches;
next	4.16;

4.16
date	2002.10.26.11.42.50;	author rsprowson;	state Exp;
branches;
next	4.15;

4.15
date	2001.05.10.12.19.30;	author kbracey;	state Exp;
branches;
next	4.14;

4.14
date	2001.03.16.17.06.11;	author sbrodie;	state Exp;
branches;
next	4.13;

4.13
date	2001.03.01.15.10.52;	author sforrest;	state Exp;
branches;
next	4.12;

4.12
date	2001.01.08.10.23.46;	author sbrodie;	state Exp;
branches;
next	4.11;

4.11
date	2000.04.25.10.56.34;	author kbracey;	state Exp;
branches;
next	4.10;

4.10
date	2000.04.14.12.39.54;	author ahodgkin;	state Exp;
branches;
next	4.9;

4.9
date	2000.03.09.17.28.50;	author sbrodie;	state Exp;
branches;
next	4.8;

4.8
date	99.11.09.11.19.24;	author nbingham;	state Exp;
branches;
next	4.7;

4.7
date	99.09.06.16.29.37;	author kbracey;	state Exp;
branches;
next	4.6;

4.6
date	99.08.05.09.18.14;	author kbracey;	state Exp;
branches;
next	4.5;

4.5
date	99.04.22.10.47.32;	author dcotton;	state Exp;
branches;
next	4.4;

4.4
date	98.10.19.15.29.42;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	98.10.16.12.45.40;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	98.10.01.07.57.14;	author kbracey;	state Exp;
branches;
next	4.1;

4.1
date	98.10.01.07.54.01;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.50
log
@Update artwork to reflect change of ownership of RISC OS

Version 1.51. Tagged as 'Switcher-1_51'
@
text
@;
; This file is automatically maintained by srccommit, do not edit manually.
; Last processed by srccommit version: 1.1.
;
                        GBLS    Module_MajorVersion
                        GBLA    Module_Version
                        GBLS    Module_MinorVersion
                        GBLS    Module_Date
                        GBLS    Module_FullVersion
                        GBLS    Module_ApplicationDate
                        GBLS    Module_HelpVersion
                        GBLS    Module_ComponentName
                        GBLS    Module_ComponentPath
Module_MajorVersion     SETS    "1.51"
Module_Version          SETA    151
Module_MinorVersion     SETS    ""
Module_Date             SETS    "26 Oct 2018"
Module_ApplicationDate  SETS    "26-Oct-18"
Module_ComponentName    SETS    "Switcher"
Module_ComponentPath    SETS    "apache/RiscOS/Sources/Desktop/Switcher"
Module_FullVersion      SETS    "1.51"
Module_HelpVersion      SETS    "1.51 (26 Oct 2018)"
                        END
@


4.49
log
@Include page zero compatibility page in system workspace size
Detail:
  s/Switcher - If the page zero compatibility page is present, add it to the system workspace total size
Admin:
  Tested on BB-xM


Version 1.50. Tagged as 'Switcher-1_50'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.50"
Module_Version          SETA    150
d17 2
a18 2
Module_Date             SETS    "19 Aug 2017"
Module_ApplicationDate  SETS    "19-Aug-17"
d20 3
a22 3
Module_ComponentPath    SETS    "castle/RiscOS/Sources/Desktop/Switcher"
Module_FullVersion      SETS    "1.50"
Module_HelpVersion      SETS    "1.50 (19 Aug 2017)"
@


4.48
log
@Avoid unnecessary remainder calculations
Detail:
  s/Switcher - Avoid unnecessary remainder calculations in DivRem macro
Admin:
  Tested on Cortex-A15


Version 1.49. Tagged as 'Switcher-1_49'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.49"
Module_Version          SETA    149
d17 2
a18 2
Module_Date             SETS    "08 May 2016"
Module_ApplicationDate  SETS    "08-May-16"
d21 2
a22 2
Module_FullVersion      SETS    "1.49"
Module_HelpVersion      SETS    "1.49 (08 May 2016)"
@


4.47
log
@Remove conflicting save desktop settings
Saving the desktop boot file results in some conflicting settings. Since to be able to save it you must have a writable medium, you also have <Choices$Write> so you should be using !Configure.
Remove the ChangeDynamicArea lines from being written
* FontSize - this was specifically mentioned as conflicting in the RISC OS 3.60 User Guide, in the memory dialogue of old !Configure or Font setup plugin now.
* SpriteSize - deprecated in the RISC OS 3.10 PRM, so don't encourage it to be non zero on boot up
* RamFsSize - likewise in the memory dialogue of old !Configure or Disc setup plugin now.
Still writes the WimpSlot size, since there's no corresponding !Configure item for that and it can be resized before every app starts anyway.

Version 1.48. Tagged as 'Switcher-1_48'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.48"
Module_Version          SETA    148
d17 2
a18 2
Module_Date             SETS    "12 Feb 2016"
Module_ApplicationDate  SETS    "12-Feb-16"
d21 2
a22 2
Module_FullVersion      SETS    "1.48"
Module_HelpVersion      SETS    "1.48 (12 Feb 2016)"
@


4.46
log
@Fix application and next slot size limits
Detail:
  s/Switcher - Fix ReadDynamicArea routine to use OS_ReadDynamicArea when reading the details of application space (since OS_DynamicArea doesn't recognise the fake application space DA)
Admin:
  Tested on imx6
  Fixes inability to increase size of (e.g.) filer action wimpslot, and fixes 'next' slot size not being clamped to 512MB


Version 1.47. Tagged as 'Switcher-1_47'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.47"
Module_Version          SETA    147
d17 2
a18 2
Module_Date             SETS    "26 Sep 2015"
Module_ApplicationDate  SETS    "26-Sep-15"
d21 2
a22 2
Module_FullVersion      SETS    "1.47"
Module_HelpVersion      SETS    "1.47 (26 Sep 2015)"
@


4.45
log
@Update to cope with physical memory pools
Detail:
  For physical memory pools, the max size returned by OS_ReadDynamicArea/OS_DynamicArea 2 might be a lie - although the maximum logical size of a PMP is fixed, the maximum physical size can be updated dynamically, so that a PMP can avoid wasting memory for a page list which is mostly unused.
  So whenever we want to resize a PMP, we ignore the max size indicated by the OS and instead treat it as if it has a max of 4GB
  s/Switcher - Implement the above, by replacing calls to OS_ReadDynamicArea with calls to OS_DynamicArea 2 (so DA flags can be read). Also fix some bits of code to do unsigned comparisons on size values, and to cope with the fact that OS_ChangeDynamicArea essentially limits us to +/-2GB at a time (although currently we just clamp the request, rather than make multiple requests)
Admin:
  Tested on Pandaboard


Version 1.46. Tagged as 'Switcher-1_46'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.46"
Module_Version          SETA    146
d17 2
a18 2
Module_Date             SETS    "31 Aug 2015"
Module_ApplicationDate  SETS    "31-Aug-15"
d21 2
a22 2
Module_FullVersion      SETS    "1.46"
Module_HelpVersion      SETS    "1.46 (31 Aug 2015)"
@


4.44
log
@Use new OS_Memory 16 items for calculating correct system workspace & hardware/system size
Detail:
  s/Switcher - Calculate system workspace as the sum of ZeroPage, ScratchSpace and DebuggerSpace sizes. This fixes the value being 4KB smaller than it should be when high processor vectors are in use (since the debugger is currently given a page of its own for that case). Also include processor vector page (if any) in hardware/system total (currently not needed, but may be in future)
Admin:
  Tested on Raspberry Pi
  Values listed in system memory section now total up correctly


Version 1.45. Tagged as 'Switcher-1_45'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.45"
Module_Version          SETA    145
d17 2
a18 2
Module_Date             SETS    "17 Jul 2015"
Module_ApplicationDate  SETS    "17-Jul-15"
d21 2
a22 2
Module_FullVersion      SETS    "1.45"
Module_HelpVersion      SETS    "1.45 (17 Jul 2015)"
@


4.43
log
@Fix for menu opening position
Switcher took it upon itself to open its menus at x-width/2,y-12 rather than x-64,y+0 like the Style Guide says.

Version 1.44. Tagged as 'Switcher-1_44'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.44"
Module_Version          SETA    144
d17 2
a18 2
Module_Date             SETS    "27 Jan 2015"
Module_ApplicationDate  SETS    "27-Jan-15"
d21 2
a22 2
Module_FullVersion      SETS    "1.44"
Module_HelpVersion      SETS    "1.44 (27 Jan 2015)"
@


4.42
log
@Escape some dollars, sort out value of NULL
Change $ => $$ to reduce substitution warnings.
Be consistent about NULL (being 0) not -1, otherwise the total memory bar vanishes on systems with >= 2GB of RAM.

Version 1.43. Tagged as 'Switcher-1_43'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.43"
Module_Version          SETA    143
d17 2
a18 2
Module_Date             SETS    "21 Dec 2014"
Module_ApplicationDate  SETS    "21-Dec-14"
d21 2
a22 2
Module_FullVersion      SETS    "1.43"
Module_HelpVersion      SETS    "1.43 (21 Dec 2014)"
@


4.41
log
@Treat memory sizes as unsigned
Detail:
  s/Switcher - Treat memory sizes as unsigned values. We don't deal with negative sizes, so there's no reason to be using signed arithmetic.
Admin:
  Tested on BB-xM


Version 1.42. Tagged as 'Switcher-1_42'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.42"
Module_Version          SETA    142
d17 2
a18 2
Module_Date             SETS    "23 Jul 2014"
Module_ApplicationDate  SETS    "23-Jul-14"
d21 2
a22 2
Module_FullVersion      SETS    "1.42"
Module_HelpVersion      SETS    "1.42 (23 Jul 2014)"
@


4.40
log
@  Fix interactive help on iconbar menu
Detail:
  There were actually two problems:
  * No account was taken of the fact that the menu item indexes were different
    in the shortened menu.
  * The static variable "menu_userblk" was needed for decoding help messages,
    but its initialisation in the icon bar menu case was accidentally chopped
    out along with the code that customised the third menu item (the one that
    said "Task display" on the icon bar menu and says "Task '<taskname>'" on
    the task display menu). This bug does not seem to have been reproducible
    on all platforms due to the nature of uninitialised variables.
Admin:
  Tested on Raspberry Pi. Joint work by Willi Theiss and Ben Avison.

Version 1.41. Tagged as 'Switcher-1_41'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.41"
Module_Version          SETA    141
d17 2
a18 2
Module_Date             SETS    "17 Nov 2012"
Module_ApplicationDate  SETS    "17-Nov-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.41"
Module_HelpVersion      SETS    "1.41 (17 Nov 2012)"
@


4.39
log
@Work-around for bug introduced in 1.39.

Data abort from interactive help on Switcher menu items has been
clobbered by disabling menu item help in s.Switcher (see FIXME).
This needs sorting out properly when time permits.

Version 1.40. Tagged as 'Switcher-1_40'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.40"
Module_Version          SETA    140
d17 2
a18 2
Module_Date             SETS    "31 Oct 2012"
Module_ApplicationDate  SETS    "31-Oct-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.40"
Module_HelpVersion      SETS    "1.40 (31 Oct 2012)"
@


4.38
log
@  Applied some polish ahead of the Raspberry Pi release
Detail:
  * Simplified the icon bar menu (all the old options are still available
    from the menu on the "task display" window).
  * Fixed the heroes list code - it looks like this broke when the ROM moved
    to a top-bit-set address, and nobody bothered fixing it until now.
  * Made the code to reset the machine manually conditional on NoARMv3,
    since all ARMv3+ machines have OSes that implement OS_Reset. This makes
    the module build cleanly for all current ROM builds.
Admin:
  Tested in a Raspberry Pi build

Version 1.39. Tagged as 'Switcher-1_39'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.39"
Module_Version          SETA    139
d17 2
a18 2
Module_Date             SETS    "12 Sep 2012"
Module_ApplicationDate  SETS    "12-Sep-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.39"
Module_HelpVersion      SETS    "1.39 (12 Sep 2012)"
@


4.37
log
@Use allocated error numbers from ErrorBase_Switcher instead of 1
Resolves 'FIXME'.

Version 1.38. Tagged as 'Switcher-1_38'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.38"
Module_Version          SETA    138
d17 2
a18 2
Module_Date             SETS    "12 Aug 2012"
Module_ApplicationDate  SETS    "12-Aug-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.38"
Module_HelpVersion      SETS    "1.38 (12 Aug 2012)"
@


4.36
log
@Add support for 'PostDesk' shutdown scripts
Useful for small clearup activities on each shutdown. As we're trying to shut down the range of things looked for is very small compared with the PreDesk directory: no sprites, no apps (or directories), no utilities, no BASIC, no modules. Keep it simple and fast!
* If Choices:Boot.PostDesk is present, any obey files within it are obey'd
* Swap false/true to {FALSE} and {TRUE}
* TaskManager_Shutdown flag bit 7 can skip the shutdown scripts
* Simplified evaluation of Boot$OSVersion
* Changed pre RISC OS 3.50 reset to actually do a reset rather than just reenter the desktop
* Shared a few constant strings

Version 1.37. Tagged as 'Switcher-1_37'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.37"
Module_Version          SETA    137
d17 2
a18 2
Module_Date             SETS    "29 Jul 2012"
Module_ApplicationDate  SETS    "29-Jul-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.37"
Module_HelpVersion      SETS    "1.37 (29 Jul 2012)"
@


4.35
log
@Add flag bits 5 and 6 to TaskManager_Shutdown
* Two new error messages for invalid shutdown flag combinations
* Removed shutdown_swi poll(byte)word support, when ProvideStartTask is switched out the code now uses misc_pollbyte
* New flag soft_poweroff to save having to keep calling OS_ReadSysInfo
* Use definitions from HighFSI, OsWords, OsBytes, Variables
* Proginfo icon numbers defined
* Permanently enabled TrueMemorySize switched code
* Add a note that the error base is bogus for this module

Version 1.36. Tagged as 'Switcher-1_36'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.36"
Module_Version          SETA    136
d17 2
a18 2
Module_Date             SETS    "28 Jul 2012"
Module_ApplicationDate  SETS    "28-Jul-12"
d21 2
a22 2
Module_FullVersion      SETS    "1.36"
Module_HelpVersion      SETS    "1.36 (28 Jul 2012)"
@


4.34
log
@Remove assembly time switch UseOSD6and7, detect at runtime since the differences are small.
Trim out years of change history -> BlackLog.
Use -1 as a bogus stack pointer, not 'bignum'.
Put resources at the end.

Version 1.35. Tagged as 'Switcher-1_35'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.35"
Module_Version          SETA    135
d17 2
a18 2
Module_Date             SETS    "27 Nov 2011"
Module_ApplicationDate  SETS    "27-Nov-11"
d21 2
a22 2
Module_FullVersion      SETS    "1.35"
Module_HelpVersion      SETS    "1.35 (27 Nov 2011)"
@


4.33
log
@Split Pull "r1,lr,pc" into two, now deprecated.
Not tested, should be OK.

Version 1.34. Tagged as 'Switcher-1_34'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.34"
Module_Version          SETA    134
d17 2
a18 2
Module_Date             SETS    "13 Oct 2011"
Module_ApplicationDate  SETS    "13-Oct-11"
d21 2
a22 2
Module_FullVersion      SETS    "1.34"
Module_HelpVersion      SETS    "1.34 (13 Oct 2011)"
@


4.32
log
@Missing ellipsis on "Configure" menu entry added.
Style guide says so when it leads to a persistent dialogue.

Version 1.33. Tagged as 'Switcher-1_33'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.33"
Module_Version          SETA    133
d17 2
a18 2
Module_Date             SETS    "21 Sep 2011"
Module_ApplicationDate  SETS    "21-Sep-11"
d21 2
a22 2
Module_FullVersion      SETS    "1.33"
Module_HelpVersion      SETS    "1.33 (21 Sep 2011)"
@


4.31
log
@Update to use OSRSI6 header
Detail:
  s/Switcher - Updated to use OSRSI6 header for OS_ReadSysInfo 6 item code instead of a magic number
Admin:
  Tested on rev A2 BB-xM


Version 1.32. Not tagged
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.32"
Module_Version          SETA    132
d17 2
a18 2
Module_Date             SETS    "04 Aug 2011"
Module_ApplicationDate  SETS    "04-Aug-11"
d21 2
a22 2
Module_FullVersion      SETS    "1.32"
Module_HelpVersion      SETS    "1.32 (04 Aug 2011)"
@


4.30
log
@Modified the main window to open at a sensible position and size.

The main window now opens centred on screen and as large as it can without
being too big (i.e. still leave some of the screen free around it).

Also tweaked the open_centre function to calculate the correct amount (was
one pixel out!).

Version 1.32. Tagged as 'Switcher-1_32'
@
text
@d17 2
a18 2
Module_Date             SETS    "04 Feb 2011"
Module_ApplicationDate  SETS    "04-Feb-11"
d22 1
a22 1
Module_HelpVersion      SETS    "1.32 (04 Feb 2011)"
@


4.29
log
@Fix reinitramfsfiler logic
Detail:
  s/Switcher - My previous checkin broke the reinitramfsfiler logic, causing the StartFiler service call to not be sent when it should have been.
Admin:
  Tested properly this time; RAM disc creation/resizing/destruction works properly now.


Version 1.31. Tagged as 'Switcher-1_31'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.31"
Module_Version          SETA    131
d17 2
a18 2
Module_Date             SETS    "21 Nov 2010"
Module_ApplicationDate  SETS    "21-Nov-10"
d21 2
a22 2
Module_FullVersion      SETS    "1.31"
Module_HelpVersion      SETS    "1.31 (21 Nov 2010)"
@


4.28
log
@Fix occasional alignment exceptions on ARMv6+
Detail:
  s/Switcher - As described in bug #256, sometimes the Switcher will crash if the task display window is open while launching Edit. The cause was that single_resize was not checking for the case that dragBar==-1 or dragBar==-2, resulting in an alignment fault when attempting to load icb_taskage from the icon block.
  Also fixed reinitramfsfiler to cope with the possibility of dragBar being a top bit set pointer.
Admin:
  Tested on BB-xM rev A3.
  Fixes bug #256.


Version 1.30. Tagged as 'Switcher-1_30'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.30"
Module_Version          SETA    130
d17 2
a18 2
Module_Date             SETS    "14 Nov 2010"
Module_ApplicationDate  SETS    "14-Nov-10"
d21 2
a22 2
Module_FullVersion      SETS    "1.30"
Module_HelpVersion      SETS    "1.30 (14 Nov 2010)"
@


4.27
log
@quick change to clean up switcher info box text
Detail:
  (list files and functions that have changed)
Admin:
  (highlight level of testing that has taken place)
  (bugfix number if appropriate)


Version 1.29. Not tagged
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.29"
Module_Version          SETA    129
d17 2
a18 2
Module_Date             SETS    "19 Jan 2010"
Module_ApplicationDate  SETS    "19-Jan-10"
d21 2
a22 2
Module_FullVersion      SETS    "1.29"
Module_HelpVersion      SETS    "1.29 (19 Jan 2010)"
@


4.26
log
@updated copyright info etc prior to RISC OS 5.15 release
Detail:
  (list files and functions that have changed)
Admin:
  (highlight level of testing that has taken place)
  (bugfix number if appropriate)


Version 1.29. Tagged as 'Switcher-1_29'
@
text
@d17 2
a18 2
Module_Date             SETS    "18 Jan 2010"
Module_ApplicationDate  SETS    "18-Jan-10"
d22 1
a22 1
Module_HelpVersion      SETS    "1.29 (18 Jan 2010)"
@


4.25
log
@	updated copyright date in proginfo
Detail:
Admin:


Version 1.28. Tagged as 'Switcher-1_28'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.2.
d14 2
a15 2
Module_MajorVersion     SETS    "1.28"
Module_Version          SETA    128
d17 2
a18 2
Module_Date             SETS    "16 Feb 2006"
Module_ApplicationDate  SETS    "16-Feb-06"
d20 3
a22 3
Module_ComponentPath    SETS    "RiscOS/Sources/Desktop/Switcher"
Module_FullVersion      SETS    "1.28"
Module_HelpVersion      SETS    "1.28 (16 Feb 2006)"
@


4.24
log
@  *StartDesktopTask and SWI TaskManager_StartTask are now safe to be called
  from callbacks.
Detail:
  Turned interrupts off while the user mode code manipulates its pollword and
  delinks tasks from the linked list.
Admin:
  Not tested, but should be a safe change.

Version 1.27. Tagged as 'Switcher-1_27'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.27"
Module_Version          SETA    127
d17 2
a18 2
Module_Date             SETS    "15 Sep 2005"
Module_ApplicationDate  SETS    "15-Sep-05"
d21 2
a22 2
Module_FullVersion      SETS    "1.27"
Module_HelpVersion      SETS    "1.27 (15 Sep 2005)"
@


4.23
log
@  Modified to know some new OS memory allocations.
Detail:
  Changed s.Switcher
Admin:
  Updated from Kev's machine by Mike H.

Version 1.26. Tagged as 'Switcher-1_26'
@
text
@d3 1
a3 1
; Last processed by srccommit version: 1.68.
d14 2
a15 2
Module_MajorVersion     SETS    "1.26"
Module_Version          SETA    126
d17 2
a18 2
Module_Date             SETS    "21 Jun 2004"
Module_ApplicationDate  SETS    "21-Jun-04"
d21 2
a22 2
Module_FullVersion      SETS    "1.26"
Module_HelpVersion      SETS    "1.26 (21 Jun 2004)"
@


4.22
log
@Buffer for 'New task' writable icons increased from 128 to 1024 bytes.

Version 1.25. Tagged as 'Switcher-1_25'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.25"
Module_Version          SETA    125
d17 2
a18 2
Module_Date             SETS    "21 Feb 2003"
Module_ApplicationDate  SETS    "21-Feb-03"
d21 2
a22 2
Module_FullVersion      SETS    "1.25"
Module_HelpVersion      SETS    "1.25 (21 Feb 2003)"
@


4.21
log
@Bug fix from Kevin for the RAMFSFiler not always appearing when dragging
the slider bar.
Chnage to resources to refer to "Desktop settings" rather than the obtuse
"Desktop boot"

Version 1.24. Tagged as 'Switcher-1_24'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.24"
Module_Version          SETA    124
d17 2
a18 2
Module_Date             SETS    "11 Jan 2003"
Module_ApplicationDate  SETS    "11-Jan-03"
d21 2
a22 2
Module_FullVersion      SETS    "1.24"
Module_HelpVersion      SETS    "1.24 (11 Jan 2003)"
@


4.20
log
@Changed the old Key$Acorn and Key$Menu support to Key$Red/Green/Blue.

Version 1.23. Tagged as 'Switcher-1_23'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.23"
Module_Version          SETA    123
d17 2
a18 2
Module_Date             SETS    "28 Nov 2002"
Module_ApplicationDate  SETS    "28-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "1.23"
Module_HelpVersion      SETS    "1.23 (28 Nov 2002)"
@


4.19
log
@Addition of "Configure" to the menu.
This entry will be greyed out if on starting there is nothing in
Boot$OSVersion,otherwise it will choose where it looks for configure
based on whether it is >=350 much like the DeskRun obey file did.
Resources updated to match.

Version 1.22. Tagged as 'Switcher-1_22'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.22"
Module_Version          SETA    122
d17 2
a18 2
Module_Date             SETS    "22 Nov 2002"
Module_ApplicationDate  SETS    "22-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "1.22"
Module_HelpVersion      SETS    "1.22 (22 Nov 2002)"
@


4.18
log
@Moved dynamic areas section up above system section.
Improved some redraws.
Added new areas to make the total display add up (requires new Kernel to get
correct figures).
Fixed dragging to get nicer numbers.
Fixed 4K "negative bar" plotting problem.

Version 1.21. Tagged as 'Switcher-1_21'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.21"
Module_Version          SETA    121
d17 2
a18 2
Module_Date             SETS    "07 Nov 2002"
Module_ApplicationDate  SETS    "07-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "1.21"
Module_HelpVersion      SETS    "1.21 (07 Nov 2002)"
@


4.17
log
@Fixed restarting of desktop Exit - the code was already there to use R2
returned from Wimp_Poll to determine if a SC-F12 was sent from a task or
not, but an overcomplicated Wimp_Poll subroutine was acidentally preserving
R2 over the SWI, so this never worked!
Also fixed the templates so the save box looks okay with 3D windows enabled.
Removed the Ursula version because it contains no useful differences and the
build process will work fine without it.

Version 1.20. Tagged as 'Switcher-1_20'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.20"
Module_Version          SETA    120
d17 2
a18 2
Module_Date             SETS    "01 Nov 2002"
Module_ApplicationDate  SETS    "01-Nov-02"
d21 2
a22 2
Module_FullVersion      SETS    "1.20"
Module_HelpVersion      SETS    "1.20 (01 Nov 2002)"
@


4.16
log
@Switcher hypenates the date it gets from OS_Byte 0
Where the OS reports it supports it,power off is performed by calling
OS_Reset with a magic word in R0 rather than peeking IOMD directly.
Templates altered to wordwrap the "shutdown" and "powrdown" boxes for users
with non Homerton font.
CTRL-SH-F12 followed by CTRL-SH-F12 cancels any pending 5s power off
callback which would otherwise have been very annoying!
Info box font is noted from the templates file rather than being hardwired
Iconbar icon name changed to "taskmanager" to allow reuse of "switcher".

Version 1.19. Tagged as 'Switcher-1_19'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.19"
Module_Version          SETA    119
d17 2
a18 2
Module_Date             SETS    "26 Oct 2002"
Module_ApplicationDate  SETS    "26-Oct-02"
d21 2
a22 2
Module_FullVersion      SETS    "1.19"
Module_HelpVersion      SETS    "1.19 (26 Oct 2002)"
@


4.15
log
@ProgInfo box updated.

Version 1.18. Tagged as 'Switcher-1_18'
@
text
@d3 1
d10 1
a10 2
                        GBLS    Module_ApplicationDate2
                        GBLS    Module_ApplicationDate4
d14 2
a15 2
Module_MajorVersion     SETS    "1.18"
Module_Version          SETA    118
d17 2
a18 3
Module_Date             SETS    "10 May 2001"
Module_ApplicationDate2 SETS    "10-May-01"
Module_ApplicationDate4 SETS    "10-May-2001"
d21 2
a22 2
Module_FullVersion      SETS    "1.18"
Module_HelpVersion      SETS    "1.18 (10 May 2001)"
@


4.14
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 1.17. Tagged as 'Switcher-1_17'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.17"
Module_Version          SETA    117
d17 3
a19 3
Module_Date             SETS    "16 Mar 2001"
Module_ApplicationDate2 SETS    "16-Mar-01"
Module_ApplicationDate4 SETS    "16-Mar-2001"
d22 2
a23 2
Module_FullVersion      SETS    "1.17"
Module_HelpVersion      SETS    "1.17 (16 Mar 2001)"
@


4.13
log
@
  * Removed dependency on obsolete STB flag.

Detail:

  * No longer relies on the STB flag; instead utilises "Hdr:UserIF.<UserIF>"
    to provide the Embedded_UI flag.

    Desktop builds include support for Hotkeys and provide the iconbar icon;
    Embedded builds do not.

Admin:

  * Built and tested on Lazarus 32-bit build.  Code is binary identical to
    previous versions that relied on the STB flag in both the Desktop and
    Embedded variants.

  * Requires HdrSrc 1.17 or later.

Version 1.16. Tagged as 'Switcher-1_16'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.16"
Module_Version          SETA    116
d17 3
a19 3
Module_Date             SETS    "01 Mar 2001"
Module_ApplicationDate2 SETS    "01-Mar-01"
Module_ApplicationDate4 SETS    "01-Mar-2001"
d22 2
a23 2
Module_FullVersion      SETS    "1.16"
Module_HelpVersion      SETS    "1.16 (01 Mar 2001)"
@


4.12
log
@  Fixed directory structure to aid BBE and use of standard macros.
Detail:
  Ursula builds had been missing their correct resources due to the
    weird structure of this module.  A proper Resources.${USERIF}.${LOCALE}
    structure has been imposed which fixes this, and makes the BBE resource
    export work as required.
Admin:
  Tested briefly.
  Required by BBE builds.

Version 1.15. Tagged as 'Switcher-1_15'
@
text
@d14 2
a15 2
Module_MajorVersion     SETS    "1.15"
Module_Version          SETA    115
d17 3
a19 3
Module_Date             SETS    "08 Jan 2001"
Module_ApplicationDate2 SETS    "08-Jan-01"
Module_ApplicationDate4 SETS    "08-Jan-2001"
d22 2
a23 2
Module_FullVersion      SETS    "1.15"
Module_HelpVersion      SETS    "1.15 (08 Jan 2001)"
@


4.11
log
@Made 32-bit compatible.

Version 1.14. Tagged as 'Switcher-1_14'
@
text
@d9 7
a15 2
Module_MajorVersion     SETS    "1.14"
Module_Version          SETA    114
d17 7
a23 2
Module_Date             SETS    "25 Apr 2000"
Module_FullVersion      SETS    "1.14"
@


4.10
log
@  Trivial bug fix.
Detail:
  *Help Desktop_TaskManager printed the main help message twice instead of
  the help followed by the syntax owing to a one character typo. Fixed.
Admin:
  Not tested.

Version 1.13. Tagged as 'Switcher-1_13'
@
text
@d9 2
a10 2
Module_MajorVersion     SETS    "1.13"
Module_Version          SETA    113
d12 2
a13 2
Module_Date             SETS    "14 Apr 2000"
Module_FullVersion      SETS    "1.13"
@


4.9
log
@  Heroname feature made more resilient to the absence of the hero list.
Detail:
  The Switcher module assumed that immediately following the ROM chain, it
    would find the hero list.  WHen it didn't, it just erased the RMA with
    a copy of the ROM padding data (0xFF bytes).
Admin:
  Tested in Ursula build.

Version 1.12. Tagged as 'Switcher-1_12'
@
text
@d9 2
a10 2
Module_MajorVersion     SETS    "1.12"
Module_Version          SETA    112
d12 2
a13 2
Module_Date             SETS    "09 Mar 2000"
Module_FullVersion      SETS    "1.12"
@


4.8
log
@  Added Ursula Resources
Detail:
  Added Resources/UK/Ursula.  Changed Makefile check for
  Resources.<Locale>.<UserIF>.<filename>.  If present export it rather
  than Resources.<Locale>.<filename>.
Admin:
  Tested on ONC2UK builds (previous behaviour preserved) and Ursula.

Version 1.11. Tagged as 'Switcher-1_11'
@
text
@d4 10
a13 10
			GBLS	Module_MajorVersion
			GBLA    Module_Version
			GBLS	Module_MinorVersion
			GBLS	Module_Date
			GBLS	Module_FullVersion
Module_MajorVersion	SETS    "1.11"
Module_Version          SETA    111
Module_MinorVersion	SETS	""
Module_Date		SETS    "09 Nov 1999"
Module_FullVersion      SETS    "1.11"
@


4.7
log
@Ursula branch merged.
Doesn't attempt to use OS_DynamicArea 6 and 7 unless the symbol
OSD6and7Kernel has been defined - so when someone adds these to the trunk
Kernel, define that symbol in Hdr:RISCOS.

Version 1.10. Tagged as 'Switcher-1_10'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "1.10"
Module_Version          SETA    110
d12 2
a13 2
Module_Date		SETS    "06 Sep 1999"
Module_FullVersion      SETS    "1.10"
@


4.6
log
@Service call table added.

Version 1.09. Tagged as 'Switcher-1_09'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "1.09"
Module_Version          SETA    109
d12 2
a13 2
Module_Date		SETS    "05 Aug 1999"
Module_FullVersion      SETS    "1.09"
@


4.5
log
@Modified to use LocalRes$Path

Version 1.08. Tagged as 'Switcher-1_08'
@
text
@d9 2
a10 2
Module_MajorVersion	SETS    "1.08"
Module_Version          SETA    108
d12 2
a13 2
Module_Date		SETS    "22 Apr 1999"
Module_FullVersion      SETS    "1.08"
@


4.4
log
@Changed to cope with new Hdr:CMOS

Version 1.07. Tagged as 'Switcher-1_07'
@
text
@d8 3
a10 2
Module_MajorVersion	SETS    "1.07"
Module_Version          SETA    107
d12 3
a14 2
Module_Date		SETS    "19 Oct 1998"
		        END
@


4.3
log
@Modified to behave sensibly in an NC/STB build.

Version 1.06. Tagged as 'Switcher-1_06'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "1.06"
Module_Version          SETA    106
d11 1
a11 1
Module_Date		SETS    "16 Oct 1998"
@


4.2
log
@Changed to use srccommit.
Removal of *ChangeDynamicArea folded in from Ursula branch.

Version 1.05. Tagged as 'Switcher-1_05'
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "1.05"
Module_Version          SETA    105
d11 1
a11 1
Module_Date		SETS    "01 Oct 1998"
@


4.1
log
@created by srccommit.
@
text
@d8 2
a9 2
Module_MajorVersion	SETS    "1.04"
Module_Version          SETA    104
@
