head	4.5;
access;
symbols
	RO_5_07:4.5
	nicke_Wimp_3_96M:4.1.7.7
	nicke_Wimp_3_96:4.1.7.7
	jfarrell_NCWimp_3_96:4.1.7.7
	afrost_NC2_Generic:4.1.7.5
	Spinner_B20_2:4.1.7.5
	Spinner_19_3:4.1.7.4
	Spinner_B18:4.1.7.4
	Spinner_B17:4.1.7.4
	Spinner_B15:4.1.7.4
	Spinner_B14:4.1.7.3
	Spinner_B13:4.1.7.3
	Spinner_B12:4.1.7.2
	Spinner_B10:4.1.7.2
	Spin_merge_7May97:4.1.7.1
	ARTtmp_bp:4.1.7.1
	Spinner_B7:4.1.7.2
	RO_3_71:4.1.3.2
	ARTtmp_merge:4.1.7.1.2.8
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	RCA:4.3.0.4
	Spin_merge:4.1.7.7
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.5
date	97.05.07.14.15.26;	author kbracey;	state dead;
branches;
next	4.4;

4.4
date	97.05.01.18.14.56;	author kbracey;	state Exp;
branches;
next	4.3;

4.3
date	97.01.31.17.14.01;	author rbuckley;	state Exp;
branches;
next	4.2;

4.2
date	97.01.13.13.24.57;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.30.47;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.30.47;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.32.54;	author nturton;	state Exp;
branches
	4.1.3.1.2.1;
next	4.1.3.2;

4.1.3.2
date	97.05.01.14.30.31;	author kbracey;	state Exp;
branches;
next	;

4.1.3.1.2.1
date	97.04.30.11.40.00;	author kbracey;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.24.32;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.22.06;	author nturton;	state Exp;
branches
	4.1.7.1.2.1;
next	4.1.7.2;

4.1.7.2
date	97.04.30.16.50.36;	author scormie;	state Exp;
branches;
next	4.1.7.3;

4.1.7.3
date	97.06.11.10.04.43;	author scormie;	state Exp;
branches;
next	4.1.7.4;

4.1.7.4
date	97.07.02.11.02.05;	author arodger;	state Exp;
branches;
next	4.1.7.5;

4.1.7.5
date	97.07.28.14.31.14;	author jcoxhead;	state Exp;
branches;
next	4.1.7.6;

4.1.7.6
date	98.06.25.08.58.41;	author scormie;	state Exp;
branches;
next	4.1.7.7;

4.1.7.7
date	98.07.24.10.41.06;	author nturton;	state Exp;
branches;
next	;

4.1.7.1.2.1
date	97.04.10.13.51.14;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.2;

4.1.7.1.2.2
date	97.04.14.12.21.56;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.3;

4.1.7.1.2.3
date	97.04.14.13.35.05;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.4;

4.1.7.1.2.4
date	97.04.14.15.29.06;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.5;

4.1.7.1.2.5
date	97.04.14.15.46.41;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.6;

4.1.7.1.2.6
date	97.04.14.21.55.55;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.7;

4.1.7.1.2.7
date	97.04.17.16.43.46;	author kbracey;	state Exp;
branches;
next	4.1.7.1.2.8;

4.1.7.1.2.8
date	97.04.28.16.49.53;	author kbracey;	state dead;
branches;
next	;


desc
@@


4.5
log
@ARTtmp branch folded in
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;


                LEADR   Module_LoadAddr

                GBLL    true
                GBLL    false
                GBLL    hostvdu
                GBLL    PokeBorder
                GBLL    ErrorServiceCall
                GBLL    NewErrorSystem
                GBLL    WatchdogTimer
                GBLL    fixrmatools
                GBLL    UseClipX0
                GBLL    UseDynamicArea
                GBLL    hvblip
                GBLL    mousecache
                GBLL    togglebits
                GBLL    Mode22
                GBLL    ChildWindows
                GBLL    AutoScroll
                GBLL    BounceClose
                GBLL    tilewithspriteops
                GBLL    tasking
                GBLL    switching
                GBLL    chwidth
                GBLL    standalone
                GBLL    fastborders
                GBLL    slabinout
                GBLL    windowsprite
                GBLL    outlinefont
                GBLL    Medusa
                GBLL    Bits30and23
                GBLL    RealDarwin
                GBLL    DebugMemory
                GBLL    StickyMenus
                GBLL    NoDarwin
                GBLL    AllowMatrix
                GBLL    SnapShot
                GBLL    FreePoolWCF
                GBLL    DoubleIcon
                GBLL    Stork
		GBLL	NoCommandPrompt
		GBLL	DontCheckModeOnInit		; Added 13/9/95, RWB
		GBLL    ShrinkableAreas
                GBLL    BlendedFonts
                GBLL    KeyboardMenus
                GBLL    DeleteRight
                GBLL    DisableShiftF12
                GBLL    NCMenus
                GBLL    Twitter
                GBLL    RegisterWIMPSymbolFont
                GBLL    NKmessages1
                GBLL    NKmessages2
                GBLL    UseAMBControl
                GBLL    StrongARM
                GBLL    SAnaffsilicon

;------------------------------------------------------------------------------
;
; The following variables control prototype features - it is strongly
; suggested that these are only used in control environments and are set to
; false for release versions of the Window Manager.
;

;
; "redrawlast"  makes the redraw event lowest priority (except for null) a la Windows,
;               but requires alot more work to make it work sensibly as it a horrible
;               hack to see what would happen.
;
;               See "PrivateDoc.RedrawLast" for some further thoughts.
;
                GBLL    redrawlast
redrawlast      SETL    {FALSE}

;------------------------------------------------------------------------------

                GBLL    Swapping

                GBLL    debug
                GBLL    debugnk
                GBLL    debugpk
                GBLL    debugptr
                GBLL    debugtmp
                GBLL    debugfp
                GBLL    debugsv
                GBLL    debugdy
                GBLL    debugsw
                GBLL    debugco
                GBLL    debugxx
                GBLL    debugx1
                GBLL    debugic
                GBLL    debugicb
                GBLL    debugsc
                GBLL    debugms
                GBLL    debugextent
                GBLL    debugtask
                GBLL    debugtask1
                GBLL    debugtask2
                GBLL    debugtask3
                GBLL    debugtask4
                GBLL    debugints
                GBLL    debugescape
                GBLL    debugcrw
                GBLL    debugopn
                GBLL    debugchild
                GBLL    debugmode
                GBLL    debugbpr
                GBLL    debugswp
                GBLL    debugspr
                GBLL    debugbo
                GBLL    debugvalid
                GBLL    debugfl
                GBLL    debugam
                GBLL    debugff
                GBLL    debugub
                GBLL    debugval
                GBLL    debugcheck
                GBLL    debugerr
                GBLL    debugautoopen
                GBLL    debugrma
                GBLL    debugperth
                GBLL    debugcolours
                GBLL    debugsprite
                GBLL    debugmsgsel
                GBLL    debugmenu
                GBLL    debugtools
                GBLL    debugtools2
                GBLL    debugborders
                GBLL    debuginverse
                GBLL    debugfont
                GBLL    debugfcol
                GBLL    debugdie
                GBLL    debugsystmpl
                GBLL    debugkey
                GBLL    debugscroll
                GBLL    debugpoll
                GBLL    debugmenuparam
                GBLL    debugL40
                GBLL    debugmenuw
                GBLL    debugexit
                GBLL    debugtemp
                GBLL    debugsm
                GBLL    debugomd
                GBLL    debugmjs1
                GBLL    debugmjs2
                GBLL    debugmjs3
		GBLL	debugmjs4

                GBLL    sixteenmeg

true            SETL    {TRUE}
false           SETL    {FALSE}

debugextent     SETL    false

sixteenmeg      SETL    false           ; if true, assume app space ends at 16 meg.
DebugMemory     SETL    false
DoubleIcon      SETL    false           ; allow double-clicking on icon bar

Stork           SETL    true            ; try saving power by calling Portable_Idle

tasking         SETL    true            ; multi-tasking
Medusa          SETL    true            ; support Medusa Memory management
switching       SETL    true            ; switch application memory
chwidth         SETL    true            ; set char size to 16x32 OS units
BounceClose     SETL    false           ; debounce close icon, sadly fails for anything that
                                        ; then does a get pointer info to check which mouse button
standalone      SETL    false           ; include messages / templates
fastborders     SETL    true            ; use PutSpriteAtUserCoords for border plotting
fixrmatools     SETL    false
slabinout       SETL    false           ; slab in selected 'slab out' icons.
tilewithspriteops SETL  false
windowsprite    SETL    true            ; use tile_1 for colour 1 work areas
; "outlinefont" replaces VDU 5 rendering of text with an outline font
outlinefont     SETL    true
PokeBorder      SETL    false           ; controls border colour on portables
ErrorServiceCall  SETL  true            ; send service call for Wimp_ReportError
NewErrorSystem  SETL    true            ; enable watchdog and so forth
Bits30and23     SETL    false           ; use bits 30 and 23 of error number
WatchdogTimer   SETL    false           ; use timer interupt for watchdog
UseClipX0       SETL    false           ; use clipx0 rather than call kernel
UseDynamicArea  SETL    true            ; use a dynamic area on medusa for the sprite pool
Swapping        SETL    false           ; Swap tasks out to disk.
hvblip          SETL    true            ; allow blips on scroll bars
mousecache      SETL    false           ; cache mouse position
togglebits      SETL    true            ; shift toggle thingy
AutoScroll      SETL    false           ; automatically add scroll bars in low res.
Mode22          SETL    false:LAND:AutoScroll  ; cater for low res modes
RealDarwin      SETL    false           ; use bitmapped darwin font
NoDarwin        SETL    true            ; don't even alias it.
StickyMenus     SETL    false
AllowMatrix     SETL    false
FreePoolWCF     SETL    true
SnapShot        SETL    false
ChildWindows    SETL    true            ; support for nested child windows

NoCommandPrompt	SETL	true		; Don't show "Press SPACE..." when closing command window
DontCheckModeOnInit SETL true		; Don't validate the configured Wimp mode in module init, do it on startup
ShrinkableAreas SETL    true:LAND:Medusa        ; Support shrinkable dynamic areas
BlendedFonts    SETL    true            ; Blend fonts directly with window backgrounds
KeyboardMenus   SETL    true            ; Allow keyboard control of menus
DeleteRight     SETL    true            ; Delete key deletes right
DisableShiftF12 SETL    true            ; Disable Shift-F12 iconbar toggling
NCMenus         SETL    false           ; Use NC menu style
Twitter         SETL    true            ; Anti-twitter on redraws
RegisterWIMPSymbolFont SETL false       ; Register WIMPSymbol font
NKmessages1     SETL    false           ; message queue optimisation (using lastpointer)
NKmessages2     SETL    true            ; message queue optimisation (avoid memory change messages clogging up the queue)
UseAMBControl   SETL    false            ; whether to delegate task memory management to AMBControl
StrongARM       SETL    false
SAnaffsilicon   SETL    true :LAND: StrongARM    ; fudges for naff prototype StrongARM silicon

hostvdu         SETL    false           ; destination for debug output
debug_flush     SETL    true            ; flushing if going to file

debug           SETL    false           ; ONLY FALSE IF NO DEBUGGING
debugomd        SETL    false
debugsm         SETL    false
debugnk         SETL    false           ; Neil's special debugs
debugpk         SETL    false           ; special 2
debugptr        SETL    false           ; pointer window
debugtmp        SETL    false           ; templates
debugfp         SETL    false           ; FP register saving
debugsv         SETL    false           ; all service calls
debugdy         SETL    false           ; ChangeDynamicArea monitoring
debugsw         SETL    false           ; switching
debugco         SETL    false           ; command window
debugxx         SETL    false           ; misc
debugx1         SETL    false           ; misc II
debugic         SETL    false           ; icons
debugicb        SETL    false           ; icon bar
debugsc         SETL    false           ; set caret
debugms         SETL    false           ; message passing
debugtask       SETL    false           ; for wholesale debugging!
debugtask1      SETL    false           ; for exception handlers etc.
debugtask2      SETL    false           ; for entry points
debugtask3      SETL    false           ; check for single-tasking errors
debugtask4      SETL    false           ; Idle poll performance monitoring
debugints       SETL    false
debugescape     SETL    false           ; trap escape enabled on Wimp_Poll
debugcrw        SETL    false           ; window creation
debugopn        SETL    false           ; window opening
debugchild      SETL    false           ; child windows
debugmode       SETL    false           ; mode changing
debugbpr        SETL    false           ; braindead panic redraw debugging
debugswp        SETL    false           ; Swapping of tasks to disk.
debugspr        SETL    false           ; Wimp sprite ops
debugbo         SETL    false           ; Special borders
debugvalid      SETL    false           ; Service_ValidateAddress
debugfl         SETL    false           ; Filter handling debugging
debugam         SETL    false           ; Auto opening of submenus
debugff         SETL    false           ; Fancy font for system text
debugub         SETL    false           ; User definable scroll bars
debugval        SETL    false           ; New validation string commands (K)
debugcheck      SETL    true            ; Check for inconsistent window stacks and flags
debugerr        SETL    true            ; Wimp_ReportError and errors in general
debugautoopen   SETL    false           ; For opening of wimp's own windows
debugrma        SETL    false
debugperth      SETL    false           ; For Perth power managerment
debugcolours    SETL    false           ; For use of ColourTrans
debugsprite     SETL    false           ; For sprite caching
debugmsgsel     SETL    false           ; Selective message passing
debugmenu       SETL    false           ; New menu handling (indirection and bits)
debugtools      SETL    false           ; Tool caching and ToolSprite commands
debugtools2     SETL    false           ; Plotting and clicking
debugborders    SETL    false           ; border plotting on icons
debuginverse    SETL    false           ; Colour inversion/highlighting
debugfont       SETL    false           ; anti-aliased fonts in icons
debugfcol       SETL    false           ; colour of antialiased fonts
debugdie        SETL    false           ; Die entry
debugsystmpl    SETL    false           ; Loading Wimp's templates
debugkey        SETL    false           ; ProcessKey handling
debugscroll     SETL    false           ; Funky scroll bars
debugpoll       SETL    false           ; PollWord list management
debugmenuparam  SETL    false           ; CreateMenu parameters
debugexit       SETL    false           ; ExitWimp
debugL40        SETL    false           ; Fancy font in L40-type icons
debugmenuw      SETL    false           ; Automatic calculation of menu width
debugtemp       SETL    false
debugmjs1       SETL    false           ; for debugging new memory management stuff
debugmjs2       SETL    false           ; for debugging new memory management stuff
debugmjs3       SETL    false           ; for debugging new memory management stuff
debugmjs4	SETL	false		; Mike's debugs 4 (TransferBlock)

      [ false   ; for ChildWindows testing - remove this when integrating with original sources
Stork           SETL    false
BlendedFonts    SETL    false           ; Blend fonts directly with window backgrounds
KeyboardMenus   SETL    false           ; Allow keyboard control of menus
DeleteRight     SETL    false
@


4.4
log
@Merged in RO_3_71
@
text
@@


4.3
log
@Removed declaration of SWI number in s.options.
@
text
@d161 1
d297 1
d303 1
a303 10
DeleteRight     SETL    false           ; Delete key deletes right
DisableShiftF12 SETL    false           ; Disable Shift-F12 iconbar toggling
NCMenus         SETL    false           ; Use NC menu style
Twitter         SETL    false           ; Anti-twitter on redraws
NoCommandPrompt SETL    false           ; Don't show "Press SPACE..." when closing command window
ShrinkableAreas SETL    false           ; Support shrinkable dynamic areas
      ]

        END

@


4.2
log
@Merged WIMP imported
@
text
@a225 2
AMBControl_SWI * &20070                 ; SWI code for AMBControl (X version) - could be a module, could be in kernel

@


4.1
log
@Initial revision
@
text
@d33 1
d56 15
a70 1

d119 1
d131 1
d158 3
d181 2
a182 2
standalone      SETL    false            ; include messages / templates
fastborders     SETL    true           ; use PutSpriteAtUserCoords for border plotting
d184 1
a184 1
slabinout       SETL    false            ; slab in selected 'slab out' icons.
d189 1
a189 1
PokeBorder      SETL    false            ; controls border colour on portables
d194 1
a194 1
UseClipX0       SETL    false            ; use clipx0 rather than call kernel
d197 1
a197 1
hvblip          SETL    true           ; allow blips on scroll bars
d199 1
a199 1
togglebits      SETL    true            ; shift toggle thingy 
d208 17
d226 1
d228 2
a229 2
hostvdu         SETL    true            ; destination for debug output
debug_flush     SETL    false           ; flushing if going to file
d258 1
d270 2
a271 1
debugerr        SETL    false           ; Wimp_ReportError and errors in general
d295 17
a312 1
	END
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@d55 1
a55 10
		GBLL	NoCommandPrompt
		GBLL	DontCheckModeOnInit		; Added 13/9/95, RWB
		GBLL    ShrinkableAreas
                GBLL    BlendedFonts
                GBLL    KeyboardMenus
                GBLL    DeleteRight
                GBLL    DisableShiftF12
                GBLL    NCMenus
                GBLL    Twitter
                GBLL    RegisterWIMPSymbolFont
d161 2
a162 2
standalone      SETL    false           ; include messages / templates
fastborders     SETL    true            ; use PutSpriteAtUserCoords for border plotting
d164 1
a164 1
slabinout       SETL    false           ; slab in selected 'slab out' icons.
d169 1
a169 1
PokeBorder      SETL    false           ; controls border colour on portables
d174 1
a174 1
UseClipX0       SETL    false           ; use clipx0 rather than call kernel
d177 1
a177 1
hvblip          SETL    true            ; allow blips on scroll bars
d179 1
a179 1
togglebits      SETL    true            ; shift toggle thingy
a188 10
NoCommandPrompt	SETL	true		; Don't show "Press SPACE..." when closing command window
DontCheckModeOnInit SETL true		; Don't validate the configured Wimp mode in module init, do it on startup
ShrinkableAreas SETL    true:LAND:Medusa        ; Support shrinkable dynamic areas
BlendedFonts    SETL    true            ; Blend fonts directly with window backgrounds
KeyboardMenus   SETL    true            ; Allow keyboard control of menus
DeleteRight     SETL    true            ; Delete key deletes right
DisableShiftF12 SETL    true            ; Disable Shift-F12 iconbar toggling
NCMenus         SETL    false           ; Use NC menu style
Twitter         SETL    true            ; Anti-twitter on redraws
RegisterWIMPSymbolFont SETL false       ; Register WIMPSymbol font
@


4.1.7.2
log
@Modify UpCall handler; restore font colours before calling Service_WimpReportError at end of SWI Wimp_ReportError.
@
text
@d207 1
a207 1
RegisterWIMPSymbolFont SETL false	; Register WIMPSymbol font
@


4.1.7.3
log
@When building for NCs, use IconHigh in error boxes, use different button
border colours, use replacement Templates file.
@
text
@a64 1
                GBLL    BuildForNC
d198 2
a199 3
BuildForNC      SETL    false
NoCommandPrompt	SETL	BuildForNC	; Don't show "Press SPACE..." when closing command window
DontCheckModeOnInit SETL BuildForNC	; Don't validate the configured Wimp mode in module init, do it on startup
d204 1
a204 1
DisableShiftF12 SETL    BuildForNC      ; Disable Shift-F12 iconbar toggling
d206 2
a207 2
Twitter         SETL    false           ; Anti-twitter on redraws
RegisterWIMPSymbolFont SETL :LNOT: BuildForNC ; Register WIMPSymbol font
@


4.1.7.4
log
@Added code to the upcall proceedure to test for end of line and end of buffer
in error messages.
@
text
@d153 1
a153 1
                
@


4.1.7.5
log
@   Return result from Wimp_Report *before* corrupting it.
@
text
@a213 3
		GBLS	debug_file
debug_file	SETS	"<WimpDebug>"	; trace to a file, opening and closing it

@


4.1.7.6
log
@Added new flag, PreservePointerOnError, to control whether the mouse pointer
state is preserved over errors. This is also dependent on BuildForNC being true.
@
text
@a65 1
                GBLL    PreservePointerOnError
a209 1
PreservePointerOnError SETL BuildForNC  ; Preserve mouse pointer state over errors
@


4.1.7.7
log
@Now uses STB flag to enable non-desktop modes, instead of a fixed list of
machine names.
@
text
@d200 1
a200 1
BuildForNC      SETL    STB
@


4.1.7.1.2.1
log
@AMBControl task switching merged from RO_3_70 branch.
PlotSpritesFromPalette and TwitterOnlyMenus options added.
ChildWindows merged in.
@
text
@a32 1
                GBLL    ChildWindows
d55 3
a57 3
                GBLL    NoCommandPrompt
                GBLL    DontCheckModeOnInit             ; Added 13/9/95, RWB
                GBLL    ShrinkableAreas
a63 1
                GBLL    TwitterOnlyMenus
a64 5
                GBLL    PlotSpritesFromPalette
                GBLL    NKmessages1
                GBLL    NKmessages2
                GBLL    UseAMBControl
                GBLL    StrongARM
a112 1
                GBLL    debugchild
a123 1
                GBLL    debugcheck
a149 3
                GBLL    debugmjs1
                GBLL    debugmjs2
                GBLL    debugmjs3
d158 1
a158 1
sixteenmeg      SETL    false               ; if true, assume app space ends at 16 meg.
d160 1
a160 1
DoubleIcon      SETL    false               ; allow double-clicking on icon bar
d162 1
a162 1
Stork           SETL    true                ; try saving power by calling Portable_Idle
d164 8
a171 8
tasking         SETL    true                ; multi-tasking
Medusa          SETL    true                ; support Medusa Memory management
switching       SETL    true                ; switch application memory
chwidth         SETL    true                ; set char size to 16x32 OS units
BounceClose     SETL    false               ; debounce close icon, sadly fails for anything that
                                            ; then does a get pointer info to check which mouse button
standalone      SETL    false               ; include messages / templates
fastborders     SETL    true                ; use PutSpriteAtUserCoords for border plotting
d173 1
a173 1
slabinout       SETL    false               ; slab in selected 'slab out' icons.
d175 18
a192 17
windowsprite    SETL    true                ; use tile_1 for colour 1 work areas
outlinefont     SETL    true                ; replace VDU 5 rendering of text with outline font
PokeBorder      SETL    false               ; controls border colour on portables
ErrorServiceCall  SETL  true                ; send service call for Wimp_ReportError
NewErrorSystem  SETL    true                ; enable watchdog and so forth
Bits30and23     SETL    false               ; use bits 30 and 23 of error number
WatchdogTimer   SETL    false               ; use timer interupt for watchdog
UseClipX0       SETL    false               ; use clipx0 rather than call kernel
UseDynamicArea  SETL    true                ; use a dynamic area on medusa for the sprite pool
Swapping        SETL    false               ; Swap tasks out to disk.
hvblip          SETL    true                ; allow blips on scroll bars
mousecache      SETL    false               ; cache mouse position
togglebits      SETL    true                ; shift toggle thingy
AutoScroll      SETL    false               ; automatically add scroll bars in low res.
Mode22          SETL    false:LAND:AutoScroll; cater for low res modes
RealDarwin      SETL    false               ; use bitmapped darwin font
NoDarwin        SETL    true                ; don't even alias it.
a196 19
ChildWindows    SETL    true                ; support for nested child windows
PlotSpritesFromPalette SETL true            ; Use palette entries, not translation table
                                            ; (this means funny paletted sprites plot
                                            ; better in 16bpp+ modes)
NoCommandPrompt SETL    false               ; Don't show "Press SPACE..." when closing command window
DontCheckModeOnInit SETL false              ; Don't validate the configured Wimp mode in module init, do it on startup
ShrinkableAreas SETL    false:LAND:Medusa   ; Support shrinkable dynamic areas
BlendedFonts    SETL    false               ; Blend fonts directly with window backgrounds
KeyboardMenus   SETL    false               ; Allow keyboard control of menus
DeleteRight     SETL    false               ; Delete key deletes right
DisableShiftF12 SETL    false               ; Disable Shift-F12 iconbar toggling
NCMenus         SETL    false               ; Use NC menu style
Twitter         SETL    false               ; Anti-twitter on redraws
TwitterOnlyMenus  SETL  true:LAND:Twitter   ; Anti-twitter only menus
RegisterWIMPSymbolFont SETL true            ; Register WIMPSymbol font
NKmessages1     SETL    false               ; message queue optimisation (using lastpointer)
NKmessages2     SETL    true                ; message queue optimisation (avoid memory change messages clogging up the queue)
UseAMBControl   SETL    true                ; whether to delegate task memory management to AMBControl
StrongARM       SETL    true
d198 10
a207 2
hostvdu         SETL    false               ; destination for debug output
debug_flush     SETL    true                ; flushing if going to file
d209 4
a212 1
debug           SETL    false               ; ONLY FALSE IF NO DEBUGGING
d215 20
a234 20
debugnk         SETL    false               ; Neil's special debugs
debugpk         SETL    false               ; special 2
debugptr        SETL    false               ; pointer window
debugtmp        SETL    false               ; templates
debugfp         SETL    false               ; FP register saving
debugsv         SETL    false               ; all service calls
debugdy         SETL    false               ; ChangeDynamicArea monitoring
debugsw         SETL    false               ; switching
debugco         SETL    false               ; command window
debugxx         SETL    false               ; misc
debugx1         SETL    false               ; misc II
debugic         SETL    false               ; icons
debugicb        SETL    false               ; icon bar
debugsc         SETL    false               ; set caret
debugms         SETL    false               ; message passing
debugtask       SETL    false               ; for wholesale debugging!
debugtask1      SETL    false               ; for exception handlers etc.
debugtask2      SETL    false               ; for entry points
debugtask3      SETL    false               ; check for single-tasking errors
debugtask4      SETL    false               ; Idle poll performance monitoring
d236 16
a251 18
debugescape     SETL    false               ; trap escape enabled on Wimp_Poll
debugcrw        SETL    false               ; window creation
debugopn        SETL    false               ; window opening
debugchild      SETL    false               ; child windows
debugmode       SETL    false               ; mode changing
debugbpr        SETL    false               ; braindead panic redraw debugging
debugswp        SETL    false               ; Swapping of tasks to disk.
debugspr        SETL    false               ; Wimp sprite ops
debugbo         SETL    false               ; Special borders
debugvalid      SETL    false               ; Service_ValidateAddress
debugfl         SETL    false               ; Filter handling debugging
debugam         SETL    false               ; Auto opening of submenus
debugff         SETL    false               ; Fancy font for system text
debugub         SETL    false               ; User definable scroll bars
debugval        SETL    false               ; New validation string commands (K)
debugcheck      SETL    true                ; Check for inconsistent window stacks and flags
debugerr        SETL    true                ; Wimp_ReportError and errors in general
debugautoopen   SETL    false               ; For opening of wimp's own windows
d253 20
a272 20
debugperth      SETL    false               ; For Perth power managerment
debugcolours    SETL    false               ; For use of ColourTrans
debugsprite     SETL    false               ; For sprite caching
debugmsgsel     SETL    false               ; Selective message passing
debugmenu       SETL    false               ; New menu handling (indirection and bits)
debugtools      SETL    false               ; Tool caching and ToolSprite commands
debugtools2     SETL    false               ; Plotting and clicking
debugborders    SETL    false               ; border plotting on icons
debuginverse    SETL    false               ; Colour inversion/highlighting
debugfont       SETL    false               ; anti-aliased fonts in icons
debugfcol       SETL    false               ; colour of antialiased fonts
debugdie        SETL    false               ; Die entry
debugsystmpl    SETL    false               ; Loading Wimp's templates
debugkey        SETL    false               ; ProcessKey handling
debugscroll     SETL    false               ; Funky scroll bars
debugpoll       SETL    false               ; PollWord list management
debugmenuparam  SETL    false               ; CreateMenu parameters
debugexit       SETL    false               ; ExitWimp
debugL40        SETL    false               ; Fancy font in L40-type icons
debugmenuw      SETL    false               ; Automatic calculation of menu width
a273 5
debugmjs1       SETL    false               ; for debugging new memory management stuff
debugmjs2       SETL    false               ; for debugging new memory management stuff
debugmjs3       SETL    false               ; for debugging new memory management stuff

        END
d275 1
@


4.1.7.1.2.2
log
@Some obsolete assembly switches removed (chwidth in particular).
Behaviour of scrollbars with large extents improved.
Window tools now press in correctly after a Service_InvalidateCache.
Plotting of solid window tools optimised - background isn't drawn in.
Auto-fronting iconbar added.
Various optimisations, such as multiple OS_WriteI -> OS_WriteN.
HiResMono flag no longer relied on.
"22" tool sprites now chosen for 1x2,2x1 or 1x1 screen modes.
Buttons restored correctly after "application may have gone wrong" error box.
Positioning of outline font text shifted right 2 OS units to match system font.
Parameter of L validation string implemented.
Positioning of outline font "L" (multiple line) icons fixed.
Shift-toggle size behaviour fixed.
Wimp_TransferBlock above 2Gb should be fixed.
Post-rectangle filters implemented.
FPE4 flag added (to use LFM/SFM instead of LDFE/STFE).
Plotting of non-pixel aligned 3d icons fixed.
3d borders now solid in EX0/EY0 modes.
@
text
@d37 3
a42 1
		GBLL	fixslabalignment
a71 2
		GBLL	PoppingIconBar
		GBLL	FPE4
d176 1
d178 2
a185 1
fixslabalignment SETL	true	            ; Fix redraw of non-aligned 3D icons
a226 3
FPE4		SETL	true		    ; assume FPE 4.00+ present
					    ; Icon bar pops to front when pointer at bottom of screen
PoppingIconBar	SETL	true:LAND::LNOT:DisableShiftF12
@


4.1.7.1.2.3
log
@Iconise button added.
@
text
@a70 1
		GBLL	IconiseButton
a227 1
IconiseButton	SETL	true
@


4.1.7.1.2.4
log
@Wimp_TransferBlock fixes from RISC OS 3.71 merged.
@
text
@d160 1
a160 1
                GBLL    debugmjs
a162 1
                GBLL    debugmjs4
d298 3
a300 4
debugmjs        SETL    false               ; Mike's debugs
debugmjs2       SETL    false               ; Mike's debugs 2
debugmjs3       SETL    false               ; Mike's debugs 3
debugmjs4       SETL    false               ; Mike's debugs 4 (TransferBlock)
@


4.1.7.1.2.5
log
@Added prototype ChocolateScreen code.
@
text
@a72 1
		GBLL	ChocolateScreen
d230 1
a230 2
IconiseButton	SETL	true		    ; Windows given iconise button
ChocolateScreen	SETL	true		    ; Clean cached screen after redraw loops
@


4.1.7.1.2.6
log
@Corruption of userblk in oldvisible_knockout (causing data aborts when
input focus changes) fixed.
Care taken to ensure that characters (eg VDU 26) issued by the Wimp don't
trigger a command window.
@
text
@d234 1
a234 1
hostvdu         SETL    true                ; destination for debug output
d251 2
a252 2
debugic         SETL    true                ; icons
debugicb        SETL    true                ; icon bar
d276 2
a277 2
debugcheck      SETL    false               ; Check for inconsistent window stacks and flags
debugerr        SETL    false               ; Wimp_ReportError and errors in general
@


4.1.7.1.2.7
log
@Fixed problem of iconbar corruption when icons added/removed.
Ensured that a window is redrawn if closed then opened immediately.
Merged in changes from 4.1.7.1 to 4.1.7.2 (post-icon filter stuff).
@
text
@d251 2
a252 2
debugic         SETL    false               ; icons
debugicb        SETL    false               ; icon bar
@


4.1.7.1.2.8
log
@Added support for multiple options files (RO310, RO350, RO360, RO370, RCA,
Ursula).
Removed run-time MedusaOS checks.
Enabled correct build for RISC OS 3.1 machines.
Ensured that "freepoolinuse" is cleared before OS_ChangeDynamicArea
is intercepted.
Increased maxrects to 256.
Gave copy filter window handle in R10 (if ChildWindows).
Corrected a few border problems when no toolsprites.
Made toolsprites press in immediately - in particular close and toggle can
now be highlighted.
BounceClose flag no affects all of back,close,iconise and toggle.
Made "L" validation string parsing check manually for presence of a number,
to prevent error from OS_ReadUnsigned trashing MessageTrans' error buffers.
Allow error box buttons to stretch to fit text.
Fixed bug: floating point registers were not being saved unless on a portable.
Integrated some of the Wimp_TransferBlock fixes into Wimp08 from Wimp08s.
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@d55 1
a55 10
		GBLL	NoCommandPrompt
		GBLL	DontCheckModeOnInit		; Added 13/9/95, RWB
		GBLL    ShrinkableAreas
                GBLL    BlendedFonts
                GBLL    KeyboardMenus
                GBLL    DeleteRight
                GBLL    DisableShiftF12
                GBLL    NCMenus
                GBLL    Twitter
                GBLL    RegisterWIMPSymbolFont
d161 2
a162 2
standalone      SETL    false           ; include messages / templates
fastborders     SETL    true            ; use PutSpriteAtUserCoords for border plotting
d164 1
a164 1
slabinout       SETL    false           ; slab in selected 'slab out' icons.
d169 1
a169 1
PokeBorder      SETL    false           ; controls border colour on portables
d174 1
a174 1
UseClipX0       SETL    false           ; use clipx0 rather than call kernel
d177 1
a177 1
hvblip          SETL    true            ; allow blips on scroll bars
d179 1
a179 1
togglebits      SETL    true            ; shift toggle thingy
a188 10
NoCommandPrompt	SETL	true		; Don't show "Press SPACE..." when closing command window
DontCheckModeOnInit SETL true		; Don't validate the configured Wimp mode in module init, do it on startup
ShrinkableAreas SETL    true:LAND:Medusa        ; Support shrinkable dynamic areas
BlendedFonts    SETL    true            ; Blend fonts directly with window backgrounds
KeyboardMenus   SETL    true            ; Allow keyboard control of menus
DeleteRight     SETL    true            ; Delete key deletes right
DisableShiftF12 SETL    true            ; Disable Shift-F12 iconbar toggling
NCMenus         SETL    false           ; Use NC menu style
Twitter         SETL    true            ; Anti-twitter on redraws
RegisterWIMPSymbolFont SETL false       ; Register WIMPSymbol font
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a78 3
                GBLL    debugmjs
                GBLL    debugmjs2
                GBLL    debugmjs3
a195 3
debugmjs        SETL    false           ; Mike's debugs
debugmjs2       SETL    true            ; Mike's debugs 2
debugmjs3       SETL    false           ; Mike's debugs 3
@


4.1.3.2
log
@Version RO_3_71 taken
@
text
@a81 1
		GBLL	debugmjs4
d182 1
a182 1
togglebits      SETL    true            ; shift toggle thingy
d200 1
a200 1
debugmjs2       SETL    false           ; Mike's debugs 2
a201 1
debugmjs4	SETL	false		; Mike's debugs 4 (TransferBlock)
@


4.1.3.1.2.1
log
@Updated from 3.71 CD
@
text
@a81 1
		GBLL	debugmjs4
d182 1
a182 1
togglebits      SETL    true            ; shift toggle thingy
d200 1
a200 1
debugmjs2       SETL    false           ; Mike's debugs 2
a201 1
debugmjs4	SETL	false		; Mike's debugs 4 (TransferBlock)
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
