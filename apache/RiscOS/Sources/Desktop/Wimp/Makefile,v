head	4.25;
access;
symbols
	Wimp-5_62:4.25
	Wimp-5_61:4.23
	Wimp-5_60:4.23
	Wimp-5_59:4.23
	Wimp-5_58:4.23
	Wimp-5_57:4.23
	Wimp-5_56:4.23
	Wimp-5_55:4.23
	Wimp-5_54:4.23
	Wimp-5_53:4.23
	Wimp-5_52:4.23
	Wimp-5_51:4.23
	Wimp-5_50:4.23
	Wimp-5_49:4.23
	Wimp-5_48:4.23
	Wimp-5_47-file1ad:4.23
	Wimp-5_47:4.23
	Wimp-5_46:4.23
	Wimp-5_45:4.23
	Wimp-5_44:4.22
	Wimp-5_43:4.22
	Wimp-5_42:4.22
	Wimp-5_41:4.22
	Wimp-5_40:4.22
	Wimp-5_39:4.22
	Wimp-5_38:4.22
	Wimp-5_37:4.22
	Wimp-5_36:4.22
	Wimp-5_35:4.22
	Wimp-5_34:4.22
	Wimp-5_33:4.22
	Wimp-5_32:4.22
	Wimp-5_31:4.21
	Wimp-5_30:4.20
	Wimp-530-pre4:4.20
	Wimp-5_30-pre3:4.20
	Wimp-5_30-pre2:4.20
	Wimp-5_30-pre1:4.20
	Wimp-5_29:4.20
	Wimp-5_28:4.20
	Wimp-5_27:4.20
	Wimp-5_26:4.20
	Wimp-5_25:4.20
	Wimp-5_24:4.19
	Wimp-5_23:4.19
	Wimp-5_22:4.19
	Wimp-5_21:4.19
	Wimp-5_20:4.19
	Wimp-5_19:4.19
	Wimp-5_18:4.18
	Wimp-5_17:4.17
	Wimp-5_16:4.17
	Wimp-5_15:4.17
	Wimp-5_14:4.17
	Wimp-5_13:4.17
	Wimp-5_12:4.17
	Wimp-5_11:4.17
	Wimp-5_10:4.17
	Wimp-5_09:4.17
	Wimp-5_08:4.17
	Wimp-5_07:4.17
	Wimp-5_06:4.17
	Wimp-5_05:4.16
	Wimp-5_04:4.16
	Wimp-5_03:4.16
	Wimp-5_02:4.16
	Wimp-5_01:4.16
	Wimp-4_66-4_77_2_1:4.14.2.1
	bavison_Threads_dev:4.14.0.2
	bavison_Threads_dev_bp:4.14
	Wimp-5_00:4.16
	Wimp-4_100:4.16
	Wimp-4_99:4.16
	Wimp-4_98:4.16
	Wimp-4_97:4.16
	Wimp-4_96:4.16
	Wimp-4_95:4.16
	Wimp-4_94:4.16
	Wimp-4_93:4.16
	RO_5_07:4.15
	Wimp-4_92:4.15
	Wimp-4_91:4.15
	Wimp-4_90:4.15
	Wimp-4_89:4.15
	Wimp-4_88:4.15
	Wimp-4_87:4.15
	Wimp-4_86:4.15
	Wimp-4_85:4.15
	Wimp-4_84:4.15
	Wimp-4_83:4.15
	Wimp-4_82:4.15
	Wimp-4_81:4.15
	Wimp-4_80:4.15
	Wimp-4_79:4.15
	Wimp-4_78:4.15
	Wimp-4_77:4.15
	Wimp-4_76:4.15
	Wimp-4_75:4.15
	Wimp-4_74:4.15
	Wimp-4_73:4.15
	Wimp-4_72:4.14
	Wimp-4_71:4.14
	Wimp-4_70:4.14
	Wimp-4_69:4.14
	Wimp-4_68:4.14
	Wimp-4_67:4.14
	Wimp-4_66:4.14
	Wimp-4_65:4.14
	Wimp-4_64:4.14
	Wimp-4_63:4.13
	Wimp-4_62:4.13
	Wimp-4_61:4.13
	Wimp-4_60:4.12
	Wimp-4_59:4.12
	Wimp-4_58:4.12
	Wimp-4_36-4_46_2_6:4.10
	Wimp-4_57:4.12
	Alpnet_approved:4.10
	Wimp-4_36-4_46_2_5:4.10
	Wimp-4_56:4.11
	dellis_autobuild_BaseSW:4.11
	Wimp-4_36-4_46_2_4:4.10
	Wimp-4_36-4_46_2_3:4.10
	Wimp-4_55:4.11
	Wimp-4_54:4.11
	Wimp-4_36-4_46_2_2:4.10
	Wimp-4_53:4.11
	Wimp-4_36-4_46_2_1:4.10
	Bethany:4.10.0.2
	Wimp-4_52:4.11
	Wimp-4_51:4.11
	Wimp-4_50:4.11
	Wimp-4_49:4.11
	Wimp-4_48:4.11
	Wimp-4_47:4.11
	Wimp-4_46:4.11
	Wimp-4_45:4.11
	Wimp-4_44:4.11
	Wimp-4_43:4.11
	Wimp-4_42:4.11
	sbrodie_sedwards_16Mar2000:4.10
	Wimp-4_41:4.10
	Wimp-4_40:4.10
	Wimp-4_39:4.10
	Wimp-4_38:4.10
	Wimp-4_37:4.10
	Wimp-4_36:4.10
	Wimp-4_35:4.10
	Wimp-4_34:4.10
	Wimp-4_33:4.10
	Wimp-4_32:4.10
	Wimp-4_31:4.10
	dcotton_autobuild_BaseSW:4.14
	Wimp-4_30:4.10
	Wimp-4_29:4.10
	Wimp-4_28:4.10
	Wimp-4_27:4.10
	Wimp-4_26:4.10
	Wimp-4_25:4.10
	Wimp-4_24:4.10
	Wimp-4_23:4.10
	Wimp-4_22:4.9
	Wimp-4_21:4.9
	Wimp-4_20:4.9
	Wimp-4_19:4.9
	Wimp-4_18:4.9
	Wimp-4_17:4.9
	Wimp-4_16:4.9
	Wimp-4_15:4.9
	Wimp-4_14:4.9
	Wimp-4_13:4.9
	Wimp-4_12:4.9
	mstphens_UrsulaRiscPCBuild_20Nov98:4.4.2.1
	bavison_Wimp-4_11:4.9
	Ursula_RiscPC:4.4.2.1.0.2
	Wimp-4_11:4.9
	Wimp-4_10:4.9
	Wimp-4_09:4.9
	Wimp-4_08:4.8
	Wimp-4_07:4.8
	Wimp-4_06:4.8
	Wimp-4_05:4.8
	Wimp-4_04:4.8
	bavison_Wimp-4_03_noshrinkables:4.8
	Wimp-4_03:4.8
	Wimp-4_02:4.8
	Ursula_merge:4.4.2.1
	bavison_Wimp-4_01:4.8
	Wimp-4_01:4.7
	nicke_Wimp_3_96M:4.1.7.8
	bavison_Wimp-4_00_TRUNK:4.6
	bavison_Wimp-4_00:4.4.2.1
	nicke_Wimp_3_96:4.1.7.7
	mjrobert_Wimp_3_98:4.4
	rthornb_UrsulaBuild-19Aug1998:4.4.2.1
	UrsulaBuild_FinalSoftload:4.4.2.1
	bavison_Wimp-3_99t:4.4.2.1
	rthornb_UrsulaBuild-12Aug1998:4.4.2.1
	bavison_Wimp-3_99s:4.4.2.1
	aglover_UrsulaBuild-05Aug1998:4.4.2.1
	bavison_Wimp-3_99r:4.4.2.1
	rthornb_UrsulaBuild-29Jul1998:4.4.2.1
	bavison_Wimp-3_99q:4.4.2.1
	jfarrell_NCWimp_3_96:4.1.7.7
	rthornb_UrsulaBuild-22Jul1998:4.4.2.1
	bavison_Wimp-3_99p:4.4.2.1
	rthornb_UrsulaBuild-15Jul1998:4.4.2.1
	bavison_Wimp-3_99o:4.4.2.1
	bavison_Wimp-3_99n:4.4.2.1
	rthornb_UrsulaBuild-07Jul1998:4.4.2.1
	bavison_Wimp-3_99m:4.4.2.1
	rthornb_UrsulaBuild-17Jun1998:4.4.2.1
	rthornb_UrsulaBuild-03Jun1998:4.4.2.1
	bavison_Wimp-3_99l:4.4.2.1
	rthornb_UrsulaBuild-27May1998:4.4.2.1
	rthornb_UrsulaBuild-21May1998:4.4.2.1
	bavison_Wimp-3_99k:4.4.2.1
	bavison_Wimp-3_99j:4.4.2.1
	bavison_Wimp-3_99i:4.4.2.1
	bavison_Wimp-3_99h:4.4.2.1
	rthornb_UrsulaBuild_01May1998:4.4.2.1
	bavison_Wimp_399g:4.4.2.1
	bavison_Wimp_399f:4.4.2.1
	afrost_NC2_Generic:4.1.7.7
	bavison_Wimp_399e:4.4.2.1
	bavison_Wimp_399d:4.4.2.1
	bavison_Wimp_399c:4.4.2.1
	Wimp_3_98:4.4
	kbracey_AW97:4.4
	Spinner_B20_2:4.1.7.6
	Spinner_19_3:4.1.7.6
	Spinner_B18:4.1.7.5
	Spinner_B17:4.1.7.5
	Spinner_B15:4.1.7.5
	Spinner_B14:4.1.7.5
	Spinner_B13:4.1.7.4
	Spinner_B12:4.1.7.3
	Spinner_B10:4.1.7.3
	Daytona:4.4.0.4
	Daytona_bp:4.4
	Ursula:4.4.0.2
	Ursula_bp:4.4
	Wimp_3_91:4.3
	Spin_merge_7May97:4.1.7.1
	ARTtmp_bp:4.1.7.2
	Spinner_B7:4.1.7.3
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.2.2.2
	Spin_3Apr97:4.1.7.2
	ARTtmp:4.1.7.2.0.2
	Spin_merge:4.1.7.8
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.25
date	2018.04.16.19.46.18;	author jlee;	state Exp;
branches;
next	4.24;
commitid	wDDOdxpJwNPODHyA;

4.24
date	2018.04.11.23.41.56;	author bavison;	state Exp;
branches;
next	4.23;
commitid	MIfIAmJUG5AV65yA;

4.23
date	2014.09.18.08.20.04;	author rsprowson;	state Exp;
branches;
next	4.22;
commitid	9aqf4LlEYNJbPNQx;

4.22
date	2013.09.08.18.53.23;	author rsprowson;	state Exp;
branches;
next	4.21;
commitid	46q23XZLtAc5oF4x;

4.21
date	2013.08.03.07.58.34;	author rsprowson;	state Exp;
branches;
next	4.20;
commitid	Lbi4LfDZh8p3VYZw;

4.20
date	2013.05.06.11.54.40;	author rsprowson;	state Exp;
branches;
next	4.19;
commitid	dyQdYmrTRpty5zOw;

4.19
date	2012.10.09.10.46.21;	author srevill;	state Exp;
branches;
next	4.18;
commitid	WqfOR3Y0AhREqHnw;

4.18
date	2012.08.11.20.42.10;	author rsprowson;	state Exp;
branches;
next	4.17;
commitid	bqZXzQ4h5FSDCagw;

4.17
date	2009.06.15.23.33.22;	author bavison;	state Exp;
branches;
next	4.16;

4.16
date	2004.11.12.16.30.45;	author bavison;	state Exp;
branches;
next	4.15;

4.15
date	2002.02.20.17.26.33;	author srevill;	state Exp;
branches;
next	4.14;

4.14
date	2001.03.16.17.04.38;	author sbrodie;	state Exp;
branches
	4.14.2.1;
next	4.13;

4.13
date	2001.01.05.13.42.49;	author sbrodie;	state Exp;
branches;
next	4.12;

4.12
date	2000.10.20.12.44.25;	author bavison;	state Exp;
branches;
next	4.11;

4.11
date	2000.03.29.13.58.58;	author bavison;	state Exp;
branches;
next	4.10;

4.10
date	99.08.03.18.45.42;	author bavison;	state Exp;
branches;
next	4.9;

4.9
date	98.10.23.15.48.06;	author bavison;	state Exp;
branches;
next	4.8;

4.8
date	98.09.30.18.15.27;	author bavison;	state Exp;
branches;
next	4.7;

4.7
date	98.09.30.09.05.16;	author kbracey;	state Exp;
branches;
next	4.6;

4.6
date	98.09.18.16.13.06;	author bavison;	state Exp;
branches;
next	4.5;

4.5
date	97.06.20.12.34.50;	author nturton;	state Exp;
branches;
next	4.4;

4.4
date	97.05.13.18.36.42;	author kbracey;	state Exp;
branches
	4.4.2.1;
next	4.3;

4.3
date	97.05.07.14.14.38;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	97.01.13.13.23.03;	author nturton;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.30.21;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.5.1
	4.1.7.1;
next	;

4.14.2.1
date	2007.10.07.02.17.28;	author ben;	state Exp;
branches;
next	;
commitid	NSavcPvbNd36pBAs;

4.4.2.1
date	98.03.26.14.03.46;	author rthornb;	state Exp;
branches;
next	;

4.1.1.1
date	96.11.05.09.30.21;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.31.10;	author nturton;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.22.34;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.20.14;	author nturton;	state Exp;
branches;
next	4.1.7.2;

4.1.7.2
date	97.03.11.19.13.23;	author nturton;	state Exp;
branches
	4.1.7.2.2.1;
next	4.1.7.3;

4.1.7.3
date	97.04.17.09.14.16;	author nturton;	state Exp;
branches;
next	4.1.7.4;

4.1.7.4
date	97.06.11.10.04.36;	author scormie;	state Exp;
branches;
next	4.1.7.5;

4.1.7.5
date	97.06.23.11.19.00;	author nturton;	state Exp;
branches;
next	4.1.7.6;

4.1.7.6
date	97.07.25.13.27.02;	author jcoxhead;	state Exp;
branches;
next	4.1.7.7;

4.1.7.7
date	97.08.19.13.51.10;	author nturton;	state Exp;
branches;
next	4.1.7.8;

4.1.7.8
date	98.09.10.10.34.25;	author kbracey;	state Exp;
branches;
next	;

4.1.7.2.2.1
date	97.04.10.13.51.01;	author kbracey;	state Exp;
branches;
next	4.1.7.2.2.2;

4.1.7.2.2.2
date	97.04.28.16.48.57;	author kbracey;	state Exp;
branches;
next	;


desc
@@


4.25
log
@Remove ${CURDIR} check in makefile to fix native builds
@
text
@# Copyright 1996 Acorn Computers Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile for Wimp
#
# ***********************************
# ***    C h a n g e   L i s t    ***
# ***********************************
# Date       Name    Description
# ----       ----    -----------
# 25-May-94  AMcC    Created.
# 18-Oct-94  AMcC    Template3D now copied to Resources as 'Templates'
#                    Now correctly copies Tools3D to Resources:...Tools
# 26-Jun-95  JRH     Now copies STB (ie hacked-down) versions of Tools,
#                    Templates and Sprites. Doesn't copy Sprites22
# 23-Oct-98  BJGA    Changed to use objasm, so that we can override the
#                    choice of options file using an argument to amu
# 03-Aug-99  BJGA    No longer produces build errors if some resources are absent
#

#
# Program specific options:
#
COMPONENT = WindowManager
TARGET   ?= Wimp
HEADER1   = ${TARGET}
HEADER2   = WimpSpace
CUSTOMRES = custom

SA_FLAGS  =
ASFLAGS   = -NoWarn -PreDefine "Options SETS \"${OPTIONS}\""

ifeq (${TARGET},ThemeDefs)
CUSTOMSA  = custom
CUSTOMEXP = custom

install: 
	${MKDIR} ${INSTDIR}.${USERIF}
	| Give the disc ones in preference if they exist, else minimalist ROM ones
	IfThere LocalRes:${USERIF}.DiscSprites.Sprites   Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites   ${INSTDIR}.${USERIF}.Sprites   ${CPFLAGS} Else ${CP} LocalRes:${USERIF}.Sprites ${INSTDIR}.${USERIF}.Sprites ${CPFLAGS}
	IfThere LocalRes:${USERIF}.DiscSprites.Sprites11 Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites11 ${INSTDIR}.${USERIF}.Sprites11 ${CPFLAGS}
	IfThere LocalRes:${USERIF}.DiscSprites.Sprites22 Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites22 ${INSTDIR}.${USERIF}.Sprites22 ${CPFLAGS}
	IfThere LocalRes:${USERIF}.DiscSprites.Tools     Then ${CP} LocalRes:${USERIF}.DiscSprites.Tools     ${INSTDIR}.${USERIF}.Tools     ${CPFLAGS} Else ${CP} LocalRes:${USERIF}.Tools   ${INSTDIR}.${USERIF}.Tools   ${CPFLAGS}
	IfThere LocalRes:${USERIF}.DiscSprites.CoFlags   Then ${CP} LocalRes:${USERIF}.DiscSprites.CoFlags   ${INSTDIR}.${USERIF}.CoFlags   ${CPFLAGS}
	IfThere LocalRes:${USERIF}.DiscSprites.CoSprite  Then ${CP} LocalRes:${USERIF}.DiscSprites.CoSprite  ${INSTDIR}.${USERIF}.CoSprite  ${CPFLAGS}
	@@${ECHO} ${COMPONENT}: disc theme resources installed

export:
	@@${ECHO} ${COMPONENT}: nothing to export when target is ${TARGET}
endif

include StdTools
include AAsmModule

resources: resources-wimp-${CMDHELP}
	@@echo ${COMPONENT}: resource files copied

resources-wimp_common:
	${MKDIR} ${RESFSDIR}
	IfThere LocalRes:<UserIF>.Messages  Then ${CP} LocalRes:<UserIF>.Messages  ${RESFSDIR}.Messages  ${CPFLAGS} Else IfThere LocalRes:Messages Then ${CP} LocalRes:Messages ${RESFSDIR}.Messages ${CPFLAGS}
	IfThere LocalRes:<UserIF>.Templates Then ${CP} LocalRes:<UserIF>.Templates ${RESFSDIR}.Templates ${CPFLAGS}
	IfThere LocalRes:<UserIF>.Sprites   Then ${CP} LocalRes:<UserIF>.Sprites   ${RESFSDIR}.Sprites   ${CPFLAGS}
	IfThere LocalRes:<UserIF>.Sprites22 Then ${CP} LocalRes:<UserIF>.Sprites22 ${RESFSDIR}.Sprites22 ${CPFLAGS}
	IfThere LocalRes:<UserIF>.TileN     Then ${CP} LocalRes:<UserIF>.TileN     ${RESFSDIR}.TileN     ${CPFLAGS}
	IfThere LocalRes:<UserIF>.TileV     Then ${CP} LocalRes:<UserIF>.TileV     ${RESFSDIR}.TileV     ${CPFLAGS}
	IfThere LocalRes:<UserIF>.Tools     Then ${CP} LocalRes:<UserIF>.Tools     ${RESFSDIR}.Tools     ${CPFLAGS}

resources-wimp-None: resources-wimp_common
	@@|

resources-wimp-: resources-wimp_common
	@@IfThere LocalRes:CmdHelp Then ${CAT} LocalRes:CmdHelp { >> ${RESFSDIR}.Messages }

BBETYPE = wimp
bbe-wimp: bbe-generic-resources-get-alias
	BBE_Export_File_In_Dir Resources.${LOCALE} Messages
	BBE_Export_File_In_Dir Resources.${LOCALE} CmdHelp
	BBE_Export_Dir Resources.${LOCALE}.${USERIF}
	BBE_Export_File VersionNum

# Dynamic dependencies:
@


4.24
log
@Leading spaces in makefile changed to tabs for GNU make compatibility
@
text
@a65 1
ifeq (objs,$(notdir ${CURDIR}))
a83 1
endif
@


4.23
log
@Use 'custom' as the override value
Requires BuildSys-6_48.
Retagged as Wimp-5_45.
@
text
@d49 9
a57 9
        ${MKDIR} ${INSTDIR}.${USERIF}
        | Give the disc ones in preference if they exist, else minimalist ROM ones
        IfThere LocalRes:${USERIF}.DiscSprites.Sprites   Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites   ${INSTDIR}.${USERIF}.Sprites   ${CPFLAGS} Else ${CP} LocalRes:${USERIF}.Sprites ${INSTDIR}.${USERIF}.Sprites ${CPFLAGS}
        IfThere LocalRes:${USERIF}.DiscSprites.Sprites11 Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites11 ${INSTDIR}.${USERIF}.Sprites11 ${CPFLAGS}
        IfThere LocalRes:${USERIF}.DiscSprites.Sprites22 Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites22 ${INSTDIR}.${USERIF}.Sprites22 ${CPFLAGS}
        IfThere LocalRes:${USERIF}.DiscSprites.Tools     Then ${CP} LocalRes:${USERIF}.DiscSprites.Tools     ${INSTDIR}.${USERIF}.Tools     ${CPFLAGS} Else ${CP} LocalRes:${USERIF}.Tools   ${INSTDIR}.${USERIF}.Tools   ${CPFLAGS}
        IfThere LocalRes:${USERIF}.DiscSprites.CoFlags   Then ${CP} LocalRes:${USERIF}.DiscSprites.CoFlags   ${INSTDIR}.${USERIF}.CoFlags   ${CPFLAGS}
        IfThere LocalRes:${USERIF}.DiscSprites.CoSprite  Then ${CP} LocalRes:${USERIF}.DiscSprites.CoSprite  ${INSTDIR}.${USERIF}.CoSprite  ${CPFLAGS}
        @@${ECHO} ${COMPONENT}: disc theme resources installed
d60 1
a60 1
        @@${ECHO} ${COMPONENT}: nothing to export when target is ${TARGET}
d66 1
d68 1
a68 1
        @@echo ${COMPONENT}: resource files copied
d71 8
a78 8
        ${MKDIR} ${RESFSDIR}
        IfThere LocalRes:<UserIF>.Messages  Then ${CP} LocalRes:<UserIF>.Messages  ${RESFSDIR}.Messages  ${CPFLAGS} Else IfThere LocalRes:Messages Then ${CP} LocalRes:Messages ${RESFSDIR}.Messages ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Templates Then ${CP} LocalRes:<UserIF>.Templates ${RESFSDIR}.Templates ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Sprites   Then ${CP} LocalRes:<UserIF>.Sprites   ${RESFSDIR}.Sprites   ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Sprites22 Then ${CP} LocalRes:<UserIF>.Sprites22 ${RESFSDIR}.Sprites22 ${CPFLAGS}
        IfThere LocalRes:<UserIF>.TileN     Then ${CP} LocalRes:<UserIF>.TileN     ${RESFSDIR}.TileN     ${CPFLAGS}
        IfThere LocalRes:<UserIF>.TileV     Then ${CP} LocalRes:<UserIF>.TileV     ${RESFSDIR}.TileV     ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Tools     Then ${CP} LocalRes:<UserIF>.Tools     ${RESFSDIR}.Tools     ${CPFLAGS}
d81 1
a81 1
        @@|
d84 2
a85 1
        @@IfThere LocalRes:CmdHelp Then ${CAT} LocalRes:CmdHelp { >> ${RESFSDIR}.Messages }
d89 4
a92 4
        BBE_Export_File_In_Dir Resources.${LOCALE} Messages
        BBE_Export_File_In_Dir Resources.${LOCALE} CmdHelp
        BBE_Export_Dir Resources.${LOCALE}.${USERIF}
        BBE_Export_File VersionNum
@


4.22
log
@3 minor fixes, 2 minor enhancements
Makefile:
* Conditionally copy the disc resources, saving a little build time.
Wimp10.s; hdr/Wimp:
* Issue Service_WimpToolSpritesChanged when the tool sprite area is changed.
Wimp05:
* Fix bug in softloaded versions of the Wimp where menus would randomly lose the keyboard shortcut text. This was caused by use of an LDR to retrieve a byte wide variable. This specifically affected some softloads because the Wimp gets squeezed, and during unsqueezing the Wimp's workspace ends up being allocated from the same bit of RMA that used to contain the squeezed copy of the module (=lots of random numbers).
Wimp09:
* Fix bug where configuring WimpSpritePrecedence to ROM when a theme is loaded would cause redrawing of window textures to fail. This is because the Wimp intersects the ROM and RAM sprite areas and deletes any duplicates from the RAM area when remaking the fast lookup sprite list. So if the RAM sprites include the "tile_1" (etc) sprite on redrawing the desktop the Wimp points to this, then intersects the lists and deletes the sprite, leaving the pointers pointing at junk. Now, on deleting something, the window tile pointers are invalidated. Fixes ticket #346.
Wimp02:
* Fix bug where the title bar text, when the desktop font is the system font, is incorrectly rendered in the colour selected by WimpVisualFlag -WindowOutlineColour. The Wimp now restores the text colour if -WOC has set the graphics colour to something other than black.

Administrative -
In Wimp01, swap a couple of SpriteReasons from magic numbers. In the init of variables use the common reset_all_tiling_sprite function.
In Tiling3D, more SpriteReasons, and rationalise the registers used in reset_all_tiling_sprites.

Version 5.32. Tagged as 'Wimp-5_32'
@
text
@d39 1
a39 1
RESOURCES = manual
@


4.21
log
@Addition of thumbnail sprites in support of theme setup plugin
No code changes to Wimp, not tagged.
@
text
@a44 1

d50 2
a51 5
        | At least give the equivalent ROM ones for that UserIF
        ${CP} LocalRes:${USERIF}.Sprites   ${INSTDIR}.${USERIF}.Sprites   ${CPFLAGS}
        ${CP} LocalRes:${USERIF}.Tools     ${INSTDIR}.${USERIF}.Tools     ${CPFLAGS}
        | Then give the disc ones in preference if they exist
        IfThere LocalRes:${USERIF}.DiscSprites.Sprites   Then ${CP} LocalRes:${USERIF}.DiscSprites.Sprites   ${INSTDIR}.${USERIF}.Sprites   ${CPFLAGS}
d54 1
a54 1
        IfThere LocalRes:${USERIF}.DiscSprites.Tools     Then ${CP} LocalRes:${USERIF}.DiscSprites.Tools     ${INSTDIR}.${USERIF}.Tools     ${CPFLAGS}
a60 1

@


4.20
log
@Refinements to disc based targets especially
Previous attempt to disable Sprites11 support for 3.10 and 3.50 hadn't spotted it was reenabled in the common options, also the Sprites11 switch was also tied up in Wimp$IconTheme support.
Title bars would flicker when picked up when using a tool sprite set with no 'p' pushed equivalents on RISC OS 4.0x due to screen cache.
Makefile now installs a default set of tools & sprites when target is ThemeDefs.
CLI limit reduced to 256 pre Ursula to save RAM.

Options/!Common:
  Promote Sprites11 switch into !Default
  Remove fixrmatools
Options/!Default:
  Sprites11 true by default
  LongCommandLines true by default, false on targets pre Ursula
  Remove ServiceCallTable (harmless to have it in all cases)
NewSWIs.s:
  Enable Wimp_Extend 13 all the time
Wimp01.s:
  Reduce RMA use by vital 1.5k for non long command line case
  Change sense of Sprites11 switch to adopt all its previous functionality, but not look for '11' suffix when the switch is false
  Adopt ServiceCallTable switch permanently
Wimp02.s:
  Comments ammended
Wimp07.s:
  Range of ADR
Wimp10.s:
  Change sense of Sprites11 switch to adopt all its previous functionality, but not look for '11' suffix when the switch is false
  Adopt :LNOT: fixrmatools switch permanently
  Supress title bar sprite plotting when none of the sprites exist

Version 5.25. Tagged as 'Wimp-5_25'
@
text
@d59 2
@


4.19
log
@Fixed errors during export phase when TARGET=ThemeDefs

Version 5.19. Tagged as 'Wimp-5_19'
@
text
@d51 4
@


4.18
log
@Add option to install disc sprites as a seperate target

Version 5.18. Tagged as 'Wimp-5_18'
@
text
@d45 4
a48 1
CUSTOMSA = custom
d56 4
@


4.17
log
@  Build change
Detail:
  CPU version is no longer specified in the makefile - it's better to inherit
  it from the build environment now that we actually set it appropriately.
Admin:
  Built and briefly tested. Binary should be unchanged - this only affects
  the warnings generated during assembly.

Version 5.05. Not tagged
@
text
@d36 1
a36 1
TARGET    = Wimp
d44 11
@


4.16
log
@  BBE tidying.
Detail:
  Now exports VersionNum to the BBE.
Admin:
  Tested in a Tungsten BBE build.

Retagged, since this won't affect any existing builds.
@
text
@d42 1
a42 1
ASFLAGS   = -cpu 3 -NoWarn -PreDefine "Options SETS \"${OPTIONS}\""
@


4.15
log
@  A fix and some changes.
Detail:
  * Makefile change to allow install phase to work correctly with the
    shared makefiles.
  * Added some Japanese resources for the STB.
Admin:
  Builds and installs.

Version 4.73. Tagged as 'Wimp-4_73'
@
text
@d71 1
@


4.14
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 4.64. Tagged as 'Wimp-4_64'
@
text
@d41 1
@


4.14.2.1
log
@  Added Dan Ellis's multithreading support, on a development branch for now.
Detail:
  This breaks the equivalence between tasks and AMB slots, allowing many
  threads of execution to share the same AMB slot, where an application's
  heap is usually located. In API terms, it is presented as an extension to
  Wimp_StartTask, see Docs/Multithreading for more information. It is the
  caller's responsibility to create a new stack chunk for the new thread if
  required. Note that BASIC's variable storage model is fundamentally
  unsuited for multithreading.
Admin:
  This was developed in 2001 and was not committed at the time due to lack
  of testing and peer review. It is now being added as a branch from a
  contemporary trunk Wimp. Hopefully somebody will be interested enough to
  merge the branch into a recent version!

Version 4.66, 4.77.2.1. Tagged as 'Wimp-4_66-4_77_2_1'
@
text
@a42 4
AIFDBG     ?= aif.${MACHINE}.${TARGET}
GPADBG     ?= gpa.${MACHINE}.${TARGET}
ASFLAGS    += -G

a70 9
${AIFDBG}: ${ROM_OBJECT}
        ${MKDIR} aif.${MACHINE}
        ${LD} -aif -bin -d -o ${AIFDBG} ${ROM_OBJECT}

${GPADBG}: ${AIFDBG}
        ${MKDIR} gpa.${MACHINE}
        ToGPA -s ${AIFDBG} ${GPADBG}


@


4.13
log
@  BBE changes - exports only Resources.${LOCALE}.${USERIF} plus the
    Messages and CmdHelp files.
Admin:
  Required by BBE builds.

Version 4.61. Tagged as 'Wimp-4_61'
@
text
@a32 19
# Paths
#
EXP_HDR = <export$dir>

#
# Generic options:
#
MKDIR   = cdir
AS      = objasm
LD      = link
CP      = copy
RM      = remove
WIPE    = -wipe
ASFLAGS = -NOWarn -depend !Depend ${THROWBACK} ${OPTS} -cpu 3 -o $@@
LDFLAGS = -rmf -o $@@
CPFLAGS = ~cfr~v
WFLAGS  = ~cfr~v

#
d35 5
a39 7
COMPONENT = Wimp
SOURCE    = s.Wimp
OBJECT    = o.Wimp
TARGET    = rm.Wimp
OPTS      = -PreDefine "Options SETS \"${OPTIONS}\""
EXPORTS   = ${EXP_HDR}.Wimp \
            ${EXP_HDR}.WimpSpace
d41 1
a41 8
#
# Generic rules:
#
rom: ${TARGET}
        @@echo ${COMPONENT}: rom module built

export: ${EXPORTS}
        @@echo ${COMPONENT}: export complete
d43 2
a44 8
install_rom: ${TARGET}
        ${CP} ${TARGET} ${INSTDIR}.${COMPONENT} ${CPFLAGS}
        @@echo ${COMPONENT}: rom module installed

clean:
        ${RM} ${TARGET}
        ${WIPE} o ${WFLAGS}
        @@echo ${COMPONENT}: cleaned
d46 1
a46 1
resources: resources-${CMDHELP}
d49 9
a57 9
resources_common:
        ${MKDIR} ${RESDIR}.${COMPONENT}
        IfThere LocalRes:<UserIF>.Messages  Then ${CP} LocalRes:<UserIF>.Messages  ${RESDIR}.${COMPONENT}.Messages  ${CPFLAGS} Else IfThere LocalRes:Messages Then ${CP} LocalRes:Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Templates Then ${CP} LocalRes:<UserIF>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Sprites   Then ${CP} LocalRes:<UserIF>.Sprites   ${RESDIR}.${COMPONENT}.Sprites   ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Sprites22 Then ${CP} LocalRes:<UserIF>.Sprites22 ${RESDIR}.${COMPONENT}.Sprites22 ${CPFLAGS}
        IfThere LocalRes:<UserIF>.TileN     Then ${CP} LocalRes:<UserIF>.TileN     ${RESDIR}.${COMPONENT}.TileN     ${CPFLAGS}
        IfThere LocalRes:<UserIF>.TileV     Then ${CP} LocalRes:<UserIF>.TileV     ${RESDIR}.${COMPONENT}.TileV     ${CPFLAGS}
        IfThere LocalRes:<UserIF>.Tools     Then ${CP} LocalRes:<UserIF>.Tools     ${RESDIR}.${COMPONENT}.Tools     ${CPFLAGS}
d59 2
a60 2
resources-None: resources_common
	@@
d62 2
a63 2
resources-: resources_common
	IfThere LocalRes:CmdHelp Then Print LocalRes:CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
a69 14

${OBJECT}: ${SOURCE}
        ${MKDIR} o
        ${AS} ${ASFLAGS} ${SOURCE}

${TARGET}: ${OBJECT}
        ${LD} ${LDFLAGS} ${OBJECT}
        Access $@@ rw/r

${EXP_HDR}.Wimp: hdr.Wimp
        ${CP} hdr.Wimp $@@ ${CPFLAGS}

${EXP_HDR}.WimpSpace: hdr.WimpSpace
        ${CP} hdr.WimpSpace $@@ ${CPFLAGS}
@


4.12
log
@  Shock horror - a new feature for the Wimp! And some housekeeping too.
Detail:
  * Added new functionality for menu trees: submenus can now be opened by
    clicking on their parent menu item. This is particularly aimed at
    touchscreen devices, and is configurable via the new *Configure keyword
    WimpClickSubmenu.
  * Change to the menu inactivity timeout behaviour after auto-opening of
    submenus (either by hovering over the parent menu item or by the new
    click-to-open functionality): although all hover operations are still
    ignored for this period, any click operations *will* now be obeyed.
  * Corrected numerous misleading comments in the menu handling code.
  * Added some suspiciously absent ALIGNs in the *Configure keyword handlers.
  * Uses new ASCII case-forcing macros so there are now fewer warnings
    printed during assembly (and it should run faster now too).
  * Added an AREA directive so that objasm's -ABS switch is no longer needed.
  * Standardised ErrMem token across all Messages files that use English.
Admin:
  Tested on a desktop machine.
  Requires HdrSrc 1.06.

Version 4.57. Tagged as 'Wimp-4_57'
@
text
@d99 6
@


4.11
log
@  Various little changes.
Detail:
  * New STB Sprites, Templates and Tools files imported, based upon the
    Lazarus UI rather than the old STB UI.
  * STB build now includes WIMPSymbol.
  * No longer attempts to use WIMPSymbol font in UTF8 builds which didn't
    register the font in ResourceFS.
  * Simplified Resources directories by assigning only a single pair of
    Messages files to each locale, rather than for each UI directory within
    each locale directory. The only code change required is to make the Wimp
    error box always use the "Continue" token for NC/STB builds, rather than
    using one of "OK" and "Continue", as with desktop builds.
Admin:
  Not tested.

Version 4.42. Tagged as 'Wimp-4_42'
@
text
@d46 2
a47 2
ASFLAGS = -ABSolute -NOWarn -depend !Depend ${THROWBACK} ${OPTS} -o $@@
LDFLAGS = -bin -o $@@
a104 1
        SetType $@@ Module
@


4.10
log
@Now calls recalcmodevars on Service_ModeChanging instead of Service_ModeChange
(this was clashing with the Interlace module at one point during STB
development, and had the potential to trip us up again in the future).

No longer produces build errors if some resources are absent.

Corrected token in Japan messages file to use valid UTF-8 character.

Service call table now included by default.

Version 4.23. Tagged as 'Wimp-4_23'
@
text
@d85 1
a85 1
        IfThere LocalRes:<UserIF>.Messages  Then ${CP} LocalRes:<UserIF>.Messages  ${RESDIR}.${COMPONENT}.Messages  ${CPFLAGS}
d97 1
a97 1
	print LocalRes:<UserIF>.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
@


4.9
log
@Adapted assembly process so that the choice of Options file (previously based
purely on the "System" variable) can be overridden by passing "OPTIONS=foo" as
an argument to either MkRom, or to amu/amu_machine directly, or indirectly,
by specifying it in the components file for a build. To accomplish this, it
was necessary to switch from using aasm to objasm - hence the large number of
source files affected in this commit.

Version 4.09. Tagged as 'Wimp-4_09'
@
text
@d29 1
d85 7
a91 7
        ${CP} LocalRes:<UserIF>.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} LocalRes:<UserIF>.Sprites22 ${RESDIR}.${COMPONENT}.Sprites22 ${CPFLAGS}
       -${CP} LocalRes:<UserIF>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} LocalRes:<UserIF>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
@


4.8
log
@Changed so that RCA builds retain application memory management (rather than
delegating it to the kernel) unless the symbol AMBKernel is exported in
Hdr:RISCOS.
Also stripped dynamic dependencies from Makefile.

Version 4.01. Not tagged
@
text
@d27 2
d40 2
a41 1
AS      = aasm
d44 3
a46 2
CCFLAGS = -c -depend !Depend -IC:
ASFLAGS = -depend !Depend -Stamp -quit -module -To $@@ -From
d48 1
d55 1
d57 1
d76 1
d98 2
a99 1
${TARGET}: ${SOURCE}
d101 5
a105 1
        Access ${TARGET} rw/rw
@


4.7
log
@Spinner branch merged.
Changed to use srccommit.
All conditionals on "Version" removed.

Version 4.01. Tagged as 'Wimp-4_01'
@
text
@a100 67
rm.Wimp: Hdr:ListOpts
rm.Wimp: Hdr:Macros
rm.Wimp: Hdr:System
rm.Wimp: Hdr:SWIs
rm.Wimp: Hdr:CPU.Generic26
rm.Wimp: Hdr:IO.GenericIO
rm.Wimp: Hdr:RISCOS
rm.Wimp: Hdr:Machine.<Machine>
rm.Wimp: Hdr:Machine.Machine
rm.Wimp: Hdr:IO.IOMDL
rm.Wimp: Hdr:CMOS
rm.Wimp: Hdr:PublicWS
rm.Wimp: Hdr:ModHand
rm.Wimp: Hdr:Proc
rm.Wimp: Hdr:EnvNumbers
rm.Wimp: Hdr:Services
rm.Wimp: Hdr:UpCall
rm.Wimp: Hdr:VduExt
rm.Wimp: Hdr:FSNumbers
rm.Wimp: Hdr:HighFSI
rm.Wimp: Hdr:HostFS
rm.Wimp: Hdr:NDRDebug
rm.Wimp: Hdr:Font
rm.Wimp: Hdr:Wimp
rm.Wimp: Hdr:Messages
rm.Wimp: Hdr:NewErrors
rm.Wimp: Hdr:Sprite
rm.Wimp: Hdr:Variables
rm.Wimp: Hdr:Hourglass
rm.Wimp: Hdr:ResourceFS
rm.Wimp: Hdr:Portable
rm.Wimp: Hdr:MsgTrans
rm.Wimp: hdr:ColourTran
rm.Wimp: hdr:FPEmulator
rm.Wimp: hdr:Territory
rm.Wimp: hdr:Switcher
rm.Wimp: hdr:PDriver
rm.Wimp: hdr:ScrBlank
rm.Wimp: hdr:OsWords
rm.Wimp: hdr:Countries
rm.Wimp: VersionASM
rm.Wimp: hdr.WIMPMacros
rm.Wimp: hdr.IconHigh
rm.Wimp: Options.s.!Default
rm.Wimp: Options.s.<System>
rm.Wimp: Hdr:ImageSize.<ImageSize>
rm.Wimp: Options.s.!Common
rm.Wimp: Options.s.!Debug
rm.Wimp: s.Wimp01
rm.Wimp: s.!Palette
rm.Wimp: s.Memory
rm.Wimp: s.Wimp02
rm.Wimp: s.Watchdog
rm.Wimp: s.Tiling
rm.Wimp: s.Wimp03
rm.Wimp: s.Wimp04
rm.Wimp: s.Wimp05
rm.Wimp: s.Wimp06
rm.Wimp: s.Iconbar
rm.Wimp: s.Wimp07
rm.Wimp: s.ProgErrs
rm.Wimp: s.Wimp08
rm.Wimp: s.Wimp08s
rm.Wimp: s.Wimp09
rm.Wimp: s.Wimp10
rm.Wimp: s.NewSWIs
rm.Wimp: s.AutoScroll
@


4.6
log
@Ursula branch Wimp merged back onto trunk.
@
text
@d76 7
a82 7
        ${CP} Resources.${LOCALE}.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.Sprites22 ${RESDIR}.${COMPONENT}.Sprites22 ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
d88 1
a88 1
	print Resources.${LOCALE}.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
d92 1
d101 67
@


4.5
log
@Added throwbacks for development builds
@
text
@d91 1
a91 1
        ${AS} ${ASFLAGS} ${SOURCE} ${THROWBACK}
a99 57
rm.Wimp: Hdr:ListOpts
rm.Wimp: Hdr:Macros
rm.Wimp: Hdr:System
rm.Wimp: Hdr:SWIs
rm.Wimp: Hdr:CPU.Generic26
rm.Wimp: Hdr:IO.GenericIO
rm.Wimp: Hdr:RISCOS
rm.Wimp: Hdr:CMOS
rm.Wimp: Hdr:PublicWS
rm.Wimp: Hdr:ModHand
rm.Wimp: Hdr:Proc
rm.Wimp: Hdr:EnvNumbers
rm.Wimp: Hdr:Services
rm.Wimp: Hdr:UpCall
rm.Wimp: Hdr:VduExt
rm.Wimp: Hdr:FSNumbers
rm.Wimp: Hdr:HighFSI
rm.Wimp: Hdr:HostFS
rm.Wimp: Hdr:NDRDebug
rm.Wimp: Hdr:Font
rm.Wimp: Hdr:Wimp
rm.Wimp: Hdr:Messages
rm.Wimp: Hdr:NewErrors
rm.Wimp: Hdr:Sprite
rm.Wimp: Hdr:Variables
rm.Wimp: Hdr:Hourglass
rm.Wimp: Hdr:ResourceFS
rm.Wimp: Hdr:Portable
rm.Wimp: Hdr:MsgTrans
rm.Wimp: hdr:ColourTran
rm.Wimp: hdr:FPEmulator
rm.Wimp: hdr:Territory
rm.Wimp: hdr:Switcher
rm.Wimp: hdr:PDriver
rm.Wimp: Version
rm.Wimp: hdr.WIMPMacros
rm.Wimp: Options.s.!Default
rm.Wimp: Options.s.<System>
rm.Wimp: Options.s.!Common
rm.Wimp: Options.s.!Debug
rm.Wimp: s.Wimp01
rm.Wimp: s.!Palette
rm.Wimp: s.Memory
rm.Wimp: s.Wimp02
rm.Wimp: s.Watchdog
rm.Wimp: s.Tiling
rm.Wimp: s.Wimp03
rm.Wimp: s.Wimp04
rm.Wimp: s.Wimp05
rm.Wimp: s.Wimp06
rm.Wimp: s.Iconbar
rm.Wimp: s.Wimp07
rm.Wimp: s.ProgErrs
rm.Wimp: s.Wimp08
rm.Wimp: s.Wimp09
rm.Wimp: s.Wimp10
rm.Wimp: s.NewSWIs
@


4.4
log
@Tweaked to allow Morris4 to build
@
text
@d91 1
a91 1
        ${AS} ${ASFLAGS} ${SOURCE}
a153 1
rm.Wimp: s.Wimp08s
@


4.4.2.1
log
@Removed dynamic dependancies from Makefiles and removed all reference to Prefix
@
text
@d100 58
@


4.3
log
@ARTtmp branch folded in
@
text
@d79 1
@


4.2
log
@Merged WIMP imported
@
text
@d71 4
a74 1
resources:
d77 11
a87 6
        ${CP} Resources.${LOCALE}.<Machine>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
        @@echo ${COMPONENT}: resource files copied
d135 4
a138 1
rm.Wimp: s.Options
d153 1
@


4.1
log
@Initial revision
@
text
@d25 2
d73 6
a78 5
        ${CP} Resources.${LOCALE}.Messages   ${RESDIR}.${COMPONENT}.Messages   ${CPFLAGS}
        ${CP} Resources.${LOCALE}.Template3D ${RESDIR}.${COMPONENT}.Templates  ${CPFLAGS}
        ${CP} Resources.${LOCALE}.Sprites    ${RESDIR}.${COMPONENT}.Sprites    ${CPFLAGS}
        ${CP} Resources.${LOCALE}.Sprites22  ${RESDIR}.${COMPONENT}.Sprites22  ${CPFLAGS}
        ${CP} Resources.${LOCALE}.Tools3d    ${RESDIR}.${COMPONENT}.Tools      ${CPFLAGS}
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@a24 2
# 26-Jun-95  JRH     Now copies STB (ie hacked-down) versions of Tools,
#                    Templates and Sprites. Doesn't copy Sprites22
d71 5
a75 6
        ${CP} Resources.${LOCALE}.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
@


4.1.7.2
log
@Command line messages removed
@
text
@d71 1
a71 4
resources: resources-${CMDHELP}
        @@echo ${COMPONENT}: resource files copied

resources_common:
d79 1
a79 6

resources-None: resources_common
	@@

resources-: resources_common
	print Resources.${LOCALE}.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
@


4.1.7.3
log
@System variable used instead of Machine for software switch
@
text
@d77 5
a81 5
        ${CP} Resources.${LOCALE}.<System>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
@


4.1.7.4
log
@When building for NCs, use IconHigh in error boxes, use different button
border colours, use replacement Templates file.
@
text
@a105 3
rm.Wimp: Hdr:Machine.<Machine>
rm.Wimp: Hdr:Machine.Machine
rm.Wimp: Hdr:IO.IOMDL
@


4.1.7.5
log
@Moved messages file to machine dependant directory
@
text
@d76 1
a76 1
        ${CP} Resources.${LOCALE}.<System>.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
d87 1
a87 1
	print Resources.${LOCALE}.<System>.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
@


4.1.7.6
log
@   When turning the pointer off before Wimp_Report, save the state and
set it back to that state afterwards.
   Allow Wimp_GetPointerInfo, Wimp_GetWindowInfo, Wimp_GetWindowState outside
a task: needed to make IconHigh work in a ReportError box which has itself been
invoked from outside a task.
@
text
@a90 1
        Access ${TARGET} rw/rw
a137 1
rm.Wimp: hdr.IconHigh
@


4.1.7.7
log
@Changed to switch on UserIF instead of System
@
text
@d76 6
a81 6
        ${CP} Resources.${LOCALE}.<UserIF>.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<UserIF>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<UserIF>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<UserIF>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<UserIF>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<UserIF>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
d87 1
a87 1
	print Resources.${LOCALE}.<UserIF>.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
@


4.1.7.8
log
@Makefile changed to use LocalRes$Path.
Automatic switching to WimpSymbol disabled if WimpSymbol font not registered.
@
text
@d76 6
a81 6
        ${CP} LocalRes:<UserIF>.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} LocalRes:<UserIF>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} LocalRes:<UserIF>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} LocalRes:<UserIF>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
d87 1
a87 1
	print LocalRes:<UserIF>.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
@


4.1.7.2.2.1
log
@AMBControl task switching merged from RO_3_70 branch.
PlotSpritesFromPalette and TwitterOnlyMenus options added.
ChildWindows merged in.
@
text
@d82 6
a87 1
        @@echo ${COMPONENT}: resource files copied
a149 1
rm.Wimp: s.Wimp08s
@


4.1.7.2.2.2
log
@Added support for multiple options files (RO310, RO350, RO360, RO370, RCA,
Ursula).
Removed run-time MedusaOS checks.
Enabled correct build for RISC OS 3.1 machines.
Ensured that "freepoolinuse" is cleared before OS_ChangeDynamicArea
is intercepted.
Increased maxrects to 256.
Gave copy filter window handle in R10 (if ChildWindows).
Corrected a few border problems when no toolsprites.
Made toolsprites press in immediately - in particular close and toggle can
now be highlighted.
BounceClose flag no affects all of back,close,iconise and toggle.
Made "L" validation string parsing check manually for presence of a number,
to prevent error from OS_ReadUnsigned trashing MessageTrans' error buffers.
Allow error box buttons to stretch to fit text.
Fixed bug: floating point registers were not being saved unless on a portable.
Integrated some of the Wimp_TransferBlock fixes into Wimp08 from Wimp08s.
@
text
@d77 6
a82 11
        ${CP} Resources.${LOCALE}.<System>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<System>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<System>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}

resources-None: resources_common
	@@

resources-: resources_common
	print Resources.${LOCALE}.CmdHelp { >> ${RESDIR}.${COMPONENT}.Messages }
d130 1
a130 4
rm.Wimp: Options.s.!Default
rm.Wimp: Options.s.<System>
rm.Wimp: Options.s.!Common
rm.Wimp: Options.s.!Debug
@


4.1.5.1
log
@Import from SrcFiler
@
text
@a24 2
# 26-Jun-95  JRH     Now copies STB (ie hacked-down) versions of Tools,
#                    Templates and Sprites. Doesn't copy Sprites22
d71 5
a75 6
        ${CP} Resources.${LOCALE}.Messages ${RESDIR}.${COMPONENT}.Messages ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Templates ${RESDIR}.${COMPONENT}.Templates ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Sprites ${RESDIR}.${COMPONENT}.Sprites ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileN ${RESDIR}.${COMPONENT}.TileN ${CPFLAGS}
       -${CP} Resources.${LOCALE}.<Machine>.TileV ${RESDIR}.${COMPONENT}.TileV ${CPFLAGS}
        ${CP} Resources.${LOCALE}.<Machine>.Tools ${RESDIR}.${COMPONENT}.Tools ${CPFLAGS}
@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@a137 1
rm.Wimp: s.W08_oldway
@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
