head	1.6;
access;
symbols
	Wimp-5_62:1.6
	Wimp-5_61:1.6
	Wimp-5_60:1.6
	Wimp-5_59:1.6
	Wimp-5_58:1.6
	Wimp-5_57:1.6
	Wimp-5_56:1.6
	Wimp-5_55:1.6
	Wimp-5_54:1.6
	Wimp-5_53:1.6
	Wimp-5_52:1.6
	Wimp-5_51:1.6
	Wimp-5_50:1.6
	Wimp-5_49:1.6
	Wimp-5_48:1.6
	Wimp-5_47-file1ad:1.6
	Wimp-5_47:1.6
	Wimp-5_46:1.6
	Wimp-5_45:1.6
	Wimp-5_44:1.6
	Wimp-5_43:1.6
	Wimp-5_42:1.6
	Wimp-5_41:1.6
	Wimp-5_40:1.6
	Wimp-5_39:1.6
	Wimp-5_38:1.6
	Wimp-5_37:1.6
	Wimp-5_36:1.6
	Wimp-5_35:1.6
	Wimp-5_34:1.6
	Wimp-5_33:1.6
	Wimp-5_32:1.6
	Wimp-5_31:1.6
	Wimp-5_30:1.6
	Wimp-530-pre4:1.6
	Wimp-5_30-pre3:1.6
	Wimp-5_30-pre2:1.6
	Wimp-5_30-pre1:1.6
	Wimp-5_29:1.6
	Wimp-5_28:1.6
	Wimp-5_27:1.6
	Wimp-5_26:1.6
	Wimp-5_25:1.6
	Wimp-5_24:1.5
	Wimp-5_23:1.5
	Wimp-5_22:1.5
	Wimp-5_21:1.4
	Wimp-5_20:1.4
	Wimp-5_19:1.4
	Wimp-5_18:1.4
	Wimp-5_17:1.4
	Wimp-5_16:1.4
	Wimp-5_15:1.4
	Wimp-5_14:1.4
	Wimp-5_13:1.4
	Wimp-5_12:1.4
	Wimp-5_11:1.4
	Wimp-5_10:1.4
	Wimp-5_09:1.4
	Wimp-5_08:1.4
	Wimp-5_07:1.4
	Wimp-5_06:1.4
	Wimp-5_05:1.4
	Wimp-5_04:1.4
	Wimp-5_03:1.4
	Wimp-5_02:1.4
	Wimp-5_01:1.4
	Wimp-4_66-4_77_2_1:1.3.4.1
	bavison_Threads_dev:1.3.0.4
	bavison_Threads_dev_bp:1.3
	Wimp-5_00:1.4
	Wimp-4_100:1.4
	Wimp-4_99:1.4
	Wimp-4_98:1.4
	Wimp-4_97:1.4
	Wimp-4_96:1.4
	Wimp-4_95:1.4
	Wimp-4_94:1.4
	RO_5_07:1.4
	Wimp-4_93:1.4
	Wimp-4_92:1.4
	Wimp-4_91:1.4
	Wimp-4_90:1.4
	Wimp-4_89:1.4
	Wimp-4_88:1.4
	Wimp-4_87:1.4
	Wimp-4_86:1.4
	Wimp-4_85:1.4
	Wimp-4_84:1.4
	Wimp-4_83:1.4
	Wimp-4_82:1.4
	Wimp-4_81:1.4
	Wimp-4_80:1.4
	Wimp-4_79:1.4
	Wimp-4_78:1.4
	Wimp-4_77:1.3
	Wimp-4_76:1.3
	Wimp-4_75:1.3
	Wimp-4_74:1.3
	Wimp-4_73:1.3
	Wimp-4_72:1.3
	Wimp-4_71:1.3
	Wimp-4_70:1.3
	Wimp-4_69:1.3
	Wimp-4_68:1.3
	Wimp-4_67:1.3
	Wimp-4_66:1.3
	Wimp-4_65:1.3
	Wimp-4_64:1.3
	Wimp-4_63:1.3
	Wimp-4_62:1.3
	Wimp-4_61:1.3
	Wimp-4_60:1.3
	Wimp-4_59:1.3
	Wimp-4_58:1.3
	Wimp-4_36-4_46_2_6:1.3
	Wimp-4_57:1.3
	Alpnet_approved:1.3
	Wimp-4_36-4_46_2_5:1.3
	Wimp-4_56:1.3
	dellis_autobuild_BaseSW:1.3
	Wimp-4_36-4_46_2_4:1.3
	Wimp-4_36-4_46_2_3:1.3
	Wimp-4_55:1.3
	Wimp-4_54:1.3
	Wimp-4_36-4_46_2_2:1.3
	Wimp-4_53:1.3
	Wimp-4_36-4_46_2_1:1.3
	Bethany:1.3.0.2
	Wimp-4_52:1.3
	Wimp-4_51:1.3
	Wimp-4_50:1.3
	Wimp-4_49:1.3
	Wimp-4_48:1.3
	Wimp-4_47:1.3
	Wimp-4_46:1.3
	Wimp-4_45:1.3
	Wimp-4_44:1.3
	Wimp-4_43:1.3
	Wimp-4_42:1.3
	sbrodie_sedwards_16Mar2000:1.3
	Wimp-4_41:1.3
	Wimp-4_40:1.3
	Wimp-4_39:1.3
	Wimp-4_38:1.3
	Wimp-4_37:1.3
	Wimp-4_36:1.3
	Wimp-4_35:1.3
	Wimp-4_34:1.3
	Wimp-4_33:1.3
	Wimp-4_32:1.3
	Wimp-4_31:1.3
	dcotton_autobuild_BaseSW:1.3
	Wimp-4_30:1.3
	Wimp-4_29:1.3
	Wimp-4_28:1.3
	Wimp-4_27:1.3
	Wimp-4_26:1.3
	Wimp-4_25:1.3
	Wimp-4_24:1.3
	Wimp-4_23:1.3
	Wimp-4_22:1.3
	Wimp-4_21:1.3
	Wimp-4_20:1.3
	Wimp-4_19:1.3
	Wimp-4_18:1.3
	Wimp-4_17:1.3
	Wimp-4_16:1.3
	Wimp-4_15:1.3
	Wimp-4_14:1.3
	Wimp-4_13:1.3
	Wimp-4_12:1.3
	mstphens_UrsulaRiscPCBuild_20Nov98:1.2
	bavison_Wimp-4_11:1.3
	Ursula_RiscPC:1.2.0.6
	Wimp-4_11:1.3
	Wimp-4_10:1.3
	Wimp-4_09:1.3
	Wimp-4_08:1.3
	Wimp-4_07:1.3
	Wimp-4_06:1.3
	Wimp-4_05:1.2
	Wimp-4_04:1.2
	bavison_Wimp-4_03_noshrinkables:1.2
	Wimp-4_03:1.2
	Wimp-4_02:1.2
	Ursula_merge:1.2
	bavison_Wimp-4_01:1.2
	Wimp-4_01:1.2
	bavison_Wimp-4_00_TRUNK:1.2
	bavison_Wimp-4_00:1.2
	mjrobert_Wimp_3_98:1.2
	rthornb_UrsulaBuild-19Aug1998:1.2
	UrsulaBuild_FinalSoftload:1.2
	bavison_Wimp-3_99t:1.2
	rthornb_UrsulaBuild-12Aug1998:1.2
	bavison_Wimp-3_99s:1.2
	aglover_UrsulaBuild-05Aug1998:1.2
	bavison_Wimp-3_99r:1.2
	rthornb_UrsulaBuild-29Jul1998:1.2
	bavison_Wimp-3_99q:1.2
	rthornb_UrsulaBuild-22Jul1998:1.2
	bavison_Wimp-3_99p:1.2
	rthornb_UrsulaBuild-15Jul1998:1.2
	bavison_Wimp-3_99o:1.2
	bavison_Wimp-3_99n:1.2
	rthornb_UrsulaBuild-07Jul1998:1.2
	bavison_Wimp-3_99m:1.2
	rthornb_UrsulaBuild-17Jun1998:1.2
	rthornb_UrsulaBuild-03Jun1998:1.2
	bavison_Wimp-3_99l:1.2
	rthornb_UrsulaBuild-27May1998:1.2
	rthornb_UrsulaBuild-21May1998:1.2
	bavison_Wimp-3_99k:1.2
	bavison_Wimp-3_99j:1.2
	bavison_Wimp-3_99i:1.2
	bavison_Wimp-3_99h:1.2
	rthornb_UrsulaBuild_01May1998:1.2
	bavison_Wimp_399g:1.2
	bavison_Wimp_399f:1.2
	bavison_Wimp_399e:1.2
	bavison_Wimp_399d:1.2
	bavison_Wimp_399c:1.2
	Wimp_3_98:1.2
	kbracey_AW97:1.2
	Daytona:1.2.0.4
	Daytona_bp:1.2
	Ursula:1.2.0.2
	Ursula_bp:1.2
	Wimp_3_91:1.2
	ARTtmp_bp:1.1
	ARTtmp_merge:1.1.2.1
	ARTtmp:1.1.0.2;
locks; strict;
comment	@# @;


1.6
date	2013.05.06.11.54.45;	author rsprowson;	state Exp;
branches;
next	1.5;
commitid	dyQdYmrTRpty5zOw;

1.5
date	2013.04.10.20.48.42;	author rsprowson;	state Exp;
branches;
next	1.4;
commitid	oyotsfYRPfGzSgLw;

1.4
date	2002.10.30.17.43.42;	author bavison;	state Exp;
branches;
next	1.3;

1.3
date	98.10.20.16.20.18;	author bavison;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	97.05.07.14.14.53;	author kbracey;	state Exp;
branches;
next	1.1;

1.1
date	97.04.28.16.49.16;	author kbracey;	state dead;
branches
	1.1.2.1;
next	;

1.3.4.1
date	2007.10.07.02.17.29;	author bavison;	state Exp;
branches;
next	;
commitid	NSavcPvbNd36pBAs;

1.1.2.1
date	97.04.28.16.49.17;	author kbracey;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Refinements to disc based targets especially
Previous attempt to disable Sprites11 support for 3.10 and 3.50 hadn't spotted it was reenabled in the common options, also the Sprites11 switch was also tied up in Wimp$IconTheme support.
Title bars would flicker when picked up when using a tool sprite set with no 'p' pushed equivalents on RISC OS 4.0x due to screen cache.
Makefile now installs a default set of tools & sprites when target is ThemeDefs.
CLI limit reduced to 256 pre Ursula to save RAM.

Options/!Common:
  Promote Sprites11 switch into !Default
  Remove fixrmatools
Options/!Default:
  Sprites11 true by default
  LongCommandLines true by default, false on targets pre Ursula
  Remove ServiceCallTable (harmless to have it in all cases)
NewSWIs.s:
  Enable Wimp_Extend 13 all the time
Wimp01.s:
  Reduce RMA use by vital 1.5k for non long command line case
  Change sense of Sprites11 switch to adopt all its previous functionality, but not look for '11' suffix when the switch is false
  Adopt ServiceCallTable switch permanently
Wimp02.s:
  Comments ammended
Wimp07.s:
  Range of ADR
Wimp10.s:
  Change sense of Sprites11 switch to adopt all its previous functionality, but not look for '11' suffix when the switch is false
  Adopt :LNOT: fixrmatools switch permanently
  Supress title bar sprite plotting when none of the sprites exist

Version 5.25. Tagged as 'Wimp-5_25'
@
text
@; Copyright 1997 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
;
; Wimp options for a RISC OS 3.7x build of the Window Manager
;

module_postfix	SETS	" RISC OS 3.7"

        Option  TrueIcon2,              true :LAND: TrueIcon1   ; true colour support, phase 2
        Option  TrueIcon3,              true :LAND: TrueIcon2   ; true colour support, phase 3 (windows)
        Option  IconiseButton,          true                    ; Windows given iconise button
        Option  LongCommandLines,       false                   ; Save some RAM
        Option  BounceClose,            true                    ; Furniture buttons are release-type
        Option  ForegroundWindows,      true                    ; Layering of windows within each stack
        Option  SpritePriority,         true                    ; Allow configurable sprite pool priority
        Option  Autoscr,                true                    ; Add Wimp_AutoScroll and dragbox-within-window facilities
        Option  StickyEdges,            false  ; unimplemented  ; Allow windows to "stick" when dragged over edge of screen
        Option  MultiClose,             true                    ; Allow Ctrl-Alt clicks on close/iconise buttons
        Option  PushBothBars,           true                    ; Push in both scrollbars on adjust-drags

        Option  RO4,                    true                    ; RISC OS 4 extensions

        END
@


1.5
log
@Build fixes for variants pre RISC OS 5
Minor fixups as part of univeral !Boot work.
Options no longer ASSERT on International_Help (which is a definition exported by the kernel, rather than a build switch), and instead define a switch which is true for > 3.50.
Non UTF8 supporting case has simple substitutes for Wimp_TextOp.
Legacy_DomainId and LegacyIRQsema no longer cause NULL pointer dereference.
MOVeQ => MOVEQ to placate ObjAsm.

Ursula_RPC version built and used briefly on RISC OS 4.02 host. No other run time testing.

Version 5.22. Tagged as 'Wimp-5_22'
@
text
@d24 1
@


1.4
log
@  Merged in RISC OS 4.02 changes (including ROM patches). Also som bugfixes.
Detail:
  RISC OS 4 changes:
  * Font blending for desktop font (based on NC code, but now configurable)
  * 3-D window/menu/iconbar borders
  * Textured menu backgrounds
  * Loss of rubout box in unfilled text+sprite icons
  * *WimpVisualFlags controls various aspects of cosmetic changes above
  * Iconise button "slot" glyph slightly shorter (but only adopted in the RO400
    Resource directory)
  * Command window has front-window flag set
  * Byte at +39 of the window block has gained two new flag bits:
      bit 2 set => this window must never be given a 3D border
      bit 3 set => this window must always be given a 3D border
      (note that ResEd erroneously created windows with both bits set,
      this case is treated as though both bits were clear)
  * Another two colour specifiers on the end of C validation string command
    for icons controls the foreground and background colours to be used when
    the icon is selected
  * Pointer shape is correctly reprogrammed by the creation of icon
    underneath it
  * Full stops in writable icons are treated the same as spaces from the
    point of view of cursor navigation
  * spritesize routine returns a size of 0 if the sprite didn't exist
    (probably fixes some rendering problems)
  * Adjust-click on back icon brings window to front
  My changes:
  * DeleteRight turned on
  * Icon bar title background is set to default in all resource sets (avoids
    translation table recalc)
  * Error box title now cream across all resource sets
  * RISC OS 4 changes made 32-bit compatible / high addresses safe
  * Undocumented FullIconClipping option disabled
  * Command help made consistent for internationalised and non-
    internationalised builds
  * WimpVisualFlags defaults made sensible
  * Menu side width affected by ThreeD option at *run* time not assemble time
  * Right-clicking on menus with writable items no longer data aborts
  * Auto-opened menus are now at RHS of current icon (matches RISC OS 3.1)
  * Colour menus were knackered unless menu tiling was enabled
  * Fixed a bug whereby adding messages to a task that wanted all messages
    actually caused it to lose all other messages. The RISC OS 4 fix for
    this didn't work
  * Fixed bug introduced in version 4.76: tasks that wanted no messages got
    all of them
  * Autoscrolling is updated every 8 cs rather than every 12 cs
  * Added menu texture to pre-RISC OS 4 sprites files
Admin:
  Tested on Tungsten.

Version 4.78. Tagged as 'Wimp-4_78'
@
text
@a33 2
 	ASSERT	International_Help <> 0

@


1.3
log
@UTF-8 support from previous version switched in; additional alphabet-
conditional support added as follows:
* Correctly converts character index returned from Font_FindCaret into byte
  index into raw string.
* Left-arrow, right-arrow, delete-left and delete-right now act as far as
  the next character boundary, instead of to the next byte.
* Menu item text justification works again (it relies on overwriting spaces
  with hard space characters, which are two-byte characters in UTF-8).
* General key handling code has been rewritten. The Wimp now has three
  internal key input buffers - one each for taking keyboard-generated,
  task-generated, and function-key-generated strings. Each input buffer is
  processed in chunks of one character, rather than one byte; malformed
  UTF-8 characters are rejected, so tasks don't have to worry about them
  (simplifying their character-handling code). There is also a key output
  buffer, to ensure that (UTF-8) sequences of Key_Pressed events are not
  broken up.
* As a result of the above, multiple calls to Wimp_ProcessKey are now
  possible between calls to Wimp_Poll. Previously, this resulted in bytes
  getting jumbled up - making it useless for input of UTF-8 characters.
* Multi-byte characters are inserted into writeable icons in one go, so you
  don't see a brief flicker of the "malformed character" symbol while the
  initial bytes are being inserted.
* Multi-byte characters that don't entirely fit in a writeable icon buffer
  are not inserted at all.
* A new validation string command ("U") can limit the contents of a
  writeable by number of characters, instead of bytes. This will hide the
  character sizes from the user interface.
* Allowable characters (validation string command "A") now works on Unicode
  characters and character ranges.
* Various other minor bugs are fixed (Wimp_ProcessKey 13 can activate a
  writeable menu item, Shift-arrow keys are always consistent in firing off
  Key_Pressed events, etc.)
* Password icons supported: one symbol is displayed for each character
  (instead of for each byte); the display character (validation string
  command "D") can be any UTF-8 character; correctly displays the caret
  after set-caret-by-index calls, even though characters in the processed
  string are different width to those in the raw string, in password icons.

Other changes:
* The border around NC-style error boxes is resized when the error window
  is grown or shrunk.
* Messages, CmdHelp and Template files made consistent across resource
  directories, including support for all Ursula features.
* ShrinkableAreas turned back on in System=RCA builds.
* User interface features of desktop OS builds standardised.

Version 4.06. Tagged as 'Wimp-4_06'
@
text
@d32 2
@


1.3.4.1
log
@  Added Dan Ellis's multithreading support, on a development branch for now.
Detail:
  This breaks the equivalence between tasks and AMB slots, allowing many
  threads of execution to share the same AMB slot, where an application's
  heap is usually located. In API terms, it is presented as an extension to
  Wimp_StartTask, see Docs/Multithreading for more information. It is the
  caller's responsibility to create a new stack chunk for the new thread if
  required. Note that BASIC's variable storage model is fundamentally
  unsuited for multithreading.
Admin:
  This was developed in 2001 and was not committed at the time due to lack
  of testing and peer review. It is now being added as a branch from a
  contemporary trunk Wimp. Hopefully somebody will be interested enough to
  merge the branch into a recent version!

Version 4.66, 4.77.2.1. Tagged as 'Wimp-4_66-4_77_2_1'
@
text
@a30 1
        Option  Threads,                true
@


1.2
log
@ARTtmp branch folded in
@
text
@d19 13
@


1.1
log
@file RO370 was initially added on branch ARTtmp.
@
text
@d1 21
@


1.1.2.1
log
@Added support for multiple options files (RO310, RO350, RO360, RO370, RCA,
Ursula).
Removed run-time MedusaOS checks.
Enabled correct build for RISC OS 3.1 machines.
Ensured that "freepoolinuse" is cleared before OS_ChangeDynamicArea
is intercepted.
Increased maxrects to 256.
Gave copy filter window handle in R10 (if ChildWindows).
Corrected a few border problems when no toolsprites.
Made toolsprites press in immediately - in particular close and toggle can
now be highlighted.
BounceClose flag no affects all of back,close,iconise and toggle.
Made "L" validation string parsing check manually for presence of a number,
to prevent error from OS_ReadUnsigned trashing MessageTrans' error buffers.
Allow error box buttons to stretch to fit text.
Fixed bug: floating point registers were not being saved unless on a portable.
Integrated some of the Wimp_TransferBlock fixes into Wimp08 from Wimp08s.
@
text
@a0 21
; Copyright 1997 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
;
; Wimp options for a RISC OS 3.7x build of the Window Manager
;

 	ASSERT	International_Help <> 0

        END
@
