head	1.6;
access;
symbols
	Wimp-5_23:1.5
	Wimp-5_22:1.5
	Wimp-5_21:1.4
	Wimp-5_20:1.4
	Wimp-5_19:1.4
	Wimp-5_18:1.4
	Wimp-5_17:1.4
	Wimp-5_16:1.4
	Wimp-5_15:1.4
	Wimp-5_14:1.4
	Wimp-5_13:1.4
	Wimp-5_12:1.4
	Wimp-5_11:1.4
	Wimp-5_10:1.4
	Wimp-5_09:1.4
	Wimp-5_08:1.4
	Wimp-5_07:1.4
	Wimp-5_06:1.4
	Wimp-5_05:1.4
	Wimp-5_04:1.4
	Wimp-5_03:1.4
	Wimp-5_02:1.4
	Wimp-5_01:1.4
	Wimp-4_66-4_77_2_1:1.2
	bavison_Threads_dev:1.2.0.4
	bavison_Threads_dev_bp:1.2
	Wimp-5_00:1.4
	Wimp-4_100:1.4
	Wimp-4_99:1.4
	Wimp-4_98:1.4
	Wimp-4_97:1.4
	Wimp-4_96:1.4
	Wimp-4_95:1.4
	Wimp-4_94:1.4
	RO_5_07:1.4
	Wimp-4_93:1.4
	Wimp-4_92:1.4
	Wimp-4_91:1.4
	Wimp-4_90:1.4
	Wimp-4_89:1.4
	Wimp-4_88:1.4
	Wimp-4_87:1.4
	Wimp-4_86:1.4
	Wimp-4_85:1.4
	Wimp-4_84:1.4
	Wimp-4_83:1.4
	Wimp-4_82:1.4
	Wimp-4_81:1.4
	Wimp-4_80:1.4
	Wimp-4_79:1.4
	Wimp-4_78:1.4
	Wimp-4_77:1.3
	Wimp-4_76:1.3
	Wimp-4_75:1.2
	Wimp-4_74:1.2
	Wimp-4_73:1.2
	Wimp-4_72:1.2
	Wimp-4_71:1.2
	Wimp-4_70:1.2
	Wimp-4_69:1.2
	Wimp-4_68:1.2
	Wimp-4_67:1.2
	Wimp-4_66:1.2
	Wimp-4_65:1.2
	Wimp-4_64:1.2
	Wimp-4_63:1.2
	Wimp-4_62:1.2
	Wimp-4_61:1.2
	Wimp-4_60:1.2
	Wimp-4_59:1.2
	Wimp-4_58:1.2
	Wimp-4_36-4_46_2_6:1.2
	Wimp-4_57:1.2
	Alpnet_approved:1.2
	Wimp-4_36-4_46_2_5:1.2
	Wimp-4_56:1.2
	dellis_autobuild_BaseSW:1.2
	Wimp-4_36-4_46_2_4:1.2
	Wimp-4_36-4_46_2_3:1.2
	Wimp-4_55:1.2
	Wimp-4_54:1.2
	Wimp-4_36-4_46_2_2:1.2
	Wimp-4_53:1.2
	Wimp-4_36-4_46_2_1:1.2
	Bethany:1.2.0.2
	Wimp-4_52:1.2
	Wimp-4_51:1.2
	Wimp-4_50:1.2
	Wimp-4_49:1.2
	Wimp-4_48:1.2
	Wimp-4_47:1.2
	Wimp-4_46:1.2
	Wimp-4_45:1.2
	Wimp-4_44:1.2
	Wimp-4_43:1.2
	Wimp-4_42:1.2
	sbrodie_sedwards_16Mar2000:1.2
	Wimp-4_41:1.2
	Wimp-4_40:1.2
	Wimp-4_39:1.2
	Wimp-4_38:1.2
	Wimp-4_37:1.2
	Wimp-4_36:1.2
	Wimp-4_35:1.2
	Wimp-4_34:1.2
	Wimp-4_33:1.2
	Wimp-4_32:1.2
	Wimp-4_31:1.1
	dcotton_autobuild_BaseSW:1.2
	Wimp-4_30:1.1
	Wimp-4_29:1.1
	Wimp-4_28:1.1
	Wimp-4_27:1.1
	Wimp-4_26:1.1
	Wimp-4_25:1.1
	Wimp-4_24:1.1
	Wimp-4_23:1.1
	Wimp-4_22:1.1
	Wimp-4_21:1.1
	Wimp-4_20:1.1
	Wimp-4_19:1.1
	Wimp-4_18:1.1
	Wimp-4_17:1.1
	Wimp-4_16:1.1
	Wimp-4_15:1.1
	Wimp-4_14:1.1
	Wimp-4_13:1.1
	Wimp-4_12:1.1
	bavison_Wimp-4_11:1.1;
locks; strict;
comment	@# @;


1.6
date	2013.05.03.21.08.11;	author rsprowson;	state dead;
branches;
next	1.5;
commitid	QS59VqQdUOQmfeOw;

1.5
date	2013.04.10.20.48.42;	author rsprowson;	state Exp;
branches;
next	1.4;
commitid	oyotsfYRPfGzSgLw;

1.4
date	2002.10.30.17.43.43;	author bavison;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.23.17.12.27;	author bavison;	state Exp;
branches;
next	1.2;

1.2
date	99.10.07.13.28.09;	author bavison;	state Exp;
branches;
next	1.1;

1.1
date	98.11.23.18.25.52;	author bavison;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Slacken pointer checks
The pointer comparison checking required when running in a system with > 64M memory was tightened up from Wimp-4_75 to Wimp-4_76, but to allow the module to target pre RISC OS 5 systems an option to relax those checks is required.
Each check has been revisited and where appropriate demarked with a "AcceptLoosePointer" macro, which just remaps the pointer into the stricter form and carries on. In the strict checking case, the macro reduces to nothing.

Detail:
Add AcceptLoosePointers switch.
Retire singular use of StrongARM switch (calling XOS_SynchroniseCodeAreas is harmless pre StrongARM anyway).
Rename Ursula_RPC options to RO400.
Put duplicate documentation in the attic.
Allow -2 or -1 as the iconbar handle in Wimp_ResizeIcon (ticket #203).
Tighten up the list terminator check in the DebugMemory switch of Memory.s

Tested on RISC OS 3.10 (emulated), 3.50, 3.60, 3.70, 4.02.

Version 5.24. Tagged as 'Wimp-5_24'
@
text
@; Copyright 1998 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
;
; Wimp options for an Ursula_RiscPC build of the Window Manager
;

module_postfix	SETS	" RISC OS 4.0"

        Option  ServiceCallTable,       true                    ; Add Ursula kernel Service Call table
        Option  ChocolateScreen,        true                    ; Clean cached screen after redraw loops
        Option  ShrinkableAreas,        true                    ; Support Shrinkable Dynamic Areas
        Option  KernelLocksFreePool,    true                    ; use OS_Memory 10 to lock Free Pool for Wimp_ClaimFreeMemory

        Option  UrsulaHighlighting,     true                    ; Uses icon highlighting algorithm to suit Ursula new-look

        Option  TrueIcon2,              true :LAND: TrueIcon1   ; true colour support, phase 2
        Option  TrueIcon3,              true :LAND: TrueIcon2   ; true colour support, phase 3 (windows)
        Option  IconiseButton,          true                    ; Windows given iconise button
        Option  BounceClose,            true                    ; Furniture buttons are release-type
        Option  ForegroundWindows,      true                    ; Layering of windows within each stack
        Option  SpritePriority,         true                    ; Allow configurable sprite pool priority
        Option  Autoscr,                true                    ; Add Wimp_AutoScroll and dragbox-within-window facilities
        Option  StickyEdges,            false  ; unimplemented  ; Allow windows to "stick" when dragged over edge of screen
        Option  MultiClose,             true                    ; Allow Ctrl-Alt clicks on close/iconise buttons
        Option  PushBothBars,           true                    ; Push in both scrollbars on adjust-drags

        Option  UTF8,                   false                   ; support for UTF-8 alphabet (Unicode) not required
        Option  CnP,                    false                   ; support for RISC OS selection model and Cut-and-Paste in writeable icons

        Option  RO4,                    true                    ; RISC OS 4 extensions

        END
@


1.5
log
@Build fixes for variants pre RISC OS 5
Minor fixups as part of univeral !Boot work.
Options no longer ASSERT on International_Help (which is a definition exported by the kernel, rather than a build switch), and instead define a switch which is true for > 3.50.
Non UTF8 supporting case has simple substitutes for Wimp_TextOp.
Legacy_DomainId and LegacyIRQsema no longer cause NULL pointer dereference.
MOVeQ => MOVEQ to placate ObjAsm.

Ursula_RPC version built and used briefly on RISC OS 4.02 host. No other run time testing.

Version 5.22. Tagged as 'Wimp-5_22'
@
text
@@


1.4
log
@  Merged in RISC OS 4.02 changes (including ROM patches). Also som bugfixes.
Detail:
  RISC OS 4 changes:
  * Font blending for desktop font (based on NC code, but now configurable)
  * 3-D window/menu/iconbar borders
  * Textured menu backgrounds
  * Loss of rubout box in unfilled text+sprite icons
  * *WimpVisualFlags controls various aspects of cosmetic changes above
  * Iconise button "slot" glyph slightly shorter (but only adopted in the RO400
    Resource directory)
  * Command window has front-window flag set
  * Byte at +39 of the window block has gained two new flag bits:
      bit 2 set => this window must never be given a 3D border
      bit 3 set => this window must always be given a 3D border
      (note that ResEd erroneously created windows with both bits set,
      this case is treated as though both bits were clear)
  * Another two colour specifiers on the end of C validation string command
    for icons controls the foreground and background colours to be used when
    the icon is selected
  * Pointer shape is correctly reprogrammed by the creation of icon
    underneath it
  * Full stops in writable icons are treated the same as spaces from the
    point of view of cursor navigation
  * spritesize routine returns a size of 0 if the sprite didn't exist
    (probably fixes some rendering problems)
  * Adjust-click on back icon brings window to front
  My changes:
  * DeleteRight turned on
  * Icon bar title background is set to default in all resource sets (avoids
    translation table recalc)
  * Error box title now cream across all resource sets
  * RISC OS 4 changes made 32-bit compatible / high addresses safe
  * Undocumented FullIconClipping option disabled
  * Command help made consistent for internationalised and non-
    internationalised builds
  * WimpVisualFlags defaults made sensible
  * Menu side width affected by ThreeD option at *run* time not assemble time
  * Right-clicking on menus with writable items no longer data aborts
  * Auto-opened menus are now at RHS of current icon (matches RISC OS 3.1)
  * Colour menus were knackered unless menu tiling was enabled
  * Fixed a bug whereby adding messages to a task that wanted all messages
    actually caused it to lose all other messages. The RISC OS 4 fix for
    this didn't work
  * Fixed bug introduced in version 4.76: tasks that wanted no messages got
    all of them
  * Autoscrolling is updated every 8 cs rather than every 12 cs
  * Added menu texture to pre-RISC OS 4 sprites files
Admin:
  Tested on Tungsten.

Version 4.78. Tagged as 'Wimp-4_78'
@
text
@d19 1
a19 1
module_postfix  SETS     " Ursula (Risc PC)"
a43 2
        ASSERT  International_Help <> 0

@


1.3
log
@  Given a good thrashing.
Detail:
  All pointers passed to the Wimp (mode selectors, menus, sprite areas,
  palettes, pollwords, validation strings, message lists, routines etc etc)
  in any of its APIs can now be anywhere within the 32-bit address range.
  In general, whenever "<= 0" was accepted as a null condition, the value
  must now be either 0 or -1. It should also be tolerant of system memory
  areas (supervisor stack and RMA) being in the top half of memory.
  Also:
  * Default next slot now a build option - Ursula builds (eg Tungsten) use
    1024K instead of 640K
  * Ursula builds no longer have a build variant in the help string
  * Autosenses ROM location
  * CR-LFs in *Configure messages replaced with LF-CRs
  * Added Iyonix resources (currently based on Morris4)
  * Morris4 sprites files have gained file_lxa, small_lxa, file_unf,
    small_unf and lo!help sprites
  * Ursula sprites files have gained lo!help sprites
  * *WimpSlot can take memory sizes in megabytes or gigabytes
Admin:
  Tested on a "traditional" memory-mapped Tungsten.

Version 4.76. Tagged as 'Wimp-4_76'
@
text
@d19 1
a19 1
module_postfix	SETS	" Ursula (Risc PC)"
d41 2
@


1.2
log
@Switched Euro option on for all builds, at Kevin's request.

(This stops system font character 128 being reprogrammed to a tick, and also
stops the desktop font being switched to WimpSymbol when character 128 is
encountered.)

Version 4.32. Tagged as 'Wimp-4_32'
@
text
@d19 2
@


1.1
log
@Added options file for Ursula_RiscPC builds: similar to Ursula options file,
but without UTF8 support (it's unlikely the rest of the modules will be updated
sufficiently for this to be useful) and without the development cut-n-paste
support. Also removed module postfix (we don't want "Ursula" appearing during
a *Help Modules).

Retagged as bavison_Wimp-4_11.
@
text
@a24 1
        Option  Euro,                   true                    ; Don't map fancy fonts' char 128 to tick - used for Euro
@
