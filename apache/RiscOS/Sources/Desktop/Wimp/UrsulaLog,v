head	4.1;
access;
symbols
	Wimp-5_62:4.1
	Wimp-5_61:4.1
	Wimp-5_60:4.1
	Wimp-5_59:4.1
	Wimp-5_58:4.1
	Wimp-5_57:4.1
	Wimp-5_56:4.1
	Wimp-5_55:4.1
	Wimp-5_54:4.1
	Wimp-5_53:4.1
	Wimp-5_52:4.1
	Wimp-5_51:4.1
	Wimp-5_50:4.1
	Wimp-5_49:4.1
	Wimp-5_48:4.1
	Wimp-5_47-file1ad:4.1
	Wimp-5_47:4.1
	Wimp-5_46:4.1
	Wimp-5_45:4.1
	Wimp-5_44:4.1
	Wimp-5_43:4.1
	Wimp-5_42:4.1
	Wimp-5_41:4.1
	Wimp-5_40:4.1
	Wimp-5_39:4.1
	Wimp-5_38:4.1
	Wimp-5_37:4.1
	Wimp-5_36:4.1
	Wimp-5_35:4.1
	Wimp-5_34:4.1
	Wimp-5_33:4.1
	Wimp-5_32:4.1
	Wimp-5_31:4.1
	Wimp-5_30:4.1
	Wimp-530-pre4:4.1
	Wimp-5_30-pre3:4.1
	Wimp-5_30-pre2:4.1
	Wimp-5_30-pre1:4.1
	Wimp-5_29:4.1
	Wimp-5_28:4.1
	Wimp-5_27:4.1
	Wimp-5_26:4.1
	Wimp-5_25:4.1
	Wimp-5_24:4.1
	Wimp-5_23:4.1
	Wimp-5_22:4.1
	Wimp-5_21:4.1
	Wimp-5_20:4.1
	Wimp-5_19:4.1
	Wimp-5_18:4.1
	Wimp-5_17:4.1
	Wimp-5_16:4.1
	Wimp-5_15:4.1
	Wimp-5_14:4.1
	Wimp-5_13:4.1
	Wimp-5_12:4.1
	Wimp-5_11:4.1
	Wimp-5_10:4.1
	Wimp-5_09:4.1
	Wimp-5_08:4.1
	Wimp-5_07:4.1
	Wimp-5_06:4.1
	Wimp-5_05:4.1
	Wimp-5_04:4.1
	Wimp-5_03:4.1
	Wimp-5_02:4.1
	Wimp-5_01:4.1
	Wimp-4_66-4_77_2_1:4.1
	bavison_Threads_dev:4.1.0.4
	bavison_Threads_dev_bp:4.1
	Wimp-5_00:4.1
	Wimp-4_100:4.1
	Wimp-4_99:4.1
	Wimp-4_98:4.1
	Wimp-4_97:4.1
	Wimp-4_96:4.1
	Wimp-4_95:4.1
	Wimp-4_94:4.1
	RO_5_07:4.1
	Wimp-4_93:4.1
	Wimp-4_92:4.1
	Wimp-4_91:4.1
	Wimp-4_90:4.1
	Wimp-4_89:4.1
	Wimp-4_88:4.1
	Wimp-4_87:4.1
	Wimp-4_86:4.1
	Wimp-4_85:4.1
	Wimp-4_84:4.1
	Wimp-4_83:4.1
	Wimp-4_82:4.1
	Wimp-4_81:4.1
	Wimp-4_80:4.1
	Wimp-4_79:4.1
	Wimp-4_78:4.1
	Wimp-4_77:4.1
	Wimp-4_76:4.1
	Wimp-4_75:4.1
	Wimp-4_74:4.1
	Wimp-4_73:4.1
	Wimp-4_72:4.1
	Wimp-4_71:4.1
	Wimp-4_70:4.1
	Wimp-4_69:4.1
	Wimp-4_68:4.1
	Wimp-4_67:4.1
	Wimp-4_66:4.1
	Wimp-4_65:4.1
	Wimp-4_64:4.1
	Wimp-4_63:4.1
	Wimp-4_62:4.1
	Wimp-4_61:4.1
	Wimp-4_60:4.1
	Wimp-4_59:4.1
	Wimp-4_58:4.1
	Wimp-4_36-4_46_2_6:4.1
	Wimp-4_57:4.1
	Alpnet_approved:4.1
	Wimp-4_36-4_46_2_5:4.1
	Wimp-4_56:4.1
	dellis_autobuild_BaseSW:4.1
	Wimp-4_36-4_46_2_4:4.1
	Wimp-4_36-4_46_2_3:4.1
	Wimp-4_55:4.1
	Wimp-4_54:4.1
	Wimp-4_36-4_46_2_2:4.1
	Wimp-4_53:4.1
	Wimp-4_36-4_46_2_1:4.1
	Bethany:4.1.0.2
	Wimp-4_52:4.1
	Wimp-4_51:4.1
	Wimp-4_50:4.1
	Wimp-4_49:4.1
	Wimp-4_48:4.1
	Wimp-4_47:4.1
	Wimp-4_46:4.1
	Wimp-4_45:4.1
	Wimp-4_44:4.1
	Wimp-4_43:4.1
	Wimp-4_42:4.1
	sbrodie_sedwards_16Mar2000:4.1
	Wimp-4_41:4.1
	Wimp-4_40:4.1
	Wimp-4_39:4.1
	Wimp-4_38:4.1
	Wimp-4_37:4.1
	Wimp-4_36:4.1
	Wimp-4_35:4.1
	Wimp-4_34:4.1
	Wimp-4_33:4.1
	Wimp-4_32:4.1
	Wimp-4_31:4.1
	dcotton_autobuild_BaseSW:4.1
	Wimp-4_30:4.1
	Wimp-4_29:4.1
	Wimp-4_28:4.1
	Wimp-4_27:4.1
	Wimp-4_26:4.1
	Wimp-4_25:4.1
	Wimp-4_24:4.1
	Wimp-4_23:4.1
	Wimp-4_22:4.1
	Wimp-4_21:4.1
	Wimp-4_20:4.1
	Wimp-4_19:4.1
	Wimp-4_18:4.1
	Wimp-4_17:4.1
	Wimp-4_16:4.1
	Wimp-4_15:4.1
	Wimp-4_14:4.1
	Wimp-4_13:4.1
	Wimp-4_12:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:1.1.2.3
	bavison_Wimp-4_11:4.1
	Ursula_RiscPC:1.1.2.3.0.2
	Wimp-4_11:4.1
	Wimp-4_10:4.1
	Wimp-4_09:4.1
	Wimp-4_08:4.1
	Wimp-4_07:4.1
	Wimp-4_06:4.1
	Wimp-4_05:4.1
	Wimp-4_04:4.1
	bavison_Wimp-4_03_noshrinkables:4.1
	Wimp-4_03:4.1
	Wimp-4_02:4.1
	Ursula_merge:1.1.2.3
	bavison_Wimp-4_01:4.1
	Wimp-4_01:4.1
	bavison_Wimp-4_00_TRUNK:4.1
	bavison_Wimp-4_00:1.1.2.3
	mjrobert_Wimp_3_98:1.1.2.2
	rthornb_UrsulaBuild-19Aug1998:1.1.2.3
	UrsulaBuild_FinalSoftload:1.1.2.3
	bavison_Wimp-3_99t:1.1.2.3
	rthornb_UrsulaBuild-12Aug1998:1.1.2.3
	bavison_Wimp-3_99s:1.1.2.3
	aglover_UrsulaBuild-05Aug1998:1.1.2.3
	bavison_Wimp-3_99r:1.1.2.3
	rthornb_UrsulaBuild-29Jul1998:1.1.2.3
	bavison_Wimp-3_99q:1.1.2.3
	rthornb_UrsulaBuild-22Jul1998:1.1.2.3
	bavison_Wimp-3_99p:1.1.2.3
	rthornb_UrsulaBuild-15Jul1998:1.1.2.3
	bavison_Wimp-3_99o:1.1.2.3
	bavison_Wimp-3_99n:1.1.2.3
	rthornb_UrsulaBuild-07Jul1998:1.1.2.3
	bavison_Wimp-3_99m:1.1.2.3
	rthornb_UrsulaBuild-17Jun1998:1.1.2.3
	rthornb_UrsulaBuild-03Jun1998:1.1.2.3
	bavison_Wimp-3_99l:1.1.2.3
	rthornb_UrsulaBuild-27May1998:1.1.2.3
	rthornb_UrsulaBuild-21May1998:1.1.2.3
	bavison_Wimp-3_99k:1.1.2.3
	bavison_Wimp-3_99j:1.1.2.3
	bavison_Wimp-3_99i:1.1.2.3
	bavison_Wimp-3_99h:1.1.2.3
	rthornb_UrsulaBuild_01May1998:1.1.2.3
	bavison_Wimp_399g:1.1.2.3
	bavison_Wimp_399f:1.1.2.3
	bavison_Wimp_399e:1.1.2.3
	bavison_Wimp_399d:1.1.2.3
	bavison_Wimp_399c:1.1.2.3
	Wimp_3_98:1.1.2.2
	kbracey_AW97:1.1.2.1
	Ursula:1.1.0.2;
locks; strict;
comment	@# @;


4.1
date	98.09.18.16.13.08;	author bavison;	state Exp;
branches;
next	1.1;

1.1
date	97.06.11.15.22.39;	author rleggett;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	97.06.11.15.22.40;	author rleggett;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	97.12.08.16.02.14;	author rleggett;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	98.03.10.16.10.51;	author bavison;	state Exp;
branches;
next	;


desc
@@


4.1
log
@Ursula branch Wimp merged back onto trunk.
@
text
@***************************************************************************
                         RISC PC II (PHOEBE) BUILD
***************************************************************************
*                                                                         *
*  Project: Ursula                                                        *
*                                                                         *
*  Module:  WindowManager                                                 *
*                                                                         *
*  Created: Wed 11-Jun-97      By: Richard Leggett                        *
*                                                                         *
*  First version: 3.93                                                    *
*                                                                         *
*    Copyright: © 1997/1998, Acorn Computers Ltd., Cambridge, England.    *
*                                                                         *
***************************************************************************

---------------------------------------------------------------------------

Version: 3.93 Wed 11-Jun-97         Richard Leggett

* Added new wimp message, Message_IconizeAt which is broadcast by the
  Wimp immediately before Message_Iconize and specifies...
     R1+20 window handle of window being iconized
     R1+24 task handle for task which owns the window
     R1+28 x co-ordinate to iconize at
     R1+32 y co-ordinate to iconize at

---------------------------------------------------------------------------

Version: 3.94 Thu 03-Jul-97         Ben Avison

* Autohourglass code added, so Hourglass depth is incremented by one outside
  Wimp_Poll. Effect is to force display of hourglass when a task is slow to
  re-poll the Wimp. Exception made for Command Windows.

---------------------------------------------------------------------------

Version: 3.97 Mon 08-Dec-97         Richard Leggett

* Added a flags word to Message_IconizeAt. If bit 0 is set, this indicates
  window was iconised with a Shift+Click on the close icon.

@


1.1
log
@file UrsulaLog was initially added on branch Ursula.
@
text
@d1 42
@


1.1.2.1
log
@Added log for Ursula
@
text
@a0 26
***************************************************************************
                         RISC PC II (PHOEBE) BUILD
***************************************************************************
*                                                                         *
*  Project: Ursula                                                        *
*                                                                         *
*  Module:  WindowManager                                                 *
*                                                                         *
*  Created: Wed 11-Jun-97      By: Richard Leggett                        *
*                                                                         *
*  First version: 3.93                                                    *
*                                                                         *
*    Copyright:    (C) 1997, Acorn Computers Ltd., Cambridge, England.    *
*                                                                         *
***************************************************************************

---------------------------------------------------------------------------

Version: 3.93 Wed 11-Jun-97         Richard Leggett

* Added new wimp message, Message_IconizeAt which is broadcast by the
  Wimp immediately before Message_Iconize and specifies...
     R1+20 window handle of window being iconized
     R1+24 task handle for task which owns the window
     R1+28 x co-ordinate to iconize at
     R1+32 y co-ordinate to iconize at
@


1.1.2.2
log
@Added flags word to Message_IconizeAt, as per Pinboard FS.
@
text
@a26 8

---------------------------------------------------------------------------

Version: 3.97 Mon 08-Dec-97         Richard Leggett

* Added a flags word to Message_IconizeAt. If bit 0 is set, this indicates
  window was iconised with a Shift+Click on the close icon.
  @


1.1.2.3
log
@Main new features in Ursula build so far
(some are also available in other builds):

* New icon highlighting scheme - hue rotated 180°, photographic negative,
  darkened 25% - suits Ursula icons better.
* Release-button window tools compile-time switch turned on.
* Any "TASK" word cleared on exit from Wimp_OpenWindow, Wimp_GetWindowState,
  Wimp_ForceRedraw and Wimp_CloseDown.
* Child windows are no longer allowed to be opened inside the icon bar.
* Message_IconizeAt generation optimised, and no longer calls non-X SWIs.
* Message_IconsChanged implemented, and switched out on speed grounds.
* Wimp_ReadSysInfo 15 removed, replaced with (new) Wimp_Extend 11.
* Backwindows are now segregated from normal windows. A new category,
  foreground windows, are added, and stay above all other windows. (The error
  box template is updated to make it a foreground window.)
* ROM sprites override RAM sprites (and duplicate RAM sprites are deleted
  during the building of the sprite lookup list, preceding the first sprite
  plot after a sprite pool update).
* Wimp_ReadSysInfo 16 added, to return sprite area pointers in order of
  priority (Wimp_BaseOfSprites retains the ROM/RAM distinction).
* Error box code altered:
  + symbolic names used for offsets into tempworkspace
  + error button text buffer enlarged
  + stretched error buttons now shrink back for next use
  + int_flush_opens called at appropriate points to ensure buttons are seen to
    slab in, and to reduce flicker when redisplaying error box at a different
    width (also fixes some redraw bugs)
  + Cancel button given the R6 type border when it will be activated by Return
    (and is therefore moved to the extreme right in such cases)
  + Escape now always selects the second-right button (unless there's only one
    button!) - this also fixes a bug when there's a single user-defined button
  + keypresses in "xxx may have gone wrong" error boxes are now correctly
    interpreted - previously the buttons available in the underlying box were
    being used to determine the effect of keys
  + maximum number of buttons increased from 4 to 8, and the machine no longer
    crashes when the maximum is exceeded
  + window stretches horizontally to keep error message to 7 lines or less
* Bugfix: opening or creating a window with a minimum x visible area coordinate
  of -1 was leading to any of smearing/flickering/recursive drawing. (This was
  actually due to a failure to recognise which windows' positions had been
  updated.)
* Features merged in from spinner branch Wimp:
  + support for UpCall_MediaSearchEndMessage added
  + control-termination allowed in upcalls (used to require null-termination)
  + escape character switched to default during error box display, then
    switched back again afterwards
* GetRectangle filters are now called with (internal) window handle in R10.
* Autohourglass is deactivated whenever WrchV is invoked. (Also optimised.)
* Action button bugfixes:
  + action buttons now deselect if the pointer is dragged off and a window tool
    is the pressed before all the buttons have been released
  + action buttons now slab in following a long (autorepeating) press on a
    scroll arrow window tool
@
text
@d13 1
a13 1
*    Copyright: © 1997/1998, Acorn Computers Ltd., Cambridge, England.    *
a29 8
Version: 3.94 Thu 03-Jul-97         Ben Avison

* Autohourglass code added, so Hourglass depth is incremented by one outside
  Wimp_Poll. Effect is to force display of hourglass when a task is slow to
  re-poll the Wimp. Exception made for Command Windows.

---------------------------------------------------------------------------

d34 1
a34 1

@
