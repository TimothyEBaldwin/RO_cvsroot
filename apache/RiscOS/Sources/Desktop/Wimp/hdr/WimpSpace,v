head	4.4;
access;
symbols
	Wimp-5_62:4.4
	Wimp-5_61:4.4
	Wimp-5_60:4.4
	Wimp-5_59:4.4
	Wimp-5_58:4.4
	Wimp-5_57:4.4
	Wimp-5_56:4.4
	Wimp-5_55:4.4
	Wimp-5_54:4.4
	Wimp-5_53:4.4
	Wimp-5_52:4.4
	Wimp-5_51:4.4
	Wimp-5_50:4.4
	Wimp-5_49:4.4
	Wimp-5_48:4.4
	Wimp-5_47-file1ad:4.4
	Wimp-5_47:4.4
	Wimp-5_46:4.4
	Wimp-5_45:4.4
	Wimp-5_44:4.4
	Wimp-5_43:4.4
	Wimp-5_42:4.4
	Wimp-5_41:4.4
	Wimp-5_40:4.4
	Wimp-5_39:4.4
	Wimp-5_38:4.4
	Wimp-5_37:4.4
	Wimp-5_36:4.4
	Wimp-5_35:4.4
	Wimp-5_34:4.4
	Wimp-5_33:4.4
	Wimp-5_32:4.4
	Wimp-5_31:4.4
	Wimp-5_30:4.4
	Wimp-530-pre4:4.4
	Wimp-5_30-pre3:4.4
	Wimp-5_30-pre2:4.4
	Wimp-5_30-pre1:4.4
	Wimp-5_29:4.4
	Wimp-5_28:4.4
	Wimp-5_27:4.4
	Wimp-5_26:4.3
	Wimp-5_25:4.3
	Wimp-5_24:4.3
	Wimp-5_23:4.2
	Wimp-5_22:4.2
	Wimp-5_21:4.2
	Wimp-5_20:4.2
	Wimp-5_19:4.2
	Wimp-5_18:4.2
	Wimp-5_17:4.2
	Wimp-5_16:4.2
	Wimp-5_15:4.2
	Wimp-5_14:4.2
	Wimp-5_13:4.2
	Wimp-5_12:4.2
	Wimp-5_11:4.2
	Wimp-5_10:4.2
	Wimp-5_09:4.2
	Wimp-5_08:4.2
	Wimp-5_07:4.2
	Wimp-5_06:4.2
	Wimp-5_05:4.2
	Wimp-5_04:4.2
	Wimp-5_03:4.2
	Wimp-5_02:4.2
	Wimp-5_01:4.2
	Wimp-4_66-4_77_2_1:4.2
	bavison_Threads_dev:4.2.0.4
	bavison_Threads_dev_bp:4.2
	Wimp-5_00:4.2
	Wimp-4_100:4.2
	Wimp-4_99:4.2
	Wimp-4_98:4.2
	Wimp-4_97:4.2
	Wimp-4_96:4.2
	Wimp-4_95:4.2
	Wimp-4_94:4.2
	RO_5_07:4.2
	Wimp-4_93:4.2
	Wimp-4_92:4.2
	Wimp-4_91:4.2
	Wimp-4_90:4.2
	Wimp-4_89:4.2
	Wimp-4_88:4.2
	Wimp-4_87:4.2
	Wimp-4_86:4.2
	Wimp-4_85:4.2
	Wimp-4_84:4.2
	Wimp-4_83:4.2
	Wimp-4_82:4.2
	Wimp-4_81:4.2
	Wimp-4_80:4.2
	Wimp-4_79:4.2
	Wimp-4_78:4.2
	Wimp-4_77:4.2
	Wimp-4_76:4.2
	Wimp-4_75:4.2
	Wimp-4_74:4.2
	Wimp-4_73:4.2
	Wimp-4_72:4.2
	Wimp-4_71:4.2
	Wimp-4_70:4.2
	Wimp-4_69:4.2
	Wimp-4_68:4.2
	Wimp-4_67:4.2
	Wimp-4_66:4.2
	Wimp-4_65:4.2
	Wimp-4_64:4.2
	Wimp-4_63:4.2
	Wimp-4_62:4.2
	Wimp-4_61:4.2
	Wimp-4_60:4.2
	Wimp-4_59:4.2
	Wimp-4_58:4.2
	Wimp-4_36-4_46_2_6:4.2
	Wimp-4_57:4.2
	Alpnet_approved:4.2
	Wimp-4_36-4_46_2_5:4.2
	Wimp-4_56:4.2
	dellis_autobuild_BaseSW:4.2
	Wimp-4_36-4_46_2_4:4.2
	Wimp-4_36-4_46_2_3:4.2
	Wimp-4_55:4.2
	Wimp-4_54:4.2
	Wimp-4_36-4_46_2_2:4.2
	Wimp-4_53:4.2
	Wimp-4_36-4_46_2_1:4.2
	Bethany:4.2.0.2
	Wimp-4_52:4.2
	Wimp-4_51:4.2
	Wimp-4_50:4.2
	Wimp-4_49:4.2
	Wimp-4_48:4.2
	Wimp-4_47:4.2
	Wimp-4_46:4.2
	Wimp-4_45:4.2
	Wimp-4_44:4.2
	Wimp-4_43:4.2
	Wimp-4_42:4.2
	sbrodie_sedwards_16Mar2000:4.2
	Wimp-4_41:4.2
	Wimp-4_40:4.2
	Wimp-4_39:4.2
	Wimp-4_38:4.2
	Wimp-4_37:4.2
	Wimp-4_36:4.2
	Wimp-4_35:4.2
	Wimp-4_34:4.2
	Wimp-4_33:4.2
	Wimp-4_32:4.2
	Wimp-4_31:4.2
	dcotton_autobuild_BaseSW:4.2
	Wimp-4_30:4.2
	Wimp-4_29:4.2
	Wimp-4_28:4.2
	Wimp-4_27:4.2
	Wimp-4_26:4.2
	Wimp-4_25:4.2
	Wimp-4_24:4.2
	Wimp-4_23:4.2
	Wimp-4_22:4.2
	Wimp-4_21:4.2
	Wimp-4_20:4.2
	Wimp-4_19:4.2
	Wimp-4_18:4.2
	Wimp-4_17:4.2
	Wimp-4_16:4.2
	Wimp-4_15:4.2
	Wimp-4_14:4.2
	Wimp-4_13:4.2
	Wimp-4_12:4.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.1
	bavison_Wimp-4_11:4.2
	Ursula_RiscPC:4.1.4.1.0.2
	Wimp-4_11:4.2
	Wimp-4_10:4.2
	Wimp-4_09:4.2
	Wimp-4_08:4.2
	Wimp-4_07:4.2
	Wimp-4_06:4.2
	Wimp-4_05:4.2
	Wimp-4_04:4.2
	bavison_Wimp-4_03_noshrinkables:4.2
	Wimp-4_03:4.2
	Wimp-4_02:4.2
	Ursula_merge:4.1.4.1
	bavison_Wimp-4_01:4.2
	Wimp-4_01:4.2
	nicke_Wimp_3_96M:4.1.7.1
	bavison_Wimp-4_00_TRUNK:4.2
	bavison_Wimp-4_00:4.1.4.1
	nicke_Wimp_3_96:4.1.7.1
	mjrobert_Wimp_3_98:4.1
	rthornb_UrsulaBuild-19Aug1998:4.1.4.1
	UrsulaBuild_FinalSoftload:4.1.4.1
	bavison_Wimp-3_99t:4.1.4.1
	rthornb_UrsulaBuild-12Aug1998:4.1.4.1
	bavison_Wimp-3_99s:4.1.4.1
	aglover_UrsulaBuild-05Aug1998:4.1.4.1
	bavison_Wimp-3_99r:4.1.4.1
	rthornb_UrsulaBuild-29Jul1998:4.1.4.1
	bavison_Wimp-3_99q:4.1.4.1
	jfarrell_NCWimp_3_96:4.1.7.1
	rthornb_UrsulaBuild-22Jul1998:4.1.4.1
	bavison_Wimp-3_99p:4.1.4.1
	rthornb_UrsulaBuild-15Jul1998:4.1.4.1
	bavison_Wimp-3_99o:4.1.4.1
	bavison_Wimp-3_99n:4.1.4.1
	rthornb_UrsulaBuild-07Jul1998:4.1.4.1
	bavison_Wimp-3_99m:4.1.4.1
	rthornb_UrsulaBuild-17Jun1998:4.1.4.1
	rthornb_UrsulaBuild-03Jun1998:4.1.4.1
	bavison_Wimp-3_99l:4.1.4.1
	rthornb_UrsulaBuild-27May1998:4.1.4.1
	rthornb_UrsulaBuild-21May1998:4.1.4.1
	bavison_Wimp-3_99k:4.1.4.1
	bavison_Wimp-3_99j:4.1.4.1
	bavison_Wimp-3_99i:4.1.4.1
	bavison_Wimp-3_99h:4.1.4.1
	rthornb_UrsulaBuild_01May1998:4.1.4.1
	bavison_Wimp_399g:4.1.4.1
	bavison_Wimp_399f:4.1.4.1
	afrost_NC2_Generic:4.1.7.1
	bavison_Wimp_399e:4.1.4.1
	bavison_Wimp_399d:4.1.4.1
	bavison_Wimp_399c:4.1.4.1
	Wimp_3_98:4.1
	kbracey_AW97:4.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Wimp_3_91:4.1
	Spin_merge_7May97:4.1.7.1
	ARTtmp_bp:4.1.7.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	2013.05.11.15.12.03;	author rsprowson;	state Exp;
branches;
next	4.3;
commitid	t0VXhGy6ECMh1ePw;

4.3
date	2013.05.03.21.08.14;	author rsprowson;	state Exp;
branches;
next	4.2;
commitid	QS59VqQdUOQmfeOw;

4.2
date	98.09.18.16.13.58;	author bavison;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.30.32;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.30.32;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.31.59;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	98.03.26.19.31.29;	author bavison;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.23.31;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.21.02;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.4
log
@Introduce definitions of the 16 standard Wimp colours
Substitute magic numbers through the code.
Squash some UAL warnings from missing #'s in Wimp10.s

Version 5.27. Tagged as 'Wimp-5_27'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; > &.Hdr.WimpSpace

;;-----------------------------------------------------------------------------
;; Wimp Header file
;;
;; Change list
;;
;; 13-Apr-88            File created
;;  2-Aug-89    NRaine  PollWord_NonZero reason code added
;; 29-Sep-89    NRaine  Added wimp_caretstr bits
;; 31-Oct-89    NRaine  Added extra menu bits and ii_etc indirected stuff
;; 04 Apr 92    LRust   Added mi_it_indirecttitle
;;
;;-----------------------------------------------------------------------------


iconbar_whandle *       -2              ; changed on 11-Apr-88


; event codes returned from XWimp_Poll

Null_Reason             *       0
Redraw_Window_Request   *       1
Open_Window_Request     *       2       ; can't be masked out
Close_Window_Request    *       3       ; can't be masked out
Pointer_Leaving_Window  *       4
Pointer_Entering_Window *       5
Mouse_Button_Change     *       6
User_Drag_Box           *       7       ; can't be masked out
Key_Pressed             *       8
Menu_Select             *       9       ; can't be masked out
Scroll_Request          *       10      ; can't be masked out
Lose_Caret              *       11
Gain_Caret              *       12
PollWord_NonZero        *       13

User_Message            *       17
User_Message_Recorded   *       18
User_Message_Acknowledge *      19


; masks to prevent us getting certain events back from PollWimp

null_bit           *    1 :SHL: Null_Reason
redraw_bit         *    1 :SHL: Redraw_Window_Request
pointerchange_bits *    (1 :SHL: Pointer_Leaving_Window) +(1 :SHL: Pointer_Entering_Window)
buttonchange_bit   *    1 :SHL: Mouse_Button_Change
keypressed_bit     *    1 :SHL: Key_Pressed
pollword_bit       *    1 :SHL: PollWord_NonZero

pollword_enable      *  1 :SHL: 22      ; poll word at low priority
pollwordfast_enable  *  3 :SHL: 22      ; poll word at high priority


; button state

button_left     *       4
button_middle   *       2
button_right    *       1

button_left_drag  *     button_left  :SHL: 4
button_right_drag *     button_right :SHL: 4

button_left_10    *     button_left  :SHL: 8
button_right_10   *     button_right :SHL: 8

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; wimp_createstr

                ^       0
w_wax0          #       4               ; x, y coordinates of work area
w_way0          #       4
w_wax1          #       4
w_way1          #       4
w_scx           #       4               ; x, y scroll positions
w_scy           #       4               ; (between wex0/y0 and wex1/y1)
w_bhandle       #       4               ; handle of window above this one
w_flags         #       4               ; status of window (open/closed etc.)
w_tfcol         #       1               ; title foreground colour
w_tbcol         #       1               ; title background colour
w_wfcol         #       1               ; work area foreground colour
w_wbcol         #       1               ; work area background colour
w_scouter       #       1               ; scroll bar outer portion
w_scinner       #       1               ; scroll bar inner portion
w_tbcol2        #       1               ; colour if window has input focus
                #       1               ; reserved
w_wex0          #       4               ; work area extent
w_wey0          #       4               ; (x0, y0, x1, y1)
w_wex1          #       4
w_wey1          #       4
w_titleflags    #       4
w_workflags     #       4               ; icon flags for 'work area'
w_areaCBptr     #       4               ; sprite area CB ptr (0 ==> system, 1 ==> wimp, else user)
w_minx          #       2               ; minimum x size (0 ==> use title)
w_miny          #       2               ; minimum y size
w_title         #       12              ; title (max 11 chars, then <CR)
w_nicons        #       4               ; no. of icons following
w_icons         #       0

; standard colour numbers

sc_white              * &0
sc_verylightgrey      * &1
sc_lightgrey          * &2
sc_midlightgrey       * &3
sc_middarkgrey        * &4
sc_darkgrey           * &5
sc_verydarkgrey       * &6
sc_black              * &7
sc_darkblue           * &8
sc_yellow             * &9
sc_lightgreen         * &A
sc_red                * &B
sc_cream              * &C
sc_darkgreen          * &D
sc_orange             * &E
sc_lightblue          * &F
                    
; bit masks for flags/status

wf_title        *       1 :SHL: 0
wf_moveable     *       1 :SHL: 1
wf_vscroll      *       1 :SHL: 2
wf_hscroll      *       1 :SHL: 3
wf_autoredraw   *       1 :SHL: 4
wf_isapane      *       1 :SHL: 5
wf_nochecks     *       1 :SHL: 6
wf_nobackquit   *       1 :SHL: 7
wf_userscroll1  *       1 :SHL: 8         ; auto-repeat
wf_userscroll2  *       1 :SHL: 9         ; debounced
wf_userscroll   *       wf_userscroll1 :OR: wf_userscroll2
wf_realcolours  *       1 :SHL: 10
wf_backwindow   *       1 :SHL: 11
wf_grabkeys     *       1 :SHL: 12

ws_open         *       1 :SHL: 16
ws_top          *       1 :SHL: 17
ws_toggled      *       1 :SHL: 18
ws_toggling     *       1 :SHL: 19
ws_hasfocus     *       1 :SHL: 20
ws_system       *       2_11111:SHL: 16
ws_status       *       ws_open :OR: ws_top     ; for calc_w_status

wf_icon1        *       1 :SHL: 24
wf_icon2        *       1 :SHL: 25
wf_icon3        *       1 :SHL: 26
wf_icon4        *       1 :SHL: 27
wf_icon5        *       1 :SHL: 28
wf_icon6        *       1 :SHL: 29
wf_icon7        *       1 :SHL: 30
wf_iconbits     *       2_1111111 :SHL: 24
wf_newformat    *       1 :SHL: 31

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; for Wimp_GetWindowInfo

                ^       0
wi_handle       #       4
wi_windowdefn   #       0               ; copy of w_ stuff

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; icon definition

                ^       0
i_bbx0          #       4               ; bounding box (x0, y0, x1, y1)
i_bby0          #       4
i_bbx1          #       4               ; if sprite, get size instead
i_bby1          #       4
i_flags         #       4
i_data          #       12              ; up to 12 bytes of text/sprite name etc
i_size          #       0               ; size of icon data
i_shift         *       5
             ASSERT     (i_size = 1:SHL:i_shift)

                ^       0
ii_buffer       #       4               ; indirected icon buffer pointer
ii_validation   #       4               ; validation string pointer
ii_length       #       4               ; size of indirected buffer

; bit masks/positions for icon flags/status

if_text         *       1 :SHL: 0
if_sprite       *       1 :SHL: 1
if_border       *       1 :SHL: 2
if_hcentred     *       1 :SHL: 3
if_vcentred     *       1 :SHL: 4
if_filled       *       1 :SHL: 5
if_fancyfont    *       1 :SHL: 6
if_funnyicon    *       1 :SHL: 7
if_indirected   *       1 :SHL: 8
if_rjustify     *       1 :SHL: 9
if_canadjust    *       1 :SHL: 10
if_halfsize     *       1 :SHL: 11

ifb_buttontype  *       12
if_buttontype   *       2_1111 :SHL: ifb_buttontype

ifb_esg         *       16
if_esg          *       2_11111 :SHL: ifb_esg
if_esg2         *       2_01111 :SHL: ifb_esg ; all but top bit

is_inverted     *       1 :SHL: 21
is_shaded       *       1 :SHL: 22
is_deleted      *       1 :SHL: 23

ifb_fcol        *       24
if_fcol         *       2_1111 :SHL: ifb_fcol
ifb_bcol        *       28
if_bcol         *       2_1111 :SHL: ifb_bcol

ifb_fontno      *       ifb_fcol        ; overlaid with fcol/bcol

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; Wimp_CreateIcon

                ^       0
ci_handle       #       4               ; window handle
ci_iconblock    #       i_size          ; icon definition
ci_size         #       0

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; Wimp_SetIconState

                ^       0
si_handle       #       4               ; window handle
si_iconhandle   #       4               ; icon handle
si_eorword      #       4               ; word to EOR state with
si_clearword    #       4               ; word to BIC state with
si_size         #       0

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; Wimp_GetIconState

                ^       0
gi_handle       #       4               ; window handle
gi_iconhandle   #       4
gi_iconblock    #       i_size          ; icon definition
gi_size         #       0

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; wimp_openstr

                ^       0
u_handle        #       4
u_wax0          #       4
u_way0          #       4
u_wax1          #       4
u_way1          #       4
u_scx           #       4
u_scy           #       4
u_bhandle       #       4
u_wflags        #       4               ; window flags (for GetWindowState)
u_windowstate   #       0

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; Wimp_SetExtent

                ^       0
box_x0          #       4
box_y0          #       4
box_x1          #       4
box_y1          #       4

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; wimp_redrawstr

                ^       0
r_handle        #       4
r_wax0          #       4
r_way0          #       4
r_wax1          #       4
r_way1          #       4
r_updatesize    #       0               ; size of Wimp_UpdateWindow structure
r_scx           #       4
r_scy           #       4
r_gwx0          #       4
r_gwy0          #       4
r_gwx1          #       4
r_gwy1          #       4
r_size          #       0               ; size of Wimp_RedrawWindow structure

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; wimp_mouseblk

                ^       0
b_x             #       4
b_y             #       4
b_buttons       #       4
b_window        #       4
b_icon          #       4
b_size          #       0

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; wimp_caretstr

                ^       0
wc_handle       #       4
wc_icon         #       4
wc_x            #       4
wc_y            #       4
wc_height       #       4
wc_index        #       4
wc_size         #       0

wc_char         #       4               ; for key_pressed event

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; menu definition

                ^       0
m_title         #       12
m_ti_fg_colour  #       1               ; title fg colour
m_ti_bg_colour  #       1               ;       bg colour
m_wa_fg_colour  #       1               ; work area fg colour
m_wa_bg_colour  #       1               ;           bg colour
m_itemwidth     #       4
m_itemheight    #       4
m_verticalgap   #       4
m_headersize    *       @@


; offsets in a menu item

                ^       0
mi_itemflags    #       4
mi_submenu      #       4               ; pointer/window handle
mi_iconflags    #       4               ; values as per normal icon
mi_icondata     #       12              ; data as per normal icon
mi_size         *       @@


; values that mi_itemflags can take

mi_it_tick      *       1 :SHL: 0       ; a tick goes on the left of the item
mi_it_dotted    *       1 :SHL: 1       ; a dotted line should follow the item
mi_it_writeable *       1 :SHL: 2       ; writeable icon rather than menu icon
mi_it_warning   *       1 :SHL: 3       ; send Message_MenuWarning
mi_it_traverse  *       1 :SHL: 4       ; allow menu traversal even for shaded items
mi_it_lastitem  *       1 :SHL: 7       ; this item is the last in the menu
mi_it_indirecttitle *   1 :SHL: 8       ; The menu title is indirected

; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
; Wimp_DragBox

                ^       0
dr_handle       #       4               ; window handle
dr_type         #       4               ; drag type
dr_x0           #       4
dr_y0           #       4
dr_x1           #       4
dr_y1           #       4
dr_parentx0     #       4
dr_parenty0     #       4
dr_parentx1     #       4
dr_parenty1     #       4
dr_size1to7     #       0               ; block size for types 1..7
dr_userR12      #       4
dr_userDraw     #       4
dr_userRemove   #       4
dr_userMove     #       4
dr_size         #       0

; drag types
                        ^       1
dragtype_windowposn     #       1       ; 1     )
dragtype_windowsize     #       1       ; 2     ) require dr_handle
dragtype_windowhscroll  #       1       ; 3     )
dragtype_windowvscroll  #       1       ; 4     )
dragtype_fixedbox       #       1       ; 5
dragtype_rubberbox      #       1       ; 6
dragtype_point          #       1       ; 7
dragtype_userfixedbox   #       1       ; 8     )
dragtype_userrubberbox  #       1       ; 9     ) require dr_user...
dragtype_userfixedboxC  #       1       ; 10    )
dragtype_userrubberboxC #       1       ; 11    )

; drag flags

dragflag_anchored       *       1 :SHL: 0       ; rubber drags fixed to work area
dragflag_clipped        *       1 :SHL: 1       ; dragbox drawn within visible rectangles

        END
@


4.3
log
@Slacken pointer checks
The pointer comparison checking required when running in a system with > 64M memory was tightened up from Wimp-4_75 to Wimp-4_76, but to allow the module to target pre RISC OS 5 systems an option to relax those checks is required.
Each check has been revisited and where appropriate demarked with a "AcceptLoosePointer" macro, which just remaps the pointer into the stricter form and carries on. In the strict checking case, the macro reduces to nothing.

Detail:
Add AcceptLoosePointers switch.
Retire singular use of StrongARM switch (calling XOS_SynchroniseCodeAreas is harmless pre StrongARM anyway).
Rename Ursula_RPC options to RO400.
Put duplicate documentation in the attic.
Allow -2 or -1 as the iconbar handle in Wimp_ResizeIcon (ticket #203).
Tighten up the list terminator check in the DebugMemory switch of Memory.s

Tested on RISC OS 3.10 (emulated), 3.50, 3.60, 3.70, 4.02.

Version 5.24. Tagged as 'Wimp-5_24'
@
text
@d114 19
@


4.2
log
@Ursula branch Wimp merged back onto trunk.
@
text
@d107 1
a107 1
w_areaCBptr     #       4               ; sprite area CB ptr (<=0 ==> system)
@


4.1
log
@Initial revision
@
text
@d372 5
@


4.1.4.1
log
@New features:
Dragboxes can now be clipped by and/or fixed to a given window's work area
SWI Wimp_AutoScroll implemented
Ursula icon highlighting scheme redesigned

Bugfixes:
Wimp_Extend 11 now performs the same check on R1 as the main SWI handling code
Message blocks now updated if in a dynamic area
Screenblanker now turned off when error box is displayed
ptr_double now turned off when a drag starts
@
text
@a371 5
; drag flags

dragflag_anchored       *       1 :SHL: 0       ; rubber drags fixed to work area
dragflag_clipped        *       1 :SHL: 1       ; dragbox drawn within visible rectangles

@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
