head	4.8;
access;
symbols
	Filer-2_43:4.8
	Filer-2_42:4.8
	Filer-2_41:4.8
	Filer-2_40:4.8
	Filer-2_39:4.7
	Filer-2_38:4.7
	Filer-2_37:4.7
	Filer-2_36:4.7
	Filer-2_35:4.7
	Filer-2_34:4.7
	Filer-2_33:4.6
	Filer-2_32:4.6
	Filer-2_31:4.6
	Filer-2_30:4.6
	Filer-2_29:4.6
	Filer-2_28:4.6
	Filer-2_27:4.6
	Filer-2_26:4.6
	Filer-2_25:4.6
	Filer-2_24:4.6
	Filer-2_23:4.6
	Filer-2_22:4.6
	Filer-2_21:4.5
	Filer-2_20:4.4
	Filer-2_19:4.4
	Filer-2_18:4.3
	Filer-2_17:4.3
	Filer-2_16:4.3
	Filer-2_15:4.3
	Filer-2_14:4.3
	Filer-2_13:4.3
	Filer-2_12:4.3
	Filer-2_11:4.3
	Filer-2_10:4.3
	Filer-2_09:4.3
	RO_5_07:4.3
	Filer-2_08:4.3
	Filer-2_07:4.3
	Filer-2_06:4.3
	Filer-2_05:4.3
	Filer-2_04:4.3
	Filer-2_03:4.2
	Filer-2_02:4.2
	Filer-2_01:4.2
	Filer-2_00:4.2
	Filer-1_99:4.2
	Filer-1_98:4.2
	Filer-1_97:4.2
	Ursula_merge:4.1.4.3
	Filer-1_96:4.2
	Filer-1_95:4.1.4.3
	nturton_Filer-1_85:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.3
	Ursula_RiscPC:4.1.4.3.0.2
	rthornb_UrsulaBuild-19Aug1998:4.1.4.3
	UrsulaBuild_FinalSoftload:4.1.4.3
	rthornb_UrsulaBuild-12Aug1998:4.1.4.3
	aglover_UrsulaBuild-05Aug1998:4.1.4.3
	rthornb_UrsulaBuild-29Jul1998:4.1.4.3
	rthornb_UrsulaBuild-22Jul1998:4.1.4.3
	rleggett_Filer-1_94:4.1.4.3
	rthornb_UrsulaBuild-15Jul1998:4.1.4.3
	rthornb_UrsulaBuild-07Jul1998:4.1.4.3
	rthornb_UrsulaBuild-17Jun1998:4.1.4.3
	rthornb_UrsulaBuild-03Jun1998:4.1.4.3
	rthornb_UrsulaBuild-27May1998:4.1.4.3
	rleggett_Filer-1_93:4.1.4.3
	rthornb_UrsulaBuild-21May1998:4.1.4.3
	rthornb_UrsulaBuild_01May1998:4.1.4.3
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.8
date	2015.07.29.19.19.49;	author rsprowson;	state Exp;
branches;
next	4.7;
commitid	IGbCCybMxb91odvy;

4.7
date	2013.11.24.12.33.02;	author rsprowson;	state Exp;
branches;
next	4.6;
commitid	qgjIfJ3IKLI7Owex;

4.6
date	2010.01.07.21.52.55;	author rool;	state Exp;
branches;
next	4.5;

4.5
date	2010.01.07.21.43.30;	author rool;	state Exp;
branches;
next	4.4;

4.4
date	2009.07.03.14.06.31;	author srevill;	state Exp;
branches;
next	4.3;

4.3
date	2002.08.22.21.25.50;	author bavison;	state Exp;
branches;
next	4.2;

4.2
date	99.08.17.11.56.29;	author sbrodie;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.29.23;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.29.23;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.27.18;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	97.08.27.09.08.54;	author rleggett;	state Exp;
branches;
next	4.1.4.2;

4.1.4.2
date	97.09.24.13.26.35;	author rleggett;	state Exp;
branches;
next	4.1.4.3;

4.1.4.3
date	98.01.07.10.27.51;	author rleggett;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.16.30;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.16.00;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.8
log
@Minor filer fixes
When a viewer is in 'sort by size' mode the size of image files was not being considered. So, a dir full of ZIP files (SparkFS not run) would be in size order amongst the other files, but if SparkFS was running the image files would be sorted as dirs of 0 size.
Fix for ticket #400, the *Filer_Run command now defaults to '-noshift' and inspecting the shift key state must be requested (opt in instead of opt out). This solves two key annoyances, running the !Boot sequence and holding shift causes you to enter the desktop with the obey files from the Tasks directory unhelpfully loaded in a text editor, and when setting a task alarm in !Alarm if the alarm happens to go off when you're typing with the shift key the task's !Run file opens in a text editor.

SortDir.s: count image files as files so they're sorted like they were in Filer 2.26
Commands.s: parse new option switch, and consider -noshift the default
Messages/HelpSrc: add the switch to the command syntax

Tested with a task alarm in !Alarm with and without shift held down, and running a !Boot sequence similarly.

Version 2.40. Tagged as 'Filer-2_40'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
        SUBT    > <wini>arm.Filer.HelpSrc

        [ International_Help = 0

Filer_OpenDir_Help
        =       "*", TokenEscapeChar,Token0
        =       " may be used in the Desktop to open a directory viewer.", 13
        =       "Options are taken from the Filer's template and the user's",13
        =       "selections in the Filer's menu.",13
        =       "Switches:",13
        =       "-SmallIcons", 9, "Display small icons",13
        =       "-LargeIcons", 9, "Display large icons", 13
        =       "-FullInfo", 9, "Display full information", 13
        =       "-SortbyName", 9, "Display sorted by name", 13
        =       "-SortbyType", 9, "Display sorted by type", 13
        =       "-SortbyDate", 9, "Display sorted by date", 13
        =       "-SortbySize", 9, "Display sorted by size", 13
        =       "-ReverseSort", 9, "Sort in reverse order", 13
        =       "-NumericalSort", 9, "Sort digits in names as numbers", 13
        =       "Field names:", 13
        =       "-DIRectory", 9, "The full dirname", 13
        =       "-X0, -topleftx", 9, "The x-coordinate of the top left of", 13
        =       9, 9, 9, "directory viewer", 13
        =       "-Y1, -toplefty", 9, "The y-coordinate of the top left of", 13
        =       9, 9, 9, "directory viewer", 13
        =       "-Width", 9, 9, "The width of the viewer", 13
        =       "-Height", 9, 9, "The height of the viewer", 13
        =       "All numeric quantities are in OS units", 13
Filer_OpenDir_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " <full dirname> [<x> <y> [<width> <height>]] [<switches>]", 0

Filer_CloseDir_Help
        =       "*", TokenEscapeChar,Token0
        =       " may be used in the Desktop to close a directory viewer."
        =       13
Filer_CloseDir_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " <full dirname>", 0

Filer_Run_Help
        =       "*", TokenEscapeChar,Token0
        =       " is equivalent of double clicking on an object", 13
Filer_Run_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " [-Shift|-NoShift] <file>|<application>", 0

Filer_Boot_Help
        =       "*", TokenEscapeChar,Token0
        =       " boots the application specified", 13

Filer_Boot_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " <application>", 0

Filer_Truncation_Help
        =       "*", TokenEscapeChar,Token0
        =       " is used to set the width that long filenames are truncated to. ", 13

Filer_Truncation_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " [-LargeIconDisplay <number of pixels>]", 0

Filer_Options_Help
        =       "*", TokenEscapeChar,Token0
        =       " sets the default options for Filer operations.", 13
        =       "Switches:", 13
        =       "-ConfirmAll", 9, "Prompt for confirmation of all operations", 13
        =       "-ConfirmDeletes", 9, "Prompt for confirmation of deletes only", 13
        =       "-Verbose", 9, "Provide an information window during operations", 13
        =       "-Force", 9, 9, "Force overwrites of existing objects", 13
        =       "-Newer", 9, 9, "Copy only if the source is more recent than the destination", 13
        =       "-Faster", 9, 9, "Perform operation faster", 13

Filer_Options_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " <switches>", 0

Filer_Layout_Help
        =       "*", TokenEscapeChar,Token0
        =       " sets the default layout for filer viewers.", 13

Filer_Layout_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " [-LargeIcons|-SmallIcons|-FullInfo] [-SortByName|-SortByType|-SortBySize|-SortByDate] [-ReverseSort] [-NumericalSort]", 0

Filer_DClickHold_Help
        =       "*", TokenEscapeChar,Token0
        =       " sets time second mouseclick must be held down for.", 13

Filer_DClickHold_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " delay in cs", 0

Desktop_Filer_Help
        =       "The Filer is the Desktop file management tool.",13
        =       "Do not use *",TokenEscapeChar,Token0,","
        =       " use *Desktop instead."
        =       0

; don't fall into syntax msg!

Desktop_Filer_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       "", 0
        |
Filer_OpenDir_Help      DCB "HFLROPD",0
Filer_OpenDir_Syntax    DCB "SFLROPD",0

Filer_CloseDir_Help     DCB "HFLRCLD",0
Filer_CloseDir_Syntax   DCB "SFLRCLD",0

Filer_Run_Help          DCB "HFLRRUN",0
Filer_Run_Syntax        DCB "SFLRRUN",0

Filer_Boot_Help         DCB "HFLRBOO",0
Filer_Boot_Syntax       DCB "SFLRBOO",0

Filer_Truncation_Help   DCB "HFLRTRU",0
Filer_Truncation_Syntax DCB "SFLRTRU",0

Filer_Options_Help      DCB "HFLROPT",0
Filer_Options_Syntax    DCB "SFLROPT",0

Filer_Layout_Help       DCB "HFLRLAY",0
Filer_Layout_Syntax     DCB "SFLRLAY",0

Filer_DClickHold_Help   DCB "HFLRDCH",0
Filer_DClickHold_Syntax DCB "SFLRDCH",0

Desktop_Filer_Help      DCB "HFLRDFL",0
Desktop_Filer_Syntax    DCB "SFLRDFL",0
        ]


        END
@


4.7
log
@Add support for sorting dir contents numerically as well as alphabetically
New option to the display menu "Numerical sort" modifies the existing 4 sort methods (name, size, type, date) to sort by interpreting any numbers as cardinals. This modifier only really has effect on "Sort by name" since the other three already sort numerically.
This means for example a dir containing "File9,File10,File11" will appear in that order, whereas sorting by name alone would show "File10,File11,File9".

SelStuff0.s/SelStuff.s/Gets.s: Removed. Single function placed into SelStuff.
ModHdr.s/OpenDir.s/Commands.s/DebugFlags.s: Decoding of -NumericalSort switch, switched out undocumented 'Query' flags.
DecodeMenu.s/MenuCreate.s: Handle menu entry, simplify rename code a little.
HelpSrc.s/Messages: Extra help text.
SortDir.s: Pass option flag to Territory_Collate.
WkspEtc.s: Corrected definition of db_sm_type and db_sm_size.

Version 2.34. Tagged as 'Filer-2_34'
@
text
@d63 1
a63 1
        =       " [-NoShift] <file>|<application>", 0
d106 1
a106 1
        =       " [-LargeIcons | -SmallIcons | -FullInfo] [-SortByName | -SortByType | -SortBySize | -SortByDate] [-ReverseSort] [-NumericalSort]", 0
@


4.6
log
@  Add the ability to sort Filer objects in reverse order
Detail:
  It's been possible to sort Filer objects using various criteria for a long
  time but sorting objects in reverse order was not possible. This change aims
  to remedy that omission.
  The option 'Reverse sort' has been added to the 'Display' submenu of the
  Filer menu, allowing the sort order of individual directory viewers to be
  changed dynamically.
  The switch -ReverseSort has been added to the command Filer_OpenDir to allow
  it to open directories with the sort order reversed.
  The switch -ReverseSort has been added to the Filer_Layout command so that
  reverse sort order can be set as default for new directory viewers. The
  Filer_Layout command is also written to the FlrSetup file in Choices:Boot.
  Tasks by the Filer configure plug-in (which has been also updated to allow
  -ReverseSort).
Admin:
  Tested on Iyonix RO5.14


Version 2.22. Tagged as 'Filer-2_22'
@
text
@d32 2
a33 1
        =       "-ReverseSort", 9, "Display sorted in reverse order", 13
d106 1
a106 1
        =       " [-LargeIcons | -SmallIcons | -FullInfo] [-SortByName | -SortByType | -SortBySize | -SortByDate] [-ReverseSort]", 0
@


4.5
log
@  Make doubleclick-and-hold configurable
Detail:
  Added the command Filer_DClickHold to the Filer.
  It allows you to specify how long the second click of a doubleclick must be
  held down for before it is seen as a doubleclick-and-hold.
  The delay is specified in centiseconds, setting the delay to zero turns
  doubleclick-and-hold off.
Admin:
  Tested on Iyonix RO5.14
  Submitted by Fred Graute, mid-December 2009

Version 2.21. Tagged as 'Filer-2_21'
@
text
@d32 1
d105 1
a105 1
        =       " [-LargeIcons | -SmallIcons | -FullInfo] [-SortByName | -SortByType | -SortBySize | -SortByDate]", 0
@


4.4
log
@  Added -NoShift parameter to Filer_Run
Detail:
  Added -NoShift parameter to Filer_Run command, mainly for benefit of future version of Alarm.
  Added new macro for reading cli parameters.
  Restored missing spaces from messages file.
Admin:
  Tested on RPC RO4.02
Notes:
  Changes by James Lampard.

Version 2.19. Tagged as 'Filer-2_19'
@
text
@d106 9
d149 3
@


4.3
log
@  Some changes I made to build a RISC OS 3.1 softload version.
Detail:
  * Can now build versions compatible with RISC OS 3.5 or earlier (non-
    internationalised commands were missing)
  * Fixed a mistake in the Messages file that caused suboptimal tokenisation
  * Added a MkRam TaskObey file to ease standalone builds
Admin:
  Tested on Virtual A5000!

Version 2.04. Tagged as 'Filer-2_04'
@
text
@d61 1
a61 1
        =       " <file>|<application>", 0
@


4.2
log
@Merged Ursula branch.
Moved to srccommit.

Version 1.96. Tagged as 'Filer-1_96'
@
text
@d61 1
a61 1
        =       " <file>|<application>", 0 
d81 24
@


4.1
log
@Initial revision
@
text
@d72 10
d106 9
@


4.1.4.1
log
@Long filename support and SaveAs style new directory creation
@
text
@a71 10
Filer_Truncation_Help
        =       "*", TokenEscapeChar,Token0
        =       " is used to set the width that long filenames are truncated to. ", 13

Filer_Truncation_Syntax
        =       "Syntax: *"
        =       TokenEscapeChar,Token0
        =       " [-LargeIconDisplay <number of pixels>]", 0


a95 3

Filer_Truncation_Help   DCB "HFLRTRU",0
Filer_Truncation_Syntax DCB "SFLRTRU",0
@


4.1.4.2
log
@Add new options to Options menu, plus fixed bugs
@
text
@a109 3
Filer_Options_Help   DCB "HFLROPT",0
Filer_Options_Syntax DCB "SFLROPT",0

@


4.1.4.3
log
@A *Filer_Layout command now replaces CMOS setting of the display options.
Fixed bug which meant dirviews weren't sorted if they had >256 entries.
Increased dirnamebuffer to 2K to cope with long pathname renames.
@
text
@d110 2
a111 5
Filer_Options_Help      DCB "HFLROPT",0
Filer_Options_Syntax    DCB "SFLROPT",0

Filer_Layout_Help       DCB "HFLRLAY",0
Filer_Layout_Syntax     DCB "SFLRLAY",0
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
