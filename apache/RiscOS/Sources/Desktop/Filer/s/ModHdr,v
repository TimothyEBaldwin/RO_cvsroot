head	4.10;
access;
symbols
	Filer-2_43:4.10
	Filer-2_42:4.10
	Filer-2_41:4.10
	Filer-2_40:4.10
	Filer-2_39:4.10
	Filer-2_38:4.10
	Filer-2_37:4.10
	Filer-2_36:4.10
	Filer-2_35:4.10
	Filer-2_34:4.10
	Filer-2_33:4.9
	Filer-2_32:4.9
	Filer-2_31:4.9
	Filer-2_30:4.9
	Filer-2_29:4.9
	Filer-2_28:4.9
	Filer-2_27:4.9
	Filer-2_26:4.9
	Filer-2_25:4.9
	Filer-2_24:4.9
	Filer-2_23:4.9
	Filer-2_22:4.9
	Filer-2_21:4.8
	Filer-2_20:4.7
	Filer-2_19:4.7
	Filer-2_18:4.6
	Filer-2_17:4.5
	Filer-2_16:4.5
	Filer-2_15:4.5
	Filer-2_14:4.5
	Filer-2_13:4.5
	Filer-2_12:4.5
	Filer-2_11:4.5
	Filer-2_10:4.5
	Filer-2_09:4.5
	RO_5_07:4.5
	Filer-2_08:4.5
	Filer-2_07:4.4
	Filer-2_06:4.4
	Filer-2_05:4.4
	Filer-2_04:4.4
	Filer-2_03:4.4
	Filer-2_02:4.4
	Filer-2_01:4.4
	Filer-2_00:4.3
	Filer-1_99:4.3
	Filer-1_98:4.3
	Filer-1_97:4.3
	Ursula_merge:4.1.4.3
	Filer-1_96:4.2
	Filer-1_95:4.1.4.3
	nturton_Filer-1_85:4.1
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.3
	Ursula_RiscPC:4.1.4.3.0.2
	rthornb_UrsulaBuild-19Aug1998:4.1.4.3
	UrsulaBuild_FinalSoftload:4.1.4.3
	rthornb_UrsulaBuild-12Aug1998:4.1.4.3
	aglover_UrsulaBuild-05Aug1998:4.1.4.3
	rthornb_UrsulaBuild-29Jul1998:4.1.4.3
	rthornb_UrsulaBuild-22Jul1998:4.1.4.3
	rleggett_Filer-1_94:4.1.4.3
	rthornb_UrsulaBuild-15Jul1998:4.1.4.3
	rthornb_UrsulaBuild-07Jul1998:4.1.4.3
	rthornb_UrsulaBuild-17Jun1998:4.1.4.3
	rthornb_UrsulaBuild-03Jun1998:4.1.4.3
	rthornb_UrsulaBuild-27May1998:4.1.4.3
	rleggett_Filer-1_93:4.1.4.3
	rthornb_UrsulaBuild-21May1998:4.1.4.3
	rthornb_UrsulaBuild_01May1998:4.1.4.3
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.10
date	2013.11.24.12.33.02;	author rsprowson;	state Exp;
branches;
next	4.9;
commitid	qgjIfJ3IKLI7Owex;

4.9
date	2010.01.07.21.52.56;	author rool;	state Exp;
branches;
next	4.8;

4.8
date	2010.01.07.21.43.30;	author rool;	state Exp;
branches;
next	4.7;

4.7
date	2009.07.03.14.06.32;	author srevill;	state Exp;
branches;
next	4.6;

4.6
date	2009.06.11.20.55.26;	author bavison;	state Exp;
branches;
next	4.5;

4.5
date	2003.02.07.15.23.48;	author bavison;	state Exp;
branches;
next	4.4;

4.4
date	2001.03.16.17.09.23;	author sbrodie;	state Exp;
branches;
next	4.3;

4.3
date	2000.04.20.16.21.13;	author kbracey;	state Exp;
branches;
next	4.2;

4.2
date	99.08.17.11.56.33;	author sbrodie;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.29.24;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.29.24;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.27.25;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	97.08.27.09.09.01;	author rleggett;	state Exp;
branches;
next	4.1.4.2;

4.1.4.2
date	97.09.24.13.26.37;	author rleggett;	state Exp;
branches;
next	4.1.4.3;

4.1.4.3
date	98.01.07.10.27.53;	author rleggett;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.16.42;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.16.06;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.10
log
@Add support for sorting dir contents numerically as well as alphabetically
New option to the display menu "Numerical sort" modifies the existing 4 sort methods (name, size, type, date) to sort by interpreting any numbers as cardinals. This modifier only really has effect on "Sort by name" since the other three already sort numerically.
This means for example a dir containing "File9,File10,File11" will appear in that order, whereas sorting by name alone would show "File10,File11,File9".

SelStuff0.s/SelStuff.s/Gets.s: Removed. Single function placed into SelStuff.
ModHdr.s/OpenDir.s/Commands.s/DebugFlags.s: Decoding of -NumericalSort switch, switched out undocumented 'Query' flags.
DecodeMenu.s/MenuCreate.s: Handle menu entry, simplify rename code a little.
HelpSrc.s/Messages: Extra help text.
SortDir.s: Pass option flag to Territory_Collate.
WkspEtc.s: Corrected definition of db_sm_type and db_sm_size.

Version 2.34. Tagged as 'Filer-2_34'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;                          Filer module header
; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

 ASSERT (.=Module_BaseAddr)

        ENTRY

        DCD     Filer_Start        -Module_BaseAddr
        DCD     Filer_Init         -Module_BaseAddr
        DCD     Filer_Die          -Module_BaseAddr
        DCD     Filer_Service      -Module_BaseAddr
        DCD     Filer_TitleString  -Module_BaseAddr
        DCD     Filer_HelpString   -Module_BaseAddr
        DCD     Filer_CommandTable -Module_BaseAddr
        DCD     0
        DCD     0
        DCD     0
        DCD     0
 [ International_Help <> 0
        DCD     messages_file      -Module_BaseAddr
 |
        DCD     0
 ]
        DCD     Filer_ModuleFlags  -Module_BaseAddr

Filer_CommandTable ; Name Max min

        Command Filer_OpenDir,  14, 1, International_Help
        Command Filer_CloseDir, 1, 1, &100:OR: International_Help
        Command Filer_Run, 2, 1, International_Help
        Command Filer_Boot, 1, 1, &100 :OR:International_Help

        Command Filer_Truncation, 6, 2, International_Help
        Command Filer_Options, 6, 0, International_Help
        Command Filer_Layout, 4, 1, International_Help
        Command Filer_DClickHold, 1, 1, International_Help

        Command Desktop_Filer,  0, 0, International_Help
Filer_StarCommand * Command_LastName + Module_BaseAddr ; Saves a string
Filer_TitleString * Filer_StarCommand + :LEN:"Desktop_" ; And another

        DCB     0                       ; End of table

        GET     TokHelpSrc.s

Filer_HelpString
        DCB     "Filer", TAB, TAB, "$Module_HelpVersion", 0
        ALIGN

Filer_ModuleFlags
      [ No32bitCode
        DCD     0
      |
        DCD     ModuleFlag_32bit
      ]
;

        END
@


4.9
log
@  Add the ability to sort Filer objects in reverse order
Detail:
  It's been possible to sort Filer objects using various criteria for a long
  time but sorting objects in reverse order was not possible. This change aims
  to remedy that omission.
  The option 'Reverse sort' has been added to the 'Display' submenu of the
  Filer menu, allowing the sort order of individual directory viewers to be
  changed dynamically.
  The switch -ReverseSort has been added to the command Filer_OpenDir to allow
  it to open directories with the sort order reversed.
  The switch -ReverseSort has been added to the Filer_Layout command so that
  reverse sort order can be set as default for new directory viewers. The
  Filer_Layout command is also written to the FlrSetup file in Choices:Boot.
  Tasks by the Filer configure plug-in (which has been also updated to allow
  -ReverseSort).
Admin:
  Tested on Iyonix RO5.14


Version 2.22. Tagged as 'Filer-2_22'
@
text
@d50 1
a50 1
        Command Filer_Layout, 3, 1, International_Help
@


4.8
log
@  Make doubleclick-and-hold configurable
Detail:
  Added the command Filer_DClickHold to the Filer.
  It allows you to specify how long the second click of a doubleclick must be
  held down for before it is seen as a doubleclick-and-hold.
  The delay is specified in centiseconds, setting the delay to zero turns
  doubleclick-and-hold off.
Admin:
  Tested on Iyonix RO5.14
  Submitted by Fred Graute, mid-December 2009

Version 2.21. Tagged as 'Filer-2_21'
@
text
@d50 1
a50 1
        Command Filer_Layout, 2, 1, International_Help
@


4.7
log
@  Added -NoShift parameter to Filer_Run
Detail:
  Added -NoShift parameter to Filer_Run command, mainly for benefit of future version of Alarm.
  Added new macro for reading cli parameters.
  Restored missing spaces from messages file.
Admin:
  Tested on RPC RO4.02
Notes:
  Changes by James Lampard.

Version 2.19. Tagged as 'Filer-2_19'
@
text
@d51 1
@


4.6
log
@  GET file pathnames changed
Detail:
  Uses suffixed file extensions for compatiblity with both objasm and asasm.
Admin:
  Supplied by Peter Naulls, tested at ROOL

Version 2.17. Not tagged
@
text
@d45 1
a45 1
        Command Filer_Run, 1, 1, International_Help
@


4.5
log
@Fixed abort when dragging a file to another directory display - merging
fault in No16bitOffsets merge.

Retagged as 'Filer-2_08'

Version 2.08. Not tagged
@
text
@d58 1
a58 1
        GET     s.TokHelpSrc
@


4.4
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 2.01. Tagged as 'Filer-2_01'
@
text
@d21 2
@


4.3
log
@Made 32-bit compatible. Quite a complex job, and only limited testing so far.

Version 1.97. Tagged as 'Filer-1_97'
@
text
@a18 2
        LEADR   Module_LoadAddr

d59 2
a60 6
	DCB     "Filer", TAB, TAB, "$Module_MajorVersion ($Module_Date)"
      [ Module_MinorVersion <> ""
        =       " $Module_MinorVersion"
      ]
        DCB     0
                ALIGN
@


4.2
log
@Merged Ursula branch.
Moved to srccommit.

Version 1.96. Tagged as 'Filer-1_96'
@
text
@d39 1
d47 1
a47 1
        
d67 7
@


4.1
log
@Initial revision
@
text
@d46 4
d60 7
a66 1
        DCB     "Filer", TAB, TAB, "$Version ($CurrentDate)", 0
@


4.1.4.1
log
@Long filename support and SaveAs style new directory creation
@
text
@a45 2
        
        Command Filer_Truncation, 6, 2, International_Help
@


4.1.4.2
log
@Add new options to Options menu, plus fixed bugs
@
text
@a47 1
        Command Filer_Options, 6, 0, International_Help
@


4.1.4.3
log
@A *Filer_Layout command now replaces CMOS setting of the display options.
Fixed bug which meant dirviews weren't sorted if they had >256 entries.
Increased dirnamebuffer to 2K to cope with long pathname renames.
@
text
@a48 1
        Command Filer_Layout, 2, 1, International_Help
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
