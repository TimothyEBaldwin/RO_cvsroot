head	4.4;
access;
symbols
	Pinboard-1_04:4.4
	Pinboard-1_03:4.4
	Pinboard-1_02:4.4
	Pinboard-1_01:4.4
	Pinboard-1_00:4.4
	Pinboard-0_99:4.4
	Pinboard-0_98:4.4
	Pinboard-0_97:4.4
	Pinboard-0_96:4.4
	Pinboard-0_95:4.4
	Pinboard-0_94:4.4
	Pinboard-0_93:4.4
	Pinboard-0_92:4.3
	Pinboard-0_91:4.3
	Pinboard-0_90:4.3
	Pinboard-0_89:4.3
	Pinboard-0_88:4.3
	Pinboard-0_87:4.3
	Pinboard-0_86:4.3
	Pinboard-0_85:4.3
	Pinboard-0_84:4.3
	Pinboard-0_83:4.3
	Pinboard-0_82:4.3
	RO_5_07:4.3
	Pinboard-0_81:4.3
	Pinboard-0_80:4.3
	Pinboard-0_79:4.3
	Pinboard-0_78:4.3
	Pinboard-0_77:4.3
	Pinboard-0_76:4.3
	Ursula_merge:4.1.4.1
	Pinboard-0_75:4.2
	mstphens_UrsulaRiscPCBuild_20Nov98:4.1.4.1
	Ursula_RiscPC:4.1.4.1.0.2
	rleggett_Pinboard-0_75d:4.1.4.1
	rthornb_UrsulaBuild-19Aug1998:4.1.4.1
	UrsulaBuild_FinalSoftload:4.1.4.1
	rthornb_UrsulaBuild-12Aug1998:4.1.4.1
	aglover_UrsulaBuild-05Aug1998:4.1.4.1
	rthornb_UrsulaBuild-29Jul1998:4.1.4.1
	rthornb_UrsulaBuild-22Jul1998:4.1.4.1
	rleggett_Pinboard-0_75c:4.1.4.1
	rleggett_Pinboard-0_75b:4.1.4.1
	rleggett_Pinboard-0_75:4.1.4.1
	rthornb_UrsulaBuild-15Jul1998:4.1.4.1
	rthornb_UrsulaBuild-07Jul1998:4.1.4.1
	rthornb_UrsulaBuild-17Jun1998:4.1.4.1
	rthornb_UrsulaBuild-03Jun1998:4.1.4.1
	rthornb_UrsulaBuild-27May1998:4.1.4.1
	rthornb_UrsulaBuild-21May1998:4.1.4.1
	rleggett_Pinboard-0_74:4.1.4.1
	rthornb_UrsulaBuild_01May1998:4.1.4.1
	Spinner_B20_2:4.1.7.1
	Spinner_19_3:4.1.7.1
	Spinner_B18:4.1.7.1
	Spinner_B17:4.1.7.1
	Spinner_B15:4.1.7.1
	Spinner_B14:4.1.7.1
	Spinner_B13:4.1.7.1
	Spinner_B12:4.1.7.1
	Spinner_B10:4.1.7.1
	Daytona:4.1.0.6
	Daytona_bp:4.1
	Ursula:4.1.0.4
	Ursula_bp:4.1
	Spinner_B7:4.1.7.1
	RO_3_71:4.1.3.1
	ARTtmp_merge:4.1.7.1
	Spin_3Apr97:4.1.7.1
	ARTtmp:4.1.7.1.0.2
	Spin_merge:4.1.7.1
	MergeFiles:4.1.3.1
	RO_3_70:4.1.3.1
	NC_1_06:4.1.7.1
	Spinner:4.1.7
	Spin_xx:4.1.5
	NC_xx:4.1.5.1
	RO_3_60:4.1.1.1
	StrongARM:4.1.3
	Black:4.1.1;
locks; strict;
comment	@# @;


4.4
date	2011.09.24.07.31.19;	author rsprowson;	state Exp;
branches;
next	4.3;
commitid	nRjnbtmOSxK1BIAv;

4.3
date	2001.03.16.17.07.03;	author sbrodie;	state Exp;
branches;
next	4.2;

4.2
date	99.08.17.19.05.17;	author sbrodie;	state Exp;
branches;
next	4.1;

4.1
date	96.11.05.09.29.59;	author nturton;	state Exp;
branches
	4.1.1.1
	4.1.3.1
	4.1.4.1
	4.1.5.1
	4.1.7.1;
next	;

4.1.1.1
date	96.11.05.09.29.59;	author nturton;	state Exp;
branches;
next	;

4.1.3.1
date	96.11.05.23.29.46;	author nturton;	state Exp;
branches;
next	;

4.1.4.1
date	97.10.21.09.56.56;	author rleggett;	state Exp;
branches;
next	;

4.1.5.1
date	96.11.21.12.20.51;	author nturton;	state Exp;
branches;
next	;

4.1.7.1
date	96.11.29.20.18.44;	author nturton;	state Exp;
branches;
next	;


desc
@@


4.4
log
@Shade "Configure..." when boot was unsuccessful.
When BootResources$Path is unset the option to run the configure plugin is no longer available.
Shared a "Filer_Run " string in 3x places.
Replaced most occurrences of calling XOS_ReadModeVariable of the current mode's XEig and YEig factors to use the cached copy sitting unloved in the workspace. Should thrash less during redraw.

Version 0.93. Tagged as 'Pinboard-0_93'
@
text
@; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; s.Help
;
;
PinboardToken   DCB     "PWH",0
PinedDirToken   DCB     "PIcD",0
PinedFileToken  DCB     "PIcF",0
PinedAppToken   DCB     "PIcA",0
IconizedToken   DCB     "PIcW",0
InfoDboxToken   DCB     "Hdb",0
TinyDirsToken   DCB     "IcT",0
TinyDirToken    DCB     "IcD",0
TinyAppToken    DCB     "IcA",0
TinyFileToken   DCB     "IcF",0
HelpRequest     ROUT

        LDR     r2,[r1,#36]     ; Icon
        LDR     r1,[r1,#32]     ; Window

        LDR     r14,saveas_handle
        TEQ     r1,r14
        Pull    "PC",EQ

        LDR     r14,backdrop_handle
        TEQ     r1,r14
        BEQ     PinboardHelp

        CMP     r1,#-2
        BNE     MenuHelp

        LDR     r14,TinyDirs_Handle
        TEQ     r2,r14
        ADREQ   r1,TinyDirsToken
        BEQ     SendHelp

        BL      FindIcon
        Pull    "PC",NE

        LDR     r14,[r2,#ic_filetype]
        CMP     r14,#&1000
        ADREQ   r1,TinyDirToken
        ADRLT   r1,TinyFileToken
        ADRGT   r1,TinyAppToken
        B       SendHelp

PinboardHelp
        Debug   he,"Icon is ",r2
        CMP     r2,#-1
        ADREQ   r1,PinboardToken
        BEQ     SendHelp

        BL      FindIcon
        ADRNE   r1,IconizedToken
        BNE     SendHelp

        LDR     r14,[r2,#ic_filetype]
        CMP     r14,#&1000
        ADREQ   r1,PinedDirToken
        ADRLT   r1,PinedFileToken
        ADRGT   r1,PinedAppToken
        B       SendHelp

PinboardMenuToken       DCB     "PH",0,0
TinyDirsMenuToken       DCB     "H1",0,0
TinyDirsIconMenuToken   DCB     "H2",0,0

MenuHelp
        Debug   he,"Menu help"

        LDR     r0,CurrentMenu
        TEQ     r0,#Menu_Pinboard
        LDREQ   r14,PinboardMenuToken
        TEQ     r0,#Menu_TinyDirs
        LDREQ   r14,TinyDirsMenuToken
        TEQ     r0,#Menu_TinyDirsIcon
        LDREQ   r14,TinyDirsIconMenuToken
        STR     r14,ConversionSpace

        MOV     r3,r2
        MOV     r2,r1
        MOV     r0,#1
        ADRL    r1,dataarea+20
        SWI     XWimp_GetMenuState
        Pull    "PC",VS

        ADRL    r1,dataarea+20
        ADRL    r0,ConversionSpace+2

        LDR     r2,[r1],#4
        CMP     r2,#0
        Pull    "PC",LT
01
        ADD     r2,r2,#"0"
        STRB    r2,[r0],#1
        LDR     r2,[r1],#4
        CMP     r2,#0
        BGE     %BT01
        MOV     r2,#0
        STRB    r2,[r0],#1
        ADR     r1,ConversionSpace
        B       SendHelp

        Pull    "PC"

SendHelp
        ADR     r0,message_file_block+4
        ADRL    r2,dataarea+20
        MOV     r3,#256-20
        SWI     XMessageTrans_Lookup
        Pull    "PC",VS

        ADR     r1,dataarea
        LDR     r0,[r1,#8]
        STR     r0,[r1,#12]
        LDR     r0,=Message_HelpReply
        STR     r0,[r1,#ms_action]
        ADD     r0,r3,#21
        ADD     r0,r0,#3
        BIC     r0,r0,#3
        STR     r0,[r1,#ms_size]
        MOV     r0,#17
        LDR     r2,[r1,#4]
        SWI     XWimp_SendMessage
        Pull    "PC"

        LNK     Iconize.s

@


4.3
log
@  Updated build structure to use the shared AAsmModule makefile.
  Updated to build using objasm instead of aasm.
  Sources changed to be objasm-compatible.
Admin:
  Requires Library 0.71 or later.
  Requires BuildSys 3.06 or later.
  Requires Env 0.65 or later.

Version 0.76. Tagged as 'Pinboard-0_76'
@
text
@a32 5
        ;LDR     r14,info_dbox_handle
        ;TEQ     r1,r14
        ;ADREQ   r1,InfoDboxToken
        ;BEQ     SendHelp

@


4.2
log
@Ursula branch merged.
Added inclusion of Machine header for new CMOS header
Moved to srccommit.
Templates contain hardwired version/date information which is a long
  way out of date.  This has not been fixed in this checkin.

Version 0.75. Tagged as 'Pinboard-0_75'
@
text
@d17 1
a17 1
;               
d29 1
a29 1
                  
d41 1
a41 1
               
d62 2
a63 2
        B       SendHelp         
                    
d69 1
a69 1
             
d79 1
a79 1
        B       SendHelp       
d96 1
a96 1
        
d100 1
a100 1
        ADRL    r1,dataarea+20  
d104 1
a104 1
        ADRL    r1,dataarea+20  
d129 1
a129 1
                   
d142 1
a142 1
        Pull    "PC"        
d144 1
a144 1
        LNK     s.Iconize
@


4.1
log
@Initial revision
@
text
@d33 4
a36 4
        LDR     r14,info_dbox_handle
        TEQ     r1,r14
        ADREQ   r1,InfoDboxToken
        BEQ     SendHelp
@


4.1.4.1
log
@Windows, as well as files, can be selected, plus new menu structure and options
@
text
@d33 4
a36 4
        ;LDR     r14,info_dbox_handle
        ;TEQ     r1,r14
        ;ADREQ   r1,InfoDboxToken
        ;BEQ     SendHelp
@


4.1.7.1
log
@NCOS 1.06 Imported from Zip drive
@
text
@@


4.1.5.1
log
@Import from SrcFiler
@
text
@@


4.1.3.1
log
@Import from cleaned 370 CD
@
text
@@


4.1.1.1
log
@Import from cleaned 360 CD
@
text
@@
