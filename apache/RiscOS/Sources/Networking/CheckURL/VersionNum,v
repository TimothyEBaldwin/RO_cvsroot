head	1.18;
access;
symbols
	CheckURL-0_17:1.18
	CheckURL-0_16:1.17
	CheckURL-0_15:1.16
	CheckURL-0_14:1.15
	CheckURL-0_13:1.14
	CheckURL-0_12:1.13
	CheckURL-0_11:1.12
	CheckURL-0_10:1.11
	CheckURL-0_09:1.10
	CheckURL-0_08:1.9
	CheckURL-0_07:1.8
	CheckURL-0_06:1.7
	CheckURL-0_05:1.6
	CheckURL-0_04:1.5
	CheckURL-0_03:1.4
	CheckURL-0_02:1.3
	CheckURL-0_01:1.2
	initial:1.1.1.1
	TRUNK:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2012.01.14.22.56.37;	author srevill;	state Exp;
branches;
next	1.17;
commitid	u8fiI5xvOZHg7cPv;

1.17
date	2007.09.13.18.25.26;	author srevill;	state Exp;
branches;
next	1.16;

1.16
date	2004.07.11.19.31.55;	author srevill;	state Exp;
branches;
next	1.15;

1.15
date	2004.07.05.15.13.39;	author bavison;	state Exp;
branches;
next	1.14;

1.14
date	2002.02.15.14.34.44;	author sbrodie;	state Exp;
branches;
next	1.13;

1.13
date	2002.01.11.16.15.36;	author sbrodie;	state Exp;
branches;
next	1.12;

1.12
date	2001.11.05.12.27.02;	author srevill;	state Exp;
branches;
next	1.11;

1.11
date	2001.11.02.19.08.23;	author srevill;	state Exp;
branches;
next	1.10;

1.10
date	2001.07.06.16.47.33;	author ahodgkin;	state Exp;
branches;
next	1.9;

1.9
date	2001.06.26.10.51.56;	author ahodgkin;	state Exp;
branches;
next	1.8;

1.8
date	2000.04.05.16.56.33;	author ahodgkin;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.05.16.05.44;	author ahodgkin;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.28.11.33.27;	author ahodgkin;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.28.10.06.55;	author ahodgkin;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.22.17.47.24;	author ahodgkin;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.17.17.19.23;	author ahodgkin;	state Exp;
branches;
next	1.2;

1.2
date	2000.03.16.15.05.47;	author ahodgkin;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.16.15.04.54;	author ahodgkin;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.16.15.04.54;	author ahodgkin;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Replace "-wipe" with "x wipe" in makefiles to remove annoying errors.

Version 0.17. Tagged as 'CheckURL-0_17'
@
text
@/* (0.17)
 *
 * This file is automatically maintained by srccommit, do not edit manually.
 * Last processed by srccommit version: 1.1.
 *
 */
#define Module_MajorVersion_CMHG        0.17
#define Module_MinorVersion_CMHG        
#define Module_Date_CMHG                14 Jan 2012

#define Module_MajorVersion             "0.17"
#define Module_Version                  17
#define Module_MinorVersion             ""
#define Module_Date                     "14 Jan 2012"

#define Module_ApplicationDate          "14-Jan-12"

#define Module_ComponentName            "CheckURL"
#define Module_ComponentPath            "castle/RiscOS/Sources/Networking/CheckURL"

#define Module_FullVersion              "0.17"
#define Module_HelpVersion              "0.17 (14 Jan 2012)"
#define Module_LibraryVersionInfo       "0:17"
@


1.17
log
@  Minor tidy-up.
Detail:
  Made cvs version of sources match Batch One release.
Admin:
  No code change.

Version 0.16. Tagged as 'CheckURL-0_16'
@
text
@d1 1
a1 1
/* (0.16)
d4 1
a4 1
 * Last processed by srccommit version: 1.2.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.16
d9 1
a9 1
#define Module_Date_CMHG                13 Sep 2007
d11 2
a12 2
#define Module_MajorVersion             "0.16"
#define Module_Version                  16
d14 1
a14 1
#define Module_Date                     "13 Sep 2007"
d16 1
a16 1
#define Module_ApplicationDate          "13-Sep-07"
d21 3
a23 3
#define Module_FullVersion              "0.16"
#define Module_HelpVersion              "0.16 (13 Sep 2007)"
#define Module_LibraryVersionInfo       "0:16"
@


1.16
log
@  Changed makefile to clean more quietly.
Admin:
  Tested in Baseline build.

Version 0.15. Tagged as 'CheckURL-0_15'
@
text
@d1 1
a1 1
/* (0.15)
d4 1
a4 1
 * Last processed by srccommit version: 1.68.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.15
d9 1
a9 1
#define Module_Date_CMHG                11 Jul 2004
d11 2
a12 2
#define Module_MajorVersion             "0.15"
#define Module_Version                  15
d14 1
a14 1
#define Module_Date                     "11 Jul 2004"
d16 1
a16 1
#define Module_ApplicationDate          "11-Jul-04"
d19 1
a19 1
#define Module_ComponentPath            "RiscOS/Sources/Networking/CheckURL"
d21 3
a23 3
#define Module_FullVersion              "0.15"
#define Module_HelpVersion              "0.15 (11 Jul 2004)"
#define Module_LibraryVersionInfo       "0:15"
@


1.15
log
@Changed to use gawk instead of awk.

Version 0.14. Tagged as 'CheckURL-0_14'
@
text
@d1 1
a1 1
/* (0.14)
d4 1
a4 1
 * Last processed by srccommit version: 1.2.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.14
d9 1
a9 1
#define Module_Date_CMHG                05 Jul 2004
d11 2
a12 2
#define Module_MajorVersion             "0.14"
#define Module_Version                  14
d14 1
a14 1
#define Module_Date                     "05 Jul 2004"
d16 1
a16 1
#define Module_ApplicationDate          "05-Jul-04"
d21 3
a23 3
#define Module_FullVersion              "0.14"
#define Module_HelpVersion              "0.14 (05 Jul 2004)"
#define Module_LibraryVersionInfo       "0:14"
@


1.14
log
@  Fixed the previous patch - Area_Magic not AREA_MAGIC and areas not area
Admin:
   Built on RISC OS - and it builds now.


Version 0.13. Tagged as 'CheckURL-0_13'
@
text
@d1 1
a1 1
/* (0.13)
d4 1
a4 1
 * Last processed by srccommit version: 1.62.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.13
d9 1
a9 1
#define Module_Date_CMHG                15 Feb 2002
d11 2
a12 2
#define Module_MajorVersion             "0.13"
#define Module_Version                  13
d14 1
a14 1
#define Module_Date                     "15 Feb 2002"
d16 1
a16 2
#define Module_ApplicationDate2         "15-Feb-02"
#define Module_ApplicationDate4         "15-Feb-2002"
d21 3
a23 3
#define Module_FullVersion              "0.13"
#define Module_HelpVersion              "0.13 (15 Feb 2002)"
#define Module_LibraryVersionInfo       "0:13"
@


1.13
log
@  area_find fix to avoid looking down duff string pointers
Detail:
  area_find was forgetting to check the AREA_MAGIC flag before looking
    down the area name pointer.  RISC OS seems to have got away with it
    so far - Linux didn't.  Here's the fix for the RISC OS version.
Admin:
  Not tested, not even built - but it stops the Linux port crashing.


Version 0.12. Tagged as 'CheckURL-0_12'
@
text
@d1 1
a1 1
/* (0.12)
d4 1
a4 1
 * Last processed by srccommit version: 1.61.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.12
d9 1
a9 1
#define Module_Date_CMHG                11 Jan 2002
d11 2
a12 2
#define Module_MajorVersion             "0.12"
#define Module_Version                  12
d14 1
a14 1
#define Module_Date                     "11 Jan 2002"
d16 2
a17 2
#define Module_ApplicationDate2         "11-Jan-02"
#define Module_ApplicationDate4         "11-Jan-2002"
d22 3
a24 3
#define Module_FullVersion              "0.12"
#define Module_HelpVersion              "0.12 (11 Jan 2002)"
#define Module_LibraryVersionInfo       "0:12"
@


1.12
log
@  Fixed install rule in Makefile.
Detail:
  The install (ram) rule was missing the dirs dependency. I've also ensured
  that the copy has ${CPFLAGS} passed.
Admin:
  Required for the Baseline build process.

Version 0.11. Tagged as 'CheckURL-0_11'
@
text
@d1 1
a1 1
/* (0.11)
d4 1
a4 1
 * Last processed by srccommit version: 1.60.
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.11
d9 1
a9 1
#define Module_Date_CMHG                05 Nov 2001
d11 2
a12 2
#define Module_MajorVersion             "0.11"
#define Module_Version                  11
d14 1
a14 1
#define Module_Date                     "05 Nov 2001"
d16 2
a17 2
#define Module_ApplicationDate2         "05-Nov-01"
#define Module_ApplicationDate4         "05-Nov-2001"
d22 3
a24 3
#define Module_FullVersion              "0.11"
#define Module_HelpVersion              "0.11 (05 Nov 2001)"
#define Module_LibraryVersionInfo       "0:11"
@


1.11
log
@  Fixed install rule in Makefile.
Detail:
  This component had a hard-wired path in the install rule of the Makefile,
  relative to the INSTDIR. This is now correct; the component should install
  into INSTDIR, if you don't like that, pass a new INSTDIR to amu_machine.
Admin:
  Required for the Baseline build process.

Version 0.10. Tagged as 'CheckURL-0_10'
@
text
@d1 1
a1 1
/* (0.10)
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.10
d9 1
a9 1
#define Module_Date_CMHG                02 Nov 2001
d11 2
a12 2
#define Module_MajorVersion             "0.10"
#define Module_Version                  10
d14 1
a14 1
#define Module_Date                     "02 Nov 2001"
d16 2
a17 2
#define Module_ApplicationDate2         "02-Nov-01"
#define Module_ApplicationDate4         "02-Nov-2001"
d22 3
a24 3
#define Module_FullVersion              "0.10"
#define Module_HelpVersion              "0.10 (02 Nov 2001)"
#define Module_LibraryVersionInfo       "0:10"
@


1.10
log
@  Tidied Utils.c. Better atexit code.
Detail:
  Better ordering - e.g. close messages file before deleting areas, so
  if there is e.g. list corruption and the area freeing fails, it won't
  leave a stray messages file open and stuff the box later.
Admin:
  Built and run.

Version 0.09. Tagged as 'CheckURL-0_09'
@
text
@d1 1
a1 1
/* (0.09)
d4 1
d7 1
a7 1
#define Module_MajorVersion_CMHG        0.09
d9 1
a9 1
#define Module_Date_CMHG                06 Jul 2001
d11 2
a12 2
#define Module_MajorVersion             "0.09"
#define Module_Version                  9
d14 1
a14 1
#define Module_Date                     "06 Jul 2001"
d16 2
a17 2
#define Module_ApplicationDate2         "06-Jul-01"
#define Module_ApplicationDate4         "06-Jul-2001"
d22 3
a24 2
#define Module_FullVersion              "0.09"
#define Module_HelpVersion              "0.09 (06 Jul 2001)"
@


1.9
log
@  New * command, tidying up.
Detail:
  *CheckURLAreas added; lists defined areas. Allocation pending. Tidied
  up module init code based on RTSP MB; removes need for module_kill
  finalisation code by using an atexit handler instead. Corrected typo
  in preamble text printed out by test program.
Admin:
  All tests still pass. Star command output is as expected for various
  area definitions or no areas at all. CMHG 5.30 or later required
  (enforced by Module.c).

Version 0.08. Tagged as 'CheckURL-0_08'
@
text
@d1 1
a1 1
/* (0.08)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.08
d8 1
a8 1
#define Module_Date_CMHG                26 Jun 2001
d10 2
a11 2
#define Module_MajorVersion             "0.08"
#define Module_Version                  8
d13 1
a13 1
#define Module_Date                     "26 Jun 2001"
d15 2
a16 2
#define Module_ApplicationDate2         "26-Jun-01"
#define Module_ApplicationDate4         "26-Jun-2001"
d21 2
a22 2
#define Module_FullVersion              "0.08"
#define Module_HelpVersion              "0.08 (26 Jun 2001)"
@


1.8
log
@Removed pointless use of ResList file.

Version 0.07. Tagged as 'CheckURL-0_07'
@
text
@d1 1
a1 1
/* (0.07)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.07
d8 1
a8 1
#define Module_Date_CMHG                05 Apr 2000
d10 2
a11 2
#define Module_MajorVersion             "0.07"
#define Module_Version                  7
d13 1
a13 1
#define Module_Date                     "05 Apr 2000"
d15 8
a22 1
#define Module_FullVersion              "0.07"
@


1.7
log
@  Couple of bug fixes.
Detail:
  Makefile wasn't exporting resources properly in ROM builds; hangover
  from VideoControl origins. Area IDs could easily be reused by accident
  if the area array shrunk to zero as (obviously) this lost all the area
  counters, so a high water mark value is used as a starting counter for
  all new areas.
Admin:
  Tested the area code, not tested the ROM export.

Version 0.06. Tagged as 'CheckURL-0_06'
@
text
@d1 1
a1 1
/* (0.06)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.06
d10 2
a11 2
#define Module_MajorVersion             "0.06"
#define Module_Version                  6
d15 1
a15 1
#define Module_FullVersion              "0.06"
@


1.6
log
@  ROM build bug fix, API extension.
Detail:
  ROM builds can't open the central config file on initialisation usually,
  so when can they do it? Video Control faced a similar problem but had a
  specific point in a SWI where it could transparently try again. Check
  URL really needs to do this whenever a SWI is called, so in ROM builds
  a flag is set if the config file load fails during initialisation. When
  any SWI is next called it'll quietly try again, clearing the retry flag
  in passing. This attempt may fail silently. If it works, the behaviour
  of the SWI will appear to be exactly as if the config file was loaded at
  initialisation time. The only penalty is the overhead of accessing the
  flag value on each SWI call in ROM builds.
  SWI CheckURL_AddArea has been extended to return the area ID of a new
  area in R1 on exit.
Admin:
  Ensured that the API extension works and added a simple check in the
  test harness. Tested the config file reload in a RAM build before
  wrapping the code in #ifdef ROM and ensuring that ROM, RAM and trace
  variants all build.

Version 0.05. Tagged as 'CheckURL-0_05'
@
text
@d1 1
a1 1
/* (0.05)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.05
d8 1
a8 1
#define Module_Date_CMHG                28 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.05"
#define Module_Version                  5
d13 1
a13 1
#define Module_Date                     "28 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.05"
@


1.5
log
@  Bug fix in URL matching, two character error in source file header comments
  corrected.
Detail:
  Paths with colons in had those colons interpreted as port separators; the
  URL_Fetcher module only escapes chars 0-32 and 127 and I'd been relying on
  it doing other characters too. Whilst I was at it, I made the legacy
  support for a comma separated list of the match strings a compile-time
  option and compiled it out as CheckURL never uses this. In addition, every
  source file had a cut-and-paste propagated two character error in the
  source file header comments, which has been corrected.
Admin:
  Confirmed that ROM, RAM and debug builds compile. Tested various port
  and path combinations and modified test suite slightly to ensure that
  whilst ports work, colons in paths will work too.

Version 0.04. Tagged as 'CheckURL-0_04'
@
text
@d1 1
a1 1
/* (0.04)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.04
d10 2
a11 2
#define Module_MajorVersion             "0.04"
#define Module_Version                  4
d15 1
a15 1
#define Module_FullVersion              "0.04"
@


1.4
log
@Seems to be a day for this kind of thing - SWI chunk base was wrong
in the CMHG file! Corrected.

Version 0.03. Tagged as 'CheckURL-0_03'
@
text
@d1 1
a1 1
/* (0.03)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.03
d8 1
a8 1
#define Module_Date_CMHG                22 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.03"
#define Module_Version                  3
d13 1
a13 1
#define Module_Date                     "22 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.03"
@


1.3
log
@Test harness added, with a few minor bug fixes arising from the test
results. URL_Fetcher handling improved.

Version 0.02. Tagged as 'CheckURL-0_02'
@
text
@d1 1
a1 1
/* (0.02)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.02
d8 1
a8 1
#define Module_Date_CMHG                17 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.02"
#define Module_Version                  2
d13 1
a13 1
#define Module_Date                     "17 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.02"
@


1.2
log
@Running srccommit to obtain an "official" starting version number.

Version 0.01. Tagged as 'CheckURL-0_01'
@
text
@d1 1
a1 1
/* (0.01)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.01
d8 1
a8 1
#define Module_Date_CMHG                16 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.01"
#define Module_Version                  1
d13 1
a13 1
#define Module_Date                     "16 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.01"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/* (0.00)
d6 1
a6 1
#define Module_MajorVersion_CMHG        0.00
d8 1
a8 1
#define Module_Date_CMHG                08 Mar 2000
d10 2
a11 2
#define Module_MajorVersion             "0.00"
#define Module_Version                  0
d13 1
a13 1
#define Module_Date                     "08 Mar 2000"
d15 1
a15 1
#define Module_FullVersion              "0.00"
@


1.1.1.1
log
@  First complete version of Check URL.
Detail:
  Check URL allows applications to match URLs against URL fragments to
  perform domain, port and/or path specific activities. This could be
  used in a browser to block advert loading, in Video Control to select
  a protocol module, or in JavaScript to enable or disable the Pace VOD
  extensions, for example. See 2501,846 for details.
Admin:
  This has only been lightly tested, but I believe it's functionally
  complete according to issue 1 of the specification.
@
text
@@
