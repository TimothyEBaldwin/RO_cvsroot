head	1.2;
access;
symbols
	BuildSys-7_30:1.2
	BuildSys-7_29:1.2
	BuildSys-7_28:1.2
	BuildSys-7_27:1.2
	BuildSys-7_26:1.2
	BuildSys-7_25:1.2
	BuildSys-7_24:1.2
	BuildSys-7_23:1.2
	BuildSys-7_22:1.2
	BuildSys-7_21:1.2
	BuildSys-7_20:1.2
	BuildSys-7_19:1.2
	BuildSys-7_18:1.2
	BuildSys-7_17:1.2
	BuildSys-7_16:1.2
	BuildSys-7_15:1.2
	BuildSys-7_14:1.2
	BuildSys-7_13:1.2
	BuildSys-7_12:1.2
	BuildSys-7_11:1.2
	BuildSys-7_10:1.2
	BuildSys-7_09:1.2
	BuildSys-6_00-1_142_2_10:1.2
	BuildSys-7_08:1.2
	BuildSys-7_07:1.2
	BuildSys-7_06:1.2
	BuildSys-7_05:1.2
	BuildSys-6_00-1_142_2_9:1.2
	BuildSys-7_04:1.2
	BuildSys-7_03:1.2
	BuildSys-7_02:1.2
	BuildSys-7_01:1.2
	BuildSys-7_00:1.2
	BuildSys-6_99:1.2
	BuildSys-6_98:1.2
	BuildSys-6_97:1.2
	BuildSys-6_96:1.2
	BuildSys-6_95:1.2
	BuildSys-6_94:1.2
	BuildSys-6_93:1.2
	BuildSys-6_92:1.2
	BuildSys-6_91:1.2
	BuildSys-6_90:1.2
	BuildSys-6_89:1.2
	BuildSys-6_81-1:1.2
	BuildSys-6_88:1.2
	BuildSys-6_87:1.2
	BuildSys-6_86:1.2
	BuildSys-6_85:1.2
	BuildSys-6_84:1.2
	BuildSys-6_83:1.2
	BuildSys-6_82:1.2
	BuildSys-6_81:1.2
	BuildSys-6_80:1.2
	BuildSys-6_79:1.2
	BuildSys-6_78:1.2
	BuildSys-6_77:1.2
	BuildSys-6_76:1.2
	BuildSys-6_75:1.2
	BuildSys-6_74:1.2
	BuildSys-6_73:1.2
	BuildSys-6_72:1.2
	BuildSys-6_71:1.2
	BuildSys-6_70:1.2
	BuildSys-6_69:1.2
	BuildSys-6_68:1.2
	BuildSys-6_67:1.2
	BuildSys-6_66-1:1.2
	BuildSys-6_66:1.2
	BuildSys-6_65:1.2
	BuildSys-6_00-1_142_2_8:1.2
	BuildSys-6_00-1_142_2_7:1.2
	BuildSys-6_00-1_142_2_6:1.2
	BuildSys-6_64:1.2
	BuildSys-6_63:1.2
	BuildSys-6_62:1.2
	BuildSys-6_61:1.2
	BuildSys-6_60:1.2
	BuildSys-6_59:1.2
	BuildSys-6_58:1.2
	BuildSys-6_57:1.2
	BuildSys-6_56:1.2
	BuildSys-6_55:1.2
	BuildSys-6_54:1.2
	BuildSys-6_53:1.2
	BuildSys-6_00-1_142_2_5:1.2
	BuildSys-6_52:1.2
	BuildSys-6_51:1.2
	BuildSys-6_50:1.2
	BuildSys-6_49:1.2
	BuildSys-6_48:1.2
	BuildSys-6_47:1.2
	BuildSys-6_46:1.2
	BuildSys-6_45:1.2
	BuildSys-6_44:1.2
	BuildSys-6_43:1.2
	BuildSys-6_42:1.2
	BuildSys-6_41:1.2
	BuildSys-6_40:1.2
	BuildSys-6_39:1.2
	BuildSys-6_38:1.2
	BuildSys-6_00-1_142_2_4:1.2
	BuildSys-6_37:1.2
	BuildSys-6_36:1.2
	BuildSys-6_35:1.2
	BuildSys-6_34:1.2
	BuildSys-6_33:1.2
	BuildSys-6_32:1.2
	BuildSys-6_31:1.2
	BuildSys-6_30:1.2
	BuildSys-6_29:1.2
	BuildSys-6_28:1.2
	BuildSys-6_27:1.2
	BuildSys-6_26:1.2
	BuildSys-6_25:1.2
	BuildSys-6_24:1.2
	BuildSys-6_23:1.2
	BuildSys-6_22:1.2
	BuildSys-6_21:1.2
	BuildSys-6_20:1.2
	BuildSys-6_00-1_142_2_3:1.2
	BuildSys-6_19:1.2
	BuildSys-6_18:1.2
	BuildSys-6_17:1.2
	BuildSys-6_16:1.2
	BuildSys-6_15:1.2
	BuildSys-6_14:1.2
	BuildSys-6_13:1.2
	BuildSys-6_12:1.2
	BuildSys-6_00-1_142_2_2:1.2
	BuildSys-6_11:1.2
	BuildSys-6_10:1.2
	BuildSys-6_09:1.2
	BuildSys-6_08:1.2
	BuildSys-6_07:1.2
	BuildSys-6_06:1.2
	BuildSys-6_05:1.2
	BuildSys-6_04:1.2
	BuildSys-6_03:1.2
	BuildSys-6_02:1.2
	BuildSys-6_01:1.2
	BuildSys-6_00-1_142_2_1:1.2
	RPiFreeze:1.2.0.2
	BuildSys-6_00:1.2
	BuildSys-5_99:1.2
	BuildSys-5_98:1.2
	BuildSys-5_97:1.2
	BuildSys-5_96:1.2
	BuildSys-5_95:1.2
	BuildSys-5_94:1.2
	BuildSys-5_93:1.2
	BuildSys-5_92:1.2
	BuildSys-5_91:1.2
	BuildSys-5_90:1.2
	BuildSys-5_89:1.2
	BuildSys-5_88:1.2
	BuildSys-5_87:1.2
	BuildSys-5_86:1.2
	BuildSys-5_85:1.2
	BuildSys-5_84:1.2
	BuildSys-5_83:1.2
	BuildSys-5_82:1.2
	BuildSys-5_81:1.2
	BuildSys-5_80:1.2
	BuildSys-5_79:1.2
	BuildSys-5_78:1.2
	BuildSys-5_77:1.2
	BuildSys-5_76:1.2
	BuildSys-5_75:1.2
	BuildSys-5_74:1.2
	BuildSys-5_73:1.2
	BuildSys-5_72:1.2
	BuildSys-5_71:1.2
	BuildSys-5_70:1.2
	BuildSys-5_69:1.2
	BuildSys-5_68:1.2
	BuildSys-5_67:1.2
	BuildSys-5_66:1.2
	BuildSys-5_65:1.2
	BuildSys-5_64:1.2
	BuildSys-5_63:1.2
	BuildSys-5_62:1.2
	BuildSys-5_61:1.2
	BuildSys-5_60:1.2
	BuildSys-5_59:1.2
	BuildSys-5_58:1.2
	BuildSys-5_57:1.2
	BuildSys-5_56:1.2
	BuildSys-5_55:1.2
	BuildSys-5_54:1.2
	BuildSys-5_53:1.2
	BuildSys-5_52:1.2
	BuildSys-5_51:1.2
	BuildSys-5_50:1.2
	BuildSys-5_49:1.2
	BuildSys-5_48:1.2
	BuildSys-5_47:1.2
	BuildSys-5_46:1.2
	BuildSys-5_45:1.2
	BuildSys-5_44:1.2
	BuildSys-5_43:1.2
	BuildSys-5_42:1.2
	BuildSys-5_41:1.2
	BuildSys-5_40:1.2
	BuildSys-5_39:1.2
	BuildSys-5_38:1.2
	BuildSys-5_37:1.2
	BuildSys-5_36:1.2
	BuildSys-5_35:1.2
	BuildSys-5_34:1.2
	BuildSys-5_33:1.2
	BuildSys-5_32:1.2
	BuildSys-5_31:1.2
	BuildSys-5_30:1.2
	BuildSys-5_29:1.2
	BuildSys-5_28:1.2
	BuildSys-5_27:1.2
	BuildSys-5_26:1.2
	BuildSys-5_25:1.2
	BuildSys-5_24:1.2
	BuildSys-5_23:1.2
	BuildSys-5_22:1.2
	BuildSys-5_21:1.2
	BuildSys-5_20:1.2
	BuildSys-5_19:1.2
	BuildSys-5_18:1.2
	BuildSys-5_17:1.2
	BuildSys-5_16:1.2
	BuildSys-5_15:1.2
	BuildSys-5_14:1.2
	BuildSys-5_13:1.2
	BuildSys-5_12:1.2
	BuildSys-5_11:1.1
	BuildSys-5_10:1.1
	BuildSys-5_09:1.1
	BuildSys-5_08:1.1
	BuildSys-5_07:1.1
	BuildSys-5_06:1.1
	BuildSys-5_05:1.1
	BuildSys-5_04:1.1
	BuildSys-5_03:1.1
	BuildSys-5_02:1.1
	BuildSys-5_01:1.1
	BuildSys-5_00:1.1
	BuildSys-4_99:1.1
	BuildSys-4_98:1.1
	BuildSys-4_97:1.1
	BuildSys-4_96:1.1
	BuildSys-4_95:1.1
	BuildSys-4_94:1.1
	BuildSys-4_93:1.1
	BuildSys-4_92:1.1
	BuildSys-4_91:1.1
	BuildSys-4_90:1.1
	BuildSys-4_89:1.1
	BuildSys-4_88:1.1
	BuildSys-4_87:1.1
	BuildSys-4_86:1.1
	BuildSys-4_85:1.1
	BuildSys-4_84:1.1
	BuildSys-4_83:1.1
	BuildSys-4_82:1.1
	BuildSys-4_81:1.1
	BuildSys-4_80:1.1
	BuildSys-4_79:1.1
	BuildSys-4_78:1.1
	BuildSys-4_77:1.1
	BuildSys-4_76:1.1
	BuildSys-4_75:1.1
	BuildSys-4_74:1.1
	BuildSys-4_73:1.1
	BuildSys-4_72:1.1
	BuildSys-4_71:1.1
	BuildSys-4_70:1.1
	BuildSys-4_69:1.1
	BuildSys-4_68:1.1
	BuildSys-4_67:1.1
	BuildSys-4_66:1.1
	BuildSys-4_65:1.1
	BuildSys-4_64:1.1
	BuildSys-4_63:1.1
	BuildSys-4_62:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.03.31.00.04.06;	author bavison;	state Exp;
branches;
next	1.1;
commitid	BfewXnm4kl3lOVdv;

1.1
date	2008.10.16.23.20.58;	author bavison;	state Exp;
branches;
next	;


desc
@@


1.2
log
@  Improvements to shared makefiles
Detail:
  * Some subtle bugs can be caused by including shared makefiles in the
    wrong order. To try to prevent further problems, and simplify main
    makefiles at the same time, CApp, CLibrary and CModule now include the
    makefiles they depend upon themselves, in the correct order: generally
    speaking, all macro (re)definitions should be before rule definitions.
  * Added sentry macro definitions to each makefile. These can be used to
    avoid repeated inclusion of makefiles - particularly important now that
    CApp, CLibrary and CModule do additional includes. This removes the
    majority of cases where amu produced warnings about multiple inclusion;
    a few components remain where this is still the case, but these
    warnings are harmless. If they bother you, simply remove the
    now-superfluous include statements from the relevant main makefile.
  * Created a CUtil shared makefile, for building transient utilities. The
    'C' in the name is more for consistency with CApp/CLibrary/CModule than
    anything to do with the 'C' language, since all of these makefiles work
    equally well for assembler and 'C' - the 'C' is for historic reasons.
  * Tweaked the debug rules in CApp to avoid harmless but annoying linker
    warnings about stubs being included twice.
  * Added several new default switches to ASFLAGS. These enable us to start
    making assembler source files work under a cross-assembler, because
    statements like
        GET  Hdr:Macros
        GET  Hdr:Machine.<Machine>
    are not portable, and tweaking the cross-assembler to understand these
    types of constructs would not be pretty. Instead, with the extra
    command line switches now introduced, you can use
        GET  Macros
        GET  Machine/$Machine
Admin:
  Tested in a ROM build

Version 5.12. Tagged as 'BuildSys-5_12'
@
text
@# Copyright 2008 Castle Technology Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile fragment for Binary Build Environment exporting.

INCLUDED_BBEEXPORT = YES

#
# This Makefile is included directly by srcbuild as the core implementation
# of the binary build environment phase.
#
STDMAKEFILE=$Id: BBEExport,v 1.1 2008/10/16 23:20:58 bavison Exp $

.SILENT:

# Set the default option - component Makefile changes BBETYPE to override this
# Makefile's generic rules, but can of course depend on them by constructing
# the correct target.

BBETYPE=generic

# Get the components Makefile in case it wants to override the rules

include Makefile


# The default rule invoked by srcbuild simply invokes the correct sub-rule
bbe: bbe-${BBETYPE}
  @@echo ${COMPONENT}: BBE phase complete


# Now all the default rules for the different module types

bbe-generic: bbe-${COMPONENTTYPE}-generic
  @@|

bbe-C-generic: internal-bbe-generic
  @@|

bbe-ASM-generic: internal-bbe-generic
  @@|

bbe-BAS-generic: internal-bbe-generic
  @@|

bbe-KERNEL-generic: internal-bbe-generic
  @@|

bbe-DATA-generic: internal-bbe-generic
  @@|

bbe-RES-generic: internal-bbe-generic
  @@|

bbe-EXP-generic: internal-bbe-generic
  @@|

bbe-HAL-generic: internal-bbe-generic
  @@|

internal-bbe-generic: bbe-generic-resources
  @@|

#
# Now the generic ROM and resources rules
#
include Makefiles:StdTools

bbe-generic-resources-get-alias:
  @@| Component Makefiles may rely on: BBE_Export_Dir, BBE_Export_File, BBE_Export_File_In_Dir
  SetMacro Alias$BBEExportResourcesRule IfThere %0 Then ${CP} %0 ${BBEDIR}.%0 ${CPFLAGS}
  SetMacro Alias$BBEExportDirectoryRule IfThere %0 Then ${MKDIR} ${BBEDIR}.%0
  SetMacro Alias$BBE_Export_Dir BBEExportDirectoryRule %0|MBBEExportResourcesRule %0
  SetMacro Alias$BBE_Export_File BBEExportResourcesRule %0
  SetMacro Alias$BBE_Export_File_In_Dir BBEExportDirectoryRule %0|MBBEExportResourcesRule %0.%1

bbe-generic-resources: bbe-generic-resources-get-alias
  @@| Generic rules copy the appropriate parts of the Resources directory.
  BBE_Export_Dir Resources.${LOCALE}
  BBE_Export_Dir Resources.Common.${LOCALE}
  BBE_Export_Dir Resources.${SYSTEM}.${LOCALE}
  BBE_Export_Dir Resources.${USERIF}.${LOCALE}
  BBE_Export_Dir Resources.${SYSTEM}.Common
  BBE_Export_Dir Translate.${LOCALE}
  BBE_Export_Dir Translate.Common.${LOCALE}
  BBE_Export_Dir Translate.${SYSTEM}.${LOCALE}
  BBE_Export_Dir Translate.${USERIF}.${LOCALE}
  BBE_Export_Dir Translate.${SYSTEM}.Common
  BBE_Export_File VersionNum
  BBE_Export_File Version
  
# EOF
@


1.1
log
@Build environment updates for Batch 5
@
text
@d16 3
d23 1
a23 1
STDMAKEFILE=$Id: BBEExport,v 1.4 2004/11/12 16:20:46 bavison Exp $
@

