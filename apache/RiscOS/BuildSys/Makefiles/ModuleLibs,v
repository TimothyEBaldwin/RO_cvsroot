head	1.16;
access;
symbols
	BuildSys-7_30:1.16
	BuildSys-7_29:1.16
	BuildSys-7_28:1.16
	BuildSys-7_27:1.16
	BuildSys-7_26:1.15
	BuildSys-7_25:1.14
	BuildSys-7_24:1.14
	BuildSys-7_23:1.13
	BuildSys-7_22:1.13
	BuildSys-7_21:1.13
	BuildSys-7_20:1.13
	BuildSys-7_19:1.13
	BuildSys-7_18:1.13
	BuildSys-7_17:1.13
	BuildSys-7_16:1.13
	BuildSys-7_15:1.13
	BuildSys-7_14:1.13
	BuildSys-7_13:1.13
	BuildSys-7_12:1.13
	BuildSys-7_11:1.13
	BuildSys-7_10:1.13
	BuildSys-7_09:1.13
	BuildSys-6_00-1_142_2_10:1.8.2.4
	BuildSys-7_08:1.13
	BuildSys-7_07:1.13
	BuildSys-7_06:1.13
	BuildSys-7_05:1.13
	BuildSys-6_00-1_142_2_9:1.8.2.4
	BuildSys-7_04:1.13
	BuildSys-7_03:1.13
	BuildSys-7_02:1.13
	BuildSys-7_01:1.13
	BuildSys-7_00:1.13
	BuildSys-6_99:1.13
	BuildSys-6_98:1.13
	BuildSys-6_97:1.13
	BuildSys-6_96:1.13
	BuildSys-6_95:1.13
	BuildSys-6_94:1.13
	BuildSys-6_93:1.13
	BuildSys-6_92:1.13
	BuildSys-6_91:1.13
	BuildSys-6_90:1.13
	BuildSys-6_89:1.13
	BuildSys-6_81-1:1.13
	BuildSys-6_88:1.13
	BuildSys-6_87:1.13
	BuildSys-6_86:1.13
	BuildSys-6_85:1.13
	BuildSys-6_84:1.13
	BuildSys-6_83:1.13
	BuildSys-6_82:1.13
	BuildSys-6_81:1.13
	BuildSys-6_80:1.13
	BuildSys-6_79:1.13
	BuildSys-6_78:1.13
	BuildSys-6_77:1.13
	BuildSys-6_76:1.13
	BuildSys-6_75:1.13
	BuildSys-6_74:1.13
	BuildSys-6_73:1.13
	BuildSys-6_72:1.13
	BuildSys-6_71:1.13
	BuildSys-6_70:1.13
	BuildSys-6_69:1.13
	BuildSys-6_68:1.13
	BuildSys-6_67:1.13
	BuildSys-6_66-1:1.13
	BuildSys-6_66:1.13
	BuildSys-6_65:1.13
	BuildSys-6_00-1_142_2_8:1.8.2.3
	BuildSys-6_00-1_142_2_7:1.8.2.3
	BuildSys-6_00-1_142_2_6:1.8.2.3
	BuildSys-6_64:1.13
	BuildSys-6_63:1.13
	BuildSys-6_62:1.12
	BuildSys-6_61:1.12
	BuildSys-6_60:1.10
	BuildSys-6_59:1.10
	BuildSys-6_58:1.10
	BuildSys-6_57:1.10
	BuildSys-6_56:1.10
	BuildSys-6_55:1.10
	BuildSys-6_54:1.10
	BuildSys-6_53:1.10
	BuildSys-6_00-1_142_2_5:1.8.2.2
	BuildSys-6_52:1.10
	BuildSys-6_51:1.10
	BuildSys-6_50:1.10
	BuildSys-6_49:1.9
	BuildSys-6_48:1.9
	BuildSys-6_47:1.9
	BuildSys-6_46:1.9
	BuildSys-6_45:1.9
	BuildSys-6_44:1.9
	BuildSys-6_43:1.9
	BuildSys-6_42:1.9
	BuildSys-6_41:1.9
	BuildSys-6_40:1.9
	BuildSys-6_39:1.9
	BuildSys-6_38:1.9
	BuildSys-6_00-1_142_2_4:1.8.2.1
	BuildSys-6_37:1.9
	BuildSys-6_36:1.9
	BuildSys-6_35:1.9
	BuildSys-6_34:1.9
	BuildSys-6_33:1.9
	BuildSys-6_32:1.9
	BuildSys-6_31:1.9
	BuildSys-6_30:1.9
	BuildSys-6_29:1.9
	BuildSys-6_28:1.9
	BuildSys-6_27:1.9
	BuildSys-6_26:1.9
	BuildSys-6_25:1.9
	BuildSys-6_24:1.9
	BuildSys-6_23:1.9
	BuildSys-6_22:1.9
	BuildSys-6_21:1.9
	BuildSys-6_20:1.9
	BuildSys-6_00-1_142_2_3:1.8
	BuildSys-6_19:1.8
	BuildSys-6_18:1.8
	BuildSys-6_17:1.8
	BuildSys-6_16:1.8
	BuildSys-6_15:1.8
	BuildSys-6_14:1.8
	BuildSys-6_13:1.8
	BuildSys-6_12:1.8
	BuildSys-6_00-1_142_2_2:1.8
	BuildSys-6_11:1.8
	BuildSys-6_10:1.8
	BuildSys-6_09:1.8
	BuildSys-6_08:1.8
	BuildSys-6_07:1.8
	BuildSys-6_06:1.8
	BuildSys-6_05:1.8
	BuildSys-6_04:1.8
	BuildSys-6_03:1.8
	BuildSys-6_02:1.8
	BuildSys-6_01:1.8
	BuildSys-6_00-1_142_2_1:1.8
	RPiFreeze:1.8.0.2
	BuildSys-6_00:1.8
	BuildSys-5_99:1.8
	BuildSys-5_98:1.8
	BuildSys-5_97:1.8
	BuildSys-5_96:1.8
	BuildSys-5_95:1.8
	BuildSys-5_94:1.8
	BuildSys-5_93:1.8
	BuildSys-5_92:1.8
	BuildSys-5_91:1.8
	BuildSys-5_90:1.8
	BuildSys-5_89:1.7
	BuildSys-5_88:1.7
	BuildSys-5_87:1.7
	BuildSys-5_86:1.7
	BuildSys-5_85:1.7
	BuildSys-5_84:1.7
	BuildSys-5_83:1.7
	BuildSys-5_82:1.7
	BuildSys-5_81:1.7
	BuildSys-5_80:1.7
	BuildSys-5_79:1.7
	BuildSys-5_78:1.7
	BuildSys-5_77:1.7
	BuildSys-5_76:1.7
	BuildSys-5_75:1.7
	BuildSys-5_74:1.7
	BuildSys-5_73:1.7
	BuildSys-5_72:1.7
	BuildSys-5_71:1.7
	BuildSys-5_70:1.7
	BuildSys-5_69:1.7
	BuildSys-5_68:1.7
	BuildSys-5_67:1.7
	BuildSys-5_66:1.7
	BuildSys-5_65:1.7
	BuildSys-5_64:1.7
	BuildSys-5_63:1.6
	BuildSys-5_62:1.6
	BuildSys-5_61:1.6
	BuildSys-5_60:1.6
	BuildSys-5_59:1.6
	BuildSys-5_58:1.6
	BuildSys-5_57:1.6
	BuildSys-5_56:1.6
	BuildSys-5_55:1.6
	BuildSys-5_54:1.6
	BuildSys-5_53:1.6
	BuildSys-5_52:1.6
	BuildSys-5_51:1.6
	BuildSys-5_50:1.6
	BuildSys-5_49:1.6
	BuildSys-5_48:1.6
	BuildSys-5_47:1.6
	BuildSys-5_46:1.6
	BuildSys-5_45:1.6
	BuildSys-5_44:1.6
	BuildSys-5_43:1.6
	BuildSys-5_42:1.6
	BuildSys-5_41:1.5
	BuildSys-5_40:1.5
	BuildSys-5_39:1.5
	BuildSys-5_38:1.4
	BuildSys-5_37:1.4
	BuildSys-5_36:1.4
	BuildSys-5_35:1.4
	BuildSys-5_34:1.4
	BuildSys-5_33:1.4
	BuildSys-5_32:1.4
	BuildSys-5_31:1.4
	BuildSys-5_30:1.4
	BuildSys-5_29:1.4
	BuildSys-5_28:1.4
	BuildSys-5_27:1.4
	BuildSys-5_26:1.4
	BuildSys-5_25:1.4
	BuildSys-5_24:1.4
	BuildSys-5_23:1.4
	BuildSys-5_22:1.4
	BuildSys-5_21:1.4
	BuildSys-5_20:1.4
	BuildSys-5_19:1.4
	BuildSys-5_18:1.4
	BuildSys-5_17:1.4
	BuildSys-5_16:1.4
	BuildSys-5_15:1.4
	BuildSys-5_14:1.4
	BuildSys-5_13:1.3
	BuildSys-5_12:1.3
	BuildSys-5_11:1.2
	BuildSys-5_10:1.2
	BuildSys-5_09:1.2
	BuildSys-5_08:1.2
	BuildSys-5_07:1.2
	BuildSys-5_06:1.2
	BuildSys-5_05:1.2
	BuildSys-5_04:1.2
	BuildSys-5_03:1.2
	BuildSys-5_02:1.2
	BuildSys-5_01:1.2
	BuildSys-5_00:1.2
	BuildSys-4_99:1.2
	BuildSys-4_98:1.2
	BuildSys-4_97:1.2
	BuildSys-4_96:1.2
	BuildSys-4_95:1.2
	BuildSys-4_94:1.2
	BuildSys-4_93:1.2
	BuildSys-4_92:1.2
	BuildSys-4_91:1.2
	BuildSys-4_90:1.2
	BuildSys-4_89:1.2
	BuildSys-4_88:1.2
	BuildSys-4_87:1.2
	BuildSys-4_86:1.2
	BuildSys-4_85:1.2
	BuildSys-4_84:1.2
	BuildSys-4_83:1.2
	BuildSys-4_82:1.2
	BuildSys-4_81:1.2
	BuildSys-4_80:1.2
	BuildSys-4_79:1.2
	BuildSys-4_78:1.2
	BuildSys-4_77:1.2
	BuildSys-4_76:1.1
	BuildSys-4_75:1.1
	BuildSys-4_74:1.1
	BuildSys-4_73:1.1
	BuildSys-4_72:1.1
	BuildSys-4_71:1.1
	BuildSys-4_70:1.1
	BuildSys-4_69:1.1
	BuildSys-4_68:1.1
	BuildSys-4_67:1.1
	BuildSys-4_66:1.1
	BuildSys-4_65:1.1
	BuildSys-4_64:1.1
	BuildSys-4_63:1.1
	BuildSys-4_62:1.1
	Batch4:1.1;
locks; strict;
comment	@# @;


1.16
date	2018.05.12.09.49.42;	author rool;	state Exp;
branches;
next	1.15;
commitid	85bNtkgCystFvZBA;

1.15
date	2018.04.15.00.47.24;	author bavison;	state Exp;
branches;
next	1.14;
commitid	Ro31EhYS8zosntyA;

1.14
date	2018.04.11.23.21.12;	author bavison;	state Exp;
branches;
next	1.13;
commitid	IH1EokSuAjoQZ4yA;

1.13
date	2015.01.10.11.56.06;	author rsprowson;	state Exp;
branches;
next	1.12;
commitid	MbWl4KX0taVnmt5y;

1.12
date	2014.12.13.10.48.42;	author rsprowson;	state Exp;
branches;
next	1.11;
commitid	TWo1ue3rMHO5TR1y;

1.11
date	2014.11.25.09.25.27;	author rsprowson;	state Exp;
branches;
next	1.10;
commitid	lgGm2BDGo06p0yZx;

1.10
date	2014.09.27.09.51.17;	author rsprowson;	state Exp;
branches;
next	1.9;
commitid	uwRe5gX3cYxE1YRx;

1.9
date	2013.07.15.19.29.13;	author rsprowson;	state Exp;
branches;
next	1.8;
commitid	GNr5gJlFE3iZlBXw;

1.8
date	2012.09.02.18.05.26;	author rsprowson;	state Exp;
branches
	1.8.2.1;
next	1.7;
commitid	ZWvpW04pJc403Ziw;

1.7
date	2012.06.07.23.29.31;	author bavison;	state Exp;
branches;
next	1.6;
commitid	dHdMwIHW31dyDP7w;

1.6
date	2012.02.05.09.13.27;	author rsprowson;	state Exp;
branches;
next	1.5;
commitid	XCR9w41JK8TYQWRv;

1.5
date	2012.02.04.21.14.18;	author rsprowson;	state Exp;
branches;
next	1.4;
commitid	oVq2mnfkWDwhSSRv;

1.4
date	2011.05.03.16.19.50;	author bavison;	state Exp;
branches;
next	1.3;
commitid	2rwpwT2e8gcj9giv;

1.3
date	2011.03.31.00.04.06;	author bavison;	state Exp;
branches;
next	1.2;
commitid	BfewXnm4kl3lOVdv;

1.2
date	2009.06.26.14.03.07;	author bavison;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.14.21.29.37;	author bavison;	state Exp;
branches;
next	;

1.8.2.1
date	2014.02.20.21.02.50;	author rsprowson;	state Exp;
branches;
next	1.8.2.2;
commitid	HvOFwLQ3c6PzNSpx;

1.8.2.2
date	2014.10.12.10.36.30;	author rsprowson;	state Exp;
branches;
next	1.8.2.3;
commitid	tHT6hsrmkNpoOTTx;

1.8.2.3
date	2015.02.12.20.30.56;	author rsprowson;	state Exp;
branches;
next	1.8.2.4;
commitid	joerV7rvwrTd9L9y;

1.8.2.4
date	2017.02.21.08.37.00;	author rsprowson;	state Exp;
branches;
next	;
commitid	yeUPZ9XHdm2zpNGz;


desc
@@


1.16
log
@Component, Makefile, ModuleDB updates
Detail:
  Disc - add AcornHTTP and URL modules, force en-gb CmdHelp for RouteD in 310 directory.
  OMAP5 - add ADFS/SATADriver/ATAPI, change default CMOS to select FileSystem=ADFS
  Libs makefiles - add path to ZLIB
  ModuleDB - Relocate OMAP5 HAL to mixed/

Version 7.27. Tagged as 'BuildSys-7_27'
@
text
@# Copyright 2008 Castle Technology Ltd
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# Makefile fragment for libraries linked against modules (RAM or ROM)

INCLUDED_MODULELIBS = YES

#
STDMAKEFILE=$Id: ModuleLibs,v 1.15 2018/04/15 00:47:24 bavison Exp $
#

ANSILIB   = CLIB:o.ansilibm
CLIB      = CLIB:o.stubs
RLIB      = RISCOSLIB:o.riscoslibm
RSTUBS    = RISCOSLIB:o.rstubs
ROMSTUBS  = RISCOSLIB:o.romstubs
ROMCSTUBS = RISCOSLIB:o.romcstubs
ABSSYM    = RISC_OSLib:o.abssym
C_ABSSYM  = RISC_OSLib:o.c_abssym
A_ABSSYM  = RISC_OSLib:o.a_abssym

ASMUTILS  = C:AsmUtils.o.AsmUtilsZM
C++LIB    = C:C++Lib.o.c++libz
CLXLIB    = C:CLX.o.clxlibz

TBOXLIB   = C:tboxlibs.o.toolboxlib
FLEXLIB   = C:tboxlibs.o.flexlibzm
EVENTLIB  = C:tboxlibs.o.eventlibm
WIMPLIB   = C:tboxlibs.o.wimplib
RENDERLIB = C:tboxlibs.o.renderlib
TBOXLIBS  = ${EVENTLIB} ${TBOXLIB} ${RENDERLIB} ${WIMPLIB}
TBOXINTLIB = C:tboxlibint.o.tboxlibm
TBOXINTDBGLIB = C:tboxlibint.o.debuglibm

SOCK4LIB  = TCPIPLibs:o.socklibzm
SOCK5LIB  = TCPIPLibs:o.socklib5zm
INETLIB   = TCPIPLibs:o.inetlibzm
UNIXLIB   = TCPIPLibs:o.unixlibzm
RPCLIB    = TCPIPLibs:rpc.o.rpc_datazm TCPIPLibs:rpc.o.rpclibzm
CRYPTLIB  = C:SSLeay.o.ssl C:SSLeay.o.libcrypto

NET4LIBS  = ${UNIXLIB} ${INETLIB} ${SOCK4LIB} 
NET5LIBS  = ${UNIXLIB} ${INETLIB} ${SOCK5LIB} 

ABCLIB    = C:ABCLib.o.ABCLib
CALLXLIB  = C:callx.o.callxzm
CONLIB    = C:ConfigLib.o.ConfigLibzm
DDTLIB    = C:DDTLib.o.DDTLibzm
DESKLIB   = C:Desk.o.Desk_M
FETCHLIB  = C:Fetchers.o.FetchLibZM
JSLIB     = C:JSLib.o.JSLibzm
LDAPLIBS  = C:LDAP.o.LDAPzm C:LDAP.o.LBERzm
MODMALLOCLIB = C:ModMalloc.o.ModMalloczm
NCMALIB   = C:NCMALib.o.NCMALibZM
NSPRLIB   = C:NSPRLib.o.NSPRLibzm
OSLIB     = C:OSLib.o.OSLib
PDEBUGLIB = C:PDebug.o.PDebugzm
PRISMLIB  = C:PRISMLib.o.PRISMLibzm
REMOTEDBLIB = C:remotedb.o.remotedbzm
RMVSN     = C:RMVersion.o.RMVersionZ
SYNCLIB   = C:SyncLib.o.SyncLibzm
TGRLIB    = C:TGRLib.o.tgrlib
TRACELIB  = C:Trace.o.Tracezm
UNICODELIB = C:Unicode.o.ucodezm
WILDLIB   = C:Wild.o.Wildzm
ZLIB      = C:zlib.o.zlibzm

DEBUGLIB  = C:DebugLib.o.DebugLibZM
DEBUGLIBS = ${DEBUGLIB} ${REMOTEDBLIB} ${TRACELIB} ${PDEBUGLIB} ${MODMALLOCLIB} ${WILDLIB} ${DDTLIB} ${DESKLIB}

# Library include paths, where these can't easily be specified explicitly
# If this list gets too long, it may be worth de-duplicating the definitions in AppLibs
INCLUDE_OSLIB = -IOS:

# EOF
@


1.15
log
@  Fix definition of INCLUDE_OSLIB
Detail:
  Somehow the leading minus signs went missing - this broke ColourPicker,
  which was the only component that relied on it.

Version 7.26. Tagged as 'BuildSys-7_26'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.14 2018/04/11 23:21:12 bavison Exp $
d77 1
@


1.14
log
@  Incremental step in cross-compilation support
Detail:
  ModuleDB:
  * Correct capitalisation of resgen's TARGET to match its main source file
  GNUmakefiles/AAsmModule:
  * Targets now given ,ffa filetype suffix
  * Support source directory layouts s/<subdir>/<leaf> as used by the
    kernel and printer drivers - define SYMLINK_EXT_FIRST to enable
  * Prevent relinking when running make on an up-to-date component due to
    a difference between amu and GNU make's handling of double-colon rules
  * Support linking with GNU toolchain
  * Fix installation rule (mixup between MERGEDMDIR and MERGEDRDIR)
  * Support up to 16 assembler and 8 C-from-assembler headers, up from 3
    of each (here's looking at you, kernel) - long-term, it might be worth
    changing this to a scheme like that used by CModule to remove any
    limits
  * Fix C-from-assembler exports to have .h suffix
  GNUmakefiles/AppLibs:
  * Define INCLUDE_OSLIB to permit OSLib header search paths to be
    specified in an OS-agnostic way
  GNUmakefiles/CApp:
  * Prevent relinking when running make on an up-to-date component due to
    a difference between amu and GNU make's handling of double-colon rules
  GNUmakefiles/CLibrary:
  * Prevent rearchiving when running make on an up-to-date component due
    to a difference between amu and GNU make's handling of double-colon
    rules
  * Don't use .hdr suffix on exported assembler header files
  * Correct order of dependencies for export_libs phony target
  GNUmakefiles/StdTools:
  * Definition for the module filetype suffix
  * Add LDBIN tool for GNU/Norcroft-agnostic binary link, useful for
    linking position-independent binary code, such as relocatable modules
    (i.e. ones that don't require the linker to create a __RelocCode
    function)
  * FAPPEND function now works if the same file is used for the
    destination as for one of the sources (this is used by CModule)
  GNUmakefiles/CModule, ModStdRule, ModuleLibs:
  * Finally created cross-compilation versions of the last major shared
    makefiles! Warning: these have received limited testing to date.
  Makefiles/AAsmModule:
  * Support up to 16 assembler and 8 C-from-assembler headers
  Makefiles/AppLibs, ModuleLibs:
  * Define INCLUDE_OSLIB
  Makefiles/StdTools:
  * Add LDBIN tool


Version 7.24. Tagged as 'BuildSys-7_24'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.13 2015/01/10 11:56:06 rsprowson Exp $
d83 1
a83 1
INCLUDE_OSLIB = IOS:
@


1.13
log
@Add ability to specify dependicies for CLibrary
New capability for the CLibrary shared makefile to specify arbitrary dependencies (via ${LIBDEPENDS}) required before the main event, this might be used to, for example, run a perl script or something to generate some code or headers.
Add PDEBUGLIB PRISMLIB REMOTEDBLIB TRACELIB and UNICODELIB to the AppLibs and ModuleLibs.
Repoint DDTLIB WILDLIB TRACELIB.
For the PlingSystem build, put TextGadgets in the 350 directory since it currently only supports text areas in dynamic areas.

Version 6.63. Tagged as 'BuildSys-6_63'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.10 2014/09/27 09:51:17 rsprowson Exp $
d81 4
@


1.12
log
@Repoint ModMalloc library

Version 6.61. Not tagged
@
text
@d43 1
a43 1
TBOXINTLIB= C:tboxlibint.o.tboxlibm
d59 1
a59 1
DDTLIB    = C:DDTLib.o.DDTLib_M
d68 3
d74 3
a76 2
WILDLIB   = C:Wild.o.Wild_M
PRISMLIB  = C:PRISMLib.o.PRISMLibzm
d79 1
a79 1
DEBUGLIBS = ${DEBUGLIB} ${MODMALLOCLIB} ${WILDLIB} ${DDTLIB} ${DESKLIB}
@


1.11
log
@Repoint CALLXLIB
Tack a 'zm' on the end to match callx-0_09.
Mark the application version as invalid, since callx can't be used from an application which gets paged out.

Version 6.61. Tagged as 'BuildSys-6_61'
@
text
@d64 1
a64 1
MODMALLOCLIB = C:ModMalloc.o.Lib_M
@


1.10
log
@Change less useful resources_messages for resources_sprites
GNU/AAsmModule:
 Swap round ${RESOURCEEXTRA} to come later, since otherwise the ${RESDIR} hasn't been created
AAsmModule & CModule:
 Recemtly added resources_messages was a bit pointless as resources_common did the same thing, instead add resources_sprites.
ModuleLibs:
 Debug library for internal Toolbox objects added.
Retagged as BuildSys-6_50.
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.9 2013/07/15 19:29:13 rsprowson Exp $
d57 1
a57 1
CALLXLIB  = C:callx.o.callx
@


1.9
log
@Shared makefile enhancements
AAsmModule:
 Comments sync'd with implementation
ModuleLibs/AppLibs:
 Add the RMVersion library
CApp:
 Now APP_OBJS and APP_DBG_OBJS don't need the '.o' suffix in common with OBJS and DBG_OBJS
 Changed insertion of version numbers to be common for Messages/Obey/Desc files through new 'INSTAPP_VERSION' dummy rule
 INSTALLAPP_DEPEND renamed to INSTAPP_DEPENDS to match other INSTAPP_stuff
CUtil:
 Use addprefix'd APP_OBJS
StdTools:
 Default SQUISHFLAGS now set
 Added INSERTVERSION


Version 6.20. Tagged as 'BuildSys-6_20'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.8 2012/09/02 18:05:26 rsprowson Exp $
d44 1
@


1.8
log
@Add ConfigLib to available module libs
Make use of it for the ROMs which include BootCommands

Version 5.90. Tagged as 'BuildSys-5_90'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.7 2012/06/07 23:29:31 bavison Exp $
d67 1
@


1.8.2.1
log
@Merge of trunk BuildSys-6_34 to branch RPiFreeze

Version 6.00, 1.142.2.4. Tagged as 'BuildSys-6_00-1_142_2_4'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.9 2013/07/15 19:29:13 rsprowson Exp $
a66 1
RMVSN     = C:RMVersion.o.RMVersionZ
@


1.8.2.2
log
@Merge of BuildSys-6_52 to branch

Version 6.00, 1.142.2.5. Tagged as 'BuildSys-6_00-1_142_2_5'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.10 2014/09/27 09:51:17 rsprowson Exp $
a43 1
TBOXINTDBGLIB = C:tboxlibint.o.debuglibm
@


1.8.2.3
log
@Merge of BuildSys-6_64 to branch

Version 6.00, 1.142.2.6. Tagged as 'BuildSys-6_00-1_142_2_6'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.13 2015/01/10 11:56:06 rsprowson Exp $
d43 1
a43 1
TBOXINTLIB = C:tboxlibint.o.tboxlibm
d57 1
a57 1
CALLXLIB  = C:callx.o.callxzm
d59 1
a59 1
DDTLIB    = C:DDTLib.o.DDTLibzm
d64 1
a64 1
MODMALLOCLIB = C:ModMalloc.o.ModMalloczm
a67 3
PDEBUGLIB = C:PDebug.o.PDebugzm
PRISMLIB  = C:PRISMLib.o.PRISMLibzm
REMOTEDBLIB = C:remotedb.o.remotedbzm
d71 2
a72 3
TRACELIB  = C:Trace.o.Tracezm
UNICODELIB = C:Unicode.o.ucodezm
WILDLIB   = C:Wild.o.Wildzm
d75 1
a75 1
DEBUGLIBS = ${DEBUGLIB} ${REMOTEDBLIB} ${TRACELIB} ${PDEBUGLIB} ${MODMALLOCLIB} ${WILDLIB} ${DDTLIB} ${DESKLIB}
@


1.8.2.4
log
@Merge of BuildSys-7_04 to branch

Version 6.00, 1.142.2.9. Tagged as 'BuildSys-6_00-1_142_2_9'
@
text
@@


1.7
log
@Added the 4 SDFS modules and SyncLib to the OMAP3 builds

Version 5.64. Tagged as 'BuildSys-5_64'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.6 2012/02/05 09:13:27 rsprowson Exp $
d57 1
@


1.6
log
@Change back to overridable clean and dirs steps.
The CLEAN_DEPEND intermediate was added because GNU make didn't support '::' notation, but GNU nake 3.81 (possibly earlier) does as described at
  http://www.gnu.org/software/make/manual/make.html#Double_002dColon
verified with two test makefiles
# This is 'makefile'
include ./other.mk
clean::
	@@echo 1
	@@echo 2
# This is 'other.mk'
CLEANALIAS = clean
${CLEANALIAS}::
	@@echo 3
	@@echo 4
which did what was required.

Version 5.42. Tagged as 'BuildSys-5_42'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.4 2011/05/03 16:19:50 bavison Exp $
d66 1
@


1.5
log
@Add optional CLEAN_DEPEND to the clean rule in CModule.
Do actively report when the CMHG file is deleted in CModule.
Add PRISMLIB to the available module libraries.
Components files updated to pass USB driver switches via CDEFINES not
CFLAGS.
Tested with OMAP3 ROM build, other components files modified by eye but
not tested.

Version 5.39. Tagged as 'BuildSys-5_39'
@
text
@@


1.4
log
@  Makefile bugfix
Detail:
  ModuleLibs used the wrong (non-zM) version of RISC_OSLib. This meant that
  any module using the shared makefiles and RISC_OSLib ended up using the
  static initialisers instead of static data, meaning that it could not be
  reinitialised or multiply instantiated. This was rather critical for the
  FrontEnd module, which relies on being reinstantiated for each new tool.
Admin:
  Fixes the reported bug in FrontEnd 1.31 - verified it now works with more
  than one tool loaded.

Version 5.14. Tagged as 'BuildSys-5_14'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.3 2011/03/31 00:04:06 bavison Exp $
d68 1
@


1.3
log
@  Improvements to shared makefiles
Detail:
  * Some subtle bugs can be caused by including shared makefiles in the
    wrong order. To try to prevent further problems, and simplify main
    makefiles at the same time, CApp, CLibrary and CModule now include the
    makefiles they depend upon themselves, in the correct order: generally
    speaking, all macro (re)definitions should be before rule definitions.
  * Added sentry macro definitions to each makefile. These can be used to
    avoid repeated inclusion of makefiles - particularly important now that
    CApp, CLibrary and CModule do additional includes. This removes the
    majority of cases where amu produced warnings about multiple inclusion;
    a few components remain where this is still the case, but these
    warnings are harmless. If they bother you, simply remove the
    now-superfluous include statements from the relevant main makefile.
  * Created a CUtil shared makefile, for building transient utilities. The
    'C' in the name is more for consistency with CApp/CLibrary/CModule than
    anything to do with the 'C' language, since all of these makefiles work
    equally well for assembler and 'C' - the 'C' is for historic reasons.
  * Tweaked the debug rules in CApp to avoid harmless but annoying linker
    warnings about stubs being included twice.
  * Added several new default switches to ASFLAGS. These enable us to start
    making assembler source files work under a cross-assembler, because
    statements like
        GET  Hdr:Macros
        GET  Hdr:Machine.<Machine>
    are not portable, and tweaking the cross-assembler to understand these
    types of constructs would not be pretty. Instead, with the extra
    command line switches now introduced, you can use
        GET  Macros
        GET  Machine/$Machine
Admin:
  Tested in a ROM build

Version 5.12. Tagged as 'BuildSys-5_12'
@
text
@d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.2 2009/06/26 14:03:07 bavison Exp $
d25 1
a25 1
RLIB      = RISCOSLIB:o.risc_oslib
@


1.2
log
@  Added CTools disc build, and various supporting changes
Detail:
  * Updates to CModule makefile fragment to reduce the number of OS-specific
    rules in main Makefiles:
    + Added (RAM|ROM)(C|ASM)DEFINES variables. These allow the calling makefile
      to specify additional defines for RAM or ROM builds of C or assembler
      source files respectively. Traditionally this was done by having separate
      object files for RAM and ROM corresponding at least to whichever source
      file was responsible for interfacing with ResourceFS, but this requires
      messy additional rules. With this new approach, it is necessary to clean
      the component when switching between RAM and ROM builds, but I don't
      think this will affect many people's workflows.
    + Added CMHGDEPENDS. This should be used to specify which object files need
      a static dependency upon the h file autogenerated from the cmhg file.
      It should be specified in the usual form for object files passed to
      CModule - with neither an o. prefix nor a .o suffix.
  * Added TBOXINTLIB to ModuleLibs makefile fragment.
  * AsmUtils, HdrSrc, TCPIPheaders, ToolboxLib and UnicodeLib all upgraded in
    ModuleDB from EXP to ASM or C components, to permit them to be built in the
    install phase. As a result, those other Components files that didn't
    already do so now need to override this back to -type EXP.
  * BuildHost Components file edited to reflect the fact that binaof, binasm,
    modgen and ResGen now have separate install phases for executables and
    Docs files.
Admin:
  The new Components file uses various components that are not publicly
  released, so it can only sensibly be used internally by ROOL. However, it's
  more convenient for us to keep it alongside the other Components files - and
  it also serves as an illustration of how to do a disc build.

Version 4.77. Tagged as 'BuildSys-4_77'
@
text
@d16 3
d20 1
a20 1
STDMAKEFILE=$Id: ModuleLibs,v 1.1 2008/10/14 21:29:37 bavison Exp $
@


1.1
log
@Clean reimport of the build environment directories.
This represents the version released in the Batch 4 "bbe" tarfiles.
Tagged as 'Batch4'
@
text
@d17 1
a17 1
STDMAKEFILE=$Id: ModuleLibs,v 1.14 2004/03/02 17:38:16 jbyrne Exp $
d40 1
@

