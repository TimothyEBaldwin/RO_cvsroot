head	1.12;
access;
symbols
	BuildSys-7_30:1.12
	BuildSys-7_29:1.12
	BuildSys-7_28:1.12
	BuildSys-7_27:1.12
	BuildSys-7_26:1.12
	BuildSys-7_25:1.12
	BuildSys-7_24:1.12
	BuildSys-7_23:1.12
	BuildSys-7_22:1.12
	BuildSys-7_21:1.12
	BuildSys-7_20:1.12
	BuildSys-7_19:1.12
	BuildSys-7_18:1.12
	BuildSys-7_17:1.12
	BuildSys-7_16:1.12
	BuildSys-7_15:1.12
	BuildSys-7_14:1.12
	BuildSys-7_13:1.12
	BuildSys-7_12:1.12
	BuildSys-7_11:1.12
	BuildSys-7_10:1.11
	BuildSys-7_09:1.11
	BuildSys-6_00-1_142_2_10:1.2.2.5
	BuildSys-7_08:1.11
	BuildSys-7_07:1.11
	BuildSys-7_06:1.11
	BuildSys-7_05:1.11
	BuildSys-6_00-1_142_2_9:1.2.2.5
	BuildSys-7_04:1.11
	BuildSys-7_03:1.10
	BuildSys-7_02:1.10
	BuildSys-7_01:1.10
	BuildSys-7_00:1.10
	BuildSys-6_99:1.9
	BuildSys-6_98:1.9
	BuildSys-6_97:1.9
	BuildSys-6_96:1.9
	BuildSys-6_95:1.9
	BuildSys-6_94:1.8
	BuildSys-6_93:1.7
	BuildSys-6_92:1.7
	BuildSys-6_91:1.6
	BuildSys-6_90:1.6
	BuildSys-6_89:1.6
	BuildSys-6_81-1:1.6
	BuildSys-6_88:1.6
	BuildSys-6_87:1.6
	BuildSys-6_86:1.6
	BuildSys-6_85:1.4
	BuildSys-6_84:1.4
	BuildSys-6_83:1.4
	BuildSys-6_82:1.4
	BuildSys-6_81:1.4
	BuildSys-6_80:1.4
	BuildSys-6_79:1.4
	BuildSys-6_78:1.4
	BuildSys-6_77:1.3
	BuildSys-6_76:1.3
	BuildSys-6_75:1.3
	BuildSys-6_74:1.3
	BuildSys-6_73:1.3
	BuildSys-6_72:1.3
	BuildSys-6_71:1.3
	BuildSys-6_70:1.3
	BuildSys-6_69:1.3
	BuildSys-6_68:1.2
	BuildSys-6_67:1.2
	BuildSys-6_66-1:1.2
	BuildSys-6_66:1.2
	BuildSys-6_65:1.2
	BuildSys-6_00-1_142_2_8:1.2.2.4
	BuildSys-6_00-1_142_2_7:1.2.2.3
	BuildSys-6_00-1_142_2_6:1.2.2.2
	BuildSys-6_64:1.2
	BuildSys-6_63:1.2
	BuildSys-6_62:1.2
	BuildSys-6_61:1.2
	BuildSys-6_60:1.2
	BuildSys-6_59:1.2
	BuildSys-6_58:1.2
	BuildSys-6_57:1.2
	BuildSys-6_56:1.2
	BuildSys-6_55:1.2
	BuildSys-6_54:1.2
	BuildSys-6_53:1.2
	BuildSys-6_00-1_142_2_5:1.2.2.2
	RPiFreeze:1.2.0.2
	BuildSys-6_52:1.2
	BuildSys-6_51:1.2
	BuildSys-6_50:1.2
	BuildSys-6_49:1.2
	BuildSys-6_48:1.2
	BuildSys-6_47:1.2
	BuildSys-6_46:1.1
	BuildSys-6_45:1.1
	BuildSys-6_44:1.1
	BuildSys-6_43:1.1
	BuildSys-6_42:1.1;
locks; strict;
comment	@# @;


1.12
date	2017.06.03.22.40.11;	author jlee;	state Exp;
branches;
next	1.11;
commitid	pcHD0F4F1GGzNYTz;

1.11
date	2017.02.21.08.32.17;	author rsprowson;	state Exp;
branches;
next	1.10;
commitid	nQixf60LdkpZnNGz;

1.10
date	2017.01.17.20.32.15;	author rsprowson;	state Exp;
branches;
next	1.9;
commitid	eEFj6emRjHXIumCz;

1.9
date	2016.10.15.15.07.04;	author rsprowson;	state Exp;
branches;
next	1.8;
commitid	Z5l4ETthpVuvIfqz;

1.8
date	2016.10.09.12.34.52;	author jlee;	state Exp;
branches;
next	1.7;
commitid	XuJ4CfdtrH6f4tpz;

1.7
date	2016.07.30.08.55.35;	author rool;	state Exp;
branches;
next	1.6;
commitid	j83z20T0l1Lv8kgz;

1.6
date	2016.03.29.22.02.38;	author rsprowson;	state Exp;
branches;
next	1.5;
commitid	938iFMmQTY4prA0z;

1.5
date	2016.03.25.20.19.48;	author jlee;	state Exp;
branches;
next	1.4;
commitid	Mcg3ckOTPMsk040z;

1.4
date	2015.11.08.02.07.26;	author bavison;	state Exp;
branches;
next	1.3;
commitid	m3kSaMxkJGgzoeIy;

1.3
date	2015.07.04.19.34.33;	author jlee;	state Exp;
branches;
next	1.2;
commitid	S2Pupxm90MOUg0sy;

1.2
date	2014.07.20.13.52.35;	author jlee;	state Exp;
branches
	1.2.2.1;
next	1.1;
commitid	ewkw8luuqfP8B7Jx;

1.1
date	2014.04.29.14.19.39;	author bavison;	state Exp;
branches;
next	;
commitid	ilmpan8wJKfQnAyx;

1.2.2.1
date	2014.07.20.13.52.35;	author rsprowson;	state dead;
branches;
next	1.2.2.2;
commitid	tHT6hsrmkNpoOTTx;

1.2.2.2
date	2014.10.12.10.36.20;	author rsprowson;	state Exp;
branches;
next	1.2.2.3;
commitid	tHT6hsrmkNpoOTTx;

1.2.2.3
date	2015.02.25.21.28.50;	author rsprowson;	state Exp;
branches;
next	1.2.2.4;
commitid	A4tHA8o98ZZc3rby;

1.2.2.4
date	2015.02.26.18.50.35;	author rsprowson;	state Exp;
branches;
next	1.2.2.5;
commitid	Z6n0jQL184eV8yby;

1.2.2.5
date	2017.02.21.08.36.54;	author rsprowson;	state Exp;
branches;
next	;
commitid	yeUPZ9XHdm2zpNGz;


desc
@@


1.12
log
@Add BASICVFP to relevant ROMs
Detail:
  - ModuleDB - Define BASICVFP component
  - Components/ROOL/BCM2835, BCM2835Pico, OMAP3, OMAP3Live, OMAP4, OMAP5, Titanium, iMx6 - Add BASICVFP to ROM for all ARMv6+ machines
Admin:
  BCM2835 build tested
  Requires BASIC-1_67, Library-1_91


Version 7.11. Tagged as 'BuildSys-7_11'
@
text
@#------------------------------------------------------------------------------
# Components file for BCM2835 build, no desktop or networking
#------------------------------------------------------------------------------
%BaseAddress   0xFC000000
%Image         Build$ImageName
%Log           Build$ImageName
%Messages      apache.RiscOS.Sources.Internat.Messages
%Joiner        romlinker
%JoinerFormat  romlinker
%noimagesize

# BBE Support
BuildApps
BuildExport
BuildSystem           -options COMPONENTFILE=BCM2835Pico COMPONENTFILE2=Universal
BuildEnvironment      -options ENVFILE=BCM2835Pico
BuildModules
BuildTools

#------------------------------------------------------------------------------
# some headers
#
HdrSrc                -type EXP
#------------------------------------------------------------------------------
# we need the following exported for swis.h generation
# change the type to EXP
#
DDEUtils              -type EXP
Econet                -type EXP
DDT                   -type EXP
HostFS                -type EXP
SCSIDriver            -type EXP
PCCardFS              -type EXP
PDriver               -type EXP
PDumperDM             -type EXP
MakePSFont            -type EXP

# kernel is first module in ROM seen as the UtilityModule
HAL_BCM2835
Kernel                -at 0xFC010000 -options ASFLAGS="-PD \"CMOS_Override SETS \\\"= FileLangCMOS,fsnumber_SDFS,CDROMFSCMOS,&C0,LanguageCMOS,10\\\"\""
Podule                -type EXP
PCI
FileSwitch
ResourceFS
TerritoryManager
Messages
MessageTrans
UK
WindowManager         -type EXP -options OPTIONS=Ursula
TaskManager           -type EXP
SharedRISC_OSLib
BASIC105
BASIC64
BASICVFP
BlendTable
BufferManager
ColourTrans
Debugger
#DADebug
DeviceFS
BCMSupport
PortableHAL
RTSupport
USBDriver
DWCDriver
VCHIQ
BCMSound
ScreenModes
BCMVideo              -options ASFLAGS="-PD \"GenCmd SETL {FALSE}\""
DMAManager
DrawMod               -type EXP
FileCore
ADFS                  -type EXP
RamFS
FontManager           -type EXP
FPEmulator            -options FPE_APCS=3/32bit FPEANCHOR=High
VFPSupport
Free                  -type EXP
Hourglass             -type EXP
IIC
International
InternationalKeyboard -options KEYBOARD=All
ITable                -type EXP
Obey
PipeFS
RTC
DualSerial
SerialDeviceDriver    -type EXP
SerialDeviceSupport
#SerialMouse
SoundDMA_HAL
SoundControl
SoundChannels
SoundScheduler
SpriteExtend
SpriteUtils
Squash                -type EXP
SystemDevices
TaskWindow            -type EXP
WaveSynth
StringLib
Percussion
SharedSnd
DOSFS                 -options PCMCIA=TRUE
SCSISwitch
SCSISoftUSB
SCSIFS
SDIODriver
SDFS
SDCMOS
ColourPicker          -type EXP
BootCommands
MimeMap               -type EXP

#
# Toolbox Modules/Libs
#
tboxlib
ToolboxLib            -type EXP
#
# CDFS
#
CDFSDriver
CDFSSoftSCSI
CDFS

UnSqzAIF
ArmBE
GPIO

# some libraries and bits
#
callx
AsmUtils              -type EXP
TCPIPheaders          -type EXP
socklib
inetlib
unixlib
UnicodeLib            -type EXP
ConfigLib             -type EXP
OSLib
DeskLib
ModMallocLib
PlainArgvLib
RemoteDebug
PDebug
DDTLib
Wild
Trace
DebugLib
SyncLib

NVRAM                 -type EXP
PortManager           -type EXP

#SDCreate              -options INSTDIR=<Install$Dir>.ABRelease
ABRelease

# end
@


1.11
log
@Update Pico components
Force BCMVideo to work discless using a built in MDF, in lieu of EDID.

Version 7.04. Tagged as 'BuildSys-7_04'
@
text
@d54 1
@


1.10
log
@Pico build fix
Need tboxlib for the messages header for internationalised DWCDriver.
Force the default language CMOS to 10 since Pico is 1 module short, such that BASIC V is the default (not BASIC VI) per discussion https://www.riscosopen.org/forum/forums/5/topics/6744

Version 7.00. Tagged as 'BuildSys-7_00'
@
text
@d68 1
a68 1
BCMVideo
@


1.9
log
@Use default SDCMOS switch
Requires BCM2835-0_61 and SDCMOS-0_17.

Version 6.95. Tagged as 'BuildSys-6_95'
@
text
@d40 1
a40 1
Kernel                -at 0xFC010000 -options ASFLAGS="-PD \"CMOS_Override SETS \\\"= FileLangCMOS,fsnumber_SDFS,CDROMFSCMOS,&C0\\\"\""
d117 1
@


1.8
log
@Add SerialDeviceSupport to Raspberry Pi ROMs
Detail:
  Components/ROOL/BCM2835, Components/ROOL/BCM2835Pico - Enable SerialDeviceSupport (OS_SerialOp/SerialV bridge to the underlying 'serialctrl' DeviceFS API)
Admin:
  Tested on Raspberry Pi 1 B
  Requires BCM2835-0_59 and DualSerial-0_25-4_8_2_14


Version 6.94. Tagged as 'BuildSys-6_94'
@
text
@d109 1
a109 1
SDCMOS                -options MYASFLAGS="-pd \"StoreInHAL SETL {TRUE}\""
@


1.7
log
@Shuffle module order
Detail:
  Ordering of FPE with respect to ScreenModes not important post ScrModes-0_55.

Version 6.92. Tagged as 'BuildSys-6_92'
@
text
@d88 1
a88 1
SerialDeviceSupport   -type EXP
@


1.6
log
@Build fix
ColourPicker exports wanted by RISC_OSLib, MimeMap exports wanted by DOSFS and others.
Retagged as BuildSys-6_86.
@
text
@a66 1
FPEmulator            -options FPE_APCS=3/32bit FPEANCHOR=High
d75 1
@


1.5
log
@Add BCMSupport to Raspberry Pi ROMs
Detail:
  Components/ROOL/BCM2835, Components/ROOL/BCM2835Pico - Add BCMSupport to ROM
Admin:
  BCM2835 ROM tested on Pi 1B/2B/3B
  Pico ROM untested


Version 6.86. Tagged as 'BuildSys-6_86'
@
text
@d110 1
d112 1
@


1.4
log
@  New method to control default CMOS settings
Detail:
  Rather than fill the Kernel sources with an ever-increasing number of
  platform-specific switches to control the default CMOS settings, this
  change introduces a variable which passes the requirements direct from
  the Components file to the Kernel. Since it uses a comma-separated list
  of address/value pairs, it is inherently extensible. All the symbolic
  names of addresses from Hdr:CMOS are available, and any valid objasm
  expression can be used for the value.


Version 6.78. Tagged as 'BuildSys-6_78'
@
text
@d60 1
@


1.3
log
@Ensure FPEmulator is aware of zero page relocation. Keep zero page relocation disabled for iMx6 for now. Add ZeroPain to ModuleDB
Detail:
  Components/ROOL/BCM2835, BCM2835Pico, OMAP3, OMAP3Live, OMAP4, S3C6410, Tungsten - Add "FPEANCHOR=High" to FPEmulator build options so that it uses the relocated FPEAnchor location instead of the old one. In the future FPEmulator will be fixed so that it doesn't use a hard-coded address, but for now we need to manually tell ROM versions where FPEAnchor is.
  Components/ROOL/iMx6 - Override the kernel's default decision and leave zero page relocation disabled. R-Comp can decide when it's a sensible time to enable it.
  ModuleDB - Add ZeroPain. The module isn't used in any components files yet, but it's good to list it here forthe sake of completeness.
Admin:
  Tested with Iyonix ROM build
  Requires Kernel-5_35-4_79_2_268 for FPEAnchor setting to match reality


Version 6.69. Tagged as 'BuildSys-6_69'
@
text
@d40 1
a40 1
Kernel                -at 0xFC010000
@


1.2
log
@Move ScreenModes to before video drivers
Detail:
  Components/ROOL/BCM2835, BCM2835Pico, IOMD32, OMAP3, OMAP3Live, OMAP4, Tungsten - Moved ScreenModes (+FPEmulator) to just before the video drivers, so that (once the EDID changes are submitted) the first mode change will be able to use EDID-derived mode timings instead of fixed ones.
  IOMD change is somewhat non-essential due to lack of EDID reading support, but keeps things consistent with the other ROMs.
  Also moved PandoraKey to be with the other keyboard (USB) drivers.
Admin:
  Tested on BB-xM, Iyonix, Pandora, Raspberry Pi, RiscPC


Version 6.47. Tagged as 'BuildSys-6_47'
@
text
@d66 1
a66 1
FPEmulator            -options FPE_APCS=3/32bit
@


1.2.2.1
log
@file BCM2835Pico was added on branch RPiFreeze on 2014-10-12 10:36:20 +0000
@
text
@d1 154
@


1.2.2.2
log
@Merge of BuildSys-6_52 to branch

Version 6.00, 1.142.2.5. Tagged as 'BuildSys-6_00-1_142_2_5'
@
text
@a0 154
#------------------------------------------------------------------------------
# Components file for BCM2835 build, no desktop or networking
#------------------------------------------------------------------------------
%BaseAddress   0xFC000000
%Image         Build$ImageName
%Log           Build$ImageName
%Messages      apache.RiscOS.Sources.Internat.Messages
%Joiner        romlinker
%JoinerFormat  romlinker
%noimagesize

# BBE Support
BuildApps
BuildExport
BuildSystem           -options COMPONENTFILE=BCM2835Pico COMPONENTFILE2=Universal
BuildEnvironment      -options ENVFILE=BCM2835Pico
BuildModules
BuildTools

#------------------------------------------------------------------------------
# some headers
#
HdrSrc                -type EXP
#------------------------------------------------------------------------------
# we need the following exported for swis.h generation
# change the type to EXP
#
DDEUtils              -type EXP
Econet                -type EXP
DDT                   -type EXP
HostFS                -type EXP
SCSIDriver            -type EXP
PCCardFS              -type EXP
PDriver               -type EXP
PDumperDM             -type EXP
MakePSFont            -type EXP

# kernel is first module in ROM seen as the UtilityModule
HAL_BCM2835
Kernel                -at 0xFC010000
Podule                -type EXP
PCI
FileSwitch
ResourceFS
TerritoryManager
Messages
MessageTrans
UK
WindowManager         -type EXP -options OPTIONS=Ursula
TaskManager           -type EXP
SharedRISC_OSLib
BASIC105
BASIC64
BlendTable
BufferManager
ColourTrans
Debugger
#DADebug
DeviceFS
PortableHAL
RTSupport
USBDriver
DWCDriver
VCHIQ
BCMSound
FPEmulator            -options FPE_APCS=3/32bit
ScreenModes
BCMVideo
DMAManager
DrawMod               -type EXP
FileCore
ADFS                  -type EXP
RamFS
FontManager           -type EXP
VFPSupport
Free                  -type EXP
Hourglass             -type EXP
IIC
International
InternationalKeyboard -options KEYBOARD=All
ITable                -type EXP
Obey
PipeFS
RTC
DualSerial
SerialDeviceDriver    -type EXP
SerialDeviceSupport   -type EXP
#SerialMouse
SoundDMA_HAL
SoundControl
SoundChannels
SoundScheduler
SpriteExtend
SpriteUtils
Squash                -type EXP
SystemDevices
TaskWindow            -type EXP
WaveSynth
StringLib
Percussion
SharedSnd
DOSFS                 -options PCMCIA=TRUE
SCSISwitch
SCSISoftUSB
SCSIFS
SDIODriver
SDFS
SDCMOS                -options MYASFLAGS="-pd \"StoreInHAL SETL {TRUE}\""
BootCommands

#
# Toolbox Modules/Libs
#
ToolboxLib            -type EXP
#
# CDFS
#
CDFSDriver
CDFSSoftSCSI
CDFS

UnSqzAIF
ArmBE
GPIO

# some libraries and bits
#
callx
AsmUtils              -type EXP
TCPIPheaders          -type EXP
socklib
inetlib
unixlib
UnicodeLib            -type EXP
ConfigLib             -type EXP
OSLib
DeskLib
ModMallocLib
PlainArgvLib
RemoteDebug
PDebug
DDTLib
Wild
Trace
DebugLib
SyncLib

NVRAM                 -type EXP
PortManager           -type EXP

#SDCreate              -options INSTDIR=<Install$Dir>.ABRelease
ABRelease

# end
@


1.2.2.3
log
@Add the DEV_REL switch for Pico too

Version 6.00, 1.142.2.7. Tagged as 'BuildSys-6_00-1_142_2_7'
@
text
@d40 1
a40 1
Kernel                -at 0xFC010000 -options FREEZE_DEV_REL=TRUE
d66 2
a74 1
FPEmulator            -options FPE_APCS=3/32bit
a108 1
ScreenModes
@


1.2.2.4
log
@Need MimeMap exports for DOSFS

Version 6.00, 1.142.2.8. Tagged as 'BuildSys-6_00-1_142_2_8'
@
text
@a109 1
MimeMap               -type EXP
@


1.2.2.5
log
@Merge of BuildSys-7_04 to branch

Version 6.00, 1.142.2.9. Tagged as 'BuildSys-6_00-1_142_2_9'
@
text
@d40 1
a40 1
Kernel                -at 0xFC010000 -options FREEZE_DEV_REL=TRUE ASFLAGS="-PD \"CMOS_Override SETS \\\"= FileLangCMOS,fsnumber_SDFS,CDROMFSCMOS,&C0,LanguageCMOS,10\\\"\""
a59 1
BCMSupport
d66 1
a66 2
ScreenModes
BCMVideo              -options ASFLAGS="-PD \"GenCmd SETL {FALSE}\""
d73 1
a73 1
FPEmulator            -options FPE_APCS=3/32bit FPEANCHOR=High
d86 1
a86 1
SerialDeviceSupport
d107 2
a108 2
SDCMOS
ColourPicker          -type EXP
a114 1
tboxlib
@


1.1
log
@  Create cut-down Raspberry Pi build
Detail:
  This is a command-line-only build, designed to operate without an
  accompanying RISC OS disc image.
  Also added the GPIO module to the ModuleDB so it can be included in
  ROM builds.


Version 6.42. Tagged as 'BuildSys-6_42'
@
text
@d66 2
a74 1
FPEmulator            -options FPE_APCS=3/32bit
a108 1
ScreenModes
@

