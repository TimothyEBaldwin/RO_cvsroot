head	1.1;
branch	1.1.1;
access;
symbols
	GCC-4_7_4_r3:1.1.1.2
	GCC-4_1_2_r2:1.1.1.1
	MAIN:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2013.07.29.22.46.09;	author jlee;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Uxh7I3IiWVY2YpZw;

1.1.1.1
date	2013.07.29.22.46.09;	author jlee;	state Exp;
branches;
next	1.1.1.2;
commitid	Uxh7I3IiWVY2YpZw;

1.1.1.2
date	2017.04.15.15.12.07;	author jlee;	state Exp;
branches;
next	;
commitid	Kx60weqAWGeJSDNz;


desc
@@


1.1
log
@Initial revision
@
text
@<html lang="en">
<head>
<title>objcopy - GNU Binary Utilities</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Binary Utilities">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="nm.html#nm" title="nm">
<link rel="next" href="objdump.html#objdump" title="objdump">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front-Cover Texts, and with no
Back-Cover Texts.  A copy of the license is included in the
section entitled ``GNU Free Documentation License''.

-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="objcopy"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="objdump.html#objdump">objdump</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="nm.html#nm">nm</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<h2 class="chapter">3 objcopy</h2>

<!-- man title objcopy copy and translate object files -->
<pre class="smallexample">     <!-- man begin SYNOPSIS objcopy -->
     objcopy [<samp><span class="option">-F</span></samp> <var>bfdname</var>|<samp><span class="option">--target=</span></samp><var>bfdname</var>]
             [<samp><span class="option">-I</span></samp> <var>bfdname</var>|<samp><span class="option">--input-target=</span></samp><var>bfdname</var>]
             [<samp><span class="option">-O</span></samp> <var>bfdname</var>|<samp><span class="option">--output-target=</span></samp><var>bfdname</var>]
             [<samp><span class="option">-B</span></samp> <var>bfdarch</var>|<samp><span class="option">--binary-architecture=</span></samp><var>bfdarch</var>]
             [<samp><span class="option">-S</span></samp>|<samp><span class="option">--strip-all</span></samp>]
             [<samp><span class="option">-g</span></samp>|<samp><span class="option">--strip-debug</span></samp>]
             [<samp><span class="option">-K</span></samp> <var>symbolname</var>|<samp><span class="option">--keep-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">-N</span></samp> <var>symbolname</var>|<samp><span class="option">--strip-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">--strip-unneeded-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">-G</span></samp> <var>symbolname</var>|<samp><span class="option">--keep-global-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">--localize-hidden</span></samp>]
             [<samp><span class="option">-L</span></samp> <var>symbolname</var>|<samp><span class="option">--localize-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">--globalize-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">-W</span></samp> <var>symbolname</var>|<samp><span class="option">--weaken-symbol=</span></samp><var>symbolname</var>]
             [<samp><span class="option">-w</span></samp>|<samp><span class="option">--wildcard</span></samp>]
             [<samp><span class="option">-x</span></samp>|<samp><span class="option">--discard-all</span></samp>]
             [<samp><span class="option">-X</span></samp>|<samp><span class="option">--discard-locals</span></samp>]
             [<samp><span class="option">-b</span></samp> <var>byte</var>|<samp><span class="option">--byte=</span></samp><var>byte</var>]
             [<samp><span class="option">-i</span></samp> [<var>breadth</var>]|<samp><span class="option">--interleave</span></samp>[=<var>breadth</var>]]
             [<samp><span class="option">--interleave-width=</span></samp><var>width</var>]
             [<samp><span class="option">-j</span></samp> <var>sectionname</var>|<samp><span class="option">--only-section=</span></samp><var>sectionname</var>]
             [<samp><span class="option">-R</span></samp> <var>sectionname</var>|<samp><span class="option">--remove-section=</span></samp><var>sectionname</var>]
             [<samp><span class="option">-p</span></samp>|<samp><span class="option">--preserve-dates</span></samp>]
             [<samp><span class="option">--debugging</span></samp>]
             [<samp><span class="option">--gap-fill=</span></samp><var>val</var>]
             [<samp><span class="option">--pad-to=</span></samp><var>address</var>]
             [<samp><span class="option">--set-start=</span></samp><var>val</var>]
             [<samp><span class="option">--adjust-start=</span></samp><var>incr</var>]
             [<samp><span class="option">--change-addresses=</span></samp><var>incr</var>]
             [<samp><span class="option">--change-section-address</span></samp> <var>section</var>{=,+,-}<var>val</var>]
             [<samp><span class="option">--change-section-lma</span></samp> <var>section</var>{=,+,-}<var>val</var>]
             [<samp><span class="option">--change-section-vma</span></samp> <var>section</var>{=,+,-}<var>val</var>]
             [<samp><span class="option">--change-warnings</span></samp>] [<samp><span class="option">--no-change-warnings</span></samp>]
             [<samp><span class="option">--set-section-flags</span></samp> <var>section</var>=<var>flags</var>]
             [<samp><span class="option">--add-section</span></samp> <var>sectionname</var>=<var>filename</var>]
             [<samp><span class="option">--rename-section</span></samp> <var>oldname</var>=<var>newname</var>[,<var>flags</var>]]
             [<samp><span class="option">--long-section-names</span></samp> {enable,disable,keep}]
             [<samp><span class="option">--change-leading-char</span></samp>] [<samp><span class="option">--remove-leading-char</span></samp>]
             [<samp><span class="option">--reverse-bytes=</span></samp><var>num</var>]
             [<samp><span class="option">--srec-len=</span></samp><var>ival</var>] [<samp><span class="option">--srec-forceS3</span></samp>]
             [<samp><span class="option">--redefine-sym</span></samp> <var>old</var>=<var>new</var>]
             [<samp><span class="option">--redefine-syms=</span></samp><var>filename</var>]
             [<samp><span class="option">--weaken</span></samp>]
             [<samp><span class="option">--keep-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--strip-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--strip-unneeded-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--keep-global-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--localize-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--globalize-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--weaken-symbols=</span></samp><var>filename</var>]
             [<samp><span class="option">--alt-machine-code=</span></samp><var>index</var>]
             [<samp><span class="option">--prefix-symbols=</span></samp><var>string</var>]
             [<samp><span class="option">--prefix-sections=</span></samp><var>string</var>]
             [<samp><span class="option">--prefix-alloc-sections=</span></samp><var>string</var>]
             [<samp><span class="option">--add-gnu-debuglink=</span></samp><var>path-to-file</var>]
             [<samp><span class="option">--keep-file-symbols</span></samp>]
             [<samp><span class="option">--only-keep-debug</span></samp>]
             [<samp><span class="option">--extract-symbol</span></samp>]
             [<samp><span class="option">--writable-text</span></samp>]
             [<samp><span class="option">--readonly-text</span></samp>]
             [<samp><span class="option">--pure</span></samp>]
             [<samp><span class="option">--impure</span></samp>]
             [<samp><span class="option">--file-alignment=</span></samp><var>num</var>]
             [<samp><span class="option">--heap=</span></samp><var>size</var>]
             [<samp><span class="option">--image-base=</span></samp><var>address</var>]
             [<samp><span class="option">--section-alignment=</span></samp><var>num</var>]
             [<samp><span class="option">--stack=</span></samp><var>size</var>]
             [<samp><span class="option">--subsystem=</span></samp><var>which</var>:<var>major</var>.<var>minor</var>]
             [<samp><span class="option">--compress-debug-sections</span></samp>]
             [<samp><span class="option">--decompress-debug-sections</span></samp>]
             [<samp><span class="option">-v</span></samp>|<samp><span class="option">--verbose</span></samp>]
             [<samp><span class="option">-V</span></samp>|<samp><span class="option">--version</span></samp>]
             [<samp><span class="option">--help</span></samp>] [<samp><span class="option">--info</span></samp>]
             <var>infile</var> [<var>outfile</var>]
     <!-- man end -->
</pre>
<!-- man begin DESCRIPTION objcopy -->
   <p>The <span class="sc">gnu</span> <samp><span class="command">objcopy</span></samp> utility copies the contents of an object
file to another.  <samp><span class="command">objcopy</span></samp> uses the <span class="sc">gnu</span> <span class="sc">bfd</span> Library to
read and write the object files.  It can write the destination object
file in a format different from that of the source object file.  The
exact behavior of <samp><span class="command">objcopy</span></samp> is controlled by command-line options. 
Note that <samp><span class="command">objcopy</span></samp> should be able to copy a fully linked file
between any two formats. However, copying a relocatable object file
between any two formats may not work as expected.

   <p><samp><span class="command">objcopy</span></samp> creates temporary files to do its translations and
deletes them afterward.  <samp><span class="command">objcopy</span></samp> uses <span class="sc">bfd</span> to do all its
translation work; it has access to all the formats described in <span class="sc">bfd</span>
and thus is able to recognize most formats without being told
explicitly.  See <a href="../ld/BFD.html#BFD">BFD</a>.

   <p><samp><span class="command">objcopy</span></samp> can be used to generate S-records by using an output
target of &lsquo;<samp><span class="samp">srec</span></samp>&rsquo; (e.g., use &lsquo;<samp><span class="samp">-O srec</span></samp>&rsquo;).

   <p><samp><span class="command">objcopy</span></samp> can be used to generate a raw binary file by using an
output target of &lsquo;<samp><span class="samp">binary</span></samp>&rsquo; (e.g., use <samp><span class="option">-O binary</span></samp>).  When
<samp><span class="command">objcopy</span></samp> generates a raw binary file, it will essentially produce
a memory dump of the contents of the input object file.  All symbols and
relocation information will be discarded.  The memory dump will start at
the load address of the lowest section copied into the output file.

   <p>When generating an S-record or a raw binary file, it may be helpful to
use <samp><span class="option">-S</span></samp> to remove sections containing debugging information.  In
some cases <samp><span class="option">-R</span></samp> will be useful to remove sections which contain
information that is not needed by the binary file.

   <p>Note&mdash;<samp><span class="command">objcopy</span></samp> is not able to change the endianness of its input
files.  If the input format has an endianness (some formats do not),
<samp><span class="command">objcopy</span></samp> can only copy the inputs into file formats that have the
same endianness or which have no endianness (e.g., &lsquo;<samp><span class="samp">srec</span></samp>&rsquo;). 
(However, see the <samp><span class="option">--reverse-bytes</span></samp> option.)

<!-- man end -->
<!-- man begin OPTIONS objcopy -->
     <dl>
<dt><samp><var>infile</var></samp><dt><samp><var>outfile</var></samp><dd>The input and output files, respectively. 
If you do not specify <var>outfile</var>, <samp><span class="command">objcopy</span></samp> creates a
temporary file and destructively renames the result with
the name of <var>infile</var>.

     <br><dt><samp><span class="env">-I </span><var>bfdname</var></samp><dt><samp><span class="env">--input-target=</span><var>bfdname</var></samp><dd>Consider the source file's object format to be <var>bfdname</var>, rather than
attempting to deduce it.  See <a href="Target-Selection.html#Target-Selection">Target Selection</a>, for more information.

     <br><dt><samp><span class="env">-O </span><var>bfdname</var></samp><dt><samp><span class="env">--output-target=</span><var>bfdname</var></samp><dd>Write the output file using the object format <var>bfdname</var>. 
See <a href="Target-Selection.html#Target-Selection">Target Selection</a>, for more information.

     <br><dt><samp><span class="env">-F </span><var>bfdname</var></samp><dt><samp><span class="env">--target=</span><var>bfdname</var></samp><dd>Use <var>bfdname</var> as the object format for both the input and the output
file; i.e., simply transfer data from source to destination with no
translation.  See <a href="Target-Selection.html#Target-Selection">Target Selection</a>, for more information.

     <br><dt><samp><span class="env">-B </span><var>bfdarch</var></samp><dt><samp><span class="env">--binary-architecture=</span><var>bfdarch</var></samp><dd>Useful when transforming a architecture-less input file into an object file. 
In this case the output architecture can be set to <var>bfdarch</var>.  This
option will be ignored if the input file has a known <var>bfdarch</var>.  You
can access this binary data inside a program by referencing the special
symbols that are created by the conversion process.  These symbols are
called _binary_<var>objfile</var>_start, _binary_<var>objfile</var>_end and
_binary_<var>objfile</var>_size.  e.g. you can transform a picture file into
an object file and then access it in your code using these symbols.

     <br><dt><samp><span class="env">-j </span><var>sectionname</var></samp><dt><samp><span class="env">--only-section=</span><var>sectionname</var></samp><dd>Copy only the named section from the input file to the output file. 
This option may be given more than once.  Note that using this option
inappropriately may make the output file unusable.

     <br><dt><samp><span class="env">-R </span><var>sectionname</var></samp><dt><samp><span class="env">--remove-section=</span><var>sectionname</var></samp><dd>Remove any section named <var>sectionname</var> from the output file.  This
option may be given more than once.  Note that using this option
inappropriately may make the output file unusable.

     <br><dt><samp><span class="env">-S</span></samp><dt><samp><span class="env">--strip-all</span></samp><dd>Do not copy relocation and symbol information from the source file.

     <br><dt><samp><span class="env">-g</span></samp><dt><samp><span class="env">--strip-debug</span></samp><dd>Do not copy debugging symbols or sections from the source file.

     <br><dt><samp><span class="env">--strip-unneeded</span></samp><dd>Strip all symbols that are not needed for relocation processing.

     <br><dt><samp><span class="env">-K </span><var>symbolname</var></samp><dt><samp><span class="env">--keep-symbol=</span><var>symbolname</var></samp><dd>When stripping symbols, keep symbol <var>symbolname</var> even if it would
normally be stripped.  This option may be given more than once.

     <br><dt><samp><span class="env">-N </span><var>symbolname</var></samp><dt><samp><span class="env">--strip-symbol=</span><var>symbolname</var></samp><dd>Do not copy symbol <var>symbolname</var> from the source file.  This option
may be given more than once.

     <br><dt><samp><span class="env">--strip-unneeded-symbol=</span><var>symbolname</var></samp><dd>Do not copy symbol <var>symbolname</var> from the source file unless it is needed
by a relocation.  This option may be given more than once.

     <br><dt><samp><span class="env">-G </span><var>symbolname</var></samp><dt><samp><span class="env">--keep-global-symbol=</span><var>symbolname</var></samp><dd>Keep only symbol <var>symbolname</var> global.  Make all other symbols local
to the file, so that they are not visible externally.  This option may
be given more than once.

     <br><dt><samp><span class="env">--localize-hidden</span></samp><dd>In an ELF object, mark all symbols that have hidden or internal visibility
as local.  This option applies on top of symbol-specific localization options
such as <samp><span class="option">-L</span></samp>.

     <br><dt><samp><span class="env">-L </span><var>symbolname</var></samp><dt><samp><span class="env">--localize-symbol=</span><var>symbolname</var></samp><dd>Make symbol <var>symbolname</var> local to the file, so that it is not
visible externally.  This option may be given more than once.

     <br><dt><samp><span class="env">-W </span><var>symbolname</var></samp><dt><samp><span class="env">--weaken-symbol=</span><var>symbolname</var></samp><dd>Make symbol <var>symbolname</var> weak. This option may be given more than once.

     <br><dt><samp><span class="env">--globalize-symbol=</span><var>symbolname</var></samp><dd>Give symbol <var>symbolname</var> global scoping so that it is visible
outside of the file in which it is defined.  This option may be given
more than once.

     <br><dt><samp><span class="env">-w</span></samp><dt><samp><span class="env">--wildcard</span></samp><dd>Permit regular expressions in <var>symbolname</var>s used in other command
line options.  The question mark (?), asterisk (*), backslash (\) and
square brackets ([]) operators can be used anywhere in the symbol
name.  If the first character of the symbol name is the exclamation
point (!) then the sense of the switch is reversed for that symbol. 
For example:

     <pre class="smallexample">            -w -W !foo -W fo*
</pre>
     <p>would cause objcopy to weaken all symbols that start with &ldquo;fo&rdquo;
except for the symbol &ldquo;foo&rdquo;.

     <br><dt><samp><span class="env">-x</span></samp><dt><samp><span class="env">--discard-all</span></samp><dd>Do not copy non-global symbols from the source file. 
<!-- FIXME any reason to prefer "non-global" to "local" here? -->

     <br><dt><samp><span class="env">-X</span></samp><dt><samp><span class="env">--discard-locals</span></samp><dd>Do not copy compiler-generated local symbols. 
(These usually start with &lsquo;<samp><span class="samp">L</span></samp>&rsquo; or &lsquo;<samp><span class="samp">.</span></samp>&rsquo;.)

     <br><dt><samp><span class="env">-b </span><var>byte</var></samp><dt><samp><span class="env">--byte=</span><var>byte</var></samp><dd>If interleaving has been enabled via the <samp><span class="option">--interleave</span></samp> option
then start the range of bytes to keep at the <var>byte</var>th byte. 
<var>byte</var> can be in the range from 0 to <var>breadth</var>-1, where
<var>breadth</var> is the value given by the <samp><span class="option">--interleave</span></samp> option.

     <br><dt><samp><span class="env">-i [</span><var>breadth</var><span class="env">]</span></samp><dt><samp><span class="env">--interleave[=</span><var>breadth</var><span class="env">]</span></samp><dd>Only copy a range out of every <var>breadth</var> bytes.  (Header data is
not affected).  Select which byte in the range begins the copy with
the <samp><span class="option">--byte</span></samp> option.  Select the width of the range with the
<samp><span class="option">--interleave-width</span></samp> option.

     <p>This option is useful for creating files to program <span class="sc">rom</span>.  It is
typically used with an <code>srec</code> output target.  Note that
<samp><span class="command">objcopy</span></samp> will complain if you do not specify the
<samp><span class="option">--byte</span></samp> option as well.

     <p>The default interleave breadth is 4, so with <samp><span class="option">--byte</span></samp> set to 0,
<samp><span class="command">objcopy</span></samp> would copy the first byte out of every four bytes
from the input to the output.

     <br><dt><samp><span class="env">--interleave-width=</span><var>width</var></samp><dd>When used with the <samp><span class="option">--interleave</span></samp> option, copy <var>width</var>
bytes at a time.  The start of the range of bytes to be copied is set
by the <samp><span class="option">--byte</span></samp> option, and the extent of the range is set with
the <samp><span class="option">--interleave</span></samp> option.

     <p>The default value for this option is 1.  The value of <var>width</var> plus
the <var>byte</var> value set by the <samp><span class="option">--byte</span></samp> option must not exceed
the interleave breadth set by the <samp><span class="option">--interleave</span></samp> option.

     <p>This option can be used to create images for two 16-bit flashes interleaved
in a 32-bit bus by passing <samp><span class="option">-b 0 -i 4 --interleave-width=2</span></samp>
and <samp><span class="option">-b 2 -i 4 --interleave-width=2</span></samp> to two <samp><span class="command">objcopy</span></samp>
commands.  If the input was '12345678' then the outputs would be
'1256' and '3478' respectively.

     <br><dt><samp><span class="env">-p</span></samp><dt><samp><span class="env">--preserve-dates</span></samp><dd>Set the access and modification dates of the output file to be the same
as those of the input file.

     <br><dt><samp><span class="env">--debugging</span></samp><dd>Convert debugging information, if possible.  This is not the default
because only certain debugging formats are supported, and the
conversion process can be time consuming.

     <br><dt><samp><span class="env">--gap-fill </span><var>val</var></samp><dd>Fill gaps between sections with <var>val</var>.  This operation applies to
the <em>load address</em> (LMA) of the sections.  It is done by increasing
the size of the section with the lower address, and filling in the extra
space created with <var>val</var>.

     <br><dt><samp><span class="env">--pad-to </span><var>address</var></samp><dd>Pad the output file up to the load address <var>address</var>.  This is
done by increasing the size of the last section.  The extra space is
filled in with the value specified by <samp><span class="option">--gap-fill</span></samp> (default zero).

     <br><dt><samp><span class="env">--set-start </span><var>val</var></samp><dd>Set the start address of the new file to <var>val</var>.  Not all object file
formats support setting the start address.

     <br><dt><samp><span class="env">--change-start </span><var>incr</var></samp><dt><samp><span class="env">--adjust-start </span><var>incr</var></samp><dd><a name="index-changing-start-address-55"></a>Change the start address by adding <var>incr</var>.  Not all object file
formats support setting the start address.

     <br><dt><samp><span class="env">--change-addresses </span><var>incr</var></samp><dt><samp><span class="env">--adjust-vma </span><var>incr</var></samp><dd><a name="index-changing-object-addresses-56"></a>Change the VMA and LMA addresses of all sections, as well as the start
address, by adding <var>incr</var>.  Some object file formats do not permit
section addresses to be changed arbitrarily.  Note that this does not
relocate the sections; if the program expects sections to be loaded at a
certain address, and this option is used to change the sections such
that they are loaded at a different address, the program may fail.

     <br><dt><samp><span class="env">--change-section-address </span><var>section</var><span class="env">{=,+,-}</span><var>val</var></samp><dt><samp><span class="env">--adjust-section-vma </span><var>section</var><span class="env">{=,+,-}</span><var>val</var></samp><dd><a name="index-changing-section-address-57"></a>Set or change both the VMA address and the LMA address of the named
<var>section</var>.  If &lsquo;<samp><span class="samp">=</span></samp>&rsquo; is used, the section address is set to
<var>val</var>.  Otherwise, <var>val</var> is added to or subtracted from the
section address.  See the comments under <samp><span class="option">--change-addresses</span></samp>,
above. If <var>section</var> does not exist in the input file, a warning will
be issued, unless <samp><span class="option">--no-change-warnings</span></samp> is used.

     <br><dt><samp><span class="env">--change-section-lma </span><var>section</var><span class="env">{=,+,-}</span><var>val</var></samp><dd><a name="index-changing-section-LMA-58"></a>Set or change the LMA address of the named <var>section</var>.  The LMA
address is the address where the section will be loaded into memory at
program load time.  Normally this is the same as the VMA address, which
is the address of the section at program run time, but on some systems,
especially those where a program is held in ROM, the two can be
different.  If &lsquo;<samp><span class="samp">=</span></samp>&rsquo; is used, the section address is set to
<var>val</var>.  Otherwise, <var>val</var> is added to or subtracted from the
section address.  See the comments under <samp><span class="option">--change-addresses</span></samp>,
above.  If <var>section</var> does not exist in the input file, a warning
will be issued, unless <samp><span class="option">--no-change-warnings</span></samp> is used.

     <br><dt><samp><span class="env">--change-section-vma </span><var>section</var><span class="env">{=,+,-}</span><var>val</var></samp><dd><a name="index-changing-section-VMA-59"></a>Set or change the VMA address of the named <var>section</var>.  The VMA
address is the address where the section will be located once the
program has started executing.  Normally this is the same as the LMA
address, which is the address where the section will be loaded into
memory, but on some systems, especially those where a program is held in
ROM, the two can be different.  If &lsquo;<samp><span class="samp">=</span></samp>&rsquo; is used, the section address
is set to <var>val</var>.  Otherwise, <var>val</var> is added to or subtracted
from the section address.  See the comments under
<samp><span class="option">--change-addresses</span></samp>, above.  If <var>section</var> does not exist in
the input file, a warning will be issued, unless
<samp><span class="option">--no-change-warnings</span></samp> is used.

     <br><dt><samp><span class="env">--change-warnings</span></samp><dt><samp><span class="env">--adjust-warnings</span></samp><dd>If <samp><span class="option">--change-section-address</span></samp> or <samp><span class="option">--change-section-lma</span></samp> or
<samp><span class="option">--change-section-vma</span></samp> is used, and the named section does not
exist, issue a warning.  This is the default.

     <br><dt><samp><span class="env">--no-change-warnings</span></samp><dt><samp><span class="env">--no-adjust-warnings</span></samp><dd>Do not issue a warning if <samp><span class="option">--change-section-address</span></samp> or
<samp><span class="option">--adjust-section-lma</span></samp> or <samp><span class="option">--adjust-section-vma</span></samp> is used, even
if the named section does not exist.

     <br><dt><samp><span class="env">--set-section-flags </span><var>section</var><span class="env">=</span><var>flags</var></samp><dd>Set the flags for the named section.  The <var>flags</var> argument is a
comma separated string of flag names.  The recognized names are
&lsquo;<samp><span class="samp">alloc</span></samp>&rsquo;, &lsquo;<samp><span class="samp">contents</span></samp>&rsquo;, &lsquo;<samp><span class="samp">load</span></samp>&rsquo;, &lsquo;<samp><span class="samp">noload</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">readonly</span></samp>&rsquo;, &lsquo;<samp><span class="samp">code</span></samp>&rsquo;, &lsquo;<samp><span class="samp">data</span></samp>&rsquo;, &lsquo;<samp><span class="samp">rom</span></samp>&rsquo;, &lsquo;<samp><span class="samp">share</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">debug</span></samp>&rsquo;.  You can set the &lsquo;<samp><span class="samp">contents</span></samp>&rsquo; flag for a section which
does not have contents, but it is not meaningful to clear the
&lsquo;<samp><span class="samp">contents</span></samp>&rsquo; flag of a section which does have contents&ndash;just remove
the section instead.  Not all flags are meaningful for all object file
formats.

     <br><dt><samp><span class="env">--add-section </span><var>sectionname</var><span class="env">=</span><var>filename</var></samp><dd>Add a new section named <var>sectionname</var> while copying the file.  The
contents of the new section are taken from the file <var>filename</var>.  The
size of the section will be the size of the file.  This option only
works on file formats which can support sections with arbitrary names.

     <br><dt><samp><span class="env">--rename-section </span><var>oldname</var><span class="env">=</span><var>newname</var><span class="env">[,</span><var>flags</var><span class="env">]</span></samp><dd>Rename a section from <var>oldname</var> to <var>newname</var>, optionally
changing the section's flags to <var>flags</var> in the process.  This has
the advantage over usng a linker script to perform the rename in that
the output stays as an object file and does not become a linked
executable.

     <p>This option is particularly helpful when the input format is binary,
since this will always create a section called .data.  If for example,
you wanted instead to create a section called .rodata containing binary
data you could use the following command line to achieve it:

     <pre class="smallexample">            objcopy -I binary -O &lt;output_format&gt; -B &lt;architecture&gt; \
             --rename-section .data=.rodata,alloc,load,readonly,data,contents \
             &lt;input_binary_file&gt; &lt;output_object_file&gt;
</pre>
     <br><dt><samp><span class="env">--long-section-names {enable,disable,keep}</span></samp><dd>Controls the handling of long section names when processing <code>COFF</code>
and <code>PE-COFF</code> object formats.  The default behaviour, &lsquo;<samp><span class="samp">keep</span></samp>&rsquo;,
is to preserve long section names if any are present in the input file. 
The &lsquo;<samp><span class="samp">enable</span></samp>&rsquo; and &lsquo;<samp><span class="samp">disable</span></samp>&rsquo; options forcibly enable or disable
the use of long section names in the output object; when &lsquo;<samp><span class="samp">disable</span></samp>&rsquo;
is in effect, any long section names in the input object will be truncated. 
The &lsquo;<samp><span class="samp">enable</span></samp>&rsquo; option will only emit long section names if any are
present in the inputs; this is mostly the same as &lsquo;<samp><span class="samp">keep</span></samp>&rsquo;, but it
is left undefined whether the &lsquo;<samp><span class="samp">enable</span></samp>&rsquo; option might force the
creation of an empty string table in the output file.

     <br><dt><samp><span class="env">--change-leading-char</span></samp><dd>Some object file formats use special characters at the start of
symbols.  The most common such character is underscore, which compilers
often add before every symbol.  This option tells <samp><span class="command">objcopy</span></samp> to
change the leading character of every symbol when it converts between
object file formats.  If the object file formats use the same leading
character, this option has no effect.  Otherwise, it will add a
character, or remove a character, or change a character, as
appropriate.

     <br><dt><samp><span class="env">--remove-leading-char</span></samp><dd>If the first character of a global symbol is a special symbol leading
character used by the object file format, remove the character.  The
most common symbol leading character is underscore.  This option will
remove a leading underscore from all global symbols.  This can be useful
if you want to link together objects of different file formats with
different conventions for symbol names.  This is different from
<samp><span class="option">--change-leading-char</span></samp> because it always changes the symbol name
when appropriate, regardless of the object file format of the output
file.

     <br><dt><samp><span class="env">--reverse-bytes=</span><var>num</var></samp><dd>Reverse the bytes in a section with output contents.  A section length must
be evenly divisible by the value given in order for the swap to be able to
take place. Reversing takes place before the interleaving is performed.

     <p>This option is used typically in generating ROM images for problematic
target systems.  For example, on some target boards, the 32-bit words
fetched from 8-bit ROMs are re-assembled in little-endian byte order
regardless of the CPU byte order.  Depending on the programming model, the
endianness of the ROM may need to be modified.

     <p>Consider a simple file with a section containing the following eight
bytes:  <code>12345678</code>.

     <p>Using &lsquo;<samp><span class="samp">--reverse-bytes=2</span></samp>&rsquo; for the above example, the bytes in the
output file would be ordered <code>21436587</code>.

     <p>Using &lsquo;<samp><span class="samp">--reverse-bytes=4</span></samp>&rsquo; for the above example, the bytes in the
output file would be ordered <code>43218765</code>.

     <p>By using &lsquo;<samp><span class="samp">--reverse-bytes=2</span></samp>&rsquo; for the above example, followed by
&lsquo;<samp><span class="samp">--reverse-bytes=4</span></samp>&rsquo; on the output file, the bytes in the second
output file would be ordered <code>34127856</code>.

     <br><dt><samp><span class="env">--srec-len=</span><var>ival</var></samp><dd>Meaningful only for srec output.  Set the maximum length of the Srecords
being produced to <var>ival</var>.  This length covers both address, data and
crc fields.

     <br><dt><samp><span class="env">--srec-forceS3</span></samp><dd>Meaningful only for srec output.  Avoid generation of S1/S2 records,
creating S3-only record format.

     <br><dt><samp><span class="env">--redefine-sym </span><var>old</var><span class="env">=</span><var>new</var></samp><dd>Change the name of a symbol <var>old</var>, to <var>new</var>.  This can be useful
when one is trying link two things together for which you have no
source, and there are name collisions.

     <br><dt><samp><span class="env">--redefine-syms=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--redefine-sym</span></samp> to each symbol pair "<var>old</var> <var>new</var>"
listed in the file <var>filename</var>.  <var>filename</var> is simply a flat file,
with one symbol pair per line.  Line comments may be introduced by the hash
character.  This option may be given more than once.

     <br><dt><samp><span class="env">--weaken</span></samp><dd>Change all global symbols in the file to be weak.  This can be useful
when building an object which will be linked against other objects using
the <samp><span class="option">-R</span></samp> option to the linker.  This option is only effective when
using an object file format which supports weak symbols.

     <br><dt><samp><span class="env">--keep-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--keep-symbol</span></samp> option to each symbol listed in the file
<var>filename</var>.  <var>filename</var> is simply a flat file, with one symbol
name per line.  Line comments may be introduced by the hash character. 
This option may be given more than once.

     <br><dt><samp><span class="env">--strip-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--strip-symbol</span></samp> option to each symbol listed in the file
<var>filename</var>.  <var>filename</var> is simply a flat file, with one symbol
name per line.  Line comments may be introduced by the hash character. 
This option may be given more than once.

     <br><dt><samp><span class="env">--strip-unneeded-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--strip-unneeded-symbol</span></samp> option to each symbol listed in
the file <var>filename</var>.  <var>filename</var> is simply a flat file, with one
symbol name per line.  Line comments may be introduced by the hash
character.  This option may be given more than once.

     <br><dt><samp><span class="env">--keep-global-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--keep-global-symbol</span></samp> option to each symbol listed in the
file <var>filename</var>.  <var>filename</var> is simply a flat file, with one
symbol name per line.  Line comments may be introduced by the hash
character.  This option may be given more than once.

     <br><dt><samp><span class="env">--localize-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--localize-symbol</span></samp> option to each symbol listed in the file
<var>filename</var>.  <var>filename</var> is simply a flat file, with one symbol
name per line.  Line comments may be introduced by the hash character. 
This option may be given more than once.

     <br><dt><samp><span class="env">--globalize-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--globalize-symbol</span></samp> option to each symbol listed in the file
<var>filename</var>.  <var>filename</var> is simply a flat file, with one symbol
name per line.  Line comments may be introduced by the hash character. 
This option may be given more than once.

     <br><dt><samp><span class="env">--weaken-symbols=</span><var>filename</var></samp><dd>Apply <samp><span class="option">--weaken-symbol</span></samp> option to each symbol listed in the file
<var>filename</var>.  <var>filename</var> is simply a flat file, with one symbol
name per line.  Line comments may be introduced by the hash character. 
This option may be given more than once.

     <br><dt><samp><span class="env">--alt-machine-code=</span><var>index</var></samp><dd>If the output architecture has alternate machine codes, use the
<var>index</var>th code instead of the default one.  This is useful in case
a machine is assigned an official code and the tool-chain adopts the
new code, but other applications still depend on the original code
being used.  For ELF based architectures if the <var>index</var>
alternative does not exist then the value is treated as an absolute
number to be stored in the e_machine field of the ELF header.

     <br><dt><samp><span class="env">--writable-text</span></samp><dd>Mark the output text as writable.  This option isn't meaningful for all
object file formats.

     <br><dt><samp><span class="env">--readonly-text</span></samp><dd>Make the output text write protected.  This option isn't meaningful for all
object file formats.

     <br><dt><samp><span class="env">--pure</span></samp><dd>Mark the output file as demand paged.  This option isn't meaningful for all
object file formats.

     <br><dt><samp><span class="env">--impure</span></samp><dd>Mark the output file as impure.  This option isn't meaningful for all
object file formats.

     <br><dt><samp><span class="env">--prefix-symbols=</span><var>string</var></samp><dd>Prefix all symbols in the output file with <var>string</var>.

     <br><dt><samp><span class="env">--prefix-sections=</span><var>string</var></samp><dd>Prefix all section names in the output file with <var>string</var>.

     <br><dt><samp><span class="env">--prefix-alloc-sections=</span><var>string</var></samp><dd>Prefix all the names of all allocated sections in the output file with
<var>string</var>.

     <br><dt><samp><span class="env">--add-gnu-debuglink=</span><var>path-to-file</var></samp><dd>Creates a .gnu_debuglink section which contains a reference to <var>path-to-file</var>
and adds it to the output file.

     <br><dt><samp><span class="env">--keep-file-symbols</span></samp><dd>When stripping a file, perhaps with <samp><span class="option">--strip-debug</span></samp> or
<samp><span class="option">--strip-unneeded</span></samp>, retain any symbols specifying source file names,
which would otherwise get stripped.

     <br><dt><samp><span class="env">--only-keep-debug</span></samp><dd>Strip a file, removing contents of any sections that would not be
stripped by <samp><span class="option">--strip-debug</span></samp> and leaving the debugging sections
intact.  In ELF files, this preserves all note sections in the output.

     <p>The intention is that this option will be used in conjunction with
<samp><span class="option">--add-gnu-debuglink</span></samp> to create a two part executable.  One a
stripped binary which will occupy less space in RAM and in a
distribution and the second a debugging information file which is only
needed if debugging abilities are required.  The suggested procedure
to create these files is as follows:

          <ol type=1 start=1>
<li>Link the executable as normal.  Assuming that is is called
<code>foo</code> then... 
<li>Run <code>objcopy --only-keep-debug foo foo.dbg</code> to
create a file containing the debugging info. 
<li>Run <code>objcopy --strip-debug foo</code> to create a
stripped executable. 
<li>Run <code>objcopy --add-gnu-debuglink=foo.dbg foo</code>
to add a link to the debugging info into the stripped executable.
          </ol>

     <p>Note&mdash;the choice of <code>.dbg</code> as an extension for the debug info
file is arbitrary.  Also the <code>--only-keep-debug</code> step is
optional.  You could instead do this:

          <ol type=1 start=1>
<li>Link the executable as normal. 
<li>Copy <code>foo</code> to  <code>foo.full</code>
<li>Run <code>objcopy --strip-debug foo</code>
<li>Run <code>objcopy --add-gnu-debuglink=foo.full foo</code>
          </ol>

     <p>i.e., the file pointed to by the <samp><span class="option">--add-gnu-debuglink</span></samp> can be the
full executable.  It does not have to be a file created by the
<samp><span class="option">--only-keep-debug</span></samp> switch.

     <p>Note&mdash;this switch is only intended for use on fully linked files.  It
does not make sense to use it on object files where the debugging
information may be incomplete.  Besides the gnu_debuglink feature
currently only supports the presence of one filename containing
debugging information, not multiple filenames on a one-per-object-file
basis.

     <br><dt><samp><span class="env">--file-alignment </span><var>num</var></samp><dd>Specify the file alignment.  Sections in the file will always begin at
file offsets which are multiples of this number.  This defaults to
512. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--heap </span><var>reserve</var></samp><dt><samp><span class="env">--heap </span><var>reserve</var><span class="env">,</span><var>commit</var></samp><dd>Specify the number of bytes of memory to reserve (and optionally commit)
to be used as heap for this program. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--image-base </span><var>value</var></samp><dd>Use <var>value</var> as the base address of your program or dll.  This is
the lowest memory location that will be used when your program or dll
is loaded.  To reduce the need to relocate and improve performance of
your dlls, each should have a unique base address and not overlap any
other dlls.  The default is 0x400000 for executables, and 0x10000000
for dlls. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--section-alignment </span><var>num</var></samp><dd>Sets the section alignment.  Sections in memory will always begin at
addresses which are a multiple of this number.  Defaults to 0x1000. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--stack </span><var>reserve</var></samp><dt><samp><span class="env">--stack </span><var>reserve</var><span class="env">,</span><var>commit</var></samp><dd>Specify the number of bytes of memory to reserve (and optionally commit)
to be used as stack for this program. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--subsystem </span><var>which</var></samp><dt><samp><span class="env">--subsystem </span><var>which</var><span class="env">:</span><var>major</var></samp><dt><samp><span class="env">--subsystem </span><var>which</var><span class="env">:</span><var>major</var><span class="env">.</span><var>minor</var></samp><dd>Specifies the subsystem under which your program will execute.  The
legal values for <var>which</var> are <code>native</code>, <code>windows</code>,
<code>console</code>, <code>posix</code>, <code>efi-app</code>, <code>efi-bsd</code>,
<code>efi-rtd</code>, <code>sal-rtd</code>, and <code>xbox</code>.  You may optionally set
the subsystem version also.  Numeric values are also accepted for
<var>which</var>. 
[This option is specific to PE targets.]

     <br><dt><samp><span class="env">--extract-symbol</span></samp><dd>Keep the file's section flags and symbols but remove all section data. 
Specifically, the option:

          <ul>
<li>removes the contents of all sections;
<li>sets the size of every section to zero; and
<li>sets the file's start address to zero. 
</ul>

     <p>This option is used to build a <samp><span class="file">.sym</span></samp> file for a VxWorks kernel. 
It can also be a useful way of reducing the size of a <samp><span class="option">--just-symbols</span></samp>
linker input file.

     <br><dt><samp><span class="env">--compress-debug-sections</span></samp><dd>Compress DWARF debug sections using zlib.

     <br><dt><samp><span class="env">--decompress-debug-sections</span></samp><dd>Decompress DWARF debug sections using zlib.

     <br><dt><samp><span class="env">-V</span></samp><dt><samp><span class="env">--version</span></samp><dd>Show the version number of <samp><span class="command">objcopy</span></samp>.

     <br><dt><samp><span class="env">-v</span></samp><dt><samp><span class="env">--verbose</span></samp><dd>Verbose output: list all object files modified.  In the case of
archives, &lsquo;<samp><span class="samp">objcopy -V</span></samp>&rsquo; lists all members of the archive.

     <br><dt><samp><span class="env">--help</span></samp><dd>Show a summary of the options to <samp><span class="command">objcopy</span></samp>.

     <br><dt><samp><span class="env">--info</span></samp><dd>Display a list showing all architectures and object formats available. 
</dl>

<!-- man end -->
   </body></html>

@


1.1.1.1
log
@  Initial import of GCC 4
Detail:
  This is a standard copy of GCC 4.1.2 r2, straight from the packages available on riscos.info
  Installed packages are:
  * GCC4 4.1.2-Rel2-1
  * GCC4-C++ 4.1.2-Rel2-1
Admin:
  Tagged as GCC-4_1_2_r2
@
text
@@


1.1.1.2
log
@GCC 4.7.4 release 3
Detail:
  This is a copy of GCC 4.7.4 release 3, composed from the following packages available from riscos.info:
  * GCC4 4.7.4-Rel3-1
  Note that to avoid bloating CVS there's no C++ compiler this time, and some of the extraneous libraries (e.g. VFP/NEON optimised libs) have been deleted
Admin:
  Tagged as GCC-4_7_4_r3
@
text
@d1 14
a14 3
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright (C) 1991-2013 Free Software Foundation, Inc.
d21 1
a21 5
section entitled "GNU Free Documentation License".
 -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNU Binary Utilities: objcopy</title>
a22 38
<meta name="description" content="GNU Binary Utilities: objcopy">
<meta name="keywords" content="GNU Binary Utilities: objcopy">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Binutils-Index.html#Binutils-Index" rel="index" title="Binutils Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="objdump.html#objdump" rel="next" title="objdump">
<link href="nm.html#nm" rel="prev" title="nm">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
d24 12
a35 3
</style>


d37 2
a38 2

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
a39 1
<div class="header">
d41 4
a44 1
Next: <a href="objdump.html#objdump" accesskey="n" rel="next">objdump</a>, Previous: <a href="nm.html#nm" accesskey="p" rel="prev">nm</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Binutils-Index.html#Binutils-Index" title="Index" rel="index">Index</a>]</p>
d46 1
a46 2
<hr>
<a name="objcopy-1"></a>
d49 81
a129 86

<div class="smallexample">
<pre class="smallexample">objcopy [<samp>-F</samp> <var>bfdname</var>|<samp>--target=</samp><var>bfdname</var>]
        [<samp>-I</samp> <var>bfdname</var>|<samp>--input-target=</samp><var>bfdname</var>]
        [<samp>-O</samp> <var>bfdname</var>|<samp>--output-target=</samp><var>bfdname</var>]
        [<samp>-B</samp> <var>bfdarch</var>|<samp>--binary-architecture=</samp><var>bfdarch</var>]
        [<samp>-S</samp>|<samp>--strip-all</samp>]
        [<samp>-g</samp>|<samp>--strip-debug</samp>]
        [<samp>-K</samp> <var>symbolname</var>|<samp>--keep-symbol=</samp><var>symbolname</var>]
        [<samp>-N</samp> <var>symbolname</var>|<samp>--strip-symbol=</samp><var>symbolname</var>]
        [<samp>--strip-unneeded-symbol=</samp><var>symbolname</var>]
        [<samp>-G</samp> <var>symbolname</var>|<samp>--keep-global-symbol=</samp><var>symbolname</var>]
        [<samp>--localize-hidden</samp>]
        [<samp>-L</samp> <var>symbolname</var>|<samp>--localize-symbol=</samp><var>symbolname</var>]
        [<samp>--globalize-symbol=</samp><var>symbolname</var>]
        [<samp>-W</samp> <var>symbolname</var>|<samp>--weaken-symbol=</samp><var>symbolname</var>]
        [<samp>-w</samp>|<samp>--wildcard</samp>]
        [<samp>-x</samp>|<samp>--discard-all</samp>]
        [<samp>-X</samp>|<samp>--discard-locals</samp>]
        [<samp>-b</samp> <var>byte</var>|<samp>--byte=</samp><var>byte</var>]
        [<samp>-i</samp> [<var>breadth</var>]|<samp>--interleave</samp>[=<var>breadth</var>]]
        [<samp>--interleave-width=</samp><var>width</var>]
        [<samp>-j</samp> <var>sectionpattern</var>|<samp>--only-section=</samp><var>sectionpattern</var>]
        [<samp>-R</samp> <var>sectionpattern</var>|<samp>--remove-section=</samp><var>sectionpattern</var>]
        [<samp>-p</samp>|<samp>--preserve-dates</samp>]
        [<samp>-D</samp>|<samp>--enable-deterministic-archives</samp>]
        [<samp>-U</samp>|<samp>--disable-deterministic-archives</samp>]
        [<samp>--debugging</samp>]
        [<samp>--gap-fill=</samp><var>val</var>]
        [<samp>--pad-to=</samp><var>address</var>]
        [<samp>--set-start=</samp><var>val</var>]
        [<samp>--adjust-start=</samp><var>incr</var>]
        [<samp>--change-addresses=</samp><var>incr</var>]
        [<samp>--change-section-address</samp> <var>sectionpattern</var>{=,+,-}<var>val</var>]
        [<samp>--change-section-lma</samp> <var>sectionpattern</var>{=,+,-}<var>val</var>]
        [<samp>--change-section-vma</samp> <var>sectionpattern</var>{=,+,-}<var>val</var>]
        [<samp>--change-warnings</samp>] [<samp>--no-change-warnings</samp>]
        [<samp>--set-section-flags</samp> <var>sectionpattern</var>=<var>flags</var>]
        [<samp>--add-section</samp> <var>sectionname</var>=<var>filename</var>]
        [<samp>--rename-section</samp> <var>oldname</var>=<var>newname</var>[,<var>flags</var>]]
        [<samp>--long-section-names</samp> {enable,disable,keep}]
        [<samp>--change-leading-char</samp>] [<samp>--remove-leading-char</samp>]
        [<samp>--reverse-bytes=</samp><var>num</var>]
        [<samp>--srec-len=</samp><var>ival</var>] [<samp>--srec-forceS3</samp>]
        [<samp>--redefine-sym</samp> <var>old</var>=<var>new</var>]
        [<samp>--redefine-syms=</samp><var>filename</var>]
        [<samp>--weaken</samp>]
        [<samp>--keep-symbols=</samp><var>filename</var>]
        [<samp>--strip-symbols=</samp><var>filename</var>]
        [<samp>--strip-unneeded-symbols=</samp><var>filename</var>]
        [<samp>--keep-global-symbols=</samp><var>filename</var>]
        [<samp>--localize-symbols=</samp><var>filename</var>]
        [<samp>--globalize-symbols=</samp><var>filename</var>]
        [<samp>--weaken-symbols=</samp><var>filename</var>]
        [<samp>--alt-machine-code=</samp><var>index</var>]
        [<samp>--prefix-symbols=</samp><var>string</var>]
        [<samp>--prefix-sections=</samp><var>string</var>]
        [<samp>--prefix-alloc-sections=</samp><var>string</var>]
        [<samp>--add-gnu-debuglink=</samp><var>path-to-file</var>]
        [<samp>--keep-file-symbols</samp>]
        [<samp>--only-keep-debug</samp>]
        [<samp>--strip-dwo</samp>]
        [<samp>--extract-dwo</samp>]
        [<samp>--extract-symbol</samp>]
        [<samp>--writable-text</samp>]
        [<samp>--readonly-text</samp>]
        [<samp>--pure</samp>]
        [<samp>--impure</samp>]
        [<samp>--file-alignment=</samp><var>num</var>]
        [<samp>--heap=</samp><var>size</var>]
        [<samp>--image-base=</samp><var>address</var>]
        [<samp>--section-alignment=</samp><var>num</var>]
        [<samp>--stack=</samp><var>size</var>]
        [<samp>--subsystem=</samp><var>which</var>:<var>major</var>.<var>minor</var>]
        [<samp>--compress-debug-sections</samp>]
        [<samp>--decompress-debug-sections</samp>]
        [<samp>--dwarf-depth=<var>n</var></samp>]
        [<samp>--dwarf-start=<var>n</var></samp>]
        [<samp>-v</samp>|<samp>--verbose</samp>]
        [<samp>-V</samp>|<samp>--version</samp>]
        [<samp>--help</samp>] [<samp>--info</samp>]
        <var>infile</var> [<var>outfile</var>]
</pre></div>

<p>The <small>GNU</small> <code>objcopy</code> utility copies the contents of an object
file to another.  <code>objcopy</code> uses the <small>GNU</small> <small>BFD</small> Library to
d132 2
a133 2
exact behavior of <code>objcopy</code> is controlled by command-line options.
Note that <code>objcopy</code> should be able to copy a fully linked file
d136 4
a139 4
</p>
<p><code>objcopy</code> creates temporary files to do its translations and
deletes them afterward.  <code>objcopy</code> uses <small>BFD</small> to do all its
translation work; it has access to all the formats described in <small>BFD</small>
d141 8
a148 8
explicitly.  See <a href="http://sourceware.org/binutils/docs/ld/BFD.html#BFD">BFD</a> in <cite>Using LD</cite>.
</p>
<p><code>objcopy</code> can be used to generate S-records by using an output
target of &lsquo;<samp>srec</samp>&rsquo; (e.g., use &lsquo;<samp>-O srec</samp>&rsquo;).
</p>
<p><code>objcopy</code> can be used to generate a raw binary file by using an
output target of &lsquo;<samp>binary</samp>&rsquo; (e.g., use <samp>-O binary</samp>).  When
<code>objcopy</code> generates a raw binary file, it will essentially produce
d152 4
a155 4
</p>
<p>When generating an S-record or a raw binary file, it may be helpful to
use <samp>-S</samp> to remove sections containing debugging information.  In
some cases <samp>-R</samp> will be useful to remove sections which contain
d157 2
a158 2
</p>
<p>Note&mdash;<code>objcopy</code> is not able to change the endianness of its input
d160 9
a168 11
<code>objcopy</code> can only copy the inputs into file formats that have the
same endianness or which have no endianness (e.g., &lsquo;<samp>srec</samp>&rsquo;).
(However, see the <samp>--reverse-bytes</samp> option.)
</p>


<dl compact="compact">
<dt><code><var>infile</var></code></dt>
<dt><code><var>outfile</var></code></dt>
<dd><p>The input and output files, respectively.
If you do not specify <var>outfile</var>, <code>objcopy</code> creates a
d171 2
a172 5
</p>
</dd>
<dt><code>-I <var>bfdname</var></code></dt>
<dt><code>--input-target=<var>bfdname</var></code></dt>
<dd><p>Consider the source file&rsquo;s object format to be <var>bfdname</var>, rather than
d174 2
a175 5
</p>
</dd>
<dt><code>-O <var>bfdname</var></code></dt>
<dt><code>--output-target=<var>bfdname</var></code></dt>
<dd><p>Write the output file using the object format <var>bfdname</var>.
d177 2
a178 5
</p>
</dd>
<dt><code>-F <var>bfdname</var></code></dt>
<dt><code>--target=<var>bfdname</var></code></dt>
<dd><p>Use <var>bfdname</var> as the object format for both the input and the output
d181 2
a182 5
</p>
</dd>
<dt><code>-B <var>bfdarch</var></code></dt>
<dt><code>--binary-architecture=<var>bfdarch</var></code></dt>
<dd><p>Useful when transforming a architecture-less input file into an object file.
d190 2
a191 5
</p>
</dd>
<dt><code>-j <var>sectionpattern</var></code></dt>
<dt><code>--only-section=<var>sectionpattern</var></code></dt>
<dd><p>Copy only the indicated sections from the input file to the output file.
d193 13
a205 31
inappropriately may make the output file unusable.  Wildcard
characters are accepted in <var>sectionpattern</var>.
</p>
</dd>
<dt><code>-R <var>sectionpattern</var></code></dt>
<dt><code>--remove-section=<var>sectionpattern</var></code></dt>
<dd><p>Remove any section matching <var>sectionpattern</var> from the output file.
This option may be given more than once.  Note that using this option
inappropriately may make the output file unusable.  Wildcard
characters are accepted in <var>sectionpattern</var>.  Using both the
<samp>-j</samp> and <samp>-R</samp> options together results in undefined
behaviour.
</p>
</dd>
<dt><code>-S</code></dt>
<dt><code>--strip-all</code></dt>
<dd><p>Do not copy relocation and symbol information from the source file.
</p>
</dd>
<dt><code>-g</code></dt>
<dt><code>--strip-debug</code></dt>
<dd><p>Do not copy debugging symbols or sections from the source file.
</p>
</dd>
<dt><code>--strip-unneeded</code></dt>
<dd><p>Strip all symbols that are not needed for relocation processing.
</p>
</dd>
<dt><code>-K <var>symbolname</var></code></dt>
<dt><code>--keep-symbol=<var>symbolname</var></code></dt>
<dd><p>When stripping symbols, keep symbol <var>symbolname</var> even if it would
d207 2
a208 5
</p>
</dd>
<dt><code>-N <var>symbolname</var></code></dt>
<dt><code>--strip-symbol=<var>symbolname</var></code></dt>
<dd><p>Do not copy symbol <var>symbolname</var> from the source file.  This option
d210 2
a211 4
</p>
</dd>
<dt><code>--strip-unneeded-symbol=<var>symbolname</var></code></dt>
<dd><p>Do not copy symbol <var>symbolname</var> from the source file unless it is needed
d213 2
a214 5
</p>
</dd>
<dt><code>-G <var>symbolname</var></code></dt>
<dt><code>--keep-global-symbol=<var>symbolname</var></code></dt>
<dd><p>Keep only symbol <var>symbolname</var> global.  Make all other symbols local
d217 2
a218 4
</p>
</dd>
<dt><code>--localize-hidden</code></dt>
<dd><p>In an ELF object, mark all symbols that have hidden or internal visibility
d220 3
a222 6
such as <samp>-L</samp>.
</p>
</dd>
<dt><code>-L <var>symbolname</var></code></dt>
<dt><code>--localize-symbol=<var>symbolname</var></code></dt>
<dd><p>Make symbol <var>symbolname</var> local to the file, so that it is not
d224 4
a227 9
</p>
</dd>
<dt><code>-W <var>symbolname</var></code></dt>
<dt><code>--weaken-symbol=<var>symbolname</var></code></dt>
<dd><p>Make symbol <var>symbolname</var> weak. This option may be given more than once.
</p>
</dd>
<dt><code>--globalize-symbol=<var>symbolname</var></code></dt>
<dd><p>Give symbol <var>symbolname</var> global scoping so that it is visible
d230 2
a231 5
</p>
</dd>
<dt><code>-w</code></dt>
<dt><code>--wildcard</code></dt>
<dd><p>Permit regular expressions in <var>symbolname</var>s used in other command
d235 1
a235 1
point (!) then the sense of the switch is reversed for that symbol.
a236 4
</p>
<div class="smallexample">
<pre class="smallexample">  -w -W !foo -W fo*
</pre></div>
d238 3
a240 1
<p>would cause objcopy to weaken all symbols that start with &ldquo;fo&rdquo;
d242 9
a250 17
</p>
</dd>
<dt><code>-x</code></dt>
<dt><code>--discard-all</code></dt>
<dd><p>Do not copy non-global symbols from the source file.
</p>
</dd>
<dt><code>-X</code></dt>
<dt><code>--discard-locals</code></dt>
<dd><p>Do not copy compiler-generated local symbols.
(These usually start with &lsquo;<samp>L</samp>&rsquo; or &lsquo;<samp>.</samp>&rsquo;.)
</p>
</dd>
<dt><code>-b <var>byte</var></code></dt>
<dt><code>--byte=<var>byte</var></code></dt>
<dd><p>If interleaving has been enabled via the <samp>--interleave</samp> option
then start the range of bytes to keep at the <var>byte</var>th byte.
d252 3
a254 6
<var>breadth</var> is the value given by the <samp>--interleave</samp> option.
</p>
</dd>
<dt><code>-i [<var>breadth</var>]</code></dt>
<dt><code>--interleave[=<var>breadth</var>]</code></dt>
<dd><p>Only copy a range out of every <var>breadth</var> bytes.  (Header data is
d256 4
a259 4
the <samp>--byte</samp> option.  Select the width of the range with the
<samp>--interleave-width</samp> option.
</p>
<p>This option is useful for creating files to program <small>ROM</small>.  It is
d261 5
a265 5
<code>objcopy</code> will complain if you do not specify the
<samp>--byte</samp> option as well.
</p>
<p>The default interleave breadth is 4, so with <samp>--byte</samp> set to 0,
<code>objcopy</code> would copy the first byte out of every four bytes
d267 2
a268 4
</p>
</dd>
<dt><code>--interleave-width=<var>width</var></code></dt>
<dd><p>When used with the <samp>--interleave</samp> option, copy <var>width</var>
d270 14
a283 17
by the <samp>--byte</samp> option, and the extent of the range is set with
the <samp>--interleave</samp> option.
</p>
<p>The default value for this option is 1.  The value of <var>width</var> plus
the <var>byte</var> value set by the <samp>--byte</samp> option must not exceed
the interleave breadth set by the <samp>--interleave</samp> option.
</p>
<p>This option can be used to create images for two 16-bit flashes interleaved
in a 32-bit bus by passing <samp>-b 0 -i 4 --interleave-width=2</samp>
and <samp>-b 2 -i 4 --interleave-width=2</samp> to two <code>objcopy</code>
commands.  If the input was &rsquo;12345678&rsquo; then the outputs would be
&rsquo;1256&rsquo; and &rsquo;3478&rsquo; respectively.
</p>
</dd>
<dt><code>-p</code></dt>
<dt><code>--preserve-dates</code></dt>
<dd><p>Set the access and modification dates of the output file to be the same
d285 2
a286 30
</p>
</dd>
<dt><code>-D</code></dt>
<dt><code>--enable-deterministic-archives</code></dt>
<dd><a name="index-deterministic-archives-2"></a>
<a name="index-_002d_002denable_002ddeterministic_002darchives-2"></a>
<p>Operate in <em>deterministic</em> mode.  When copying archive members
and writing the archive index, use zero for UIDs, GIDs, timestamps,
and use consistent file modes for all files.
</p>
<p>If <samp>binutils</samp> was configured with
<samp>--enable-deterministic-archives</samp>, then this mode is on by default.
It can be disabled with the &lsquo;<samp>-U</samp>&rsquo; option, below.
</p>
</dd>
<dt><code>-U</code></dt>
<dt><code>--disable-deterministic-archives</code></dt>
<dd><a name="index-deterministic-archives-3"></a>
<a name="index-_002d_002denable_002ddeterministic_002darchives-3"></a>
<p>Do <em>not</em> operate in <em>deterministic</em> mode.  This is the
inverse of the <samp>-D</samp> option, above: when copying archive members
and writing the archive index, use their actual UID, GID, timestamp,
and file mode values.
</p>
<p>This is the default unless <samp>binutils</samp> was configured with
<samp>--enable-deterministic-archives</samp>.
</p>
</dd>
<dt><code>--debugging</code></dt>
<dd><p>Convert debugging information, if possible.  This is not the default
d289 2
a290 4
</p>
</dd>
<dt><code>--gap-fill <var>val</var></code></dt>
<dd><p>Fill gaps between sections with <var>val</var>.  This operation applies to
d294 2
a295 4
</p>
</dd>
<dt><code>--pad-to <var>address</var></code></dt>
<dd><p>Pad the output file up to the load address <var>address</var>.  This is
d297 3
a299 5
filled in with the value specified by <samp>--gap-fill</samp> (default zero).
</p>
</dd>
<dt><code>--set-start <var>val</var></code></dt>
<dd><p>Set the start address of the new file to <var>val</var>.  Not all object file
d301 2
a302 6
</p>
</dd>
<dt><code>--change-start <var>incr</var></code></dt>
<dt><code>--adjust-start <var>incr</var></code></dt>
<dd><a name="index-changing-start-address"></a>
<p>Change the start address by adding <var>incr</var>.  Not all object file
d304 2
a305 6
</p>
</dd>
<dt><code>--change-addresses <var>incr</var></code></dt>
<dt><code>--adjust-vma <var>incr</var></code></dt>
<dd><a name="index-changing-object-addresses"></a>
<p>Change the VMA and LMA addresses of all sections, as well as the start
d311 12
a322 36
</p>
</dd>
<dt><code>--change-section-address <var>sectionpattern</var>{=,+,-}<var>val</var></code></dt>
<dt><code>--adjust-section-vma <var>sectionpattern</var>{=,+,-}<var>val</var></code></dt>
<dd><a name="index-changing-section-address"></a>
<p>Set or change both the VMA address and the LMA address of any section
matching <var>sectionpattern</var>.  If &lsquo;<samp>=</samp>&rsquo; is used, the section
address is set to <var>val</var>.  Otherwise, <var>val</var> is added to or
subtracted from the section address.  See the comments under
<samp>--change-addresses</samp>, above. If <var>sectionpattern</var> does not
match any sections in the input file, a warning will be issued, unless
<samp>--no-change-warnings</samp> is used.
</p>
</dd>
<dt><code>--change-section-lma <var>sectionpattern</var>{=,+,-}<var>val</var></code></dt>
<dd><a name="index-changing-section-LMA"></a>
<p>Set or change the LMA address of any sections matching
<var>sectionpattern</var>.  The LMA address is the address where the
section will be loaded into memory at program load time.  Normally
this is the same as the VMA address, which is the address of the
section at program run time, but on some systems, especially those
where a program is held in ROM, the two can be different.  If &lsquo;<samp>=</samp>&rsquo;
is used, the section address is set to <var>val</var>.  Otherwise,
<var>val</var> is added to or subtracted from the section address.  See the
comments under <samp>--change-addresses</samp>, above.  If
<var>sectionpattern</var> does not match any sections in the input file, a
warning will be issued, unless <samp>--no-change-warnings</samp> is used.
</p>
</dd>
<dt><code>--change-section-vma <var>sectionpattern</var>{=,+,-}<var>val</var></code></dt>
<dd><a name="index-changing-section-VMA"></a>
<p>Set or change the VMA address of any section matching
<var>sectionpattern</var>.  The VMA address is the address where the
section will be located once the program has started executing.
Normally this is the same as the LMA address, which is the address
where the section will be loaded into memory, but on some systems,
d324 1
a324 1
different.  If &lsquo;<samp>=</samp>&rsquo; is used, the section address is set to
d326 35
a360 34
section address.  See the comments under <samp>--change-addresses</samp>,
above.  If <var>sectionpattern</var> does not match any sections in the
input file, a warning will be issued, unless
<samp>--no-change-warnings</samp> is used.
</p>
</dd>
<dt><code>--change-warnings</code></dt>
<dt><code>--adjust-warnings</code></dt>
<dd><p>If <samp>--change-section-address</samp> or <samp>--change-section-lma</samp> or
<samp>--change-section-vma</samp> is used, and the section pattern does not
match any sections, issue a warning.  This is the default.
</p>
</dd>
<dt><code>--no-change-warnings</code></dt>
<dt><code>--no-adjust-warnings</code></dt>
<dd><p>Do not issue a warning if <samp>--change-section-address</samp> or
<samp>--adjust-section-lma</samp> or <samp>--adjust-section-vma</samp> is used, even
if the section pattern does not match any sections.
</p>
</dd>
<dt><code>--set-section-flags <var>sectionpattern</var>=<var>flags</var></code></dt>
<dd><p>Set the flags for any sections matching <var>sectionpattern</var>.  The
<var>flags</var> argument is a comma separated string of flag names.  The
recognized names are &lsquo;<samp>alloc</samp>&rsquo;, &lsquo;<samp>contents</samp>&rsquo;, &lsquo;<samp>load</samp>&rsquo;,
&lsquo;<samp>noload</samp>&rsquo;, &lsquo;<samp>readonly</samp>&rsquo;, &lsquo;<samp>code</samp>&rsquo;, &lsquo;<samp>data</samp>&rsquo;, &lsquo;<samp>rom</samp>&rsquo;,
&lsquo;<samp>share</samp>&rsquo;, and &lsquo;<samp>debug</samp>&rsquo;.  You can set the &lsquo;<samp>contents</samp>&rsquo; flag
for a section which does not have contents, but it is not meaningful
to clear the &lsquo;<samp>contents</samp>&rsquo; flag of a section which does have
contents&ndash;just remove the section instead.  Not all flags are
meaningful for all object file formats.
</p>
</dd>
<dt><code>--add-section <var>sectionname</var>=<var>filename</var></code></dt>
<dd><p>Add a new section named <var>sectionname</var> while copying the file.  The
d364 3
a366 5
</p>
</dd>
<dt><code>--rename-section <var>oldname</var>=<var>newname</var>[,<var>flags</var>]</code></dt>
<dd><p>Rename a section from <var>oldname</var> to <var>newname</var>, optionally
changing the section&rsquo;s flags to <var>flags</var> in the process.  This has
d370 2
a371 2
</p>
<p>This option is particularly helpful when the input format is binary,
d375 14
a388 18
</p>
<div class="smallexample">
<pre class="smallexample">  objcopy -I binary -O &lt;output_format&gt; -B &lt;architecture&gt; \
   --rename-section .data=.rodata,alloc,load,readonly,data,contents \
   &lt;input_binary_file&gt; &lt;output_object_file&gt;
</pre></div>

</dd>
<dt><code>--long-section-names {enable,disable,keep}</code></dt>
<dd><p>Controls the handling of long section names when processing <code>COFF</code>
and <code>PE-COFF</code> object formats.  The default behaviour, &lsquo;<samp>keep</samp>&rsquo;,
is to preserve long section names if any are present in the input file.
The &lsquo;<samp>enable</samp>&rsquo; and &lsquo;<samp>disable</samp>&rsquo; options forcibly enable or disable
the use of long section names in the output object; when &lsquo;<samp>disable</samp>&rsquo;
is in effect, any long section names in the input object will be truncated.
The &lsquo;<samp>enable</samp>&rsquo; option will only emit long section names if any are
present in the inputs; this is mostly the same as &lsquo;<samp>keep</samp>&rsquo;, but it
is left undefined whether the &lsquo;<samp>enable</samp>&rsquo; option might force the
d390 2
a391 4
</p>
</dd>
<dt><code>--change-leading-char</code></dt>
<dd><p>Some object file formats use special characters at the start of
d393 1
a393 1
often add before every symbol.  This option tells <code>objcopy</code> to
d399 2
a400 4
</p>
</dd>
<dt><code>--remove-leading-char</code></dt>
<dd><p>If the first character of a global symbol is a special symbol leading
d406 1
a406 1
<samp>--change-leading-char</samp> because it always changes the symbol name
d409 2
a410 4
</p>
</dd>
<dt><code>--reverse-bytes=<var>num</var></code></dt>
<dd><p>Reverse the bytes in a section with output contents.  A section length must
d413 2
a414 2
</p>
<p>This option is used typically in generating ROM images for problematic
d419 2
a420 2
</p>
<p>Consider a simple file with a section containing the following eight
d422 2
a423 2
</p>
<p>Using &lsquo;<samp>--reverse-bytes=2</samp>&rsquo; for the above example, the bytes in the
d425 2
a426 2
</p>
<p>Using &lsquo;<samp>--reverse-bytes=4</samp>&rsquo; for the above example, the bytes in the
d428 3
a430 3
</p>
<p>By using &lsquo;<samp>--reverse-bytes=2</samp>&rsquo; for the above example, followed by
&lsquo;<samp>--reverse-bytes=4</samp>&rsquo; on the output file, the bytes in the second
d432 2
a433 4
</p>
</dd>
<dt><code>--srec-len=<var>ival</var></code></dt>
<dd><p>Meaningful only for srec output.  Set the maximum length of the Srecords
d436 2
a437 4
</p>
</dd>
<dt><code>--srec-forceS3</code></dt>
<dd><p>Meaningful only for srec output.  Avoid generation of S1/S2 records,
d439 2
a440 4
</p>
</dd>
<dt><code>--redefine-sym <var>old</var>=<var>new</var></code></dt>
<dd><p>Change the name of a symbol <var>old</var>, to <var>new</var>.  This can be useful
d443 2
a444 4
</p>
</dd>
<dt><code>--redefine-syms=<var>filename</var></code></dt>
<dd><p>Apply <samp>--redefine-sym</samp> to each symbol pair &quot;<var>old</var> <var>new</var>&quot;
d448 2
a449 4
</p>
</dd>
<dt><code>--weaken</code></dt>
<dd><p>Change all global symbols in the file to be weak.  This can be useful
d451 1
a451 1
the <samp>-R</samp> option to the linker.  This option is only effective when
d453 2
a454 4
</p>
</dd>
<dt><code>--keep-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--keep-symbol</samp> option to each symbol listed in the file
d456 1
a456 1
name per line.  Line comments may be introduced by the hash character.
d458 2
a459 4
</p>
</dd>
<dt><code>--strip-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--strip-symbol</samp> option to each symbol listed in the file
d461 1
a461 1
name per line.  Line comments may be introduced by the hash character.
d463 2
a464 4
</p>
</dd>
<dt><code>--strip-unneeded-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--strip-unneeded-symbol</samp> option to each symbol listed in
d468 2
a469 4
</p>
</dd>
<dt><code>--keep-global-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--keep-global-symbol</samp> option to each symbol listed in the
d473 2
a474 4
</p>
</dd>
<dt><code>--localize-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--localize-symbol</samp> option to each symbol listed in the file
d476 1
a476 1
name per line.  Line comments may be introduced by the hash character.
d478 2
a479 4
</p>
</dd>
<dt><code>--globalize-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--globalize-symbol</samp> option to each symbol listed in the file
d481 1
a481 1
name per line.  Line comments may be introduced by the hash character.
d483 2
a484 4
</p>
</dd>
<dt><code>--weaken-symbols=<var>filename</var></code></dt>
<dd><p>Apply <samp>--weaken-symbol</samp> option to each symbol listed in the file
d486 1
a486 1
name per line.  Line comments may be introduced by the hash character.
d488 2
a489 4
</p>
</dd>
<dt><code>--alt-machine-code=<var>index</var></code></dt>
<dd><p>If the output architecture has alternate machine codes, use the
d496 2
a497 4
</p>
</dd>
<dt><code>--writable-text</code></dt>
<dd><p>Mark the output text as writable.  This option isn&rsquo;t meaningful for all
d499 2
a500 4
</p>
</dd>
<dt><code>--readonly-text</code></dt>
<dd><p>Make the output text write protected.  This option isn&rsquo;t meaningful for all
d502 2
a503 4
</p>
</dd>
<dt><code>--pure</code></dt>
<dd><p>Mark the output file as demand paged.  This option isn&rsquo;t meaningful for all
d505 2
a506 4
</p>
</dd>
<dt><code>--impure</code></dt>
<dd><p>Mark the output file as impure.  This option isn&rsquo;t meaningful for all
d508 6
a513 12
</p>
</dd>
<dt><code>--prefix-symbols=<var>string</var></code></dt>
<dd><p>Prefix all symbols in the output file with <var>string</var>.
</p>
</dd>
<dt><code>--prefix-sections=<var>string</var></code></dt>
<dd><p>Prefix all section names in the output file with <var>string</var>.
</p>
</dd>
<dt><code>--prefix-alloc-sections=<var>string</var></code></dt>
<dd><p>Prefix all the names of all allocated sections in the output file with
d515 2
a516 4
</p>
</dd>
<dt><code>--add-gnu-debuglink=<var>path-to-file</var></code></dt>
<dd><p>Creates a .gnu_debuglink section which contains a reference to <var>path-to-file</var>
d518 3
a520 5
</p>
</dd>
<dt><code>--keep-file-symbols</code></dt>
<dd><p>When stripping a file, perhaps with <samp>--strip-debug</samp> or
<samp>--strip-unneeded</samp>, retain any symbols specifying source file names,
d522 3
a524 5
</p>
</dd>
<dt><code>--only-keep-debug</code></dt>
<dd><p>Strip a file, removing contents of any sections that would not be
stripped by <samp>--strip-debug</samp> and leaving the debugging sections
d526 3
a528 3
</p>
<p>The intention is that this option will be used in conjunction with
<samp>--add-gnu-debuglink</samp> to create a two part executable.  One a
d533 9
a541 9
</p>
<ol>
<li> Link the executable as normal.  Assuming that is is called
<code>foo</code> then...
</li><li> Run <code>objcopy --only-keep-debug foo foo.dbg</code> to
create a file containing the debugging info.
</li><li> Run <code>objcopy --strip-debug foo</code> to create a
stripped executable.
</li><li> Run <code>objcopy --add-gnu-debuglink=foo.dbg foo</code>
d543 1
a543 1
</li></ol>
d545 1
a545 1
<p>Note&mdash;the choice of <code>.dbg</code> as an extension for the debug info
a547 7
</p>
<ol>
<li> Link the executable as normal.
</li><li> Copy <code>foo</code> to  <code>foo.full</code>
</li><li> Run <code>objcopy --strip-debug foo</code>
</li><li> Run <code>objcopy --add-gnu-debuglink=foo.full foo</code>
</li></ol>
d549 8
a556 1
<p>i.e., the file pointed to by the <samp>--add-gnu-debuglink</samp> can be the
d558 3
a560 3
<samp>--only-keep-debug</samp> switch.
</p>
<p>Note&mdash;this switch is only intended for use on fully linked files.  It
d566 2
a567 21
</p>
</dd>
<dt><code>--strip-dwo</code></dt>
<dd><p>Remove the contents of all DWARF .dwo sections, leaving the
remaining debugging sections and all symbols intact.
This option is intended for use by the compiler as part of
the <samp>-gsplit-dwarf</samp> option, which splits debug information
between the .o file and a separate .dwo file.  The compiler
generates all debug information in the same file, then uses
the <samp>--extract-dwo</samp> option to copy the .dwo sections to
the .dwo file, then the <samp>--strip-dwo</samp> option to remove
those sections from the original .o file.
</p>
</dd>
<dt><code>--extract-dwo</code></dt>
<dd><p>Extract the contents of all DWARF .dwo sections.  See the
<samp>--strip-dwo</samp> option for more information.
</p>
</dd>
<dt><code>--file-alignment <var>num</var></code></dt>
<dd><p>Specify the file alignment.  Sections in the file will always begin at
d569 1
a569 1
512.
d571 3
a573 6
</p>
</dd>
<dt><code>--heap <var>reserve</var></code></dt>
<dt><code>--heap <var>reserve</var>,<var>commit</var></code></dt>
<dd><p>Specify the number of bytes of memory to reserve (and optionally commit)
to be used as heap for this program.
d575 2
a576 4
</p>
</dd>
<dt><code>--image-base <var>value</var></code></dt>
<dd><p>Use <var>value</var> as the base address of your program or dll.  This is
d581 1
a581 1
for dlls.
d583 3
a585 5
</p>
</dd>
<dt><code>--section-alignment <var>num</var></code></dt>
<dd><p>Sets the section alignment.  Sections in memory will always begin at
addresses which are a multiple of this number.  Defaults to 0x1000.
d587 3
a589 6
</p>
</dd>
<dt><code>--stack <var>reserve</var></code></dt>
<dt><code>--stack <var>reserve</var>,<var>commit</var></code></dt>
<dd><p>Specify the number of bytes of memory to reserve (and optionally commit)
to be used as stack for this program.
d591 2
a592 6
</p>
</dd>
<dt><code>--subsystem <var>which</var></code></dt>
<dt><code>--subsystem <var>which</var>:<var>major</var></code></dt>
<dt><code>--subsystem <var>which</var>:<var>major</var>.<var>minor</var></code></dt>
<dd><p>Specifies the subsystem under which your program will execute.  The
d597 1
a597 1
<var>which</var>.
d599 2
a600 4
</p>
</dd>
<dt><code>--extract-symbol</code></dt>
<dd><p>Keep the file&rsquo;s section flags and symbols but remove all section data.
a601 6
</p>
<ul>
<li> removes the contents of all sections;
</li><li> sets the size of every section to zero; and
</li><li> sets the file&rsquo;s start address to zero.
</li></ul>
d603 8
a610 2
<p>This option is used to build a <samp>.sym</samp> file for a VxWorks kernel.
It can also be a useful way of reducing the size of a <samp>--just-symbols</samp>
a611 29
</p>
</dd>
<dt><code>--compress-debug-sections</code></dt>
<dd><p>Compress DWARF debug sections using zlib.
</p>
</dd>
<dt><code>--decompress-debug-sections</code></dt>
<dd><p>Decompress DWARF debug sections using zlib.
</p>
</dd>
<dt><code>-V</code></dt>
<dt><code>--version</code></dt>
<dd><p>Show the version number of <code>objcopy</code>.
</p>
</dd>
<dt><code>-v</code></dt>
<dt><code>--verbose</code></dt>
<dd><p>Verbose output: list all object files modified.  In the case of
archives, &lsquo;<samp>objcopy -V</samp>&rsquo; lists all members of the archive.
</p>
</dd>
<dt><code>--help</code></dt>
<dd><p>Show a summary of the options to <code>objcopy</code>.
</p>
</dd>
<dt><code>--info</code></dt>
<dd><p>Display a list showing all architectures and object formats available.
</p></dd>
</dl>
d613 5
d619 2
d622 1
a622 5
<hr>
<div class="header">
<p>
Next: <a href="objdump.html#objdump" accesskey="n" rel="next">objdump</a>, Previous: <a href="nm.html#nm" accesskey="p" rel="prev">nm</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Binutils-Index.html#Binutils-Index" title="Index" rel="index">Index</a>]</p>
</div>
d624 2
d627 2
a629 2
</body>
</html>
@

